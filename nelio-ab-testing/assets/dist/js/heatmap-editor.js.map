{"version":3,"file":"js/heatmap-editor.js","mappings":"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","sources":["webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category-list/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category-list/style.scss?f098","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule/style.scss?84b6","webpack://nab/./packages/editor/store/actions/alternatives.ts","webpack://nab/./packages/editor/store/actions/conversion-actions.ts","webpack://nab/./packages/editor/store/actions/editor.ts","webpack://nab/./packages/editor/store/actions/experiment-data.ts","webpack://nab/./packages/editor/store/actions/goals.ts","webpack://nab/./packages/editor/store/actions/index.ts","webpack://nab/./packages/editor/store/actions/scope.ts","webpack://nab/./packages/editor/store/actions/segmentation.ts","webpack://nab/./packages/editor/store/config.ts","webpack://nab/./packages/editor/store/index.ts","webpack://nab/./packages/editor/store/reducer/alternatives.ts","webpack://nab/./packages/editor/store/reducer/conversion-actions.ts","webpack://nab/./packages/editor/store/reducer/editor.ts","webpack://nab/./packages/editor/store/reducer/experiment-data.ts","webpack://nab/./packages/editor/store/reducer/goals.ts","webpack://nab/./packages/editor/store/reducer/index.ts","webpack://nab/./packages/editor/store/reducer/scope.ts","webpack://nab/./packages/editor/store/reducer/segmentation.ts","webpack://nab/./packages/editor/store/selectors/alternatives.ts","webpack://nab/./packages/editor/store/selectors/conversion-actions.ts","webpack://nab/./packages/editor/store/selectors/editor.ts","webpack://nab/./packages/editor/store/selectors/experiment-data.ts","webpack://nab/./packages/editor/store/selectors/goals.ts","webpack://nab/./packages/editor/store/selectors/index.ts","webpack://nab/./packages/editor/store/selectors/scope.ts","webpack://nab/./packages/editor/store/selectors/segmentation.ts","webpack://nab/./packages/editor/store/side-effects/actions/editor.ts","webpack://nab/./packages/heatmap-editor/components/editor.tsx","webpack://nab/./packages/heatmap-editor/components/layout.tsx","webpack://nab/./packages/heatmap-editor/components/participation-section/index.tsx","webpack://nab/./packages/heatmap-editor/components/participation-section/style.scss?eb25","webpack://nab/./packages/heatmap-editor/components/status-manager.ts","webpack://nab/./packages/heatmap-editor/components/tracked-page/index.tsx","webpack://nab/./packages/heatmap-editor/components/tracked-page/post-searcher.tsx","webpack://nab/./packages/heatmap-editor/components/tracked-page/style.scss?0b07","webpack://nab/./packages/heatmap-editor/export.ts","webpack://nab/./packages/heatmap-editor/index.tsx","webpack://nab/./packages/safe-wordpress/api-fetch.ts","webpack://nab/./packages/safe-wordpress/components.tsx","webpack://nab/./packages/safe-wordpress/data.ts","webpack://nab/./packages/safe-wordpress/dom-ready.ts","webpack://nab/./packages/safe-wordpress/element.ts","webpack://nab/./packages/safe-wordpress/i18n.ts","webpack://nab/./packages/safe-wordpress/notices.ts","webpack://nab/external window [\"nab\",\"components\"]","webpack://nab/external window [\"nab\",\"data\"]","webpack://nab/external window [\"nab\",\"date\"]","webpack://nab/external window [\"nab\",\"editor\"]","webpack://nab/external window [\"nab\",\"experimentLibrary\"]","webpack://nab/external window [\"nab\",\"experiments\"]","webpack://nab/external window [\"nab\",\"segmentationRules\"]","webpack://nab/external window [\"nab\",\"utils\"]","webpack://nab/external window [\"wp\",\"apiFetch\"]","webpack://nab/external window [\"wp\",\"components\"]","webpack://nab/external window [\"wp\",\"data\"]","webpack://nab/external window [\"wp\",\"date\"]","webpack://nab/external window [\"wp\",\"domReady\"]","webpack://nab/external window [\"wp\",\"element\"]","webpack://nab/external window [\"wp\",\"i18n\"]","webpack://nab/external window [\"wp\",\"notices\"]","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/external window \"lodash\"","webpack://nab/external window \"ReactJSXRuntime\"","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/chunk loaded","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/webpack/before-startup","webpack://nab/webpack/startup","webpack://nab/webpack/after-startup"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { DropdownMenu } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport type { SegmentationRule, SegmentationRuleTypeName } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRuleTypeCategory } from '../segmentation-rule-type-category';\n\nexport type SegmentationRuleTypeCategoryListProps = {\n\treadonly createSegmentationRule: ( type: SegmentationRuleTypeName ) => void;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\nexport const SegmentationRuleTypeCategoryList = ( {\n\tcreateSegmentationRule,\n\tsegmentationRules,\n}: SegmentationRuleTypeCategoryListProps ): JSX.Element => {\n\tconst segmentationRuleTypeCategories = useSegmentationRuleTypeCategories();\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName=\"nab-segmentation-rule-type-new\"\n\t\t\ticon={ null }\n\t\t\tlabel={ _x( 'Add Rule', 'command', 'nelio-ab-testing' ) }\n\t\t\ttoggleProps={ {\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tchildren: _x( 'Add Rule', 'command', 'nelio-ab-testing' ),\n\t\t\t} }\n\t\t\tpopoverProps={ {\n\t\t\t\tclassName: 'nab-segmentation-rule-type-new__list',\n\t\t\t\tplacement: 'top-center',\n\t\t\t} }\n\t\t\tchildren={ ( { onClose } ) =>\n\t\t\t\tsegmentationRuleTypeCategories.map( ( category ) => (\n\t\t\t\t\t<SegmentationRuleTypeCategory\n\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\tcreateSegmentationRule={ createSegmentationRule }\n\t\t\t\t\t\tsegmentationRules={ segmentationRules }\n\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t) )\n\t\t\t}\n\t\t/>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSegmentationRuleTypeCategories = () =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypeCategories() || [],\n\t\t[]\n\t);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { MenuGroup, MenuItem } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport { EMPTY_ARRAY } from '@nab/utils';\nimport type {\n\tSegmentationRule,\n\tSegmentationRuleCategory,\n\tSegmentationRuleCategoryName,\n\tSegmentationRuleTypeName,\n} from '@nab/types';\n\nexport type SegmentationRuleTypeCategoryProps = {\n\treadonly category: SegmentationRuleCategory;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n\treadonly createSegmentationRule: ( type: SegmentationRuleTypeName ) => void;\n\treadonly onClose: () => void;\n};\n\nexport const SegmentationRuleTypeCategory = ( {\n\tcategory,\n\tsegmentationRules,\n\tcreateSegmentationRule,\n\tonClose,\n}: SegmentationRuleTypeCategoryProps ): JSX.Element | null => {\n\tconst segmentationRuleTypes = useSegmentationRuleTypes( category.name );\n\n\tif ( ! segmentationRuleTypes.length ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuGroup label={ category.title }>\n\t\t\t{ segmentationRuleTypes.map(\n\t\t\t\t( { name, title, icon: Icon, singleton } ) => (\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\ticon={ <Icon /> }\n\t\t\t\t\t\t{ ...{ iconPosition: 'left' } }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tcreateSegmentationRule( name );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\tsingleton &&\n\t\t\t\t\t\t\tsegmentationRules.some(\n\t\t\t\t\t\t\t\t( rule ) => rule.type === name\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ title }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t)\n\t\t\t) }\n\t\t</MenuGroup>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSegmentationRuleTypes = ( catName: SegmentationRuleCategoryName ) => {\n\tconst ruleTypes = useSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypes() || EMPTY_ARRAY,\n\t\t[]\n\t);\n\treturn ruleTypes.filter( ( { category } ) => category === catName );\n};\n","/**\n * WordPress dependencies\n */\nimport { Button, Dashicon, PanelBody } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport { isEmpty } from '@nab/utils';\nimport type {\n\tDict,\n\tSegmentationRuleTypeName,\n\tSegmentationRule as SR,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport type SegmentationRuleProps = {\n\treadonly readOnly?: boolean;\n\treadonly rule: SR;\n\treadonly setAttributes: ( attrs: Dict ) => void;\n\treadonly remove: () => void;\n};\n\nexport const SegmentationRule = ( {\n\treadOnly,\n\trule,\n\tsetAttributes,\n\tremove,\n}: SegmentationRuleProps ): JSX.Element => {\n\tconst experimentId = useExperimentId();\n\tconst ruleType = useSegmentationRuleType( rule.type );\n\n\tconst View = ruleType?.view;\n\tconst Edit = ruleType?.edit;\n\tconst Icon = ruleType?.icon;\n\tconst attributes = rule?.attributes || {};\n\tconst validate = ruleType?.validate ?? ( () => ( {} ) );\n\n\tconst errors = validate( attributes );\n\tconst hasErrors = ! isEmpty( errors );\n\tconst [ opened, onToggle ] = useState( hasErrors );\n\n\tif ( readOnly ) {\n\t\treturn (\n\t\t\t<div className=\"nab-segmentation-rule\">\n\t\t\t\t<div className=\"nab-segmentation-rule__view\">\n\t\t\t\t\t{ !! Icon ? (\n\t\t\t\t\t\t<Icon className=\"nab-segmentation-rule__icon\" />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\tclassName=\"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid\"\n\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"nab-segmentation-rule__actual-view\">\n\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Invalid segmentation rule.',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst showActualIcon = !! Icon && ( ! hasErrors || opened );\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-segmentation-rule\"\n\t\t\topened={ opened }\n\t\t\tonToggle={ onToggle }\n\t\t\ttitle={\n\t\t\t\t(\n\t\t\t\t\t<div className=\"nab-segmentation-rule__view\">\n\t\t\t\t\t\t{ showActualIcon ? (\n\t\t\t\t\t\t\t<Icon className=\"nab-segmentation-rule__icon\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid\"\n\t\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div className=\"nab-segmentation-rule__actual-view\">\n\t\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Invalid segmentation rule.',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t ) as unknown as string\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"nab-segmentation-rule__edit\">\n\t\t\t\t{ !! Edit ? (\n\t\t\t\t\t<Edit\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\terrors={ errors }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'This segmentation rule cant be properly loaded. Please consider removing it.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"link\"\n\t\t\t\tisDestructive\n\t\t\t\tonClick={ remove }\n\t\t\t\tclassName=\"nab-segmentation-rule__delete-button\"\n\t\t\t>\n\t\t\t\t{ _x( 'Delete', 'command', 'neli-ab-testing' ) }\n\t\t\t</Button>\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentId(), [] );\n\nconst useSegmentationRuleType = ( type: SegmentationRuleTypeName ) =>\n\tuseSelect(\n\t\t( select ) => select( NAB_SEGMENTS ).getSegmentationRuleType( type ),\n\t\t[ type ]\n\t);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { Alternative, AlternativeId } from '@nab/types';\n\nexport type AlternativeAction =\n\t| AddAlternatives\n\t| RemoveAlternatives\n\t| ReplaceAlternatives\n\t| UpdateAlternative;\n\nexport function addAlternatives(\n\talternatives: Alternative | ReadonlyArray< Alternative >\n): AddAlternatives {\n\treturn {\n\t\ttype: 'ADD_ALTERNATIVES',\n\t\talternatives: castArray( alternatives ),\n\t};\n}\n\nexport function removeAlternatives(\n\tids: AlternativeId | ReadonlyArray< AlternativeId >\n): RemoveAlternatives {\n\treturn {\n\t\ttype: 'REMOVE_ALTERNATIVES',\n\t\tids: castArray( ids ),\n\t};\n}\n\nexport function replaceAlternatives(\n\toldIds: AlternativeId | ReadonlyArray< AlternativeId >,\n\talternatives: Alternative | ReadonlyArray< Alternative >\n): ReplaceAlternatives {\n\treturn {\n\t\ttype: 'REPLACE_ALTERNATIVES',\n\t\toldIds: castArray( oldIds ),\n\t\talternatives: castArray( alternatives ),\n\t};\n}\n\nexport function setAlternative(\n\tid: AlternativeId,\n\talternative: Alternative\n): UpdateAlternative {\n\treturn {\n\t\ttype: 'SET_ALTERNATIVE',\n\t\tid,\n\t\talternative,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddAlternatives = {\n\treadonly type: 'ADD_ALTERNATIVES';\n\treadonly alternatives: ReadonlyArray< Alternative >;\n};\n\ntype RemoveAlternatives = {\n\treadonly type: 'REMOVE_ALTERNATIVES';\n\treadonly ids: ReadonlyArray< AlternativeId >;\n};\n\ntype ReplaceAlternatives = {\n\treadonly type: 'REPLACE_ALTERNATIVES';\n\treadonly oldIds: ReadonlyArray< AlternativeId >;\n\treadonly alternatives: ReadonlyArray< Alternative >;\n};\n\ntype UpdateAlternative = {\n\treadonly type: 'SET_ALTERNATIVE';\n\treadonly id: AlternativeId;\n\treadonly alternative: Alternative;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tConversionAction,\n\tConversionActionScope,\n\tConversionActionId,\n\tGoalId,\n\tMaybe,\n} from '@nab/types';\n\nexport type CAAction =\n\t| AddConversionActionsIntoGoal\n\t| ReplaceConversionActionsInGoal\n\t| RemoveConversionActionsFromGoal\n\t| UpdateConversionAction;\n\nexport function addConversionActionsIntoGoal(\n\tgoalId: GoalId,\n\tconversionActions: ConversionAction | ReadonlyArray< ConversionAction >\n): AddConversionActionsIntoGoal {\n\treturn {\n\t\ttype: 'ADD_CONVERSION_ACTIONS_INTO_GOAL',\n\t\tgoalId,\n\t\tconversionActions: castArray( conversionActions ),\n\t};\n}\n\nexport function replaceConversionActionsInGoal(\n\tgoalId: GoalId,\n\tconversionActions: ConversionAction | ReadonlyArray< ConversionAction >\n): ReplaceConversionActionsInGoal {\n\treturn {\n\t\ttype: 'REPLACE_CONVERSION_ACTIONS_IN_GOAL',\n\t\tgoalId,\n\t\tconversionActions: castArray( conversionActions ),\n\t};\n}\n\nexport function removeConversionActionsFromGoal(\n\tgoalId: GoalId,\n\tconversionActionIds:\n\t\t| ConversionActionId\n\t\t| ReadonlyArray< ConversionActionId >\n): RemoveConversionActionsFromGoal {\n\treturn {\n\t\ttype: 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL',\n\t\tgoalId,\n\t\tconversionActionIds: castArray( conversionActionIds ),\n\t};\n}\n\nexport function updateConversionAction(\n\tgoalId: GoalId,\n\tconversionActionId: ConversionActionId,\n\tattributes: Maybe< ConversionAction[ 'attributes' ] >,\n\tscope: Maybe< ConversionActionScope >\n): UpdateConversionAction {\n\treturn {\n\t\ttype: 'UPDATE_CONVERSION_ACTION',\n\t\tgoalId,\n\t\tconversionActionId,\n\t\tattributes,\n\t\tscope,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddConversionActionsIntoGoal = {\n\treadonly type: 'ADD_CONVERSION_ACTIONS_INTO_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActions: ReadonlyArray< ConversionAction >;\n};\n\ntype ReplaceConversionActionsInGoal = {\n\treadonly type: 'REPLACE_CONVERSION_ACTIONS_IN_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActions: ReadonlyArray< ConversionAction >;\n};\n\ntype RemoveConversionActionsFromGoal = {\n\treadonly type: 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActionIds: ReadonlyArray< ConversionActionId >;\n};\n\ntype UpdateConversionAction = {\n\treadonly type: 'UPDATE_CONVERSION_ACTION';\n\treadonly goalId: GoalId;\n\treadonly conversionActionId: ConversionActionId;\n\treadonly attributes: Maybe< ConversionAction[ 'attributes' ] >;\n\treadonly scope: Maybe< ConversionActionScope >;\n};\n","/**\n * External dependencies\n */\nimport type {\n\tAlternativeId,\n\tExperiment,\n\tGoalId,\n\tMaybe,\n\tSegmentId,\n} from '@nab/types';\n\nexport type EditorAction =\n\t| SetActiveGoal\n\t| SetActiveSegment\n\t| SetExperimentAsBeingSaved\n\t| SetDraftStatusRationale\n\t| SetExperimentAsRecentlySaved\n\t| SetupEditor\n\t| OpenAlternativePreviewer\n\t| CloseAlternativePreviewer\n\t| ShowAiAlternativeModal;\n\nexport type SetupEditor = {\n\treadonly type: 'SETUP_EDITOR';\n\treadonly experiment: Experiment;\n};\n\nexport function setupEditor( experiment: Experiment ): SetupEditor {\n\treturn {\n\t\ttype: 'SETUP_EDITOR',\n\t\texperiment,\n\t};\n}\n\nexport function setActiveGoal( goalId: GoalId ): SetActiveGoal {\n\treturn {\n\t\ttype: 'SET_ACTIVE_GOAL',\n\t\tgoalId,\n\t};\n}\n\nexport function setActiveSegment( segmentId: SegmentId ): SetActiveSegment {\n\treturn {\n\t\ttype: 'SET_ACTIVE_SEGMENT',\n\t\tsegmentId,\n\t};\n}\n\nexport function setExperimentAsBeingSaved(\n\tstatus: boolean\n): SetExperimentAsBeingSaved {\n\treturn {\n\t\ttype: 'SET_EXPERIMENT_AS_BEING_SAVED',\n\t\tstatus,\n\t};\n}\n\nexport function setDraftStatusRationale(\n\trationale: string\n): SetDraftStatusRationale {\n\treturn {\n\t\ttype: 'SET_DRAFT_STATUS_RATIONALE',\n\t\trationale,\n\t};\n}\n\nexport function setExperimentAsRecentlySaved(): SetExperimentAsRecentlySaved {\n\treturn {\n\t\ttype: 'SET_EXPERIMENT_AS_RECENTLY_SAVED',\n\t};\n}\n\nexport function openAlternativePreviewer(\n\turl: string\n): OpenAlternativePreviewer {\n\treturn {\n\t\ttype: 'OPEN_ALTERNATIVE_PREVIEWER',\n\t\turl,\n\t};\n}\n\nexport function closeAlternativePreviewer(): CloseAlternativePreviewer {\n\treturn {\n\t\ttype: 'CLOSE_ALTERNATIVE_PREVIEWER',\n\t};\n}\n\nexport function showAiAlternativeModal(\n\talternativeId: Maybe< AlternativeId >\n): ShowAiAlternativeModal {\n\treturn {\n\t\ttype: 'SHOW_AI_ALTERNATIVE_MODAL',\n\t\talternativeId,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype SetActiveGoal = {\n\treadonly type: 'SET_ACTIVE_GOAL';\n\treadonly goalId: GoalId;\n};\n\ntype SetActiveSegment = {\n\treadonly type: 'SET_ACTIVE_SEGMENT';\n\treadonly segmentId: SegmentId;\n};\n\ntype SetExperimentAsBeingSaved = {\n\treadonly type: 'SET_EXPERIMENT_AS_BEING_SAVED';\n\treadonly status: boolean;\n};\n\ntype SetDraftStatusRationale = {\n\treadonly type: 'SET_DRAFT_STATUS_RATIONALE';\n\treadonly rationale: string;\n};\n\ntype SetExperimentAsRecentlySaved = {\n\treadonly type: 'SET_EXPERIMENT_AS_RECENTLY_SAVED';\n};\n\ntype OpenAlternativePreviewer = {\n\treadonly type: 'OPEN_ALTERNATIVE_PREVIEWER';\n\treadonly url: string;\n};\n\ntype CloseAlternativePreviewer = {\n\treadonly type: 'CLOSE_ALTERNATIVE_PREVIEWER';\n};\n\ntype ShowAiAlternativeModal = {\n\treadonly type: 'SHOW_AI_ALTERNATIVE_MODAL';\n\treadonly alternativeId: Maybe< AlternativeId >;\n};\n","/**\n * Internal dependencies\n */\nimport type { ExperimentData, HeatmapAttributes } from '../types';\n\nexport type ExperimentDataAction =\n\t| SetExperimentData\n\t| SetTestedElementAsInvalid;\n\nexport function setExperimentData(\n\tattributes: Partial< ExperimentData >\n): SetExperimentData {\n\treturn {\n\t\ttype: 'UPDATE_EXPERIMENT_DATA',\n\t\tattributes,\n\t};\n}\n\nexport function setHeatmapData(\n\tattributes: Partial< HeatmapAttributes >\n): SetExperimentData {\n\treturn {\n\t\ttype: 'UPDATE_EXPERIMENT_DATA',\n\t\tattributes,\n\t};\n}\n\nexport function setTestedElementAsInvalid(\n\tinvalid: boolean\n): SetTestedElementAsInvalid {\n\treturn {\n\t\ttype: 'SET_TESTED_ELEMENT_AS_INVALID',\n\t\tinvalid,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype SetExperimentData = {\n\treadonly type: 'UPDATE_EXPERIMENT_DATA';\n\treadonly attributes: Partial< ExperimentData >;\n};\n\ntype SetTestedElementAsInvalid = {\n\treadonly type: 'SET_TESTED_ELEMENT_AS_INVALID';\n\treadonly invalid: boolean;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { Goal, GoalId } from '@nab/types';\n\nexport type GoalAction = AddGoals | RemoveGoals | UpdateGoal;\n\nexport function addGoals( goals: Goal | ReadonlyArray< Goal > ): AddGoals {\n\treturn {\n\t\ttype: 'ADD_GOALS',\n\t\tgoals: castArray( goals ),\n\t};\n}\n\nexport function removeGoals(\n\tids: GoalId | ReadonlyArray< GoalId >\n): RemoveGoals {\n\treturn {\n\t\ttype: 'REMOVE_GOALS',\n\t\tids: castArray( ids ),\n\t};\n}\n\nexport function updateGoal(\n\tgoalId: GoalId,\n\tattributes: Partial< Goal[ 'attributes' ] >\n): UpdateGoal {\n\treturn {\n\t\ttype: 'UPDATE_GOAL',\n\t\tgoalId,\n\t\tattributes,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddGoals = {\n\treadonly type: 'ADD_GOALS';\n\treadonly goals: ReadonlyArray< Goal >;\n};\n\ntype RemoveGoals = {\n\treadonly type: 'REMOVE_GOALS';\n\treadonly ids: ReadonlyArray< GoalId >;\n};\n\ntype UpdateGoal = {\n\treadonly type: 'UPDATE_GOAL';\n\treadonly goalId: GoalId;\n\treadonly attributes: Partial< Goal[ 'attributes' ] >;\n};\n","export * from './alternatives';\nexport * from './conversion-actions';\nexport * from './editor';\nexport * from './experiment-data';\nexport * from './goals';\nexport * from './scope';\nexport * from './segmentation';\n","/**\n * External dependencies\n */\nimport type { ScopeRule } from '@nab/types';\n\nexport type ScopeAction = SetScopeRules;\n\nexport function setScopeRules(\n\trules: ReadonlyArray< ScopeRule >\n): SetScopeRules {\n\treturn {\n\t\ttype: 'SET_SCOPE_RULES',\n\t\trules,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype SetScopeRules = {\n\treadonly type: 'SET_SCOPE_RULES';\n\treadonly rules: ReadonlyArray< ScopeRule >;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tSegment,\n\tSegmentationRule,\n\tSegmentationRuleId,\n\tSegmentId,\n} from '@nab/types';\n\nexport type SegmentationAction =\n\t| AddSegments\n\t| RemoveSegments\n\t| UpdateSegment\n\t| AddSegmentationRulesIntoSegment\n\t| ReplaceSegmentationRulesInSegment\n\t| RemoveSegmentationRulesFromSegment\n\t| UpdateSegmentationRule\n\t| SetSegmentEvaluation;\n\nexport function addSegments(\n\tsegments: Segment | ReadonlyArray< Segment >\n): AddSegments {\n\treturn {\n\t\ttype: 'ADD_SEGMENTS',\n\t\tsegments: castArray( segments ),\n\t};\n}\n\nexport function removeSegments(\n\tids: SegmentId | ReadonlyArray< SegmentId >\n): RemoveSegments {\n\treturn {\n\t\ttype: 'REMOVE_SEGMENTS',\n\t\tids: castArray( ids ),\n\t};\n}\n\nexport function updateSegment(\n\tsegmentId: SegmentId,\n\tattributes: Partial< Segment[ 'attributes' ] >\n): UpdateSegment {\n\treturn {\n\t\ttype: 'UPDATE_SEGMENT',\n\t\tsegmentId,\n\t\tattributes,\n\t};\n}\n\nexport function addSegmentationRulesIntoSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRules: SegmentationRule | ReadonlyArray< SegmentationRule >\n): AddSegmentationRulesIntoSegment {\n\treturn {\n\t\ttype: 'ADD_SEGMENTATION_RULES_INTO_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRules: castArray( segmentationRules ),\n\t};\n}\n\nexport function replaceSegmentationRulesInSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRules: SegmentationRule | ReadonlyArray< SegmentationRule >\n): ReplaceSegmentationRulesInSegment {\n\treturn {\n\t\ttype: 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRules: castArray( segmentationRules ),\n\t};\n}\n\nexport function removeSegmentationRulesFromSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRuleIds:\n\t\t| SegmentationRuleId\n\t\t| ReadonlyArray< SegmentationRuleId >\n): RemoveSegmentationRulesFromSegment {\n\treturn {\n\t\ttype: 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRuleIds: castArray( segmentationRuleIds ),\n\t};\n}\n\nexport function updateSegmentationRule(\n\tsegmentId: SegmentId,\n\tsegmentationRuleId: SegmentationRuleId,\n\tattributes: Partial< SegmentationRule[ 'attributes' ] >\n): UpdateSegmentationRule {\n\treturn {\n\t\ttype: 'UPDATE_SEGMENTATION_RULE',\n\t\tsegmentId,\n\t\tsegmentationRuleId,\n\t\tattributes,\n\t};\n}\n\nexport function setSegmentEvaluation(\n\tstrategy: 'site' | 'tested-page'\n): SetSegmentEvaluation {\n\treturn {\n\t\ttype: 'SET_SEGMENT_EVALUATION',\n\t\tstrategy,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddSegments = {\n\treadonly type: 'ADD_SEGMENTS';\n\treadonly segments: ReadonlyArray< Segment >;\n};\n\ntype RemoveSegments = {\n\treadonly type: 'REMOVE_SEGMENTS';\n\treadonly ids: ReadonlyArray< SegmentId >;\n};\n\ntype UpdateSegment = {\n\treadonly type: 'UPDATE_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly attributes: Partial< Segment[ 'attributes' ] >;\n};\n\ntype AddSegmentationRulesIntoSegment = {\n\treadonly type: 'ADD_SEGMENTATION_RULES_INTO_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\ntype ReplaceSegmentationRulesInSegment = {\n\treadonly type: 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\ntype RemoveSegmentationRulesFromSegment = {\n\treadonly type: 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRuleIds: ReadonlyArray< SegmentationRuleId >;\n};\n\ntype UpdateSegmentationRule = {\n\treadonly type: 'UPDATE_SEGMENTATION_RULE';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRuleId: SegmentationRuleId;\n\treadonly attributes: Partial< SegmentationRule[ 'attributes' ] >;\n};\n\ntype SetSegmentEvaluation = {\n\treadonly type: 'SET_SEGMENT_EVALUATION';\n\treadonly strategy: 'site' | 'tested-page';\n};\n","/**\n * Internal dependencies\n */\nimport type { ExperimentId, GoalId, SegmentId } from '@nab/types';\nimport type { State } from './types';\n\nexport const INIT_STATE: State = {\n\teditor: {\n\t\tactiveGoalId: '' as GoalId,\n\t\tactiveSegmentId: '' as SegmentId,\n\t\taiAlternativeModal: undefined,\n\t\talternativePreviewerUrl: '',\n\t\tdraftStatusRationale: '',\n\t\thasExperimentBeenRecentlySaved: false,\n\t\tisExperimentBeingSaved: false,\n\t},\n\n\texperiment: {\n\t\talternatives: {\n\t\t\tbyId: {\n\t\t\t\tcontrol: {\n\t\t\t\t\tid: 'control',\n\t\t\t\t\tattributes: {},\n\t\t\t\t\tlinks: { edit: '', heatmap: '', preview: '' },\n\t\t\t\t},\n\t\t\t},\n\t\t\tallIds: [],\n\t\t},\n\n\t\tconversionActions: {},\n\n\t\tdata: {\n\t\t\tid: 0 as ExperimentId,\n\t\t\ttype: '',\n\t\t\tstatus: 'draft',\n\t\t\tname: '',\n\t\t\tdescription: '',\n\t\t\tstartDate: '',\n\t\t\tendDate: '',\n\t\t\tendMode: 'manual',\n\t\t\tendValue: 0,\n\t\t\tautoAlternativeApplication: false,\n\t\t\tisTestedElementInvalid: false,\n\t\t\tlinks: {\n\t\t\t\tedit: '',\n\t\t\t\tpreview: '',\n\t\t\t},\n\t\t},\n\n\t\tgoals: {},\n\n\t\tscope: {},\n\n\t\tsegmentation: {\n\t\t\tevaluation: 'tested-page',\n\t\t\trules: {},\n\t\t\tsegments: {},\n\t\t},\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, register, controls } from '@safe-wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as realActions from './actions';\nimport * as sideEffects from './side-effects/actions';\n\nconst actions = { ...realActions, ...sideEffects };\n\nexport const store = createReduxStore( 'nab/editor', {\n\treducer,\n\tcontrols,\n\tactions,\n\tselectors,\n} );\nregister( store );\n","/**\n * External dependencies\n */\nimport { difference, isEqual, keyBy, map, omit, zip } from 'lodash';\nimport { isDefined } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'alternatives' ];\n\nimport type { AlternativeAction } from '../actions/alternatives';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = AlternativeAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.alternatives;\n\nexport function alternatives( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_ALTERNATIVES': {\n\t\t\tconst newAlternatives = action.alternatives.filter(\n\t\t\t\t( alt ) => ! isEqual( state.byId[ alt.id ], alt )\n\t\t\t);\n\t\t\tif ( ! newAlternatives.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tbyId: {\n\t\t\t\t\t...state.byId,\n\t\t\t\t\t...keyBy( newAlternatives, 'id' ),\n\t\t\t\t},\n\t\t\t\tallIds: [ ...state.allIds, ...map( newAlternatives, 'id' ) ],\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_ALTERNATIVES': {\n\t\t\tconst newAlternatives = {\n\t\t\t\tcontrol: state.byId.control,\n\t\t\t\t...omit( state.byId, action.ids ),\n\t\t\t};\n\t\t\tconst newAlternativeIds = difference(\n\t\t\t\tstate.allIds,\n\t\t\t\taction.ids.filter( ( id ) => id !== 'control' )\n\t\t\t);\n\t\t\tif (\n\t\t\t\tisEqual( state.byId, newAlternatives ) &&\n\t\t\t\tisEqual( state.allIds, newAlternativeIds )\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tbyId: newAlternatives,\n\t\t\t\tallIds: newAlternativeIds,\n\t\t\t};\n\t\t}\n\n\t\tcase 'REPLACE_ALTERNATIVES': {\n\t\t\tconst pairs = zip(\n\t\t\t\taction.oldIds,\n\t\t\t\tmap( action.alternatives, 'id' )\n\t\t\t);\n\t\t\tconst newAlternativesById = {\n\t\t\t\tcontrol: state.byId.control,\n\t\t\t\t...omit( state.byId, action.oldIds ),\n\t\t\t\t...keyBy( action.alternatives, 'id' ),\n\t\t\t};\n\t\t\tconst newAlternativeIds = [\n\t\t\t\t...state.allIds\n\t\t\t\t\t.map( ( id ) => {\n\t\t\t\t\t\tconst r = pairs.find( ( p ) => p[ 0 ] === id );\n\t\t\t\t\t\treturn r ? r[ 1 ] : id;\n\t\t\t\t\t} )\n\t\t\t\t\t.filter( isDefined ),\n\t\t\t\t...pairs\n\t\t\t\t\t.filter( ( p ) => ! p[ 0 ] )\n\t\t\t\t\t.map( ( p ) => p[ 1 ] )\n\t\t\t\t\t.filter( isDefined ),\n\t\t\t];\n\n\t\t\tconst oldAlternatives = state.byId;\n\t\t\tconst newAlternatives = newAlternativesById;\n\n\t\t\tconst oldAlternativesWithoutId = Object.values(\n\t\t\t\toldAlternatives\n\t\t\t).map( ( r ) => omit( r, 'id' ) );\n\t\t\tconst newAlternativesWithoutId = Object.values(\n\t\t\t\tnewAlternatives\n\t\t\t).map( ( r ) => omit( r, 'id' ) );\n\t\t\tif (\n\t\t\t\tisEqual( oldAlternativesWithoutId, newAlternativesWithoutId )\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbyId: newAlternativesById,\n\t\t\t\tallIds: newAlternativeIds,\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_ALTERNATIVE':\n\t\t\tconst oldAlternative = state.byId[ action.id ];\n\t\t\tif ( ! oldAlternative ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newAlternative = action.alternative;\n\t\t\tif ( ! newAlternative ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tif ( isEqual( oldAlternative, newAlternative ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbyId: {\n\t\t\t\t\t...state.byId,\n\t\t\t\t\t[ action.id ]: newAlternative,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn INIT_STATE;\n\t\t\t}\n\n\t\t\tconst newState = {\n\t\t\t\tbyId: {\n\t\t\t\t\tcontrol: state.byId.control,\n\t\t\t\t\t...keyBy( action.experiment.alternatives, 'id' ),\n\t\t\t\t},\n\t\t\t\tallIds: map( action.experiment.alternatives, 'id' ),\n\t\t\t};\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy, omit } from 'lodash';\nimport { EMPTY_OBJECT } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'conversionActions' ];\n\nimport type { CAAction } from '../actions/conversion-actions';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = CAAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.conversionActions;\n\nexport function conversionActions(\n\tstate = INIT_STATE,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_CONVERSION_ACTIONS_INTO_GOAL': {\n\t\t\tconst newConversionActions = action.conversionActions.filter(\n\t\t\t\t( conversionAction ) =>\n\t\t\t\t\t! isEqual(\n\t\t\t\t\t\tstate[ action.goalId ]?.[ conversionAction.id ],\n\t\t\t\t\t\tconversionAction\n\t\t\t\t\t)\n\t\t\t);\n\t\t\tif ( ! newConversionActions.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...state[ action.goalId ],\n\t\t\t\t\t...keyBy( newConversionActions, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REPLACE_CONVERSION_ACTIONS_IN_GOAL': {\n\t\t\tconst oldConvActions = state[ action.goalId ] ?? {};\n\t\t\tconst newConvActions = keyBy( action.conversionActions, 'id' );\n\n\t\t\tconst oldConvActionsWithoutId = Object.values( oldConvActions ).map(\n\t\t\t\t( r ) => omit( r, 'id' )\n\t\t\t);\n\t\t\tconst newConvActionsWithoutId = Object.values( newConvActions ).map(\n\t\t\t\t( r ) => omit( r, 'id' )\n\t\t\t);\n\t\t\tif ( isEqual( oldConvActionsWithoutId, newConvActionsWithoutId ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: newConvActions,\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_CONVERSION_ACTION': {\n\t\t\tconst goal = state[ action.goalId ];\n\t\t\tif ( ! goal ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst oldConversionAction = goal[ action.conversionActionId ];\n\t\t\tif ( ! oldConversionAction ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newConversionAction = {\n\t\t\t\t...oldConversionAction,\n\t\t\t\tattributes: action.attributes\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...oldConversionAction.attributes,\n\t\t\t\t\t\t\t...action.attributes,\n\t\t\t\t\t  }\n\t\t\t\t\t: oldConversionAction.attributes,\n\t\t\t\tscope: action.scope ? action.scope : oldConversionAction.scope,\n\t\t\t};\n\t\t\tif ( isEqual( oldConversionAction, newConversionAction ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...goal,\n\t\t\t\t\t[ action.conversionActionId ]: newConversionAction,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL': {\n\t\t\tconst newConversionActions = omit(\n\t\t\t\tstate[ action.goalId ],\n\t\t\t\taction.conversionActionIds\n\t\t\t);\n\t\t\tif ( isEqual( state[ action.goalId ], newConversionActions ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: newConversionActions,\n\t\t\t};\n\t\t}\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\n\t\t\tconst newState = action.experiment.goals.reduce( ( memo, goal ) => {\n\t\t\t\tmemo[ goal.id ] = keyBy( goal.conversionActions, 'id' );\n\t\t\t\treturn memo;\n\t\t\t}, {} as State );\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'editor' ];\n\nimport type { EditorAction as Action } from '../actions/editor';\n\nconst INIT_STATE = IS.editor;\n\nexport function editor( state = INIT_STATE, action: AnyAction ): State {\n\tstate = { ...state, hasExperimentBeenRecentlySaved: false };\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_ACTIVE_GOAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveGoalId: action.goalId,\n\t\t\t};\n\n\t\tcase 'SET_ACTIVE_SEGMENT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveSegmentId: action.segmentId,\n\t\t\t};\n\n\t\tcase 'SET_EXPERIMENT_AS_BEING_SAVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisExperimentBeingSaved: !! action.status,\n\t\t\t};\n\n\t\tcase 'SET_EXPERIMENT_AS_RECENTLY_SAVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\thasExperimentBeenRecentlySaved: true,\n\t\t\t};\n\n\t\tcase 'SET_DRAFT_STATUS_RATIONALE':\n\t\t\tif ( isEqual( state.draftStatusRationale, action.rationale ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdraftStatusRationale: action.rationale,\n\t\t\t};\n\n\t\tcase 'OPEN_ALTERNATIVE_PREVIEWER':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\talternativePreviewerUrl: action.url,\n\t\t\t};\n\n\t\tcase 'CLOSE_ALTERNATIVE_PREVIEWER':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\talternativePreviewerUrl: '',\n\t\t\t};\n\n\t\tcase 'SHOW_AI_ALTERNATIVE_MODAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taiAlternativeModal: action.alternativeId,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\treturn state;\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'data' ];\n\nimport type { ExperimentDataAction } from '../actions/experiment-data';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = ExperimentDataAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.data;\n\nexport function data( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_EXPERIMENT_DATA': {\n\t\t\tconst newAttributes = {\n\t\t\t\t...state,\n\t\t\t\t...action.attributes,\n\t\t\t};\n\t\t\tif ( isEqual( state, newAttributes ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn newAttributes;\n\t\t}\n\n\t\tcase 'SET_TESTED_ELEMENT_AS_INVALID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisTestedElementInvalid: !! action.invalid,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tconst newState = {\n\t\t\t\t...state,\n\t\t\t\t...omit( action.experiment, [\n\t\t\t\t\t'alternatives',\n\t\t\t\t\t'goals',\n\t\t\t\t\t'scope',\n\t\t\t\t\t'segments',\n\t\t\t\t] ),\n\t\t\t};\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy, omit } from 'lodash';\nimport { EMPTY_OBJECT } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'goals' ];\n\nimport type { GoalAction } from '../actions/goals';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = GoalAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.goals;\n\nexport function goals( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_GOALS': {\n\t\t\tconst newGoals = action.goals.filter(\n\t\t\t\t( goal ) => ! isEqual( state[ goal.id ], goal )\n\t\t\t);\n\t\t\tif ( ! newGoals.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...keyBy( newGoals, 'id' ),\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_GOAL': {\n\t\t\tconst goal = state[ action.goalId ];\n\t\t\tif ( ! goal ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newGoal = {\n\t\t\t\t...goal,\n\t\t\t\tattributes: {\n\t\t\t\t\t...goal.attributes,\n\t\t\t\t\t...action.attributes,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif ( isEqual( goal, newGoal ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: newGoal,\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_GOALS':\n\t\t\treturn omit( state, action.ids );\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\n\t\t\tconst newState = keyBy(\n\t\t\t\taction.experiment.goals.map( ( goal ) =>\n\t\t\t\t\tomit( goal, 'conversionActions' )\n\t\t\t\t),\n\t\t\t\t'id'\n\t\t\t);\n\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@safe-wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { editor } from './editor';\nimport { alternatives } from './alternatives';\nimport { conversionActions } from './conversion-actions';\nimport { data } from './experiment-data';\nimport { goals } from './goals';\nimport { scope } from './scope';\nimport { segmentation } from './segmentation';\n\nexport default combineReducers( {\n\teditor,\n\texperiment: combineReducers( {\n\t\talternatives,\n\t\tconversionActions,\n\t\tdata,\n\t\tgoals,\n\t\tscope,\n\t\tsegmentation,\n\t} ),\n} );\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy } from 'lodash';\nimport { EMPTY_OBJECT } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'scope' ];\n\nimport type { ScopeAction } from '../actions/scope';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = ScopeAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.scope;\n\nexport function scope( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_SCOPE_RULES': {\n\t\t\tconst newRules = action.rules.map( ( rule ) =>\n\t\t\t\tstate[ rule.id ] && isEqual( state[ rule.id ], rule )\n\t\t\t\t\t? state[ rule.id ]\n\t\t\t\t\t: rule\n\t\t\t);\n\t\t\treturn keyBy( newRules, 'id' );\n\t\t}\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\n\t\t\tconst newState = keyBy( action.experiment.scope, 'id' );\n\t\t\treturn isEqual( newState, state ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'segmentation' ];\n\nimport type { SegmentationAction } from '../actions/segmentation';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = SegmentationAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.segmentation;\n\nexport function segmentation( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_SEGMENTS': {\n\t\t\tconst newSegments = action.segments.filter(\n\t\t\t\t( segment ) =>\n\t\t\t\t\t! isEqual( state.segments[ segment.id ], segment )\n\t\t\t);\n\t\t\tif ( ! newSegments.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: {\n\t\t\t\t\t...state.segments,\n\t\t\t\t\t...keyBy( newSegments, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_SEGMENT': {\n\t\t\tconst oldSegment = state.segments[ action.segmentId ];\n\t\t\tif ( ! oldSegment ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newSegment = {\n\t\t\t\t...oldSegment,\n\t\t\t\tattributes: {\n\t\t\t\t\t...oldSegment.attributes,\n\t\t\t\t\t...action.attributes,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif ( isEqual( newSegment, oldSegment ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: {\n\t\t\t\t\t...state.segments,\n\t\t\t\t\t[ action.segmentId ]: newSegment,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_SEGMENTS': {\n\t\t\tconst newSegments = omit( state.segments, action.ids );\n\t\t\tif ( isEqual( state.segments, newSegments ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: newSegments,\n\t\t\t};\n\t\t}\n\n\t\tcase 'ADD_SEGMENTATION_RULES_INTO_SEGMENT': {\n\t\t\tconst oldRules = state.rules[ action.segmentId ];\n\t\t\tconst newRules = action.segmentationRules.filter(\n\t\t\t\t( rule ) => ! isEqual( oldRules?.[ rule.id ], rule )\n\t\t\t);\n\t\t\tif ( ! newRules.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...oldRules,\n\t\t\t\t\t\t...keyBy( newRules, 'id' ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT': {\n\t\t\tconst oldRules = state.rules[ action.segmentId ] ?? {};\n\t\t\tconst newRules = keyBy( action.segmentationRules, 'id' );\n\n\t\t\tconst oldRulesWithoutId = Object.values( oldRules ).map( ( r ) =>\n\t\t\t\tomit( r, 'id' )\n\t\t\t);\n\t\t\tconst newRulesWithoutId = Object.values( newRules ).map( ( r ) =>\n\t\t\t\tomit( r, 'id' )\n\t\t\t);\n\t\t\tif ( isEqual( oldRulesWithoutId, newRulesWithoutId ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: newRules,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_SEGMENTATION_RULE': {\n\t\t\tconst segment = state.rules[ action.segmentId ];\n\t\t\tif ( ! segment ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst oldSegmentationRule = segment[ action.segmentationRuleId ];\n\t\t\tif ( ! oldSegmentationRule ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newSegmentationRule = {\n\t\t\t\t...oldSegmentationRule,\n\t\t\t\tattributes: {\n\t\t\t\t\t...oldSegmentationRule.attributes,\n\t\t\t\t\t...action.attributes,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif ( isEqual( oldSegmentationRule, newSegmentationRule ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...segment,\n\t\t\t\t\t\t[ action.segmentationRuleId ]: newSegmentationRule,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT': {\n\t\t\tconst rules = state.rules[ action.segmentId ];\n\t\t\tif ( ! rules ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newRules = omit( rules, action.segmentationRuleIds );\n\t\t\tif ( isEqual( rules, newRules ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: newRules,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_SEGMENT_EVALUATION':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tevaluation: action.strategy,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newState = {\n\t\t\t\tevaluation: action.experiment.segmentEvaluation,\n\t\t\t\trules: action.experiment.segments.reduce(\n\t\t\t\t\t( memo, segment ) => {\n\t\t\t\t\t\tmemo[ segment.id ] = keyBy(\n\t\t\t\t\t\t\tsegment.segmentationRules,\n\t\t\t\t\t\t\t'id'\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn memo;\n\t\t\t\t\t},\n\t\t\t\t\t{} as State[ 'rules' ]\n\t\t\t\t),\n\t\t\t\tsegments: keyBy(\n\t\t\t\t\taction.experiment.segments.map( ( segment ) =>\n\t\t\t\t\t\tomit( segment, 'segmentationRules' )\n\t\t\t\t\t),\n\t\t\t\t\t'id'\n\t\t\t\t),\n\t\t\t};\n\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies.\n */\nimport { values } from 'lodash';\nimport type { Alternative, AlternativeId, Dict, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\nimport { isDefined } from '@nab/utils';\n\ntype GetAlternative = typeof _getAlternative & {\n\tCurriedSignature: typeof __getAlternative;\n};\nexport const getAlternative = _getAlternative as GetAlternative;\nfunction _getAlternative< A extends Dict = Dict >(\n\tstate: State,\n\tid: AlternativeId\n): Maybe< Alternative< A > > {\n\treturn state.experiment.alternatives.byId[ id ] as Alternative< A >;\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nfunction __getAlternative< A extends Dict = Dict >(\n\tid: 'control'\n): Alternative< A >;\nfunction __getAlternative< A extends Dict = Dict >(\n\tid: AlternativeId\n): Maybe< Alternative< A > >;\nfunction __getAlternative< A extends Dict = Dict >(\n\t_: AlternativeId\n): Maybe< Alternative< A > > {\n\treturn undefined;\n}\n/* eslint-enable @typescript-eslint/no-unused-vars */\n\nexport const getAlternatives = createSelector(\n\t( state: State ): ReadonlyArray< Alternative > =>\n\t\tvalues( state.experiment.alternatives.byId ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.alternatives.byId ]\n);\n\nexport const getAlternativeIds = (\n\tstate: State\n): ReadonlyArray< AlternativeId > => state.experiment.alternatives.allIds;\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { createIndexedSelector } from '@nab/utils';\nimport type { ConversionAction, GoalId } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getConversionActions = createIndexedSelector(\n\t( state: State, goalId: GoalId ): ReadonlyArray< ConversionAction > =>\n\t\tvalues( state.experiment.conversionActions[ goalId ] ),\n\t( state: State, goalId: GoalId ) => ( {\n\t\tkey: goalId,\n\t\tdependants: [ state.experiment.conversionActions[ goalId ] ],\n\t} )\n);\n","/**\n * External dependencies\n */\nimport { filter, map, values } from 'lodash';\nimport type { AlternativeId, Goal, Maybe, Segment } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport function isExperimentBeingSaved( state: State ): boolean {\n\treturn !! state.editor.isExperimentBeingSaved;\n}\n\nexport function hasExperimentBeenRecentlySaved( state: State ): boolean {\n\treturn !! state.editor.hasExperimentBeenRecentlySaved;\n}\n\nexport function getActiveGoal(\n\tstate: State\n): Maybe< Omit< Goal, 'conversionActions' > > {\n\treturn (\n\t\tstate.experiment.goals[ state.editor.activeGoalId ] ||\n\t\tvalues( state.experiment.goals )[ 0 ]\n\t);\n}\n\nexport function getActiveGoalIndex( state: State ): number {\n\treturn (\n\t\tmap( state.experiment.goals, 'id' ).indexOf(\n\t\t\tstate.editor.activeGoalId\n\t\t) || 0\n\t);\n}\n\nexport function getActiveSegment(\n\tstate: State\n): Maybe< Omit< Segment, 'segmentationRules' > > {\n\treturn filter( state.experiment.segmentation.segments, {\n\t\tid: state.editor.activeSegmentId,\n\t} )[ 0 ];\n}\n\nexport function getActiveSegmentIndex( state: State ): number {\n\treturn (\n\t\tmap( state.experiment.segmentation.segments, 'id' ).indexOf(\n\t\t\tstate.editor.activeSegmentId\n\t\t) || 0\n\t);\n}\n\nexport function getDraftStatusRationale( state: State ): Maybe< string > {\n\tif ( ! state.experiment || ! state.experiment.data ) {\n\t\treturn;\n\t}\n\n\tconst isDraft = [ 'draft', 'paused_draft' ].includes(\n\t\tstate.experiment.data.status\n\t);\n\tif ( ! isDraft ) {\n\t\treturn;\n\t}\n\n\treturn state.editor.draftStatusRationale;\n}\n\nexport function getAlternativePreviewerUrl( state: State ): string {\n\treturn state.editor.alternativePreviewerUrl;\n}\n\nexport function getAiAlternativeModal( state: State ): Maybe< AlternativeId > {\n\treturn state.editor.aiAlternativeModal;\n}\n","/**\n * External dependencies.\n */\nimport type { ExperimentId, ExperimentTypeName, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { ExperimentAttributes, HeatmapAttributes, State } from '../types';\n\nexport function getExperimentId( state: State ): ExperimentId {\n\treturn state.experiment.data.id;\n}\n\nexport function getExperimentType( state: State ): ExperimentTypeName {\n\treturn state.experiment.data.type;\n}\n\ntype GetExperimentAttribute = typeof _getExperimentAttribute & {\n\tCurriedSignature: < K extends keyof ExperimentAttributes >(\n\t\tattribute: K\n\t) => ExperimentAttributes[ K ];\n};\nexport const getExperimentAttribute =\n\t_getExperimentAttribute as GetExperimentAttribute;\nfunction _getExperimentAttribute< K extends keyof ExperimentAttributes >(\n\tstate: State,\n\tattribute: K\n): ExperimentAttributes[ K ] {\n\treturn state.experiment.data[ attribute ];\n}\n\ntype GetHeatmapAttribute = typeof _getHeatmapAttribute & {\n\tCurriedSignature: < K extends keyof HeatmapAttributes >(\n\t\tattribute: K\n\t) => Maybe< HeatmapAttributes[ K ] >;\n};\nexport const getHeatmapAttribute = _getHeatmapAttribute as GetHeatmapAttribute;\nfunction _getHeatmapAttribute< K extends keyof HeatmapAttributes >(\n\tstate: State,\n\tattribute: K\n): Maybe< HeatmapAttributes[ K ] > {\n\treturn state.experiment.data[ attribute ];\n}\n\nexport function isTestedElementInvalid( state: State ): boolean {\n\treturn !! state.experiment.data.isTestedElementInvalid;\n}\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport type { Goal } from '@nab/types';\nimport { isDefined } from '@nab/utils';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getGoals = createSelector(\n\t( state: State ): ReadonlyArray< Omit< Goal, 'conversionActions' > > =>\n\t\tvalues( state.experiment.goals ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.goals ]\n);\n","export * from './alternatives';\nexport * from './conversion-actions';\nexport * from './editor';\nexport * from './experiment-data';\nexport * from './goals';\nexport * from './scope';\nexport * from './segmentation';\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { isDefined } from '@nab/utils';\nimport type { ScopeRule } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getScope = createSelector(\n\t( state: State ): ReadonlyArray< ScopeRule > =>\n\t\tvalues( state.experiment.scope ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.scope ]\n);\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { createIndexedSelector, isDefined } from '@nab/utils';\nimport type { Segment, SegmentId, SegmentationRule } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getSegments = createSelector(\n\t( state: State ): ReadonlyArray< Omit< Segment, 'segmentationRules' > > =>\n\t\tvalues( state.experiment.segmentation.segments ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.segmentation.segments ]\n);\n\nexport const getSegmentationRules = createIndexedSelector(\n\t( state: State, segmentId: SegmentId ): ReadonlyArray< SegmentationRule > =>\n\t\tvalues( state.experiment.segmentation.rules[ segmentId ] ),\n\t( state: State, segmentId: SegmentId ) => ( {\n\t\tkey: segmentId,\n\t\tdependants: [ state.experiment.segmentation.rules[ segmentId ] ],\n\t} )\n);\n\nexport function getSegmentEvaluation( state: State ): 'site' | 'tested-page' {\n\treturn state.experiment.segmentation.evaluation;\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, select } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\nimport { store as NOTICES } from '@safe-wordpress/notices';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { store as NAB_DATA } from '@nab/data';\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\nimport type {\n\tAlternative,\n\tAlternativeId,\n\tConversionAction,\n\tECommercePlugin,\n\tExperiment,\n\tGoal,\n\tHeatmap,\n\tMaybe,\n\tOrderStatus,\n\tOrderStatusName,\n\tSegment,\n\tUrl,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport async function saveExperiment(): Promise< void > {\n\tconst isSaving = select( NAB_EDITOR ).isExperimentBeingSaved();\n\tif ( isSaving ) {\n\t\treturn;\n\t}\n\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( true );\n\n\tconst goals: Goal[] = [];\n\tconst goalsWithoutActions = select( NAB_EDITOR ).getGoals();\n\tfor ( const goal of goalsWithoutActions ) {\n\t\tconst actions = select( NAB_EDITOR ).getConversionActions( goal.id );\n\t\tconst ecommerce = getECommercePlugin( actions );\n\n\t\tgoals.push( {\n\t\t\t...goal,\n\t\t\tattributes: {\n\t\t\t\t...goal.attributes,\n\t\t\t\tuseOrderRevenue: !! ecommerce\n\t\t\t\t\t? goal.attributes.useOrderRevenue ?? true\n\t\t\t\t\t: undefined,\n\t\t\t\torderStatusForConversion: !! ecommerce\n\t\t\t\t\t? getOrderStatusForConversion( ecommerce, goal )\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\tconversionActions: actions,\n\t\t} );\n\t}\n\n\tconst segments: Segment[] = [];\n\tconst segmentsWithoutRules = select( NAB_EDITOR ).getSegments();\n\tfor ( const segment of segmentsWithoutRules ) {\n\t\tsegments.push( {\n\t\t\t...segment,\n\t\t\tsegmentationRules: select( NAB_EDITOR ).getSegmentationRules(\n\t\t\t\tsegment.id\n\t\t\t),\n\t\t} );\n\t}\n\n\tconst nonControlAlternatives: Alternative[] = [];\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tconst isTestedElementInvalid =\n\t\tselect( NAB_EDITOR ).isTestedElementInvalid();\n\n\tconst control = select( NAB_EDITOR ).getAlternative( 'control' );\n\tfor ( const alternativeId of alternativeIds ) {\n\t\tif ( 'control' === alternativeId ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst alt = select( NAB_EDITOR ).getAlternative( alternativeId );\n\t\tif ( alt ) {\n\t\t\tnonControlAlternatives.push( alt );\n\t\t}\n\t}\n\n\tlet experiment: Omit< Experiment, 'links' > | Omit< Heatmap, 'links' >;\n\tconst type = select( NAB_EDITOR ).getExperimentType();\n\tif ( 'nab/heatmap' === type ) {\n\t\texperiment = {\n\t\t\tid: select( NAB_EDITOR ).getExperimentId(),\n\t\t\ttype,\n\t\t\tname: select( NAB_EDITOR ).getExperimentAttribute( 'name' ),\n\t\t\tdescription:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'description' ),\n\t\t\tstatus: select( NAB_EDITOR ).getExperimentAttribute( 'status' ),\n\t\t\tstartDate:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'startDate' ),\n\t\t\tendDate: false,\n\t\t\tendMode: select( NAB_EDITOR ).getExperimentAttribute( 'endMode' ),\n\t\t\tendValue: select( NAB_EDITOR ).getExperimentAttribute( 'endValue' ),\n\t\t\ttrackingMode:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackingMode' ) ??\n\t\t\t\t'post',\n\t\t\ttrackedPostId:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedPostId' ) ??\n\t\t\t\t0,\n\t\t\ttrackedPostType:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedPostType' ) ??\n\t\t\t\t'page',\n\t\t\ttrackedUrl:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedUrl' ) ??\n\t\t\t\t( '' as Url ),\n\t\t\tparticipationConditions:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute(\n\t\t\t\t\t'participationConditions'\n\t\t\t\t) ?? [],\n\t\t};\n\t} else {\n\t\texperiment = {\n\t\t\tid: select( NAB_EDITOR ).getExperimentId(),\n\t\t\ttype,\n\t\t\tname: select( NAB_EDITOR ).getExperimentAttribute( 'name' ),\n\t\t\tdescription:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'description' ),\n\t\t\tstatus: select( NAB_EDITOR ).getExperimentAttribute( 'status' ),\n\t\t\tstartDate:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'startDate' ),\n\t\t\tendDate: false,\n\t\t\tendMode: select( NAB_EDITOR ).getExperimentAttribute( 'endMode' ),\n\t\t\tendValue: select( NAB_EDITOR ).getExperimentAttribute( 'endValue' ),\n\t\t\tautoAlternativeApplication: select(\n\t\t\t\tNAB_EDITOR\n\t\t\t).getExperimentAttribute( 'autoAlternativeApplication' ),\n\t\t\tscope: select( NAB_EDITOR ).getScope(),\n\t\t\talternatives: isTestedElementInvalid\n\t\t\t\t? [ control ]\n\t\t\t\t: [ control, ...nonControlAlternatives ],\n\t\t\tgoals,\n\t\t\tsegmentEvaluation: select( NAB_EDITOR ).getSegmentEvaluation(),\n\t\t\tsegments,\n\t\t};\n\t}\n\n\ttry {\n\t\tlet savedExperiment = await apiFetch< Experiment >( {\n\t\t\tpath: `/nab/v1/experiment/${ experiment.id }`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: experiment,\n\t\t} );\n\n\t\tif ( 'nab/heatmap' !== experiment.type && isTestedElementInvalid ) {\n\t\t\tsavedExperiment = {\n\t\t\t\t...savedExperiment,\n\t\t\t\talternatives: [\n\t\t\t\t\tsavedExperiment.alternatives[ 0 ],\n\t\t\t\t\t...nonControlAlternatives,\n\t\t\t\t],\n\t\t\t};\n\t\t}\n\n\t\tawait dispatch( NAB_EDITOR ).setupEditor( savedExperiment );\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsRecentlySaved();\n\t} catch ( e ) {\n\t\tconst message = getErrorMessage( e );\n\t\tawait dispatch( NOTICES ).createErrorNotice( message );\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t}\n}\n\nexport async function saveExperimentAndEditAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t}\n\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tif ( ! alternativeIds.includes( alternativeId ) ) {\n\t\treturn;\n\t}\n\n\tconst alternative = select( NAB_EDITOR ).getAlternative( alternativeId );\n\tif ( ! alternative ) {\n\t\treturn;\n\t}\n\n\tif ( ! alternative.links.edit ) {\n\t\treturn;\n\t}\n\n\twindow.location.href = alternative.links.edit;\n}\n\nexport async function saveExperimentAndPreviewAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t}\n\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tif ( ! alternativeIds.includes( alternativeId ) ) {\n\t\treturn;\n\t}\n\n\tconst alternative = select( NAB_EDITOR ).getAlternative( alternativeId );\n\tif ( ! alternative?.links.preview ) {\n\t\tlet message = _x(\n\t\t\t'Preview not available.',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t);\n\t\tconst type = select( NAB_EDITOR ).getExperimentType();\n\t\tconst scopeType = select( NAB_EXPERIMENTS ).getExperimentSupport(\n\t\t\ttype,\n\t\t\t'scope'\n\t\t);\n\t\tif ( 'urls' === scopeType || 'urls-with-tested-post' === scopeType ) {\n\t\t\tmessage += ' ';\n\t\t\tmessage += _x(\n\t\t\t\t'Please review your test scope and consider adding an exact URL where the test should be active so that Nelio can use it in the preview.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\t\t}\n\t\tawait dispatch( NOTICES ).createWarningNotice( message );\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_EDITOR ).openAlternativePreviewer(\n\t\talternative.links.preview\n\t);\n}\n\nexport async function moveToTrash(): Promise< void > {\n\tawait dispatch( NAB_EDITOR ).setExperimentData( { status: 'trash' } );\n\tawait saveExperiment();\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'edit.php', {\n\t\tpost_type: 'nab_experiment',\n\t} );\n}\n\nexport async function startExperiment(): Promise< void > {\n\tawait startOrResumeExperiment( 'start' );\n}\n\nexport async function resumeExperiment(): Promise< void > {\n\tawait startOrResumeExperiment( 'resume' );\n}\n\n// =======\n// HELPERS\n// =======\n\nasync function startOrResumeExperiment(\n\taction: 'start' | 'resume',\n\tignoreScopeOverlap = false\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( true );\n\tconst experimentId = select( NAB_EDITOR ).getExperimentId();\n\n\ttry {\n\t\tawait apiFetch( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/${ action }`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: { ignoreScopeOverlap },\n\t\t} );\n\t} catch ( e ) {\n\t\tconst message = getErrorMessage(\n\t\t\te,\n\t\t\t'start' === action\n\t\t\t\t? _x( 'Test cant be started', 'text', 'nelio-ab-testing' )\n\t\t\t\t: _x( 'Test cant be resumed', 'text', 'nelio-ab-testing' )\n\t\t);\n\n\t\tif ( 'equivalent-experiment-running' === getErrorCode( e ) ) {\n\t\t\tconst { notice } = ( await dispatch( NOTICES ).createWarningNotice(\n\t\t\t\tmessage,\n\t\t\t\t{\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\t\t'start' === action\n\t\t\t\t\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t\t\t\t\t'Start anyway',\n\t\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t\t\t\t\t'Resume anyway',\n\t\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t\tvariant: 'primary',\n\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\tawait dispatch( NOTICES ).removeNotice(\n\t\t\t\t\t\t\t\t\tnotice.id\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tawait startOrResumeExperiment( action, true );\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t) ) as { notice: { id: string } };\n\t\t} else {\n\t\t\tawait dispatch( NOTICES ).createErrorNotice( message );\n\t\t}\n\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t\treturn;\n\t}\n\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'admin.php', {\n\t\tpage: 'nelio-ab-testing-experiment-view',\n\t\texperiment: experimentId,\n\t} );\n}\n\nfunction getECommercePlugin(\n\tactions: ReadonlyArray< ConversionAction >\n): Maybe< ECommercePlugin > {\n\tif ( ! actions.length ) {\n\t\treturn undefined;\n\t}\n\n\tconst isWcOrder = ( { type }: ConversionAction ) => 'nab/wc-order' === type;\n\tif ( actions.every( isWcOrder ) ) {\n\t\treturn 'woocommerce';\n\t}\n\n\tconst isEddOrder = ( { type }: ConversionAction ) =>\n\t\t'nab/edd-order' === type;\n\tif ( actions.every( isEddOrder ) ) {\n\t\treturn 'edd';\n\t}\n\n\treturn undefined;\n}\n\nfunction getOrderStatusForConversion(\n\tplugin: ECommercePlugin,\n\tgoal: Omit< Goal, 'conversionActions' >\n): OrderStatusName {\n\tconst validStatuses = select( NAB_DATA ).getECommerceSetting(\n\t\tplugin,\n\t\t'orderStatuses'\n\t);\n\n\tconst status = goal.attributes.orderStatusForConversion;\n\treturn status &&\n\t\tvalidStatuses.map( ( s: OrderStatus ) => s.value ).includes( status )\n\t\t? status\n\t\t: getDefaultOrderStatus( plugin );\n}\n\nfunction getDefaultOrderStatus( plugin: ECommercePlugin ): string {\n\tswitch ( plugin ) {\n\t\tcase 'woocommerce':\n\t\t\treturn 'wc-completed';\n\n\t\tcase 'edd':\n\t\t\treturn 'complete';\n\t}\n}\n\nfunction getErrorCode( e: unknown ): false | 'equivalent-experiment-running' {\n\tif ( ! e || 'object' !== typeof e ) {\n\t\treturn false;\n\t}\n\n\tif ( 'code' in e && 'equivalent-experiment-running' === e.code ) {\n\t\treturn 'equivalent-experiment-running';\n\t}\n\n\tif ( ! ( 'errors' in e ) || 'object' !== typeof e.errors ) {\n\t\treturn false;\n\t}\n\n\tconst errors = e.errors || {};\n\treturn (\n\t\tObject.keys( errors ).includes( 'equivalent-experiment-running' ) &&\n\t\t'equivalent-experiment-running'\n\t);\n}\n\nfunction getErrorMessage( e: unknown, defaultMessage?: string ): string {\n\tconst fallback =\n\t\tdefaultMessage || _x( 'Unknown error', 'text', 'nelio-ab-testing' );\n\n\tif ( ! e || 'object' !== typeof e ) {\n\t\treturn fallback;\n\t}\n\n\tif ( 'errors' in e && 'object' === typeof e.errors ) {\n\t\tconst errors = Array.isArray( e.errors )\n\t\t\t? e.errors\n\t\t\t: values( e.errors );\n\n\t\tif ( 'string' === typeof errors[ 0 ] ) {\n\t\t\treturn errors[ 0 ] || fallback;\n\t\t}\n\n\t\tconst firstError =\n\t\t\tArray.isArray( errors[ 0 ] ) && 'string' === typeof errors[ 0 ][ 0 ]\n\t\t\t\t? errors[ 0 ][ 0 ]\n\t\t\t\t: undefined;\n\t\tif ( firstError ) {\n\t\t\treturn firstError || fallback;\n\t\t}\n\t}\n\n\tif ( 'message' in e && 'string' === typeof e.message ) {\n\t\treturn e.message || fallback;\n\t}\n\n\treturn fallback;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@safe-wordpress/data';\nimport { StrictMode } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { store as NAB_DATA } from '@nab/data';\nimport { EditorProvider } from '@nab/editor';\nimport type { ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { Layout } from './layout';\n\nexport type EditorProps = {\n\treadonly experimentId: ExperimentId;\n};\n\nexport const Editor = ( { experimentId }: EditorProps ): JSX.Element | null => {\n\tconst experiment = useSelect(\n\t\t( select ) => select( NAB_DATA ).getExperiment( experimentId ),\n\t\t[ experimentId ]\n\t);\n\n\tif ( ! experiment ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<StrictMode>\n\t\t\t<EditorProvider experiment={ experiment }>\n\t\t\t\t<Layout />\n\t\t\t</EditorProvider>\n\t\t</StrictMode>\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { NoticeList } from '@safe-wordpress/components';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\nimport { store as NOTICES } from '@safe-wordpress/notices';\n\n/**\n * External dependencies\n */\nimport { ExperimentName, Header, Sidebar } from '@nab/editor';\nimport { isEmpty } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport { StatusManager } from './status-manager';\nimport { TrackedPage } from './tracked-page';\nimport { ParticipationSection } from './participation-section';\n\nexport const Layout = (): JSX.Element => {\n\tconst notices = useNotices();\n\tconst { removeNotice } = useDispatch( NOTICES );\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment-layout\">\n\t\t\t<StatusManager />\n\t\t\t<Header />\n\t\t\t<div className=\"nab-edit-experiment-layout__body\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"nab-edit-experiment-layout__content\"\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\t/* translators: %s: Accessibility text for the content landmark region. */\n\t\t\t\t\taria-label={ _x(\n\t\t\t\t\t\t'Editor content',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t>\n\t\t\t\t\t{ ! isEmpty( notices ) && (\n\t\t\t\t\t\t<NoticeList\n\t\t\t\t\t\t\tclassName=\"nab-edit-experiment-layout__notices\"\n\t\t\t\t\t\t\tnotices={ notices }\n\t\t\t\t\t\t\tonRemove={ removeNotice }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<ExperimentName />\n\t\t\t\t\t<TrackedPage />\n\t\t\t\t\t<ParticipationSection />\n\t\t\t\t</div>\n\n\t\t\t\t<Sidebar />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useNotices = () =>\n\tuseSelect( ( select ) => select( NOTICES ).getNotices(), [] );\n","/**\n * WordPress dependencies\n */\nimport { Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { createInterpolateElement } from '@safe-wordpress/element';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_EDITOR } from '@nab/editor';\nimport { createSegmentationRule as createSegmentationRuleWithDefaults } from '@nab/segmentation-rules';\nimport type {\n\tDict,\n\tSegmentationRuleId,\n\tSegmentationRuleTypeName,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRule } from '../../../editor/components/segment/segmentation-rule';\nimport { SegmentationRuleTypeCategoryList } from '../../../editor/components/segment/segmentation-rule-type-category-list';\nimport { EMPTY_ARRAY } from '@nab/utils';\n\nexport const ParticipationSection = (): JSX.Element => (\n\t<div className=\"nab-edit-experiment__participation-section\">\n\t\t<Title />\n\t\t<ParticipationConditions />\n\t</div>\n);\n\n// ============\n// HELPER VIEWS\n// ============\n\nconst Title = () => (\n\t<h2>\n\t\t{ createInterpolateElement(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: Dashicon. */\n\t\t\t\t_x( '%s Participation', 'text', 'nelio-ab-testing' ),\n\t\t\t\t'<icon></icon>'\n\t\t\t),\n\t\t\t{\n\t\t\t\ticon: (\n\t\t\t\t\t<Dashicon\n\t\t\t\t\t\tclassName=\"nab-participation-section__title-icon\"\n\t\t\t\t\t\ticon=\"groups\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t}\n\t\t) }\n\t</h2>\n);\n\nconst ParticipationConditions = () => {\n\tconst { conditions, createCondition, updateCondition, removeCondition } =\n\t\tuseParticipationConditions();\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment-participation-section__content\">\n\t\t\t<p>\n\t\t\t\t{ ! conditions.length\n\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t'All visitors will contribute to this heatmap. If you want to limit participation to a subset of visitors, use the actions below:',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t'Only visitors who meet all the following criteria will contribute to this heatmap:',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  ) }\n\t\t\t</p>\n\t\t\t<div className=\"nab-edit-experiment-participation-section__conditions\">\n\t\t\t\t{ conditions.map( ( condition ) => (\n\t\t\t\t\t<SegmentationRule\n\t\t\t\t\t\tkey={ condition.id }\n\t\t\t\t\t\trule={ condition }\n\t\t\t\t\t\tsetAttributes={ ( attrs ) =>\n\t\t\t\t\t\t\tupdateCondition( condition.id, attrs )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremove={ () => removeCondition( condition.id ) }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</div>\n\t\t\t<SegmentationRuleTypeCategoryList\n\t\t\t\tsegmentationRules={ conditions }\n\t\t\t\tcreateSegmentationRule={ createCondition }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useParticipationConditions = () => {\n\tconst conditions = useSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute(\n\t\t\t\t'participationConditions'\n\t\t\t) ?? EMPTY_ARRAY,\n\t\t[]\n\t);\n\n\tconst { setHeatmapData } = useDispatch( NAB_EDITOR );\n\n\treturn {\n\t\tconditions,\n\n\t\tcreateCondition: ( type: SegmentationRuleTypeName ) => {\n\t\t\tconst rule = createSegmentationRuleWithDefaults( type );\n\t\t\tif ( rule ) {\n\t\t\t\tvoid setHeatmapData( {\n\t\t\t\t\tparticipationConditions: [ ...conditions, rule ],\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\n\t\tupdateCondition: ( id: SegmentationRuleId, attrs: Dict ) =>\n\t\t\tvoid setHeatmapData( {\n\t\t\t\tparticipationConditions: conditions.map( ( c ) =>\n\t\t\t\t\tc.id === id\n\t\t\t\t\t\t? { ...c, attributes: { ...c.attributes, ...attrs } }\n\t\t\t\t\t\t: c\n\t\t\t\t),\n\t\t\t} ),\n\n\t\tremoveCondition: ( id: SegmentationRuleId ) =>\n\t\t\tvoid setHeatmapData( {\n\t\t\t\tparticipationConditions: conditions.filter(\n\t\t\t\t\t( c ) => c.id !== id\n\t\t\t\t),\n\t\t\t} ),\n\t};\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useCallback, useEffect } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { keyBy, values } from 'lodash';\nimport { store as NAB_DATA } from '@nab/data';\nimport { isInTheFuture } from '@nab/date';\nimport { store as NAB_EDITOR } from '@nab/editor';\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport { getLocalUrlError, isEmpty } from '@nab/utils';\nimport type { Experiment, Maybe, SegmentationRule } from '@nab/types';\n\nexport const StatusManager = (): null => {\n\tconst attributes = useAttributes();\n\tconst updateStatus = useStatusUpdater();\n\tconst paused = attributes.status.includes( 'paused' );\n\tconst getConditionError = useGetConditionError();\n\n\tuseEffect( () => {\n\t\tconst homeUrl = attributes.homeUrl;\n\t\tconst mode = attributes.mode;\n\t\tconst name = attributes.name;\n\t\tconst participationConditions = attributes.participationConditions;\n\t\tconst postId = attributes.postId;\n\t\tconst postType = attributes.postType;\n\t\tconst startDate = attributes.startDate;\n\t\tconst status = attributes.status;\n\t\tconst url = attributes.url;\n\n\t\tif ( 'running' === status ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isEmpty( name ) ) {\n\t\t\tupdateStatus(\n\t\t\t\tpaused ? 'paused_draft' : 'draft',\n\t\t\t\t_x(\n\t\t\t\t\t'Please name your Heatmap test',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'post' === mode && ! postId ) {\n\t\t\tswitch ( postType ) {\n\t\t\t\tcase 'product':\n\t\t\t\t\tupdateStatus(\n\t\t\t\t\t\tpaused ? 'paused_draft' : 'draft',\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'Please select the product to track',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\tcase 'post':\n\t\t\t\t\tupdateStatus(\n\t\t\t\t\t\tpaused ? 'paused_draft' : 'draft',\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'Please select the post to track',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\tcase 'page':\n\t\t\t\t\tupdateStatus(\n\t\t\t\t\t\tpaused ? 'paused_draft' : 'draft',\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'Please select the page to track',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\tdefault:\n\t\t\t\t\tupdateStatus(\n\t\t\t\t\t\tpaused ? 'paused_draft' : 'draft',\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'Please select a page to track',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( 'url' === mode && getLocalUrlError( url, homeUrl ) ) {\n\t\t\tupdateStatus(\n\t\t\t\tpaused ? 'paused_draft' : 'draft',\n\t\t\t\tgetLocalUrlError( url, homeUrl ) || ''\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst participationError = participationConditions.reduce(\n\t\t\t( error, condition ) =>\n\t\t\t\terror ? error : getConditionError( condition ),\n\t\t\tundefined as Maybe< string >\n\t\t);\n\t\tif ( participationError ) {\n\t\t\tupdateStatus(\n\t\t\t\tpaused ? 'paused_draft' : 'draft',\n\t\t\t\tparticipationError\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t'scheduled' === status &&\n\t\t\tstartDate &&\n\t\t\t! isInTheFuture( startDate )\n\t\t) {\n\t\t\tupdateStatus( paused ? 'paused' : 'ready' );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'scheduled' !== status ) {\n\t\t\tupdateStatus( paused ? 'paused' : 'ready' );\n\t\t}\n\t}, [\n\t\tattributes.homeUrl,\n\t\tattributes.mode,\n\t\tattributes.name,\n\t\tattributes.participationConditions,\n\t\tattributes.postId,\n\t\tattributes.postType,\n\t\tattributes.startDate,\n\t\tattributes.status,\n\t\tattributes.url,\n\t\tpaused,\n\t\tupdateStatus,\n\t\tgetConditionError,\n\t] );\n\n\treturn null;\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useAttributes = () =>\n\tuseSelect( ( select ) => {\n\t\tconst { getPluginSetting } = select( NAB_DATA );\n\t\tconst { getExperimentAttribute, getHeatmapAttribute } =\n\t\t\tselect( NAB_EDITOR );\n\n\t\treturn {\n\t\t\thomeUrl: getPluginSetting( 'homeUrl' ),\n\t\t\tmode: getHeatmapAttribute( 'trackingMode' ) ?? 'post',\n\t\t\tname: getExperimentAttribute( 'name' ),\n\t\t\tparticipationConditions:\n\t\t\t\tgetHeatmapAttribute( 'participationConditions' ) ?? [],\n\t\t\tpostId: getHeatmapAttribute( 'trackedPostId' ) ?? 0,\n\t\t\tpostType: getHeatmapAttribute( 'trackedPostType' ) ?? 'page',\n\t\t\tstartDate: getExperimentAttribute( 'startDate' ),\n\t\t\tstatus: getExperimentAttribute( 'status' ),\n\t\t\turl: getHeatmapAttribute( 'trackedUrl' ) ?? '',\n\t\t};\n\t}, [] );\n\nconst useStatusUpdater = () => {\n\tconst { setDraftStatusRationale, setExperimentData } =\n\t\tuseDispatch( NAB_EDITOR );\n\n\treturn useCallback(\n\t\t( status: Experiment[ 'status' ], rationale?: string ) => {\n\t\t\tvoid setExperimentData( { status } );\n\t\t\tvoid setDraftStatusRationale( rationale ?? '' );\n\t\t},\n\t\t[ setExperimentData, setDraftStatusRationale ]\n\t);\n};\n\nconst useGetConditionError = () => {\n\tconst segmentationRuleTypes = useSelect(\n\t\t( select ) =>\n\t\t\tkeyBy(\n\t\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypes() || [],\n\t\t\t\t'name'\n\t\t\t),\n\t\t[]\n\t);\n\n\treturn useCallback(\n\t\t( condition: SegmentationRule ): string => {\n\t\t\tconst errors =\n\t\t\t\tsegmentationRuleTypes[ condition.type ]?.validate?.(\n\t\t\t\t\tcondition.attributes\n\t\t\t\t) ?? {};\n\t\t\treturn values( errors )[ 0 ] ?? '';\n\t\t},\n\t\t[ segmentationRuleTypes ]\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport {\n\tCheckboxControl,\n\tDashicon,\n\tExternalLink,\n\tTextControl,\n} from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { createInterpolateElement } from '@safe-wordpress/element';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { ErrorText } from '@nab/components';\nimport { getLocalUrlError } from '@nab/utils';\nimport { store as NAB_DATA } from '@nab/data';\nimport { store as NAB_EDITOR } from '@nab/editor';\nimport type { EntityId, EntityKindName, Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { PostSearcher } from './post-searcher';\n\nexport const TrackedPage = (): JSX.Element => {\n\tconst [ attributes, setAttributes ] = useAttributes();\n\tconst { mode, postId, postType, url, urlError } = attributes;\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment__alternative-section\">\n\t\t\t<h2>\n\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t/* translators: %s: Dashicon. */\n\t\t\t\t\t\t_x( '%s WordPress Page', 'text', 'nelio-ab-testing' ),\n\t\t\t\t\t\t'<icon></icon>'\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-alternative-section__title-icon\"\n\t\t\t\t\t\t\t\ticon=\"welcome-view-site\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t</h2>\n\n\t\t\t<div className=\"nab-tracked-element\">\n\t\t\t\t{ 'url' !== mode ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"nab-tracked-element__p\">\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'Select the page you want to generate a heatmap for:',\n\t\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<PostSearcher\n\t\t\t\t\t\t\tclassName=\"nab-tracked-element__post\"\n\t\t\t\t\t\t\tpostId={ postId ?? 0 }\n\t\t\t\t\t\t\tpostType={ postType }\n\t\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"nab-tracked-element__p\">\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'Type in the URL of the page you want to generate a heatmap for:',\n\t\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"nab-tracked-element__url\">\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tclassName=\"nab-tracked-element__url-value\"\n\t\t\t\t\t\t\t\tvalue={ url }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( { url: value } )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t\t\t\t\t'URL',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"nab-tracked-element__url-preview\">\n\t\t\t\t\t\t\t\t{ urlError ? (\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t\t'View',\n\t\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\t\tclassName=\"components-button is-secondary\"\n\t\t\t\t\t\t\t\t\t\thref={ url }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t\t'View',\n\t\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{ !! urlError && (\n\t\t\t\t\t\t\t<div className=\"nab-tracked-element__p\">\n\t\t\t\t\t\t\t\t<ErrorText value={ urlError } />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\n\t\t\t\t<div className=\"nab-tracked-element__p\">\n\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\tclassName=\"nab-tracked-element__mode\"\n\t\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t\t'Track heatmap of a page specified using its URL.',\n\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tchecked={ 'url' === mode }\n\t\t\t\t\t\tonChange={ ( checked ) =>\n\t\t\t\t\t\t\tsetAttributes( { mode: checked ? 'url' : 'post' } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useAttributes = () => {\n\tconst attributes = useSelect( ( select ) => {\n\t\tconst { getPluginSetting } = select( NAB_DATA );\n\t\tconst { getHeatmapAttribute } = select( NAB_EDITOR );\n\n\t\tconst url = getHeatmapAttribute( 'trackedUrl' ) || '';\n\t\tconst homeUrl = getPluginSetting( 'homeUrl' );\n\n\t\treturn {\n\t\t\tmode: getHeatmapAttribute( 'trackingMode' ) || 'post',\n\t\t\tpostId: getHeatmapAttribute( 'trackedPostId' ) || undefined,\n\t\t\tpostType: getHeatmapAttribute( 'trackedPostType' ) || 'page',\n\t\t\turl,\n\t\t\turlError: getLocalUrlError( url, homeUrl ),\n\t\t};\n\t}, [] );\n\n\ttype Attributes = {\n\t\treadonly mode: 'post' | 'url';\n\t\treadonly postId: EntityId;\n\t\treadonly postType: EntityKindName;\n\t\treadonly url: string;\n\t};\n\n\tconst { setHeatmapData } = useDispatch( NAB_EDITOR );\n\tconst setAttributes = ( attrs: Partial< Attributes > ): void =>\n\t\tvoid setHeatmapData( {\n\t\t\ttrackingMode: attrs.mode ?? attributes.mode,\n\t\t\ttrackedPostId: attrs.postId ?? attributes.postId,\n\t\t\ttrackedPostType: attrs.postType ?? attributes.postType,\n\t\t\ttrackedUrl: ( attrs.url ?? attributes.url ) as Url,\n\t\t} );\n\n\treturn [ attributes, setAttributes ] as const;\n};\n","/**\n * WordPress dependencies\n */\nimport { SelectControl } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { PostSearcher as Searcher } from '@nab/components';\nimport { store as NAB_DATA } from '@nab/data';\nimport { isEmpty } from '@nab/utils';\nimport type { EntityId, EntityKindName } from '@nab/types';\n\nexport type PostSearcherProps = {\n\treadonly className: string;\n\treadonly postId: EntityId;\n\treadonly postType: EntityKindName;\n\treadonly setAttributes: ( attrs: Partial< SAP > ) => void;\n};\n\ntype SAP = {\n\treadonly postId: EntityId;\n\treadonly postType: EntityKindName;\n};\n\nexport const PostSearcher = ( {\n\tclassName,\n\tpostId,\n\tpostType: currentPostType,\n\tsetAttributes,\n}: PostSearcherProps ): JSX.Element => {\n\tconst postTypes = usePostTypes();\n\n\tconst selectablePostTypes = postTypes.map( ( type ) => ( {\n\t\tvalue: type.name,\n\t\tlabel: type.labels.singular_name,\n\t} ) );\n\tconst postType = currentPostType || 'page';\n\n\treturn (\n\t\t<div className={ className }>\n\t\t\t<SelectControl\n\t\t\t\tclassName={ `${ className }-type-selector` }\n\t\t\t\tvalue={ postType }\n\t\t\t\toptions={ selectablePostTypes }\n\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\tsetAttributes( { postId: 0, postType: value } )\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<Searcher\n\t\t\t\tclassName={ `${ className }-selector` }\n\t\t\t\ttype={ postType }\n\t\t\t\tvalue={ postId }\n\t\t\t\tperPage={ 10 }\n\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\tsetAttributes( { postId: value, postType } )\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst usePostTypes = () => {\n\tconst entities = useSelect(\n\t\t( select ) => select( NAB_DATA ).getKindEntities(),\n\t\t[]\n\t);\n\n\tconst postTypes = isEmpty( entities ) ? DEFAULT_POST_TYPES : entities;\n\treturn postTypes\n\t\t.filter( ( pt ) => 'entity' === pt.kind )\n\t\t.filter( ( pt ) => 'attachment' !== pt.name );\n};\n\n// ====\n// DATA\n// ====\n\nconst DEFAULT_POST_TYPES = [\n\t{\n\t\tkind: 'entity' as const,\n\t\tname: 'page',\n\t\tlabel: _x( 'Pages', 'text', 'nelio-ab-testing' ),\n\t\tlabels: {\n\t\t\tsingular_name: _x( 'Page', 'text', 'nelio-ab-testing' ),\n\t\t},\n\t},\n\t{\n\t\tkind: 'entity' as const,\n\t\tname: 'post',\n\t\tlabel: _x( 'Posts', 'text', 'nelio-ab-testing' ),\n\t\tlabels: {\n\t\t\tsingular_name: _x( 'Post', 'text', 'nelio-ab-testing' ),\n\t\t},\n\t},\n];\n","// extracted by mini-css-extract-plugin\nexport {};","export * as heatmapEditor from './index';\n","/**\n * WordPress dependencies\n */\nimport { render } from '@safe-wordpress/element';\nimport { dispatch } from '@safe-wordpress/data';\nimport domReady from '@safe-wordpress/dom-ready';\n\n/**\n * External dependencies\n */\nimport { debounce } from 'lodash';\nimport '@nab/editor';\nimport { store as NAB_DATA } from '@nab/data';\nimport { registerCoreExperiments } from '@nab/experiment-library';\nimport type { ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { Editor } from './components/editor';\n\nexport function initializeExperimentEditor(\n\tid: string,\n\texperimentId: ExperimentId\n): void {\n\tconst target = document.getElementById( id );\n\tregisterCoreExperiments();\n\trender( <Editor experimentId={ experimentId } />, target );\n}\n\n// =======\n// HELPERS\n// =======\n\nfunction fixSidebarDimensions() {\n\tconst height = window.innerHeight;\n\tconst wpAdminBar = document.getElementById( 'wpadminbar' );\n\tconst adminBarHeight = wpAdminBar\n\t\t? wpAdminBar.getBoundingClientRect().height\n\t\t: 0;\n\n\tconst { setPageAttribute } = dispatch( NAB_DATA );\n\tvoid setPageAttribute( 'sidebarDimensions', {\n\t\ttop: adminBarHeight,\n\t\theight: `${ height - adminBarHeight }px`,\n\t\tapplyFix: 782 <= window.innerWidth, // medium breakpoint\n\t} );\n}\nwindow.addEventListener( 'resize', debounce( fixSidebarDimensions, 100 ) );\ndomReady( fixSidebarDimensions );\n","/**\n * WordPress dependencies\n */\nimport baseApiFetch from '@wordpress/api-fetch';\nimport { format } from '@wordpress/date';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport type { APIFetchOptions } from '@wordpress/api-fetch';\n\nconst apiFetch = < T >( options: APIFetchOptions ): Promise< T > => {\n\tconst { url, path } = options;\n\tconst nabts = format( 'YmjHi' ).substring( 0, 11 ) + '0';\n\treturn baseApiFetch( {\n\t\t...options,\n\t\t...( url && {\n\t\t\turl: isRestApiRequest( options )\n\t\t\t\t? addQueryArgs( url, { nabts } )\n\t\t\t\t: url,\n\t\t} ),\n\t\t...( path && { path: addQueryArgs( path, { nabts } ) } ),\n\t\tparse: true,\n\t} );\n};\n\nexport * from '@wordpress/api-fetch';\nexport default apiFetch;\n\n// =======\n// HELPERS\n// =======\nconst isRestApiRequest = ( options: APIFetchOptions ): boolean =>\n\t!! options.url?.includes( '/wp-json/' ) ||\n\t!! options.url?.includes( 'rest_route' ) ||\n\t!! Object.keys( options ).includes( 'rest_route' );\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/components';\n\nexport {\n\t__experimentalGrid as Grid,\n\t__experimentalHeading as Heading,\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalInputControl as InputControl,\n\t__experimentalInputControlPrefixWrapper as InputControlPrefixWrapper,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalVStack as VStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\t__experimentalSpacer as Spacer,\n\t__experimentalTruncate as Truncate,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalHasSplitBorders as hasSplitBorders,\n\t__experimentalIsDefinedBorder as isDefinedBorder,\n\t__experimentalText as Text,\n\t__experimentalView as View,\n} from '@wordpress/components';\n\nexport type { BaseControlProps } from '@wordpress/components/build-types/base-control/types';\nexport type { BoxControlValue } from '@wordpress/components/build-types/box-control/types';\nexport type { ButtonAsButtonProps } from '@wordpress/components/build-types/button/types';\nexport type {\n\tColorObject,\n\tPaletteObject,\n} from '@wordpress/components/build-types/color-palette/types';\nexport type { ControlledRangeValue } from '@wordpress/components/build-types/range-control/types';\nexport type { DropdownProps } from '@wordpress/components/build-types/dropdown/types';\nexport type { GradientPickerComponentProps } from '@wordpress/components/build-types/gradient-picker/types';\nexport type { HeadingSize } from '@wordpress/components/build-types/heading/types';\nexport type { ItemGroupProps } from '@wordpress/components/build-types/item-group/types';\nexport type { PopoverProps } from '@wordpress/components/build-types/popover/types';\nexport type { Size } from '@wordpress/components/build-types/input-control/types';\nexport type { ToggleGroupControlProps } from '@wordpress/components/build-types/toggle-group-control/types';\nexport type {\n\tUnitControlProps,\n\tUnitControlOnChangeCallback,\n} from '@wordpress/components/build-types/unit-control/types';\nexport type { WordPressComponentProps } from '@wordpress/components/build-types/context';\nexport type { WPUnitControlUnit } from '@wordpress/components/build-types/unit-control/types';\n\nimport {\n\t// eslint-disable-next-line\n\t__experimentalToggleGroupControl as OriginalToggleGroupControl,\n\tBaseControl as OriginalBaseControl,\n\tCheckboxControl as OriginalCheckboxControl,\n\tFormTokenField as OriginalFormTokenField,\n\tRangeControl as OriginalRangeControl,\n\tSelectControl as OriginalSelectControl,\n\tTextControl as OriginalTextControl,\n\tTextareaControl as OriginalTextareaControl,\n\tToggleControl as OriginalToggleControl,\n} from '@wordpress/components';\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedBaseControl: typeof OriginalBaseControl = ( props ) => (\n\t<OriginalBaseControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const BaseControl = Object.assign(\n\tWrappedBaseControl,\n\tOriginalBaseControl\n);\n\nconst WrappedCheckboxControl: typeof OriginalCheckboxControl = ( props ) => (\n\t<OriginalCheckboxControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const CheckboxControl = Object.assign(\n\tWrappedCheckboxControl,\n\tOriginalCheckboxControl\n);\n\nconst WrappedFormTokenField: typeof OriginalFormTokenField = ( props ) => (\n\t<OriginalFormTokenField\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const FormTokenField = Object.assign(\n\tWrappedFormTokenField,\n\tOriginalFormTokenField\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedRangeControl: typeof OriginalRangeControl = ( props ) => (\n\t<OriginalRangeControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const RangeControl = Object.assign(\n\tWrappedRangeControl,\n\tOriginalRangeControl\n);\n\nexport const SelectControl: typeof OriginalSelectControl = ( props ) => (\n\t<OriginalSelectControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedTextControl: typeof OriginalTextControl = ( props ) => (\n\t<OriginalTextControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const TextControl = Object.assign(\n\tWrappedTextControl,\n\tOriginalTextControl\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedTextareaControl: typeof OriginalTextareaControl = ( props ) => (\n\t<OriginalTextareaControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const TextareaControl = Object.assign(\n\tWrappedTextareaControl,\n\tOriginalTextareaControl\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedToggleControl: typeof OriginalToggleControl = ( props ) => (\n\t<OriginalToggleControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const ToggleControl = Object.assign(\n\tWrappedToggleControl,\n\tOriginalToggleControl\n);\n\nconst WrappedToggleGroupControl: typeof OriginalToggleGroupControl = (\n\t// @ts-expect-error Compiler complains, but this is just a temporary fix.\n\tprops\n) => (\n\t<OriginalToggleGroupControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const ToggleGroupControl = Object.assign(\n\tWrappedToggleGroupControl,\n\tOriginalToggleGroupControl\n);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * WordPress dependencies\n */\nexport * from '@wordpress/data';\nimport {\n\tregister as doRegister,\n\tresolveSelect as doResolveSelect,\n\tsubscribe as doSubscribe,\n\tuseSelect as doUseSelect,\n} from '@wordpress/data';\nimport type {\n\tMapSelect,\n\tReduxStoreConfig,\n\tStoreDescriptor,\n\tUseSelectReturn,\n} from '@wordpress/data/build-types/types';\n\n// ==========\n// TYPESCRIPT\n// ==========\n\n// register should exist.\nexport function register(\n\tstore: StoreDescriptor< ReduxStoreConfig< any, any, any > >\n): void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call\n\tdoRegister( store );\n}\n\n// subscribe should exist.\nexport function subscribe(\n\tlistener: () => void,\n\tstore?: StoreDescriptor< any > | string\n): () => void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doSubscribe( listener, store );\n}\n\n// useSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function useSelect< T extends MapSelect | StoreDescriptor< any > >(\n\tmapSelect: T,\n\tdependencies?: unknown[]\n): UseSelectReturn< T > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\treturn doUseSelect< T >( mapSelect, dependencies );\n}\n\n// resolveSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function resolveSelect< T extends StoreDescriptor< any > >(\n\tkey: T\n): ResolvableSelectors< UseSelectReturn< T > > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doResolveSelect( key );\n}\n\ntype ResolvableSelectors<\n\tS extends Record< string, ( ...args: any[] ) => any >,\n> = {\n\treadonly [ K in keyof S ]: S[ K ] extends {\n\t\tPromisedSignature: ( ...args: any[] ) => any;\n\t}\n\t\t? S[ K ][ 'PromisedSignature' ]\n\t\t: S[ K ] extends ( ...args: infer A ) => infer R\n\t\t? ( ...args: A ) => Promise< R >\n\t\t: never;\n};\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/dom-ready';\nimport domReady from '@wordpress/dom-ready';\nexport default domReady;\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/element';\nimport { createRoot, render as legacyRender } from '@wordpress/element';\n\nexport function render(\n\telement: JSX.Element,\n\tcontainer: Element | null\n): void {\n\tif ( ! container ) {\n\t\treturn;\n\t}\n\n\tif ( createRoot ) {\n\t\tconst root = createRoot( container );\n\t\troot.render( element );\n\t} else {\n\t\tlegacyRender( element, container );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/i18n';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/notices';\n","module.exports = window[\"nab\"][\"components\"];","module.exports = window[\"nab\"][\"data\"];","module.exports = window[\"nab\"][\"date\"];","module.exports = window[\"nab\"][\"editor\"];","module.exports = window[\"nab\"][\"experimentLibrary\"];","module.exports = window[\"nab\"][\"experiments\"];","module.exports = window[\"nab\"][\"segmentationRules\"];","module.exports = window[\"nab\"][\"utils\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"domReady\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"lodash\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-editor\",\"./style-heatmap-editor\"], () => (__webpack_require__(\"./packages/heatmap-editor/export.ts\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["DropdownMenu","useSelect","_x","store","NAB_SEGMENTS","SegmentationRuleTypeCategory","SegmentationRuleTypeCategoryList","createSegmentationRule","segmentationRules","segmentationRuleTypeCategories","useSegmentationRuleTypeCategories","_jsx","className","icon","label","toggleProps","variant","children","popoverProps","placement","onClose","map","category","name","select","getSegmentationRuleTypeCategories","MenuGroup","MenuItem","EMPTY_ARRAY","segmentationRuleTypes","useSegmentationRuleTypes","length","title","Icon","singleton","role","iconPosition","onClick","disabled","some","rule","type","catName","ruleTypes","getSegmentationRuleTypes","filter","Button","Dashicon","PanelBody","useState","isEmpty","NAB_EDITOR","SegmentationRule","readOnly","setAttributes","remove","experimentId","useExperimentId","ruleType","useSegmentationRuleType","View","view","Edit","edit","attributes","validate","_a","errors","hasErrors","opened","onToggle","_jsxs","showActualIcon","isDestructive","getExperimentId","getSegmentationRuleType","castArray","addAlternatives","alternatives","removeAlternatives","ids","replaceAlternatives","oldIds","setAlternative","id","alternative","addConversionActionsIntoGoal","goalId","conversionActions","replaceConversionActionsInGoal","removeConversionActionsFromGoal","conversionActionIds","updateConversionAction","conversionActionId","scope","setupEditor","experiment","setActiveGoal","setActiveSegment","segmentId","setExperimentAsBeingSaved","status","setDraftStatusRationale","rationale","setExperimentAsRecentlySaved","openAlternativePreviewer","url","closeAlternativePreviewer","showAiAlternativeModal","alternativeId","setExperimentData","setHeatmapData","setTestedElementAsInvalid","invalid","addGoals","goals","removeGoals","updateGoal","setScopeRules","rules","addSegments","segments","removeSegments","updateSegment","addSegmentationRulesIntoSegment","replaceSegmentationRulesInSegment","removeSegmentationRulesFromSegment","segmentationRuleIds","updateSegmentationRule","segmentationRuleId","setSegmentEvaluation","strategy","INIT_STATE","editor","activeGoalId","activeSegmentId","aiAlternativeModal","undefined","alternativePreviewerUrl","draftStatusRationale","hasExperimentBeenRecentlySaved","isExperimentBeingSaved","byId","control","links","heatmap","preview","allIds","data","description","startDate","endDate","endMode","endValue","autoAlternativeApplication","isTestedElementInvalid","segmentation","evaluation","createReduxStore","register","controls","reducer","selectors","realActions","sideEffects","actions","Object","assign","difference","isEqual","keyBy","omit","zip","isDefined","IS","state","action","actualReducer","newAlternatives","alt","newAlternativeIds","pairs","newAlternativesById","r","find","p","oldAlternatives","oldAlternativesWithoutId","values","newAlternativesWithoutId","oldAlternative","newAlternative","newState","EMPTY_OBJECT","newConversionActions","conversionAction","oldConvActions","newConvActions","oldConvActionsWithoutId","newConvActionsWithoutId","goal","oldConversionAction","newConversionAction","reduce","memo","newAttributes","newGoals","newGoal","combineReducers","newRules","newSegments","segment","oldSegment","newSegment","oldRules","oldRulesWithoutId","newRulesWithoutId","oldSegmentationRule","newSegmentationRule","segmentEvaluation","createSelector","getAlternative","_getAlternative","__getAlternative","_","getAlternatives","getAlternativeIds","createIndexedSelector","getConversionActions","key","dependants","getActiveGoal","getActiveGoalIndex","indexOf","getActiveSegment","getActiveSegmentIndex","getDraftStatusRationale","isDraft","includes","getAlternativePreviewerUrl","getAiAlternativeModal","getExperimentType","getExperimentAttribute","_getExperimentAttribute","attribute","getHeatmapAttribute","_getHeatmapAttribute","getGoals","getScope","getSegments","getSegmentationRules","getSegmentEvaluation","apiFetch","dispatch","NOTICES","NAB_DATA","NAB_EXPERIMENTS","saveExperiment","isSaving","goalsWithoutActions","ecommerce","getECommercePlugin","push","useOrderRevenue","orderStatusForConversion","getOrderStatusForConversion","segmentsWithoutRules","nonControlAlternatives","alternativeIds","trackingMode","_b","trackedPostId","_c","trackedPostType","_d","trackedUrl","_e","participationConditions","_f","savedExperiment","path","method","e","message","getErrorMessage","createErrorNotice","saveExperimentAndEditAlternative","window","location","href","saveExperimentAndPreviewAlternative","scopeType","getExperimentSupport","createWarningNotice","moveToTrash","getAdminUrl","post_type","startExperiment","startOrResumeExperiment","resumeExperiment","action_1","ignoreScopeOverlap","getErrorCode","notice","__awaiter","removeNotice","page","isWcOrder","every","isEddOrder","plugin","validStatuses","getECommerceSetting","s","value","getDefaultOrderStatus","code","keys","defaultMessage","fallback","Array","isArray","firstError","StrictMode","EditorProvider","Layout","Editor","getExperiment","NoticeList","useDispatch","ExperimentName","Header","Sidebar","StatusManager","TrackedPage","ParticipationSection","notices","useNotices","tabIndex","onRemove","getNotices","createInterpolateElement","sprintf","createSegmentationRuleWithDefaults","Title","ParticipationConditions","conditions","createCondition","updateCondition","removeCondition","useParticipationConditions","condition","attrs","c","useCallback","useEffect","isInTheFuture","getLocalUrlError","useAttributes","updateStatus","useStatusUpdater","paused","getConditionError","useGetConditionError","homeUrl","mode","postId","postType","participationError","error","getPluginSetting","call","CheckboxControl","ExternalLink","TextControl","ErrorText","PostSearcher","urlError","_Fragment","onChange","placeholder","checked","SelectControl","Searcher","currentPostType","postTypes","usePostTypes","selectablePostTypes","labels","singular_name","options","perPage","entities","getKindEntities","DEFAULT_POST_TYPES","pt","kind","heatmapEditor","render","domReady","debounce","registerCoreExperiments","initializeExperimentEditor","target","document","getElementById","fixSidebarDimensions","height","innerHeight","wpAdminBar","adminBarHeight","getBoundingClientRect","setPageAttribute","top","applyFix","innerWidth","addEventListener","baseApiFetch","format","addQueryArgs","nabts","substring","isRestApiRequest","parse","__experimentalGrid","Grid","__experimentalHeading","Heading","__experimentalItemGroup","ItemGroup","__experimentalInputControl","InputControl","__experimentalInputControlPrefixWrapper","InputControlPrefixWrapper","__experimentalToggleGroupControlOption","ToggleGroupControlOption","__experimentalToggleGroupControlOptionIcon","ToggleGroupControlOptionIcon","__experimentalUnitControl","UnitControl","__experimentalNumberControl","NumberControl","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","__experimentalHStack","HStack","__experimentalZStack","ZStack","__experimentalVStack","VStack","__experimentalDropdownContentWrapper","DropdownContentWrapper","__experimentalSpacer","Spacer","__experimentalTruncate","Truncate","__experimentalParseQuantityAndUnitFromRawValue","parseQuantityAndUnitFromRawValue","__experimentalUseCustomUnits","useCustomUnits","__experimentalHasSplitBorders","hasSplitBorders","__experimentalIsDefinedBorder","isDefinedBorder","__experimentalText","Text","__experimentalView","__experimentalToggleGroupControl","OriginalToggleGroupControl","BaseControl","OriginalBaseControl","OriginalCheckboxControl","FormTokenField","OriginalFormTokenField","RangeControl","OriginalRangeControl","OriginalSelectControl","OriginalTextControl","TextareaControl","OriginalTextareaControl","ToggleControl","OriginalToggleControl","WrappedBaseControl","props","__nextHasNoMarginBottom","WrappedCheckboxControl","WrappedFormTokenField","__next40pxDefaultSize","WrappedRangeControl","WrappedTextControl","WrappedTextareaControl","WrappedToggleControl","WrappedToggleGroupControl","ToggleGroupControl","doRegister","resolveSelect","doResolveSelect","subscribe","doSubscribe","doUseSelect","listener","mapSelect","dependencies","createRoot","legacyRender","element","container","root"],"ignoreList":[],"sourceRoot":""}