(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{commands:()=>n});var n={};e.r(n),e.d(n,{registerCommands:()=>j});const o=window.ReactJSXRuntime,r=window.wp.apiFetch;var i=e.n(r);const a=window.wp.date,s=window.wp.url,c=e=>{const{url:t,path:n}=e,o=(0,a.format)("YmjHi").substring(0,11)+"0";return i()(Object.assign(Object.assign(Object.assign(Object.assign({},e),t&&{url:l(e)?(0,s.addQueryArgs)(t,{nabts:o}):t}),n&&{path:(0,s.addQueryArgs)(n,{nabts:o})}),{parse:!0}))},l=e=>{var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")},d=window.wp.commands,u=window.wp.data,p=window.wp.i18n,w=window.lodash,v=window.nab.data,f=window.nab.experiments,m=window.nab.utils,b=window.React;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y.apply(null,arguments)}const g=function(e){return b.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),b.createElement("path",{d:"M64.278 7.108c-4.418 0-8.718.5-12.85 1.447.28.937.577 2.036.969 3.426q.806 2.56 1.208 3.637l8.567 28.355c2.648-.117 5.349-.247 7.541-.307a178 178 0 0 1 5.168-.199c1.75-.048 3.077-.08 3.975-.126.942-.044 1.982-.069 3.103-.069 7 0 12.68.928 17.078 2.767 4.441 1.84 7.61 4.28 9.493 7.33 1.885 3.007 2.837 6.299 2.837 9.888a18.1 18.1 0 0 1-1.825 7.949q-1.749 3.7-4.438 6.123a19.5 19.5 0 0 1-5.52 3.693c-2.019.852-4.259 1.642-6.726 2.36 7.133.449 13.116 2.49 17.962 6.123 1.263.947 2.366 1.976 3.3 3.103 4.728-8.33 7.43-17.963 7.43-28.228 0-31.631-25.64-57.27-57.272-57.27zM38.55 13.203c-.118.057-.235.11-.352.17L25.88 47.921h22.892L38.549 13.205Zm-7.5 4.522C16.492 28.11 6.993 45.135 6.993 64.38A57.3 57.3 0 0 0 9.69 81.751c.98-5.753 2.82-11.702 4.76-17.807.021-.065.057-.162.086-.239.003-.038.01-.072.014-.113l15.04-41.584c.263-.733.788-2.255 1.461-4.283zM79.6 48.243a42 42 0 0 0-7.542.674v32.708h6.32c6.416 0 10.922-1.488 13.525-4.494 2.646-3.006 3.974-7.039 3.974-12.064 0-4.576-1.277-8.532-3.834-11.853s-6.7-4.971-12.443-4.971zm-54.659 5.196c-7.251 21.8 6.582 28.468 4.972 41.008-.685 5.332-4.132 7.947-7.991 8.483 8.496 9.328 20.035 15.834 33.045 17.962.368-.162.682-.344.94-.562.898-.718 1.45-1.995 1.672-3.834.267-1.837.407-4.79.407-8.82V85.613c-.117-3.785-.202-7.169-1.755-12.99-.404-1.66-1.041-3.977-1.938-6.938L50.599 53.44zm47.117 33.158v33.859c.763.045 1.589.11 2.486.199l.324.014a57.05 57.05 0 0 0 27.105-13.173 23 23 0 0 0 .238-3.259c0-2.737-.614-5.428-1.826-8.075-1.166-2.692-3.432-4.972-6.797-6.811-3.32-1.84-7.914-2.753-13.79-2.753z",style:{fill:"#000",opacity:.2}}))};var h=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})};function j(){return h(this,void 0,void 0,function*(){const e=(0,u.select)(f.store).getExperimentTypes();if(!(0,w.keys)(e).length)return;const t=yield(n=v.store,(0,u.resolveSelect)(n)).getKindEntities();var n;const r=(0,w.filter)(t,{kind:"entity"}),i=(0,u.dispatch)(d.store);(0,w.values)(e).forEach(e=>{var t,n;if((0,m.isExperimentTypeDisabled)(e,r))return;const a=e&&e.icon||g;i.registerCommand({name:`nelio-ab-testing/create-${e.name.replaceAll("/","-")}-experiment`,label:null!==(n=null===(t=e.labels)||void 0===t?void 0:t.create)&&void 0!==n?n:(0,p.sprintf)(/* translators: %s = test type name */ /* translators: %s = test type name */
(0,p._x)("Add new %s test","command","nelio-ab-testing"),e.title),icon:(0,o.jsx)(a,{}),callback:({close:t})=>{var n,o;const r="tested-post-with-consistency"===(null===(n=null==e?void 0:e.supports)||void 0===n?void 0:n.scope)||"tested-product-with-consistency"===(null===(o=null==e?void 0:e.supports)||void 0===o?void 0:o.scope);c({path:"/nab/v1/experiment",method:"post",data:{type:e.name,addTestedPostScopeRule:r}}).then(e=>{window.location.href=e.links.edit}).catch(e=>{console.error(e.message),t()}).finally(()=>t())}})})})}})();var n=nab="undefined"==typeof nab?{}:nab;for(var o in t)n[o]=t[o];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();