(()=>{var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{experiments:()=>i});var r={};e.r(r),e.d(r,{getExperimentSupport:()=>c,getExperimentType:()=>p,getExperimentTypes:()=>l,getExperimentView:()=>d,getHelpString:()=>m,hasExperimentSupport:()=>u});var n={};e.r(n),e.d(n,{addExperimentTypes:()=>y,removeExperimentTypes:()=>g});var i={};e.r(i),e.d(i,{registerExperimentType:()=>h,store:()=>E});const o=window.wp.data,s=window.lodash,a=window.nab.utils;function l(e){return e.experimentTypes}function p(e,t){return e.experimentTypes[t]}const c=function(e,t,r){const n=v(e,t);return null==n?void 0:n.supports[r]};function u(e,t,r){return!!c(e,t,r)}function d(e,t,r){const n=v(e,t);if(n)return n.views[r]}function m(e,t,r){const n=v(e,t);return(null==n?void 0:n.help[r])||""}const v=(e,t)=>"string"==typeof t?p(e,t):t;function y(e){return{type:"ADD_EXPERIMENT_TYPES",experimentTypes:(0,s.castArray)(e)}}function g(e){return{type:"REMOVE_EXPERIMENT_TYPES",names:(0,s.castArray)(e)}}const f={experimentTypes:{}},E=(0,o.createReduxStore)("nab/experiments",{reducer:function(e=f,t){var r;return null!==(r=function(e,t){switch(t.type){case"ADD_EXPERIMENT_TYPES":return Object.assign(Object.assign({},e),{experimentTypes:Object.assign(Object.assign({},e.experimentTypes),(0,s.keyBy)(t.experimentTypes,"name"))});case"REMOVE_EXPERIMENT_TYPES":return Object.assign(Object.assign({},e),{experimentTypes:(0,s.omit)(e.experimentTypes,t.names)})}}(e,t))&&void 0!==r?r:e},selectors:r,actions:n});function h(e,t){const r=Object.assign(Object.assign({description:"",supports:{},checks:j(t)?t.checks:{getControlError:()=>!1,getAlternativeError:()=>!1}},t),{name:e});if("nab/heatmap"===e)return(0,o.dispatch)(E).addExperimentTypes(r),r;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,o.select)(E).getExperimentType(e))console.error(`Experiment type “${e}” is already registered.`);else if(j(r))if(x(r))if(T(r))if(b(r))if(w(r))if((0,a.isValidIcon)(t.icon))if(_(r)){if(O(r))return(0,o.dispatch)(E).addExperimentTypes(r),r;console.error(`The experiment “${e}” must specify original and alternative edit views.`)}else console.error(`The experiment “${e}” must specify original and alternative default values.`);else console.error("The icon passed is invalid. The icon should be an element or a function.");else console.error(`The experiment “${e}” must have an icon.`);else console.error(`The experiment “${e}” must have a title.`);else console.error(`The experiment “${e}” must have a valid category.`);else console.error(`The experiment “${e}” must provide help strings explaining the control version and its variants.`);else console.error(`Experiment type “${e}” must provide at least two checks: “getControlError” and “getAlternativeError”.`);else console.error("Experiment type names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-experiment");else console.error("Experiment type names must be strings.")}!function(e){(0,o.register)(e)}(E);const x=e=>!!e.help&&"string"==typeof e.help.original&&!!e.help.original&&"string"==typeof e.help.alternative&&!!e.help.alternative,T=e=>{var t;return["page","global","woocommerce","other"].includes(null!==(t=e.category)&&void 0!==t?t:"")},b=e=>"string"==typeof e.title&&!!e.title,w=e=>"icon"in e,O=e=>{var t,r;return(0,s.isFunction)(null===(t=e.views)||void 0===t?void 0:t.original)&&(0,s.isFunction)(null===(r=e.views)||void 0===r?void 0:r.alternative)},j=e=>{var t,r;return(0,s.isFunction)(null===(t=e.checks)||void 0===t?void 0:t.getControlError)&&(0,s.isFunction)(null===(r=e.checks)||void 0===r?void 0:r.getAlternativeError)},_=e=>{var t,r;return(0,s.isObject)(null===(t=e.views)||void 0===t?void 0:t.original)&&(0,s.isObject)(null===(r=e.defaults)||void 0===r?void 0:r.alternative)}})();var r=nab="undefined"==typeof nab?{}:nab;for(var n in t)r[n]=t[n];t.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();