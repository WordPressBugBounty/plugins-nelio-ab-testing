(()=>{var e,t={7400:(e,t,n)=>{"use strict";n.r(t);const a=window.nab.data,r=window.wp.element;function i(e,t){t&&(r.createRoot?(0,r.createRoot)(t).render(e):(0,r.render)(e,t))}const o=window.wp.components,l=window.wp.data,c=window.wp.domReady,u=n.n(c)(),s=window.wp.i18n,d=window.lodash,m=window.nab.experiments,p=window.nab.utils;var v=function(){return v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v.apply(this,arguments)},g=function(e){var t=e.experimentId,n=e.postBeingEdited,a=y(t);return w(t)?r.createElement("span",{className:"spinner is-active"}):r.createElement(r.Fragment,null,r.createElement(f,{icon:a,experimentId:t}),r.createElement(b,{experimentId:t,postBeingEdited:n}))},f=function(e){var t=e.icon,n=e.experimentId,a=_(n),i=E(n);return r.createElement(o.PanelRow,{className:"nab-test-panel"},r.createElement("span",{className:"nab-test-panel__icon"},r.createElement(t,null)),r.createElement("a",{className:"nab-test-panel__name",href:i},a))},b=function(e){var t=e.experimentId,n=e.postBeingEdited,a=h(t);return a?r.createElement(o.PanelRow,{className:"nab-variants-panel"},r.createElement("h2",{className:"nab-variants-panel__title"},(0,s._x)("Variants","text","nelio-ab-testing")),a.map((function(e){var t=e.name,a=e.link,i=e.postId,o=e.index;return r.createElement("div",{className:"nab-alternative",key:i},r.createElement("span",{className:"nab-alternative__letter"},(0,p.getLetter)(o)),r.createElement("span",{className:"nab-alternative__name"},n!==i?r.createElement("a",{href:a},P(t,o)):r.createElement("strong",null,P(t,o))))}))):null},_=function(e){return(0,l.useSelect)((function(t){var n;return(null===(n=t(a.STORE_NAME).getExperiment(e))||void 0===n?void 0:n.name)||(0,s._x)("Unnamed Test","text","nelio-ab-testing")}))},E=function(e){return(0,l.useSelect)((function(t){var n;return(null===(n=t(a.STORE_NAME).getExperiment(e))||void 0===n?void 0:n.links.edit)||""}))},h=function(e){return(0,l.useSelect)((function(t){var n;return(0,d.map)(null===(n=t(a.STORE_NAME).getExperiment(e))||void 0===n?void 0:n.alternatives,(function(e,t){return{index:t,postId:x(e)?e.attributes.postId:0,name:S(e)?e.attributes.name:"",link:e.links.edit}}))}))},w=function(e){return(0,l.useSelect)((function(t){return!t(a.STORE_NAME).hasFinishedResolution("getExperiment",[e])}))},y=function(e){return(0,l.useSelect)((function(t){var n,i,o,l,c=t(a.STORE_NAME).getExperiment,u=t(m.STORE_NAME).getExperimentTypes,s=null!==(i=null===(n=c(e))||void 0===n?void 0:n.type)&&void 0!==i?i:"";return null!==(l=null===(o=u()[s])||void 0===o?void 0:o.icon)&&void 0!==l?l:function(){return r.createElement(r.Fragment,null)}}))},x=function(e){return!!e.attributes.postId},S=function(e){return!!e.attributes.name},P=function(e,t){return e||(0===t?(0,s._x)("Control Version","text","nelio-ab-testing"):(0,s.sprintf)(/* translators: a letter, such as A, B, or C */ /* translators: a letter, such as A, B, or C */
(0,s._x)("Variant %s","text","nelio-ab-testing"),(0,p.getLetter)(t)))};const O=window.wp.mediaUtils,N=window.nab.components;var C=function(){return C=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},C.apply(this,arguments)},I=function(e){var t=e.originalPrice,n=(0,r.useState)(e.regularPrice),a=n[0],i=n[1],o=(0,r.useState)(e.salePrice),l=o[0],c=o[1];return r.createElement("div",{className:"nab-product-data"},r.createElement(M,{originalPrice:t,regularPrice:a,salePrice:l,onRegularPriceChange:i,onSalePriceChange:c}),r.createElement(A,{name:"nab_regular_price",value:a}),r.createElement(A,{name:"nab_sale_price",value:l}))},T=function(e){return r.createElement("div",{className:"nab-product-data"},e.variations.map((function(e){return r.createElement(k,{key:e.id,data:e})})))},k=function(e){var t=e.data,n=t.id,a=t.name,i=t.originalPrice,l=(0,r.useState)(t.imageId),c=l[0],u=l[1],d=(0,r.useState)(t.regularPrice),m=d[0],p=d[1],v=(0,r.useState)(t.salePrice),g=v[0],f=v[1],b=(0,r.useState)(t.description),_=b[0],E=b[1];return r.createElement("div",{className:"nab-product-data__variation"},r.createElement("div",{className:"nab-product-data__variation-name"},r.createElement("strong",null,"#",n)," ",a),r.createElement("div",{className:"nab-product-data__variation-data"},r.createElement(R,{imageId:c,onImageIdChange:u}),r.createElement(M,{originalPrice:i,regularPrice:m,salePrice:g,onRegularPriceChange:p,onSalePriceChange:f}),r.createElement(A,{name:"nab_variation_data[".concat(n,"]"),value:{imageId:c,regularPrice:m,salePrice:g,description:_}})),r.createElement("div",{className:"nab-product-data__variation-description"},r.createElement(o.TextareaControl,{label:(0,s._x)("Description","text","nelio-ab-testing"),value:_,onChange:E})))},M=function(e){var t=e.originalPrice,n=e.regularPrice,a=e.salePrice,i=e.onRegularPriceChange,l=e.onSalePriceChange,c=B(),u=F(),d=function(e){return e.replace(".",c)},m=function(e){return e.replace(c,".").replace(/[^0-9.]/g,"").replace(/\./g,"#").replace("#",".").replace(/#/g,"")};return r.createElement("div",{className:"nab-product-data__pricing"},r.createElement(o.TextControl,{label:(0,s.sprintf)(/* translators: currency */ /* translators: currency */
(0,s._x)("Regular price (%s)","text","nelio-ab-testing"),u),value:d(n),placeholder:d(t),onChange:function(e){return i(m(e))}}),r.createElement(o.TextControl,{label:(0,s.sprintf)(/* translators: currency */ /* translators: currency */
(0,s._x)("Sale price (%s)","text","nelio-ab-testing"),u),value:d(a),onChange:function(e){return l(m(e))}}))},R=function(e){var t=e.imageId,n=e.onImageIdChange,i=z(t),c=(0,l.useDispatch)(a.STORE_NAME).receiveMediaUrl;return r.createElement("div",{className:"nab-product-data__variation-image-wrapper"},t?r.createElement(N.Tooltip,{text:(0,s._x)("Click to remove featured image","user","nelio-ab-testing")},r.createElement(o.Button,{className:"nab-product-data__variation-image-action nab-product-data__variation-image-action--is-remove",onClick:function(){return n(0)}},r.createElement(j,{src:i}))):r.createElement(O.MediaUpload,{title:(0,s._x)("Alternative Featured Image","text","nelio-ab-testing"),allowedTypes:["image"],value:t,onSelect:function(e){var t=e.id,a=e.url;"string"==typeof a&&(c(t,a),n(t))},render:function(e){var t=e.open;return r.createElement(N.Tooltip,{text:(0,s._x)("Click to set a featured image","user","nelio-ab-testing")},r.createElement(o.Button,{className:"nab-product-data__variation-image-action nab-product-data__variation-image-action--is-set",onClick:t},r.createElement(j,{src:i})))}}))},j=function(e){var t=e.src;return t?r.createElement("img",{className:"nab-product-data__variation-image",alt:(0,s._x)("Featured Image","text","nelio-ab-testing"),src:t}):r.createElement(N.FancyIcon,{className:"nab-product-data__variation-image"})},A=function(e){var t=e.name,n=e.value;return"string"==typeof n?r.createElement("input",{type:"hidden",name:t,value:n}):r.createElement(r.Fragment,null,Object.keys(n).map((function(e){return r.createElement("input",{type:"hidden",key:e,name:"".concat(t,"[").concat(e,"]"),value:n[e]})})))},B=function(){return(0,l.useSelect)((function(e){return e(a.STORE_NAME).getECommerceSetting("woocommerce","decimalSeparator")}))},F=function(){return(0,l.useSelect)((function(e){return e(a.STORE_NAME).getECommerceSetting("woocommerce","currencySymbol")}))},z=function(e){return(0,l.useSelect)((function(t){return t(a.STORE_NAME).getMediaUrl(e)}))};const U=window.jQuery;var D=n.n(U);function L(){var e,t=D()("#product_image_gallery"),n=D()("#product_images_container").find("ul.product_images");D()(".add_product_images").on("click","a",(function(a){var r=D()(this);a.preventDefault(),e||(e=wp.media.frames.product_gallery=wp.media({title:r.data("choose"),button:{text:r.data("update")},states:[new wp.media.controller.Library({title:r.data("choose"),filterable:"all",multiple:!0})]})).on("select",(function(){var a=e.state().get("selection"),i=t.val();a.map((function(e){if((e=e.toJSON()).id){i=i?i+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;n.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+r.data("delete")+'">'+r.data("text")+"</a></li></ul></li>")}})),t.val(i)})),e.open()})),n.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(){var e="";D()("#product_images_container").find("ul li.image").css("cursor","default").each((function(){var t=D()(this).attr("data-attachment_id");e=e+t+","})),t.val(e)}}),D()("#product_images_container").on("click","a.delete",(function(){D()(this).closest("li.image").remove();var e="";return D()("#product_images_container").find("ul li.image").css("cursor","default").each((function(){var t=D()(this).attr("data-attachment_id");e=e+t+","})),t.val(e),D()("#tiptip_holder").removeAttr("style"),D()("#tiptip_arrow").removeAttr("style"),!1}))}var V,G=function(){return G=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},G.apply(this,arguments)};window.nab=G(G({},(V=window)&&"object"==typeof V&&"nab"in V?window.nab:{}),{initExperimentSummary:function(e){u((function(){var t=document.getElementById("nab-experiment-summary");t&&i(r.createElement(g,v({},e)),t)}))},initProductDataMetabox:function(e){u((function(){var t=document.getElementById("nab-product-data-root");t&&i("regular"===e.type?r.createElement(I,C({},e)):r.createElement(T,C({},e)),t)}))},initProductGalleryMetabox:function(){u(L)}})}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,r,i)=>{if(!n){var o=1/0;for(s=0;s<e.length;s++){for(var[n,r,i]=e[s],l=!0,c=0;c<n.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(l=!1,i<o&&(o=i));if(l){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={2228:0,8571:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[o,l,c]=n,u=0;if(o.some((t=>0!==e[t]))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(c)var s=c(a)}for(t&&t(n);u<o.length;u++)i=o[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(s)},n=globalThis.webpackChunknab=globalThis.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[8571],(()=>a(7400)));r=a.O(r);var i=nab="undefined"==typeof nab?{}:nab;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();