(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{data:()=>r});var n={};e.r(n),e.d(n,{areUniqueResultsAvailable:()=>we,areUniqueResultsVisible:()=>Te,canLimitSiteQuota:()=>re,getActivePlugins:()=>X,getAdminUrl:()=>ne,getAlternativePageViews:()=>fe,getAlternativeResultsInExperiment:()=>le,getConversionRatesOfAlternativesInGoal:()=>ye,getConversions:()=>be,getCurrency:()=>R,getDaysRunning:()=>me,getDefaultGoal:()=>A,getECommercePlugin:()=>P,getECommerceSetting:()=>se,getEntityRecord:()=>S,getExperiment:()=>O,getExperimentAttribute:()=>C,getExperimentResults:()=>ue,getExperimentResultsStatus:()=>xe,getKindEntities:()=>w,getMediaUrl:()=>U,getMenu:()=>J,getPageAttribute:()=>k,getPageViews:()=>de,getPluginSetting:()=>oe,getProducts:()=>I,getQuota:()=>Se,getResultsOfAlternatives:()=>_e,getRevenuesOfAlternativesInGoal:()=>he,getSubscriptionId:()=>j,getTemplateContexts:()=>Z,getTemplates:()=>ee,getThemes:()=>te,getToday:()=>K,getTotalPageViews:()=>ge,getTotalRevenue:()=>pe,getUniquePageViews:()=>ve,getWinnerAlternative:()=>Ee,getWinnersInExperiment:()=>ce,hasCapability:()=>ie,hasMenus:()=>z,isLocked:()=>D,isSubscribedTo:()=>ae});var i={};e.r(i),e.d(i,{changeLastAppliedAlternative:()=>Ae,lock:()=>De,receiveECommerceSettings:()=>Ge,receiveEntityRecords:()=>Ce,receiveExperiment:()=>Pe,receiveExperimentResult:()=>Ve,receiveFSCurrency:()=>Re,receiveFSProducts:()=>Ie,receiveFSSubscriptionId:()=>je,receiveKindEntitiesQuery:()=>Oe,receiveMediaUrl:()=>Ue,receiveMenus:()=>qe,receivePluginSettings:()=>Qe,receivePlugins:()=>$e,receiveSiteQuota:()=>He,receiveTemplateContexts:()=>Ne,receiveTemplates:()=>Be,receiveThemes:()=>Fe,setPageAttribute:()=>ke,setToday:()=>Me,unlock:()=>Le});var o={};e.r(o),e.d(o,{applyAlternative:()=>tt,pauseExperiment:()=>et,purchaseQuota:()=>st,setPublicResultStatus:()=>nt,stopExperiment:()=>Ze});var s={};e.r(s),e.d(s,{getActivePlugins:()=>St,getAlternativePageViews:()=>yt,getConversionRatesOfAlternativesInGoal:()=>Tt,getCurrency:()=>vt,getDaysRunning:()=>ht,getEntityRecord:()=>ut,getExperiment:()=>lt,getExperimentResults:()=>xt,getExperimentResultsStatus:()=>_t,getKindEntities:()=>at,getMediaUrl:()=>pt,getMenu:()=>Ct,getPageViews:()=>Et,getProducts:()=>gt,getQuota:()=>jt,getSubscriptionId:()=>ft,getTemplateContexts:()=>At,getTemplates:()=>Pt,getThemes:()=>Rt,hasMenus:()=>Ot});var r={};e.r(r),e.d(r,{store:()=>kt,useAdminUrl:()=>Mt,useExperimentAttribute:()=>Dt,usePageAttribute:()=>Lt,usePluginSetting:()=>Vt});const a=window.wp.data;function u(e,t){return(0,a.useSelect)(e,t)}function c(e){return(0,a.resolveSelect)(e)}const l=window.nab.date,d=window.lodash,g={config:[],data:{}},v={},f={currency:"USD",products:[],subscriptionId:""},b={},p={isLocked:!1,sidebarDimensions:{top:0,height:"100vh",applyFix:!0}},m={},x={today:"2013-01-01",menus:{},nelio:{adminUrl:"/wp-admin/",apiUrl:"",areAutoTutorialsEnabled:!0,areSubscriptionControlsDisabled:!1,capabilities:[],goalTracking:"all-pages",homeUrl:"/",isCookieTestingEnabled:!1,maxCombinations:24,minConfidence:95,minSampleSize:100,segmentEvaluation:"site",siteId:"",subscription:!1,themeSupport:{menus:!1,widgets:!1}},plugins:[],templateContexts:{},templates:{},themes:{},ecommerce:{woocommerce:{currency:"USD",currencyPosition:"before",currencySymbol:"$",decimalSeparator:".",numberOfDecimals:2,orderStatuses:[],thousandsSeparator:","},edd:{currency:"USD",currencyPosition:"before",currencySymbol:"$",decimalSeparator:".",numberOfDecimals:2,orderStatuses:[],thousandsSeparator:","}}},E=window.nab.utils;function y(e){const t=(0,E.createAlternative)("control"),n=(0,E.createAlternative)();return e?"control"!==e[0].id?[t,...e]:1===e.length?[e[0],n]:e:[t,n]}const h=window.wp.i18n,_={"Accordion Content":(0,h._x)("Accordion Content","text","nelio-ab-testing"),"Accordion Toggle":(0,h._x)("Accordion Toggle","text","nelio-ab-testing"),"Alert Division":(0,h._x)("Alert Division","text","nelio-ab-testing"),"All Elements":(0,h._x)("All Elements","text","nelio-ab-testing"),"Allowed Tags Section":(0,h._x)("Allowed Tags Section","text","nelio-ab-testing"),Article:(0,h._x)("Article","text","nelio-ab-testing"),"Block Quote":(0,h._x)("Block Quote","text","nelio-ab-testing"),"Body Of Table":(0,h._x)("Body Of Table","text","nelio-ab-testing"),Body:(0,h._x)("Body","text","nelio-ab-testing"),"Bold Tag":(0,h._x)("Bold Tag","text","nelio-ab-testing"),Button:(0,h._x)("Button","text","nelio-ab-testing"),"Caption Of table":(0,h._x)("Caption Of table","text","nelio-ab-testing"),"Centred block":(0,h._x)("Centred block","text","nelio-ab-testing"),"Citation Tag":(0,h._x)("Citation Tag","text","nelio-ab-testing"),"Code Tag":(0,h._x)("Code Tag","text","nelio-ab-testing"),
/* translators: %d is the number of the column */
"Column %d/12":(0,h._x)("Column %d/12","text","nelio-ab-testing"),"Comment Form":(0,h._x)("Comment Form","text","nelio-ab-testing"),"Comment Reply Title":(0,h._x)("Comment Reply Title","text","nelio-ab-testing"),"Comments Link Division":(0,h._x)("Comments Link Division","text","nelio-ab-testing"),"Content Division":(0,h._x)("Content Division","text","nelio-ab-testing"),"Definition description":(0,h._x)("Definition description","text","nelio-ab-testing"),"Definition list":(0,h._x)("Definition list","text","nelio-ab-testing"),"Definition term":(0,h._x)("Definition term","text","nelio-ab-testing"),Division:(0,h._x)("Division","text","nelio-ab-testing"),"Edit Link":(0,h._x)("Edit Link","text","nelio-ab-testing"),"Entry Content":(0,h._x)("Entry Content","text","nelio-ab-testing"),"Entry Footer":(0,h._x)("Entry Footer","text","nelio-ab-testing"),"Entry Header":(0,h._x)("Entry Header","text","nelio-ab-testing"),"Entry Time":(0,h._x)("Entry Time","text","nelio-ab-testing"),"Font Icon":(0,h._x)("Font Icon","text","nelio-ab-testing"),"Foot Of Table":(0,h._x)("Foot Of Table","text","nelio-ab-testing"),Footer:(0,h._x)("Footer","text","nelio-ab-testing"),"Form Division":(0,h._x)("Form Division","text","nelio-ab-testing"),"Head Of Table":(0,h._x)("Head Of Table","text","nelio-ab-testing"),Header:(0,h._x)("Header","text","nelio-ab-testing"),Heading:(0,h._x)("Heading","text","nelio-ab-testing"),"Horizontal Rule":(0,h._x)("Horizontal Rule","text","nelio-ab-testing"),Image:(0,h._x)("Image","text","nelio-ab-testing"),Input:(0,h._x)("Input","text","nelio-ab-testing"),"Italic Tag":(0,h._x)("Italic Tag","text","nelio-ab-testing"),Label:(0,h._x)("Label","text","nelio-ab-testing"),Lead:(0,h._x)("Lead","text","nelio-ab-testing"),"Line Break":(0,h._x)("Line Break","text","nelio-ab-testing"),Link:(0,h._x)("Link","text","nelio-ab-testing"),"List Item":(0,h._x)("List Item","text","nelio-ab-testing"),List:(0,h._x)("List","text","nelio-ab-testing"),"Login Info":(0,h._x)("Login Info","text","nelio-ab-testing"),Logo:(0,h._x)("Logo","text","nelio-ab-testing"),"Menu Item":(0,h._x)("Menu Item","text","nelio-ab-testing"),"Menu Link":(0,h._x)("Menu Link","text","nelio-ab-testing"),Menu:(0,h._x)("Menu","text","nelio-ab-testing"),Navigation:(0,h._x)("Navigation","text","nelio-ab-testing"),Paragraph:(0,h._x)("Paragraph","text","nelio-ab-testing"),"Post Division":(0,h._x)("Post Division","text","nelio-ab-testing"),"Post Edit Link":(0,h._x)("Post Edit Link","text","nelio-ab-testing"),"Post Meta Division":(0,h._x)("Post Meta Division","text","nelio-ab-testing"),"Post Thumbnail":(0,h._x)("Post Thumbnail","text","nelio-ab-testing"),"Post Title":(0,h._x)("Post Title","text","nelio-ab-testing"),Preformatted:(0,h._x)("Preformatted","text","nelio-ab-testing"),Quotation:(0,h._x)("Quotation","text","nelio-ab-testing"),Root:(0,h._x)("Root","text","nelio-ab-testing"),Row:(0,h._x)("Row","text","nelio-ab-testing"),"Show More Link":(0,h._x)("Show More Link","text","nelio-ab-testing"),"Site Description":(0,h._x)("Site Description","text","nelio-ab-testing"),"Small Tag":(0,h._x)("Small Tag","text","nelio-ab-testing"),"Span Tag":(0,h._x)("Span Tag","text","nelio-ab-testing"),"Strong Tag":(0,h._x)("Strong Tag","text","nelio-ab-testing"),"Sub Menu":(0,h._x)("Sub Menu","text","nelio-ab-testing"),"Submit Button":(0,h._x)("Submit Button","text","nelio-ab-testing"),"Table Data":(0,h._x)("Table Data","text","nelio-ab-testing"),"Table Row":(0,h._x)("Table Row","text","nelio-ab-testing"),Table:(0,h._x)("Table","text","nelio-ab-testing"),"Tag Cloud":(0,h._x)("Tag Cloud","text","nelio-ab-testing"),"Text Area":(0,h._x)("Text Area","text","nelio-ab-testing"),"Thumbnail Image":(0,h._x)("Thumbnail Image","text","nelio-ab-testing"),Thumbnail:(0,h._x)("Thumbnail","text","nelio-ab-testing"),"Time Tag":(0,h._x)("Time Tag","text","nelio-ab-testing"),"Underline text tag":(0,h._x)("Underline text tag","text","nelio-ab-testing"),Well:(0,h._x)("Well","text","nelio-ab-testing"),"Widget Title":(0,h._x)("Widget Title","text","nelio-ab-testing"),Widget:(0,h._x)("Widget","text","nelio-ab-testing"),Wrapper:(0,h._x)("Wrapper","text","nelio-ab-testing")},T=(0,a.combineReducers)({entities:function(e=g,t){var n;return null!==(n=function(e,t){switch(t.type){case"RECEIVE_TYPE_QUERY":return Object.assign(Object.assign({},e),{config:t.kindEntities});case"RECEIVE_ITEMS":return Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{[t.kind]:Object.assign(Object.assign({},e.data[t.kind]),(0,d.keyBy)(t.items,"id"))})})}}(e,t))&&void 0!==n?n:e},experiments:function(e=v,t){var n;return null!==(n=function(e,t){switch(t.type){case"RECEIVE_EXPERIMENT":return Object.assign(Object.assign({},e),{[t.key]:Object.assign(Object.assign({},t.experiment),{alternatives:y(t.experiment.alternatives),goals:t.experiment.goals||[(0,E.createGoal)()],segments:t.experiment.segments||[]})});case"CHANGE_LAST_APPLIED_ALTERNATIVE":const i=e[t.experimentId];return i?Object.assign(Object.assign({},e),{[t.experimentId]:Object.assign(Object.assign({},i),{alternatives:i.alternatives.map((n=t.alternativeId,function(e){return Object.assign(Object.assign({},e),{isLastApplied:e.id===n})}))})}):e}var n}(e,t))&&void 0!==n?n:e},fastspring:function(e=f,t){var n;return null!==(n=function(e,t){switch(t.type){case"RECEIVE_FS_CURRENCY":return Object.assign(Object.assign({},e),{currency:t.currency});case"RECEIVE_FS_PRODUCTS":return Object.assign(Object.assign({},e),{products:t.products});case"RECEIVE_FS_SUBSCRIPTION_ID":return Object.assign(Object.assign({},e),{subscriptionId:t.subscriptionId})}}(e,t))&&void 0!==n?n:e},media:function(e=b,t){var n;return null!==(n=function(e,t){if("RECEIVE_MEDIA_URL"===t.type)return Object.assign(Object.assign({},e),{[t.id]:t.url})}(e,t))&&void 0!==n?n:e},page:function(e=p,t){var n;return null!==(n=function(e,t){switch(t.type){case"SET_PAGE_ATTRIBUTE":{const{name:n,value:i}=t;return n?"css-selector/cssSelectorFinderState"===n?void 0===i?Object.assign(Object.assign({},e),{[n]:void 0}):Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},i),{labels:_})}):Object.assign(Object.assign({},e),{[n]:i}):e}case"LOCK_UI":return Object.assign(Object.assign({},e),{isLocked:!0});case"UNLOCK_UI":return Object.assign(Object.assign({},e),{isLocked:!1})}}(e,t))&&void 0!==n?n:e},results:function(e=m,t){var n;return null!==(n=function(e,t){if("RECEIVE_RESULT"===t.type)return Object.assign(Object.assign({},e),{[t.key]:t.result})}(e,t))&&void 0!==n?n:e},settings:function(e=x,t){var n;return null!==(n=function(e,t){switch(t.type){case"SET_TODAY":return Object.assign(Object.assign({},e),{today:t.today});case"RECEIVE_MENUS":return Object.assign(Object.assign({},e),{menus:Object.assign(Object.assign({},e.menus),(0,d.keyBy)(t.menus,"id"))});case"RECEIVE_PLUGINS":return Object.assign(Object.assign({},e),{plugins:t.plugins||[]});case"RECEIVE_TEMPLATE_CONTEXTS":return Object.assign(Object.assign({},e),{templateContexts:t.templateContexts});case"RECEIVE_TEMPLATES":return Object.assign(Object.assign({},e),{templates:t.templates});case"RECEIVE_THEMES":return Object.assign(Object.assign({},e),{themes:(0,d.keyBy)(t.themes,"id")});case"RECEIVE_PLUGIN_SETTINGS":return Object.assign(Object.assign({},e),{nelio:t.settings});case"RECEIVE_ECOMMERCE_SETTINGS":return Object.assign(Object.assign({},e),{ecommerce:Object.assign(Object.assign({},e.ecommerce),{[t.ecommerce]:Object.assign(Object.assign({},t.settings),{orderStatuses:(0,d.sortBy)(t.settings.orderStatuses,"label")})})})}}(e,t))&&void 0!==n?n:e},siteQuota:function(e=undefined,t){var n;return null!==(n=function(e,t){if("RECEIVE_SITE_QUOTA"===t.type)return t.quota}(0,t))&&void 0!==n?n:e}});function w(e){return e.entities.config}function S(e,t,n){return(0,d.get)(e.entities.data,[t,n])}function O(e,t){return t?(0,d.get)(e.experiments,t):void 0}const C=function(e,t,n){const i=O(e,t);if(i)return i[n]};function A(e,t){const n=O(e,t);if(n)return n.goals[0]}function P(e,t,n){return function(e,t,n){var i,o;const s=O(e,t);if(!s)return!1;n=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id;const r=s.goals.find((e=>e.id===n));if(!r)return!1;const a=null!==(o=null==r?void 0:r.conversionActions)&&void 0!==o?o:[];return 0<a.length&&a.every((({type:e})=>"nab/wc-order"===e))}(e,t,n)?"woocommerce":function(e,t,n){var i,o;const s=O(e,t);if(!s)return!1;n=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id;const r=s.goals.find((e=>e.id===n));if(!r)return!1;const a=null!==(o=null==r?void 0:r.conversionActions)&&void 0!==o?o:[];return 0<a.length&&a.every((({type:e})=>"nab/edd-order"===e))}(e,t,n)?"edd":void 0}function R(e){return e.fastspring.currency}function I(e){return e.fastspring.products}function j(e){return e.fastspring.subscriptionId||void 0}function U(e,t){return e.media[t]}const k=function(e,t){return e.page[t]};function D(e){return k(e,"isLocked")}function L(e,t){const{segments:n}=t,i={results:{}};return(0,d.keyBy)(n.map(((n,o)=>{var s,r,a,u,c,l,d,g,v,f,b;return Object.assign(Object.assign({winners:V((null===(r=null===(s=e.segments)||void 0===s?void 0:s[`s${o+1}`])||void 0===r?void 0:r.results)||{},t.goals),wasEnoughData:M((null===(u=null===(a=e.segments)||void 0===a?void 0:a[`s${o+1}`])||void 0===u?void 0:u.results)||{},t.goals),alternatives:$((null===(c=e.segments)||void 0===c?void 0:c[`s${o+1}`])||i,t)},(null===(d=null===(l=e.segments)||void 0===l?void 0:l[`s${o+1}`])||void 0===d?void 0:d.uniqueResults)&&{winnersUnique:V((null===(v=null===(g=e.segments)||void 0===g?void 0:g[`s${o+1}`])||void 0===v?void 0:v.uniqueResults)||{},t.goals),wasEnoughDataUnique:M((null===(b=null===(f=e.segments)||void 0===f?void 0:f[`s${o+1}`])||void 0===b?void 0:b.uniqueResults)||{},t.goals)}),{id:n.id})})),"id")}function V(e,t){const n={},i=t.length;for(let o=0;o<i;++o){const i=t[o];if(!i)continue;const s=i.id,r=e[`g${o}`]||!1;r&&"win"===r.status&&(n[s]={alternative:r.winner,confidence:r.confidence})}return n}function M(e,t){const n={},i=t.length;for(let o=0;o<i;++o){const i=t[o];if(!i)continue;const s=i.id,r=e[`g${o}`];n[s]="low-data"!==(null==r?void 0:r.status)}return n}function $(e,t){const{alternatives:n}=t,i="finished"===t.status?(0,l.getDate)(t.endDate||""):new Date,o=(0,l.date)("Y-m-d",i);return Object.assign({control:q({},"control","","",[])},(0,d.keyBy)(n.map(((n,i)=>q(e[`a${i}`]||{},n.id,t.startDate,o,t.goals))),"id"))}function q(e,t,n,i,o){return{id:t,visits:e.v||0,values:N(e.cv,o),conversions:B(e.c,o),conversionRates:F(e.cr,o),improvementFactors:Q(e.i,o),uniqueVisits:e.uv||0,uniqueValues:N(e.ucv,o),uniqueConversions:B(e.uc,o),uniqueConversionRates:F(e.ucr,o),uniqueImprovementFactors:Q(e.ui,o),timeline:G(e.t,n,i,o)}}function N(e,t){const n={},i=t.length;for(let o=0;o<i;++o){const i=t[o];i&&(n[i.id]=(null==e?void 0:e[`g${o}`])||0)}return n}function B(e,t){const n={},i=t.length;for(let o=0;o<i;++o){const i=t[o];i&&(n[i.id]=(null==e?void 0:e[`g${o}`])||0)}return n}function F(e,t){const n={},i=t.length;for(let o=0;o<i;++o){const i=t[o];if(!i)continue;const s=i.id,r=(null==e?void 0:e[`g${o}`])||0;n[s]=Math.round(100*r)/100||0}return n}function Q(e,t){const n={},i=t.length;for(let o=0;o<i;++o){const i=t[o];if(!i)continue;const s=i.id,r=(null==e?void 0:e[`g${o}`])||0;n[s]=Math.round(100*r)/100||0}return n}function G(e,t,n,i){const o=[],s=(0,l.getDate)(t);let r;do{r=(0,l.format)("Y-m-d",s);const t=Y(H(e,r),i);o.push(t),s.setDate(s.getDate()+1)}while(n>r);return o}function H(e,t){const n=(0,d.find)(e,{d:t})||{};return Object.assign(Object.assign({v:0},n),{d:t})}function Y(e,t){const n={visits:e.v||0,date:e.d,conversions:{},values:{},uniqueVisits:e.uv||0,uniqueConversions:{},uniqueValues:{}},i=t.length;for(let o=0;o<i;++o){const i=t[o];if(!i)continue;const s=i.id;n.conversions[s]=e[`g${o}`]||0,n.values[s]=e[`val${o}`]||0,n.uniqueConversions[s]=e[`ug${o}`]||0,n.uniqueValues[s]=e[`uval${o}`]||0}return n}const W=window.wp.url;function K(e){return e.settings.today}function X(e){return e.settings.plugins}function z(e){return!!(0,d.keys)(e.settings.menus).length}function J(e,t){return e.settings.menus[t]}function Z(e){return e.settings.templateContexts}function ee(e){return e.settings.templates}function te(e){return(0,d.values)(e.settings.themes).filter(E.isDefined)}function ne(e,t,n){const i=oe(e,"adminUrl");return(0,W.addQueryArgs)(`${i}${t}`,n)}function ie(e,t){return e.settings.nelio.capabilities.includes(t)}const oe=function(e,t){return e.settings.nelio[t]},se=function(e,t,n){return e.settings.ecommerce[t][n]};function re(e){return ae(e,"professional","or-above")}function ae(e,t,n="or-above"){const i=oe(e,"subscription");if(!i)return!1;const o=["basic","professional","enterprise"],s=o.indexOf(t),r=o.indexOf(i);return-1!==s&&-1!==r&&("or-above"!==n?s===r:r>=s)}function ue(e,t){return t?e.results[t]:void 0}function ce(e,t){var n,i;const o=ue(e,t);if(!o)return;const s=Te(e,t),r=null!==(n=k(e,"editor/activeSegment"))&&void 0!==n?n:"default",a=s?"winnersUnique":"winners";return"default"===r?o[a]:null===(i=o.segments[r])||void 0===i?void 0:i[a]}function le(e,t){var n,i;const o=ue(e,t);if(!o)return;const s=null!==(n=k(e,"editor/activeSegment"))&&void 0!==n?n:"default";return"default"===s?(0,d.values)(o.alternatives):(0,d.values)(null===(i=o.segments[s])||void 0===i?void 0:i.alternatives)}function de(e,t){return Te(e,t)?ve(e,t):ge(e,t)}function ge(e,t){var n,i;const o=ue(e,t);if(!(null==o?void 0:o.alternatives))return 0;const s=null!==(n=k(e,"editor/activeSegment"))&&void 0!==n?n:"default";return("default"===s?(0,d.values)(o.alternatives):(0,d.values)(null===(i=o.segments[s])||void 0===i?void 0:i.alternatives)).reduce(((e,t)=>e+t.visits),0)}function ve(e,t){var n,i;const o=ue(e,t);if(!(null==o?void 0:o.alternatives))return 0;const s=null!==(n=k(e,"editor/activeSegment"))&&void 0!==n?n:"default";return("default"===s?(0,d.values)(o.alternatives):(0,d.values)(null===(i=o.segments[s])||void 0===i?void 0:i.alternatives)).reduce(((e,t)=>e+t.uniqueVisits),0)}function fe(e,t,n){var i,o;const s=ue(e,t);if(!(null==s?void 0:s.alternatives))return 0;const r=null!==(i=k(e,"editor/activeSegment"))&&void 0!==i?i:"default",a="default"===r?s.alternatives[n]:null===(o=s.segments[r])||void 0===o?void 0:o.alternatives[n];return a?Te(e,t)?a.uniqueVisits:a.visits:0}function be(e,t,n){var i,o,s,r;const a=ue(e,t);if(!a||!a.alternatives)return 0;const u=null!==(o=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id)&&void 0!==o?o:"";if(!u)return 0;const c=Te(e,t),l=null!==(s=k(e,"editor/activeSegment"))&&void 0!==s?s:"default";return("default"===l?(0,d.values)(a.alternatives):(0,d.values)(null===(r=a.segments[l])||void 0===r?void 0:r.alternatives)).reduce(((e,t)=>e+((c?t.uniqueConversions[u]:t.conversions[u])||0)),0)}function pe(e,t,n){var i,o,s,r;const a=ue(e,t);if(!a||!a.alternatives)return 0;const u=null!==(o=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id)&&void 0!==o?o:"";if(!u)return 0;const c=Te(e,t),l=null!==(s=k(e,"editor/activeSegment"))&&void 0!==s?s:"default";return("default"===l?(0,d.values)(a.alternatives):(0,d.values)(null===(r=a.segments[l])||void 0===r?void 0:r.alternatives)).reduce(((e,t)=>{var n;return e+(null!==(n=c?t.uniqueValues[u]:t.values[u])&&void 0!==n?n:0)}),0)}function me(e,t){const n=O(e,t);if(!n)return 0;const i=n.startDate;let o="";return"finished"===n.status&&(o=n.endDate||""),function(e,t){"string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t));const n=new Date;e&&!isNaN(e.getTime())||(e=n),t&&!isNaN(t.getTime())||(t=n);const i=Math.abs(t.getTime()-e.getTime());return Math.ceil(i/864e5)}(i,o)}function xe(e,t,n){var i,o,s,r,a,u;const c=ue(e,t);if(!c)return;const l=null!==(o=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id)&&void 0!==o?o:"";if(!l)return;const d=oe(e,"minConfidence");if(!d)return;const g=Te(e,t),v=null!==(s=k(e,"editor/activeSegment"))&&void 0!==s?s:"default",f=g?"winnersUnique":"winners",b="default"===v?null===(r=c[f])||void 0===r?void 0:r[l]:null===(u=null===(a=c.segments[v])||void 0===a?void 0:a[f])||void 0===u?void 0:u[l];return b?b.confidence>=d?"winner":"possible-winner":"testing"}function Ee(e,t,n){var i,o,s,r,a,u;const c=ue(e,t);if(!c)return;const l=null!==(o=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id)&&void 0!==o?o:"";if(!l)return;const d=oe(e,"minConfidence");if(!d)return;const g=Te(e,t),v=null!==(s=k(e,"editor/activeSegment"))&&void 0!==s?s:"default",f=g?"winnersUnique":"winners",b="default"===v?null===(r=c[f])||void 0===r?void 0:r[l]:null===(u=null===(a=c.segments[v])||void 0===a?void 0:a[f])||void 0===u?void 0:u[l];return!b||b.confidence<d?void 0:b.alternative}function ye(e,t,n){var i,o,s;const r=ue(e,t);if(!r)return;const a=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id;if(!a)return;const u=Te(e,t),c=null!==(o=k(e,"editor/activeSegment"))&&void 0!==o?o:"default";return("default"===c?(0,d.values)(r.alternatives):(0,d.values)(null===(s=r.segments[c])||void 0===s?void 0:s.alternatives)).map((e=>u?e.uniqueConversionRates[a]||0:e.conversionRates[a]||0))}function he(e,t,n){var i,o,s,r;const a=ue(e,t);if(!a)return;const u=null!==(o=null!=n?n:null===(i=A(e,t))||void 0===i?void 0:i.id)&&void 0!==o?o:"";if(!u)return;const c=Te(e,t),l=null!==(s=k(e,"editor/activeSegment"))&&void 0!==s?s:"default";return("default"===l?(0,d.values)(a.alternatives):(0,d.values)(null===(r=a.segments[l])||void 0===r?void 0:r.alternatives)).map((e=>c?e.uniqueValues[u]||0:e.values[u]||0))}function _e(e,t){var n,i;const o=ue(e,t);if(!o)return;const s=null!==(n=k(e,"editor/activeSegment"))&&void 0!==n?n:"default";return"default"===s?o.alternatives:null===(i=o.segments[s])||void 0===i?void 0:i.alternatives}function Te(e,t){var n;return null!==(n=k(e,"results/shouldShowUniqueResults"))&&void 0!==n&&n&&we(e,t)}function we(e,t){const n=ue(e,t);return(0,d.values)(null==n?void 0:n.alternatives).some((e=>e.uniqueVisits>0))}function Se(e){return e.siteQuota}function Oe(e){return{type:"RECEIVE_TYPE_QUERY",kindEntities:(0,d.castArray)(e)}}function Ce(e,t){return{type:"RECEIVE_ITEMS",items:(0,d.castArray)(t),kind:e}}function Ae(e,t){return{type:"CHANGE_LAST_APPLIED_ALTERNATIVE",experimentId:e,alternativeId:t}}function Pe(e,t){return{type:"RECEIVE_EXPERIMENT",key:e,experiment:t}}function Re(e){return{type:"RECEIVE_FS_CURRENCY",currency:e}}function Ie(e){return{type:"RECEIVE_FS_PRODUCTS",products:(0,d.castArray)(e)}}function je(e){return{type:"RECEIVE_FS_SUBSCRIPTION_ID",subscriptionId:e}}function Ue(e,t){return{type:"RECEIVE_MEDIA_URL",id:e,url:t}}function ke(e,t){return{type:"SET_PAGE_ATTRIBUTE",name:e,value:t}}function De(){return{type:"LOCK_UI"}}function Le(){return{type:"UNLOCK_UI"}}function Ve(e,t){return{type:"RECEIVE_RESULT",key:e,result:t}}function Me(e){return{type:"SET_TODAY",today:e}}function $e(e){return{type:"RECEIVE_PLUGINS",plugins:(0,d.castArray)(e)}}function qe(e){return{type:"RECEIVE_MENUS",menus:(0,d.castArray)(e)}}function Ne(e){return{type:"RECEIVE_TEMPLATE_CONTEXTS",templateContexts:e}}function Be(e){return{type:"RECEIVE_TEMPLATES",templates:e}}function Fe(e){return{type:"RECEIVE_THEMES",themes:(0,d.castArray)(e)}}function Qe(e){return{type:"RECEIVE_PLUGIN_SETTINGS",settings:e}}function Ge(e,t){return{type:"RECEIVE_ECOMMERCE_SETTINGS",ecommerce:e,settings:t}}function He(e){return{type:"RECEIVE_SITE_QUOTA",quota:e}}const Ye=window.wp.apiFetch;var We=e.n(Ye);const Ke=window.wp.date,Xe=e=>{const{url:t,path:n}=e,i=(0,Ke.format)("YmjHi").substring(0,11)+"0";return We()(Object.assign(Object.assign(Object.assign({},e),t&&{url:ze(e)?(0,W.addQueryArgs)(t,{nabts:i}):t}),n&&{path:(0,W.addQueryArgs)(n,{nabts:i})}))},ze=e=>{var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")};var Je=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function Ze(){return Je(this,void 0,void 0,(function*(){const e=(0,a.select)(kt).getPageAttribute("editor/activeExperiment");if(!e)return;let t,n;yield(0,a.dispatch)(kt).setPageAttribute("editor/isExperimentBeingStopped",!0);try{if(t=yield c(kt).getExperiment(e),!t)return}catch(e){return void(yield(0,E.createErrorNotice)(e))}try{n=yield Xe({path:`/nab/v1/experiment/${e}/stop`,method:"PUT"})}catch(e){return yield(0,E.createErrorNotice)(e,(0,h._x)("Test can’t be stopped","text","nelio-ab-testing")),void(yield(0,a.dispatch)(kt).setPageAttribute("editor/isExperimentBeingStopped",!1))}const i=(0,d.keyBy)(n.alternatives||[],"id"),o=Object.assign(Object.assign({},n),{links:Object.assign(Object.assign({},n.links),t.links),alternatives:(t.alternatives||[]).map((e=>Object.assign(Object.assign({},e),{links:it(e,i[e.id])})))});yield(0,a.dispatch)(kt).receiveExperiment(t.id,o),yield(0,a.dispatch)(kt).setPageAttribute("editor/isExperimentBeingStopped",!1)}))}function et(){return Je(this,void 0,void 0,(function*(){const e=(0,a.select)(kt).getPageAttribute("editor/activeExperiment");if(e){yield(0,a.dispatch)(kt).setPageAttribute("editor/isExperimentBeingPaused",!0);try{yield Xe({path:`/nab/v1/experiment/${e}/pause`,method:"PUT"})}catch(e){return yield(0,E.createErrorNotice)(e,(0,h._x)("Test can’t be paused","text","nelio-ab-testing")),void(yield(0,a.dispatch)(kt).setPageAttribute("editor/isExperimentBeingPaused",!1))}window.location.href=(0,a.select)(kt).getAdminUrl("admin.php",{page:"nelio-ab-testing-experiment-edit",experiment:e})}}))}function tt(e){return Je(this,void 0,void 0,(function*(){const t=(0,a.select)(kt).getPageAttribute("editor/activeExperiment");if(!t)return;let n;yield(0,a.dispatch)(kt).setPageAttribute("editor/alternativeBeingApplied",e);try{n=yield Xe({path:`/nab/v1/experiment/${t}/apply/${e}`,method:"PUT"})}catch(e){return yield(0,E.createErrorNotice)(e,(0,h._x)("Alternative can’t be applied","text","nelio-ab-testing")),void(yield(0,a.dispatch)(kt).setPageAttribute("editor/alternativeBeingApplied",!1))}yield(0,a.dispatch)(kt).changeLastAppliedAlternative(n.id,e),yield(0,a.dispatch)(kt).setPageAttribute("editor/alternativeBeingApplied",!1)}))}function nt(e){return Je(this,void 0,void 0,(function*(){const t=(0,a.select)(kt).getPageAttribute("editor/activeExperiment");if(!t)return;yield(0,a.dispatch)(kt).setPageAttribute("isLocked",!0);let n=e;try{n=yield Xe({path:`/nab/v1/experiment/${t}/public-result-status`,method:"PUT",data:{status:e}})}catch(e){return yield(0,E.createErrorNotice)(e,(0,h._x)("Public result’s status can’t be changed","text","nelio-ab-testing")),void(yield(0,a.dispatch)(kt).setPageAttribute("isLocked",!1))}yield(0,a.dispatch)(kt).setPageAttribute("isLocked",!1),yield(0,a.dispatch)(kt).setPageAttribute("results/isReadOnlyActive",n)}))}function it(e,t){if(null==e?void 0:e.links)return(null==t?void 0:t.links)?Object.assign(Object.assign({},t.links),{heatmap:e.links.heatmap,preview:e.links.preview}):e.links}var ot=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function st(e,t){return ot(this,void 0,void 0,(function*(){const n=(0,a.select)(kt).getSubscriptionId();if(n)try{yield(0,a.dispatch)(kt).lock(),yield Xe({path:`/nab/v1/subscription/${n}/quota`,method:"POST",data:{quantity:e,currency:t}}),window.location.reload()}catch(e){yield(0,a.dispatch)(kt).unlock(),yield(0,E.createErrorNotice)(e)}}))}var rt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function at(){return rt(this,void 0,void 0,(function*(){try{const e=yield Xe({path:"/nab/v1/types"});yield(0,a.dispatch)(kt).receiveKindEntitiesQuery((0,d.values)(e))}catch(e){console.warn(e)}}))}function ut(e,t){return rt(this,void 0,void 0,(function*(){if(e&&t)try{const n=yield c(kt).getKindEntities();if(!(0,d.find)(n,{name:e}))return void console.warn(`Entity ${e} not found in`,n);const i=yield Xe({path:`/nab/v1/post/?id=${t}&type=${e}`});yield(0,a.dispatch)(kt).receiveEntityRecords(e,i)}catch(e){console.warn(e)}}))}var ct=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function lt(e){return ct(this,void 0,void 0,(function*(){try{const t=yield Xe({path:`/nab/v1/experiment/${e}`});yield(0,a.dispatch)(kt).receiveExperiment(e,t)}catch(t){const n=t instanceof Error?t.message:"unknown";console.warn(`Unable to retrieve experiment ${e}. Error: ${n}.`)}}))}var dt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function gt(){return dt(this,void 0,void 0,(function*(){try{const{currency:e,products:t,subscriptionId:n}=yield Xe({path:"/nab/v1/fastspring"});yield(0,a.dispatch)(kt).receiveFSCurrency(e),yield(0,a.dispatch)(kt).receiveFSProducts(t),yield(0,a.dispatch)(kt).receiveFSSubscriptionId(n)}catch(e){throw yield(0,E.createErrorNotice)(e,(0,h._x)("Error while retrieving NC products.","text","nelio-ab-testing")),e}}))}const vt=()=>dt(void 0,void 0,void 0,(function*(){yield c(kt).getProducts()})),ft=()=>dt(void 0,void 0,void 0,(function*(){yield c(kt).getProducts()}));var bt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function pt(e){return bt(this,void 0,void 0,(function*(){if(e)try{const t=yield Xe({path:`/wp/v2/media/${e}`});yield(0,a.dispatch)(kt).receiveMediaUrl(e,t.source_url)}catch(e){const t=e instanceof Error?e.message:"unknown";console.warn(`Error while retrieving media. Error: ${t}`)}}))}var mt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function xt(e){return mt(this,void 0,void 0,(function*(){try{const t=yield c(kt).getExperiment(e);if(!t)return;const n=function(e,t){return Object.assign({winners:V(e.results||{},t.goals),wasEnoughData:M(e.results||{},t.goals),alternatives:$(e,t),segments:L(e,t)},e.uniqueResults&&{winnersUnique:V(e.uniqueResults||{},t.goals),wasEnoughDataUnique:M(e.uniqueResults||{},t.goals)})}(yield Xe({path:`/nab/v1/experiment/${e}/result`}),t);yield(0,a.dispatch)(kt).receiveExperimentResult(e,n)}catch(t){yield(0,E.createErrorNotice)(t,(0,h.sprintf)(/* translators: test id */ /* translators: test id */
(0,h._x)("Unable to retrieve results in test %d.","text","nelio-ab-testing"),e))}}))}function Et(e){return mt(this,void 0,void 0,(function*(){yield c(kt).getExperimentResults(e)}))}function yt(e){return mt(this,void 0,void 0,(function*(){yield c(kt).getExperimentResults(e)}))}function ht(e){return mt(this,void 0,void 0,(function*(){yield c(kt).getExperimentResults(e)}))}function _t(e){return mt(this,void 0,void 0,(function*(){yield c(kt).getExperimentResults(e)}))}function Tt(e){return mt(this,void 0,void 0,(function*(){yield c(kt).getExperimentResults(e)}))}var wt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function St(){return wt(this,void 0,void 0,(function*(){try{const e=yield Xe({path:"/nab/v1/plugins"});yield(0,a.dispatch)(kt).receivePlugins(e)}catch(e){const t=e instanceof Error?e.message:"unknown";console.warn(`Unable to retrieve active plugins. Error: ${t}`)}}))}function Ot(){return wt(this,void 0,void 0,(function*(){try{const e=yield Xe({path:"/nab/v1/menu/search?query"});yield(0,a.dispatch)(kt).receiveMenus(e.results)}catch(e){const t=e instanceof Error?e.message:"unknown";console.warn(`Unable to check if site has menus. Error: ${t}`)}}))}function Ct(e){return wt(this,void 0,void 0,(function*(){try{const t=yield Xe({path:`/nab/v1/menu/${e}`});yield(0,a.dispatch)(kt).receiveMenus(t)}catch(t){const n=t instanceof Error?t.message:"unknown";console.warn(`Unable to retrieve menu ${e}. Error: ${n}`)}}))}function At(){return wt(this,void 0,void 0,(function*(){try{const e=yield Xe({path:(0,W.addQueryArgs)("/nab/v1/template-contexts")});yield(0,a.dispatch)(kt).receiveTemplateContexts(e.results)}catch(e){const t=e instanceof Error?e.message:"unknown";console.warn(`Unable to retrieve template contexts. Error: ${t}`)}}))}function Pt(){return wt(this,void 0,void 0,(function*(){try{const e=yield Xe({path:(0,W.addQueryArgs)("/nab/v1/templates")});yield(0,a.dispatch)(kt).receiveTemplates(e.results)}catch(e){const t=e instanceof Error?e.message:"unknown";console.warn(`Unable to retrieve templates. Error: ${t}`)}}))}function Rt(){return wt(this,void 0,void 0,(function*(){try{const e=yield Xe({path:"/nab/v1/themes"});yield(0,a.dispatch)(kt).receiveThemes(e.results)}catch(e){const t=e instanceof Error?e.message:"unknown";console.warn(`Unable to retrieve themes. Error: ${t}`)}}))}var It=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((i=i.apply(e,t||[])).next())}))};function jt(){return It(this,void 0,void 0,(function*(){try{const e=yield Xe({path:"/nab/v1/site/quota"});yield(0,a.dispatch)(kt).receiveSiteQuota(e)}catch(e){throw yield(0,E.createErrorNotice)((0,h._x)("Unable to retrieve quota.","text","nelio-ab-testing")),e}}))}const Ut=Object.assign(Object.assign({},i),o),kt=(0,a.createReduxStore)("nab/data",{reducer:T,controls:a.controls,actions:Ut,selectors:n,resolvers:s});function Dt(e,t){return u((n=>{var i;const{getPageAttribute:o,getExperimentAttribute:s}=n(kt),r=o("editor/activeExperiment");return r&&null!==(i=s(r,e))&&void 0!==i?i:t}))}function Lt(e,t){var n;const i=null!==(n=u((t=>t(kt).getPageAttribute(e))))&&void 0!==n?n:t,{setPageAttribute:o}=(0,a.useDispatch)(kt);return[i,t=>o(e,t)]}function Vt(e){return u((t=>t(kt).getPluginSetting(e)))}!function(e){(0,a.register)(e)}(kt),(0,a.select)(kt).getPluginSetting("siteId"),(0,a.dispatch)(kt).setToday((0,l.format)("Y-m-d",new Date)),function(e,t){var n;(0,a.dispatch)(kt).setPageAttribute(e,(0,E.getValue)(e,t));let i=null!==(n=(0,a.select)(kt).getPageAttribute(e))&&void 0!==n?n:t;!function(e,t){(0,a.subscribe)(e,t)}((()=>{var n;const o=null!==(n=(0,a.select)(kt).getPageAttribute(e))&&void 0!==n?n:t;o!==i&&(i=o,(0,E.setValue)(e,o))}),kt)}("results/shouldShowUniqueResults",!1);const Mt=(e,t)=>u((n=>n(kt).getAdminUrl(e,t)))})();var n=nab="undefined"==typeof nab?{}:nab;for(var i in t)n[i]=t[i];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();