{"version":3,"file":"js/editor.js","mappings":"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","sources":["webpack://nab/./node_modules/clsx/dist/clsx.mjs","webpack://nab/./packages/editor/components/ai-alternative-attributes-modal/index.tsx","webpack://nab/./packages/editor/components/ai-alternative-attributes-modal/style.scss?7fb1","webpack://nab/./packages/editor/components/alternative-previewer/index.tsx","webpack://nab/./packages/editor/components/alternative-previewer/style.scss?3bf2","webpack://nab/./packages/editor/components/alternative-section/alternative-container.tsx","webpack://nab/./packages/editor/components/alternative-section/index.tsx","webpack://nab/./packages/editor/components/alternative-section/style.scss?e5d1","webpack://nab/./packages/editor/components/editor/index.tsx","webpack://nab/./packages/editor/components/editor/style.scss?786d","webpack://nab/./packages/editor/components/experiment-name/index.tsx","webpack://nab/./packages/editor/components/experiment-name/style.scss?827f","webpack://nab/./packages/editor/components/goal-list/index.tsx","webpack://nab/./packages/editor/components/goal-list/style.scss?3bc8","webpack://nab/./packages/editor/components/goal-section/index.tsx","webpack://nab/./packages/editor/components/goal-section/style.scss?d516","webpack://nab/./packages/editor/components/goal/conversion-action-list/automatic.tsx","webpack://nab/./packages/editor/components/goal/conversion-action-list/index.ts","webpack://nab/./packages/editor/components/goal/conversion-action-list/regular.tsx","webpack://nab/./packages/editor/components/goal/conversion-action-list/style.scss?84da","webpack://nab/./packages/editor/components/goal/conversion-action-type-list/index.tsx","webpack://nab/./packages/editor/components/goal/conversion-action-type-list/style.scss?bb60","webpack://nab/./packages/editor/components/goal/conversion-action/index.tsx","webpack://nab/./packages/editor/components/goal/conversion-action/style.scss?2980","webpack://nab/./packages/editor/components/goal/ecommerce-goal-settings/index.tsx","webpack://nab/./packages/editor/components/goal/ecommerce-goal-settings/style.scss?e59a","webpack://nab/./packages/editor/components/goal/index.tsx","webpack://nab/./packages/editor/components/goal/style.scss?5963","webpack://nab/./packages/editor/components/header/index.tsx","webpack://nab/./packages/editor/components/header/style.scss?9770","webpack://nab/./packages/editor/components/help-button.tsx","webpack://nab/./packages/editor/components/hooks.ts","webpack://nab/./packages/editor/components/layout/index.tsx","webpack://nab/./packages/editor/components/layout/style.scss?9bd9","webpack://nab/./packages/editor/components/provider/index.tsx","webpack://nab/./packages/editor/components/segment-list/index.tsx","webpack://nab/./packages/editor/components/segment-list/style.scss?75b4","webpack://nab/./packages/editor/components/segment/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule-list/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule-list/style.scss?d638","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category-list/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category-list/style.scss?f098","webpack://nab/./packages/editor/components/segment/segmentation-rule-type-category/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule/index.tsx","webpack://nab/./packages/editor/components/segment/segmentation-rule/style.scss?84b6","webpack://nab/./packages/editor/components/segment/style.scss?c3dd","webpack://nab/./packages/editor/components/segmentation-section/index.tsx","webpack://nab/./packages/editor/components/segmentation-section/style.scss?b0c5","webpack://nab/./packages/editor/components/sidebar/description/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/auto-apply-winner/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/auto-apply-winner/style.scss?f71a","webpack://nab/./packages/editor/components/sidebar/experiment-management/experiment-end-schedule/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/experiment-end-schedule/style.scss?a772","webpack://nab/./packages/editor/components/sidebar/experiment-management/experiment-start-schedule/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/status/index.tsx","webpack://nab/./packages/editor/components/sidebar/experiment-management/status/style.scss?08ee","webpack://nab/./packages/editor/components/sidebar/experiment-management/style.scss?6401","webpack://nab/./packages/editor/components/sidebar/index.tsx","webpack://nab/./packages/editor/components/sidebar/scope/consistency-scope.tsx","webpack://nab/./packages/editor/components/sidebar/scope/custom-url-scope.tsx","webpack://nab/./packages/editor/components/sidebar/scope/index.tsx","webpack://nab/./packages/editor/components/sidebar/scope/product-consistency-scope.tsx","webpack://nab/./packages/editor/components/sidebar/scope/style.scss?6c8d","webpack://nab/./packages/editor/components/sidebar/scope/tested-url-with-query-args-scope/index.tsx","webpack://nab/./packages/editor/components/sidebar/scope/tested-url-with-query-args-scope/style.scss?f12f","webpack://nab/./packages/editor/components/sidebar/scope/urls-or-php-scope/index.tsx","webpack://nab/./packages/editor/components/sidebar/scope/urls-or-php-scope/style.scss?a519","webpack://nab/./packages/editor/components/sidebar/style.scss?48be","webpack://nab/./packages/editor/components/status-manager/index.ts","webpack://nab/./packages/editor/components/status-manager/utils.ts","webpack://nab/./packages/editor/export.ts","webpack://nab/./packages/editor/index.tsx","webpack://nab/./packages/editor/store/actions/alternatives.ts","webpack://nab/./packages/editor/store/actions/conversion-actions.ts","webpack://nab/./packages/editor/store/actions/editor.ts","webpack://nab/./packages/editor/store/actions/experiment-data.ts","webpack://nab/./packages/editor/store/actions/goals.ts","webpack://nab/./packages/editor/store/actions/index.ts","webpack://nab/./packages/editor/store/actions/scope.ts","webpack://nab/./packages/editor/store/actions/segmentation.ts","webpack://nab/./packages/editor/store/config.ts","webpack://nab/./packages/editor/store/index.ts","webpack://nab/./packages/editor/store/reducer/alternatives.ts","webpack://nab/./packages/editor/store/reducer/conversion-actions.ts","webpack://nab/./packages/editor/store/reducer/editor.ts","webpack://nab/./packages/editor/store/reducer/experiment-data.ts","webpack://nab/./packages/editor/store/reducer/goals.ts","webpack://nab/./packages/editor/store/reducer/index.ts","webpack://nab/./packages/editor/store/reducer/scope.ts","webpack://nab/./packages/editor/store/reducer/segmentation.ts","webpack://nab/./packages/editor/store/selectors/alternatives.ts","webpack://nab/./packages/editor/store/selectors/conversion-actions.ts","webpack://nab/./packages/editor/store/selectors/editor.ts","webpack://nab/./packages/editor/store/selectors/experiment-data.ts","webpack://nab/./packages/editor/store/selectors/goals.ts","webpack://nab/./packages/editor/store/selectors/index.ts","webpack://nab/./packages/editor/store/selectors/scope.ts","webpack://nab/./packages/editor/store/selectors/segmentation.ts","webpack://nab/./packages/editor/store/side-effects/actions/editor.ts","webpack://nab/./packages/editor/store/side-effects/actions/index.ts","webpack://nab/./packages/safe-wordpress/api-fetch.ts","webpack://nab/./packages/safe-wordpress/block-editor.ts","webpack://nab/./packages/safe-wordpress/components.tsx","webpack://nab/./packages/safe-wordpress/compose/hooks/use-event/index.ts","webpack://nab/./packages/safe-wordpress/compose/hooks/use-resize-observer/index.ts","webpack://nab/./packages/safe-wordpress/compose/hooks/use-resize-observer/use-resize-observer.ts","webpack://nab/./packages/safe-wordpress/compose/index.ts","webpack://nab/./packages/safe-wordpress/core-data.ts","webpack://nab/./packages/safe-wordpress/data.ts","webpack://nab/./packages/safe-wordpress/dom-ready.ts","webpack://nab/./packages/safe-wordpress/element.ts","webpack://nab/./packages/safe-wordpress/i18n.ts","webpack://nab/./packages/safe-wordpress/notices.ts","webpack://nab/external window [\"nab\",\"components\"]","webpack://nab/external window [\"nab\",\"conversionActions\"]","webpack://nab/external window [\"nab\",\"data\"]","webpack://nab/external window [\"nab\",\"date\"]","webpack://nab/external window [\"nab\",\"experimentLibrary\"]","webpack://nab/external window [\"nab\",\"experiments\"]","webpack://nab/external window [\"nab\",\"i18n\"]","webpack://nab/external window [\"nab\",\"segmentationRules\"]","webpack://nab/external window [\"nab\",\"utils\"]","webpack://nab/external window [\"wp\",\"apiFetch\"]","webpack://nab/external window [\"wp\",\"blockEditor\"]","webpack://nab/external window [\"wp\",\"components\"]","webpack://nab/external window [\"wp\",\"compose\"]","webpack://nab/external window [\"wp\",\"coreData\"]","webpack://nab/external window [\"wp\",\"data\"]","webpack://nab/external window [\"wp\",\"date\"]","webpack://nab/external window [\"wp\",\"domReady\"]","webpack://nab/external window [\"wp\",\"element\"]","webpack://nab/external window [\"wp\",\"i18n\"]","webpack://nab/external window [\"wp\",\"notices\"]","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/external window \"lodash\"","webpack://nab/external window \"ReactJSXRuntime\"","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/chunk loaded","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/webpack/before-startup","webpack://nab/webpack/startup","webpack://nab/webpack/after-startup"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/**\n * WordPress dependencies\n */\nimport { Modal } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const AiAlternativeAttributesModal = (): JSX.Element | null => {\n\tconst { alternativeId, alternative } = useSelect( ( select ) => {\n\t\tconst id = select( NAB_EDITOR ).getAiAlternativeModal();\n\t\tif ( ! id ) {\n\t\t\treturn { alternativeId: id, alternative: undefined };\n\t\t}\n\t\tconst alt = select( NAB_EDITOR ).getAlternative( id );\n\t\treturn { alternativeId: id, alternative: alt };\n\t}, [] );\n\tconst { showAiAlternativeModal } = useDispatch( NAB_EDITOR );\n\n\tconst attributes = alternative?.ai;\n\tif ( ! alternativeId || ! attributes || ! attributes.changes.length ) {\n\t\treturn null;\n\t}\n\n\tconst close = () => showAiAlternativeModal( undefined );\n\n\treturn (\n\t\t<Modal\n\t\t\tclassName=\"nab-ai-alternative-attributes-modal\"\n\t\t\ttitle={ sprintf(\n\t\t\t\t/* translators: %s: Nelio AI. */\n\t\t\t\t_x( '%s  Variant Details', 'text', 'nelio-ab-testing' ),\n\t\t\t\t'Nelio AI'\n\t\t\t) }\n\t\t\tisDismissible={ true }\n\t\t\tonRequestClose={ close }\n\t\t\tshouldCloseOnClickOutside={ false }\n\t\t>\n\t\t\t<p>\n\t\t\t\t{ sprintf(\n\t\t\t\t\t/* translators: %s: Variant name. */\n\t\t\t\t\t_x(\n\t\t\t\t\t\t'Apply these AI-recommended changes to %s to make it stand out from the control:',\n\t\t\t\t\t\t'user',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t),\n\t\t\t\t\tattributes.name\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<ol>\n\t\t\t\t{ attributes.changes.map( ( change, index ) => (\n\t\t\t\t\t<li key={ index }>{ change }</li>\n\t\t\t\t) ) }\n\t\t\t</ol>\n\t\t</Modal>\n\t);\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Modal } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const AlternativePreviewer = (): JSX.Element | null => {\n\tconst { closeAlternativePreviewer: close } = useDispatch( NAB_EDITOR );\n\tconst url = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getAlternativePreviewerUrl(),\n\t\t[]\n\t);\n\n\tif ( ! url ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\tclassName=\"nab-alternative-previewer\"\n\t\t\ttitle={ _x( 'Alternative Preview', 'text', 'nelio-ab-testing' ) }\n\t\t\tisDismissible={ true }\n\t\t\tonRequestClose={ close }\n\t\t\tshouldCloseOnClickOutside={ false }\n\t\t>\n\t\t\t<iframe\n\t\t\t\tclassName=\"nab-alternative-previewer__iframe\"\n\t\t\t\ttitle={ _x(\n\t\t\t\t\t'Alternative Preview Frame',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tsrc={ url }\n\t\t\t></iframe>\n\t\t</Modal>\n\t);\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Button, CheckboxControl } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport {\n\tcreateInterpolateElement,\n\tuseEffect,\n\tuseState,\n} from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\nimport { HelpIcon } from '@nab/components';\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\nimport {\n\tcreateAlternative,\n\tduplicateAlternative,\n\tgetLetter,\n\tomitUndefineds,\n} from '@nab/utils';\nimport type {\n\tAlternative,\n\tAlternativeCustomAction,\n\tAlternativeId,\n\tDict,\n\tExperimentEditProps,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { useCanAddAlternatives, useExperimentAttribute } from '../hooks';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport type AlternativeContainerProps = {\n\treadonly alternativeId: AlternativeId;\n\treadonly disabled?: boolean;\n\treadonly index: number;\n};\n\nexport const AlternativeContainer = ( {\n\talternativeId,\n\tdisabled,\n\tindex,\n}: AlternativeContainerProps ): JSX.Element | null => {\n\tconst control = useAlternative( 'control' );\n\tconst alternative = useAlternative( alternativeId );\n\tconst AlternativeView = useView( index );\n\tconst canBeRemoved = useCanBeRemoved();\n\tconst experimentType = useExperimentType();\n\tconst help = useHelp( index );\n\tconst isBeingSaved = useIsBeingSaved();\n\tconst isExternalEdit = useIsExternalEdit();\n\tconst isControl = ! index;\n\tconst canAddAlternatives = useCanAddAlternatives();\n\tconst duplicate = useDuplicator( alternative );\n\tconst isPreviewDisabled = useIsPreviewDisabled( alternative, control );\n\tconst customActions = useCustomActions( alternative, control );\n\n\tconst {\n\t\tsaveExperimentAndEditAlternative,\n\t\tsaveExperimentAndPreviewAlternative,\n\t\tremoveAlternatives,\n\t\treplaceAlternatives,\n\t\tsetAlternative,\n\t\tshowAiAlternativeModal,\n\t} = useDispatch( NAB_EDITOR );\n\n\tif ( ! alternative || ! control ) {\n\t\treturn null;\n\t}\n\n\tconst setAttributes = ( attributes: Dict ) =>\n\t\tsetAlternative( alternative.id, {\n\t\t\t...alternative,\n\t\t\tattributes: omitUndefineds( {\n\t\t\t\t...alternative.attributes,\n\t\t\t\t...attributes,\n\t\t\t} ),\n\t\t} );\n\n\tconst resetAlternative = () =>\n\t\treplaceAlternatives( alternativeId, {\n\t\t\t...createAlternative(),\n\t\t\tattributes: {\n\t\t\t\tname: alternative.ai?.name || '',\n\t\t\t},\n\t\t\tai: alternative.ai\n\t\t\t\t? { ...alternative.ai, isReady: false }\n\t\t\t\t: undefined,\n\t\t} );\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ clsx( [\n\t\t\t\t'nab-alternative-list__alternative',\n\t\t\t\t{ 'nab-alternative-list__alternative--original': isControl },\n\t\t\t] ) }\n\t\t>\n\t\t\t<p\n\t\t\t\tclassName={ clsx( [\n\t\t\t\t\t'nab-alternative-list__alternative-letter',\n\t\t\t\t\t{\n\t\t\t\t\t\t'nab-alternative-list__alternative-letter--disabled':\n\t\t\t\t\t\t\t0 < index && disabled,\n\t\t\t\t\t},\n\t\t\t\t] ) }\n\t\t\t>\n\t\t\t\t{ getLetter( index ) }\n\t\t\t</p>\n\n\t\t\t<div className=\"nab-alternative-list__alternative-edit\">\n\t\t\t\t<AlternativeView\n\t\t\t\t\tattributes={ alternative.attributes }\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\texperimentType={ experimentType }\n\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\tai={ alternative.ai }\n\t\t\t\t/>\n\n\t\t\t\t{ !! alternative.ai && (\n\t\t\t\t\t<div className=\"nab-alternative-list__alternative-ai-changes\">\n\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\tchecked={ alternative.ai.isReady }\n\t\t\t\t\t\t\tonChange={ ( isReady ) =>\n\t\t\t\t\t\t\t\tsetAlternative( alternative.id, {\n\t\t\t\t\t\t\t\t\t...alternative,\n\t\t\t\t\t\t\t\t\tai: alternative.ai\n\t\t\t\t\t\t\t\t\t\t? { ...alternative.ai, isReady }\n\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel={ createInterpolateElement(\n\t\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t\t'Ive already applied all <a>Nelio AIs recommended changes</a> to this variant',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ta: (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled || isBeingSaved\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\tshowAiAlternativeModal(\n\t\t\t\t\t\t\t\t\t\t\t\t\talternative.id\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\n\t\t\t\t{ 0 !== index && (\n\t\t\t\t\t<ul className=\"nab-alternative-list__alternative-actions\">\n\t\t\t\t\t\t{ customActions.map( ( action ) =>\n\t\t\t\t\t\t\t! action.isVisible ||\n\t\t\t\t\t\t\taction.isVisible(\n\t\t\t\t\t\t\t\talternative.attributes,\n\t\t\t\t\t\t\t\tcontrol.attributes\n\t\t\t\t\t\t\t) ? (\n\t\t\t\t\t\t\t\t<li key={ `custom-action-${ action.id }` }>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\tdisabled ||\n\t\t\t\t\t\t\t\t\t\t\tisBeingSaved ||\n\t\t\t\t\t\t\t\t\t\t\t( action.isEnabled &&\n\t\t\t\t\t\t\t\t\t\t\t\t! action.isEnabled(\n\t\t\t\t\t\t\t\t\t\t\t\t\talternative.attributes,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol.attributes\n\t\t\t\t\t\t\t\t\t\t\t\t) )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\taction.onClick(\n\t\t\t\t\t\t\t\t\t\t\t\talternative.attributes,\n\t\t\t\t\t\t\t\t\t\t\t\tsetAttributes,\n\t\t\t\t\t\t\t\t\t\t\t\tcontrol.attributes\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ action.label }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ isExternalEdit && (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tvoid saveExperimentAndEditAlternative(\n\t\t\t\t\t\t\t\t\t\t\talternativeId\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Edit',\n\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\tdisabled ||\n\t\t\t\t\t\t\t\t\tisBeingSaved ||\n\t\t\t\t\t\t\t\t\tisPreviewDisabled\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tvoid saveExperimentAndPreviewAlternative(\n\t\t\t\t\t\t\t\t\t\talternativeId\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Preview',\n\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{ isExternalEdit &&\n\t\t\t\t\t\t\t! alternative.base &&\n\t\t\t\t\t\t\tcanAddAlternatives && (\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\t\t\tonClick={ duplicate }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t\t'Duplicate',\n\t\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ isExternalEdit && (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\t\tonClick={ resetAlternative }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Reset',\n\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ canBeRemoved && (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\t\t\tdisabled={ disabled || isBeingSaved }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tremoveAlternatives( alternative.id )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Delete',\n\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ul>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<div className=\"nab-alternative-list__alternative-help\">\n\t\t\t\t{ !! help && <HelpIcon text={ help } /> }\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentType = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentType(), [] );\n\nconst useDefaults = () => {\n\tconst type = useExperimentType();\n\treturn useSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_EXPERIMENTS ).getExperimentType( type )?.defaults,\n\t\t[ type ]\n\t);\n};\n\nconst useDuplicator = ( alternative: Maybe< Alternative > ) => {\n\tconst alternatives = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getAlternatives(),\n\t\t[]\n\t);\n\tconst { replaceAlternatives } = useDispatch( NAB_EDITOR );\n\treturn alternative\n\t\t? () =>\n\t\t\t\tvoid replaceAlternatives(\n\t\t\t\t\talternatives.map( ( a ) => a.id ),\n\t\t\t\t\t[ ...alternatives, duplicateAlternative( alternative ) ]\n\t\t\t\t)\n\t\t: () => void null;\n};\n\nconst useAlternative = ( alternativeId: AlternativeId ) => {\n\tconst [ didApplyDefaults, markApplyDefaults ] = useState( false );\n\tconst defaults = useDefaults();\n\tconst alternative = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getAlternative( alternativeId ),\n\t\t[ alternativeId ]\n\t);\n\tconst { setAlternative } = useDispatch( NAB_EDITOR );\n\n\tuseEffect( () => {\n\t\tif ( didApplyDefaults ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! defaults || ! alternative ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultAttributes =\n\t\t\t'control' === alternative.id\n\t\t\t\t? defaults.original\n\t\t\t\t: defaults.alternative;\n\n\t\tvoid setAlternative( alternative.id, {\n\t\t\t...alternative,\n\t\t\tattributes: {\n\t\t\t\t...defaultAttributes,\n\t\t\t\t...alternative.attributes,\n\t\t\t},\n\t\t} );\n\t\tmarkApplyDefaults( true );\n\t}, [ defaults, alternative, didApplyDefaults, setAlternative ] );\n\n\treturn didApplyDefaults ? alternative : undefined;\n};\n\nconst useCanBeRemoved = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { getAlternativeIds } = select( NAB_EDITOR );\n\t\t\tconst isPaused = ( status || '' ).includes( 'paused' );\n\t\t\treturn getAlternativeIds().length > 2 && ! isPaused;\n\t\t},\n\t\t[ status ]\n\t);\n};\n\nconst useIsBeingSaved = () =>\n\tuseSelect(\n\t\t( select ) => select( NAB_EDITOR ).isExperimentBeingSaved(),\n\t\t[]\n\t);\n\ntype View = ( props: ExperimentEditProps< Dict > ) => JSX.Element;\nconst EMPTY_VIEW: View = () => <></>;\nconst useView = ( index: number ): View =>\n\tuseSelect(\n\t\t( select ) => {\n\t\t\tconst { getExperimentView } = select( NAB_EXPERIMENTS );\n\t\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\t\tconst view = ! index\n\t\t\t\t? getExperimentView( getExperimentType(), 'original' )\n\t\t\t\t: getExperimentView( getExperimentType(), 'alternative' );\n\t\t\treturn view ?? EMPTY_VIEW;\n\t\t},\n\t\t[ index ]\n\t);\n\nconst useHelp = ( index: number ) =>\n\tuseSelect(\n\t\t( select ) => {\n\t\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\t\tconst { getHelpString } = select( NAB_EXPERIMENTS );\n\n\t\t\tif ( 0 === index ) {\n\t\t\t\treturn getHelpString( getExperimentType(), 'original' );\n\t\t\t}\n\n\t\t\tif ( 1 === index ) {\n\t\t\t\treturn getHelpString( getExperimentType(), 'alternative' );\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\t[ index ]\n\t);\n\nconst useIsExternalEdit = () => {\n\tconst type = useExperimentType();\n\tconst control = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getAlternative( 'control' ),\n\t\t[]\n\t);\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { getExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\t\tconst alternativeEdition = getExperimentSupport(\n\t\t\t\ttype,\n\t\t\t\t'alternativeEdition'\n\t\t\t);\n\t\t\tif ( 'external' !== alternativeEdition?.type ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( 'function' !== typeof alternativeEdition.enabled ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t!! control && alternativeEdition.enabled( control.attributes )\n\t\t\t);\n\t\t},\n\t\t[ type, control ]\n\t);\n};\n\nconst useIsPreviewDisabled = (\n\talternative: Maybe< Alternative >,\n\tcontrol: Maybe< Alternative >\n) =>\n\tuseSelect(\n\t\t( select ): boolean => {\n\t\t\tconst { getExperimentType } = select( NAB_EXPERIMENTS );\n\t\t\tconst type = getExperimentType(\n\t\t\t\tselect( NAB_EDITOR ).getExperimentType()\n\t\t\t);\n\t\t\tif ( ! type || ! alternative || ! control ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn !! type.checks.isAlternativePreviewDisabled?.(\n\t\t\t\talternative.attributes,\n\t\t\t\tcontrol.attributes,\n\t\t\t\tselect\n\t\t\t);\n\t\t},\n\t\t[ control, alternative ]\n\t);\n\nconst useCustomActions = (\n\talternative: Maybe< Alternative >,\n\tcontrol: Maybe< Alternative >\n) =>\n\tuseSelect(\n\t\t( select ): ReadonlyArray< AlternativeCustomAction > => {\n\t\t\tconst { getExperimentType } = select( NAB_EXPERIMENTS );\n\t\t\tconst type = getExperimentType(\n\t\t\t\tselect( NAB_EDITOR ).getExperimentType()\n\t\t\t);\n\t\t\tif ( ! type || ! alternative || ! control ) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn type.supports.alternativeCustomActions ?? [];\n\t\t},\n\t\t[ control, alternative ]\n\t);\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport {\n\tcreateInterpolateElement,\n\tuseEffect,\n\tuseState,\n} from '@safe-wordpress/element';\nimport { Button, Dashicon } from '@safe-wordpress/components';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { difference } from 'lodash';\nimport { AnimatedList } from '@nab/components';\nimport { createAlternative } from '@nab/utils';\nimport type { AlternativeId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { AiAlternativeAttributesModal } from '../ai-alternative-attributes-modal';\nimport { AlternativeContainer } from './alternative-container';\nimport { AlternativePreviewer } from '../alternative-previewer';\nimport { useCanAddAlternatives } from '../hooks';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const AlternativeSection = (): JSX.Element => {\n\tconst [ control, ...alternativeIds ] = useAlternativeIds();\n\tconst addAlternative = useAddAlternative();\n\tconst isTestedElementInvalid = useIsTestedElementInvalid();\n\tconst isReplacingAlternatives = useIsReplacingAlternatives();\n\tconst canAddAlternatives = useCanAddAlternatives();\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment__alternative-section\">\n\t\t\t<h2>\n\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t/* translators: %s: Dashicon. */\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'%s Control Version and Variants',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'<icon></icon>'\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-alternative-section__title-icon\"\n\t\t\t\t\t\t\t\ticon=\"randomize\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t</h2>\n\n\t\t\t<div className=\"nab-alternative-list\">\n\t\t\t\t{ !! control && (\n\t\t\t\t\t<AlternativeContainer\n\t\t\t\t\t\tkey=\"control\"\n\t\t\t\t\t\tindex={ 0 }\n\t\t\t\t\t\talternativeId=\"control\"\n\t\t\t\t\t\tdisabled={ isTestedElementInvalid }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t<AnimatedList\n\t\t\t\t\tdisableAnimations={ isReplacingAlternatives }\n\t\t\t\t\texit={ 500 }\n\t\t\t\t>\n\t\t\t\t\t{ alternativeIds.map( ( alternativeId, index ) => (\n\t\t\t\t\t\t<AlternativeContainer\n\t\t\t\t\t\t\tkey={ alternativeId }\n\t\t\t\t\t\t\tindex={ index + 1 }\n\t\t\t\t\t\t\talternativeId={ alternativeId }\n\t\t\t\t\t\t\tdisabled={ isTestedElementInvalid }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t</AnimatedList>\n\t\t\t</div>\n\n\t\t\t<div className=\"nab-edit-experiment-alternative-section__new-variant-container\">\n\t\t\t\t{ canAddAlternatives && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tkey=\"new-variant\"\n\t\t\t\t\t\tdisabled={ isTestedElementInvalid }\n\t\t\t\t\t\tonClick={ () => addAlternative() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x( 'New Variant', 'command', 'nelio-ab-testing' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t<AlternativePreviewer />\n\t\t\t<AiAlternativeAttributesModal />\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useAlternativeIds = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getAlternativeIds(), [] );\n\nconst useAddAlternative = () => {\n\tconst { addAlternatives } = useDispatch( NAB_EDITOR );\n\treturn () => addAlternatives( createAlternative() );\n};\n\nconst useIsTestedElementInvalid = () =>\n\tuseSelect(\n\t\t( select ) => select( NAB_EDITOR ).isTestedElementInvalid(),\n\t\t[]\n\t);\n\nconst useIsReplacingAlternatives = () => {\n\tconst altIds = useAlternativeIds();\n\tconst [ prevAltIds, setPrevAltIds ] =\n\t\tuseState< ReadonlyArray< AlternativeId > >( altIds );\n\n\t// Keep track of the previous alt IDs.\n\tuseEffect( () => {\n\t\tif ( altIds !== prevAltIds ) {\n\t\t\tsetPrevAltIds( altIds );\n\t\t}\n\t}, [ altIds, prevAltIds ] );\n\n\t// Disable animations if several changes at once.\n\tif ( altIds === prevAltIds ) {\n\t\treturn false;\n\t}\n\n\t// This works under the assumption that, usually, theres only one change\n\t// at a time (i.e. adding or removing a single alternative).\n\tconst d1 = difference( altIds, prevAltIds );\n\tconst d2 = difference( prevAltIds, altIds );\n\treturn !! d1.length && !! d2.length;\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@safe-wordpress/data';\nimport { StrictMode } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { store as NAB_DATA } from '@nab/data';\nimport type { ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { EditorProvider } from '../provider';\nimport { Layout } from '../layout';\n\nexport type EditorProps = {\n\treadonly experimentId: ExperimentId;\n};\n\nexport const Editor = ( { experimentId }: EditorProps ): JSX.Element => {\n\tconst experiment = useSelect(\n\t\t( select ) => select( NAB_DATA ).getExperiment( experimentId ),\n\t\t[ experimentId ]\n\t);\n\n\treturn (\n\t\t<StrictMode>\n\t\t\t<EditorProvider experiment={ experiment }>\n\t\t\t\t<Layout />\n\t\t\t</EditorProvider>\n\t\t</StrictMode>\n\t);\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { PlainText } from '@safe-wordpress/block-editor';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../hooks';\n\nexport const ExperimentName = (): JSX.Element => {\n\tconst [ name, setName ] = useExperimentAttribute( 'name' );\n\treturn (\n\t\t<div className=\"nab-experiment-title\">\n\t\t\t<PlainText\n\t\t\t\tvalue={ name }\n\t\t\t\tclassName=\"nab-experiment-title__edit\"\n\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t'Name your test',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tonChange={ setName }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Button, Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\nimport { trim } from 'lodash';\nimport { createGoal } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../hooks';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const GoalList = (): JSX.Element => {\n\tconst activeGoalId = useActiveGoalId();\n\tconst goals = useGoals();\n\tconst isExperimentPaused = useIsExperimentPaused();\n\tconst { setActiveGoal, addGoals } = useDispatch( NAB_EDITOR );\n\n\treturn (\n\t\t<ul className=\"nab-goal-list\">\n\t\t\t{ goals.map( ( goal, index ) => (\n\t\t\t\t<li\n\t\t\t\t\tkey={ goal.id }\n\t\t\t\t\tclassName={ clsx( 'nab-goal-list__item', {\n\t\t\t\t\t\t'nab-goal-list__item--is-active':\n\t\t\t\t\t\t\tgoal.id === activeGoalId,\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={ goal.id === activeGoalId }\n\t\t\t\t\t\tonClick={ () => setActiveGoal( goal.id ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ trim( goal.attributes.name ) ||\n\t\t\t\t\t\t\tgetDefaultGoalNameForIndex( index ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) ) }\n\n\t\t\t{ ! isExperimentPaused && (\n\t\t\t\t<li className=\"nab-goal-list__add-new-goal\" key=\"add-new-goal\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"nab-goal-list__add-new-goal-button\"\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tconst goal = createGoal();\n\t\t\t\t\t\t\tvoid addGoals( goal );\n\t\t\t\t\t\t\tvoid setActiveGoal( goal.id );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dashicon icon=\"plus\" />\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'New',\n\t\t\t\t\t\t\t\t'command (goal)',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) }\n\t\t</ul>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoalId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal()?.id, [] );\n\nconst useGoals = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getGoals(), [] );\n\nconst useIsExperimentPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn ( status || '' ).includes( 'paused' );\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getDefaultGoalNameForIndex( index: number ) {\n\treturn index\n\t\t? sprintf(\n\t\t\t\t/* translators: %d: Number. */\n\t\t\t\t_x( 'Goal %d', 'text', 'nelio-ab-testing' ),\n\t\t\t\tindex + 1\n\t\t  )\n\t\t: _x( 'Default Goal', 'text', 'nelio-ab-testing' );\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { createInterpolateElement, useEffect } from '@safe-wordpress/element';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { findIndex } from 'lodash';\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\nimport type { Goal as RealGoal, GoalId, Maybe } from '@nab/types';\ntype Goal = Omit< RealGoal, 'conversionActions' >;\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { Goal as GoalView } from '../goal';\nimport { GoalList } from '../goal-list';\nimport { useExperimentAttribute } from '../hooks';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const GoalSection = (): JSX.Element => {\n\tuseAutoConversionActionsEffect();\n\n\tconst goal = useActiveGoal();\n\tconst goals = useGoals();\n\tconst isExperimentPaused = useIsExperimentPaused();\n\tconst numberOfGoals = goals.length;\n\tconst isAutomatic = useIsActiveGoalAutomatic();\n\tconst { removeGoals, setActiveGoal, updateGoal } =\n\t\tuseDispatch( NAB_EDITOR );\n\n\tconst canGoalBeRemoved = 1 < numberOfGoals && ! isExperimentPaused;\n\n\tconst removeActiveGoal = () => {\n\t\tif ( ! goal ) {\n\t\t\treturn;\n\t\t}\n\t\tconst nextGoal = getAdjacentGoal( goals, goal.id );\n\t\tif ( ! nextGoal ) {\n\t\t\treturn;\n\t\t}\n\t\tvoid setActiveGoal( nextGoal.id );\n\t\tvoid removeGoals( goal.id );\n\t};\n\n\tconst updateActiveGoal = ( attributes: Partial< Goal[ 'attributes' ] > ) =>\n\t\tgoal && updateGoal( goal.id, { ...goal.attributes, ...attributes } );\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment__goal-section\">\n\t\t\t<h2>\n\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t/* translators: %s: Dashicon. */\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'%s Conversion Goals and Actions',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'<icon></icon>'\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-goal-section__title-icon\"\n\t\t\t\t\t\t\t\ticon=\"flag\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t</h2>\n\n\t\t\t<div className=\"nab-edit-experiment-goal-section__content\">\n\t\t\t\t<GoalList />\n\t\t\t\t<GoalView\n\t\t\t\t\tname={ goal?.attributes.name ?? '' }\n\t\t\t\t\tsetName={ ( name ) => updateActiveGoal( { name } ) }\n\t\t\t\t\tremoveGoal={\n\t\t\t\t\t\tcanGoalBeRemoved ? removeActiveGoal : undefined\n\t\t\t\t\t}\n\t\t\t\t\tisAutomatic={ isAutomatic }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoal = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal(), [] );\n\nconst useGoals = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getGoals(), [] );\n\nconst useIsExperimentPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn ( status || '' ).includes( 'paused' );\n};\n\nconst useIsActiveGoalAutomatic = () => {\n\tconst goal = useActiveGoal();\n\tconst goals = useGoals();\n\tconst firstGoal = goals[ 0 ];\n\treturn useSelect(\n\t\t( select ): boolean => {\n\t\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\t\tconst { hasExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\t\treturn (\n\t\t\t\tgoal?.id === firstGoal?.id &&\n\t\t\t\thasExperimentSupport(\n\t\t\t\t\tgetExperimentType(),\n\t\t\t\t\t'automaticGoalSetup'\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t[ goal, firstGoal ]\n\t);\n};\n\nconst useAutoConversionActionsEffect = () => {\n\tconst { replaceConversionActionsInGoal } = useDispatch( NAB_EDITOR );\n\n\tconst goalId = useGoals()[ 0 ]?.id;\n\tconst control = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getAlternative( 'control' ),\n\t\t[]\n\t);\n\tconst automaticGoalSetup = useSelect( ( select ) => {\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\tconst { getExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\treturn getExperimentSupport(\n\t\t\tgetExperimentType(),\n\t\t\t'automaticGoalSetup'\n\t\t);\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( ! control || ! goalId || ! automaticGoalSetup ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst auto = automaticGoalSetup( control.attributes );\n\t\tvoid replaceConversionActionsInGoal( goalId, auto );\n\t}, [\n\t\tcontrol,\n\t\tgoalId,\n\t\tautomaticGoalSetup,\n\t\treplaceConversionActionsInGoal,\n\t] );\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getAdjacentGoal(\n\tgoals: ReadonlyArray< Goal >,\n\tgoalId: GoalId\n): Maybe< Goal > {\n\tconst index = findIndex( goals, { id: goalId } );\n\tif ( index === goals.length - 1 ) {\n\t\treturn goals[ index - 1 ];\n\t}\n\treturn goals[ index + 1 ];\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { EMPTY_ARRAY } from '@nab/utils';\nimport type { ConversionAction as CA, GoalId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { ConversionAction } from '../conversion-action';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport const AutomaticConversionActionList = (): JSX.Element => {\n\tconst goalId = useActiveGoalId();\n\tconst conversionActions = useConversionActions( goalId );\n\n\treturn (\n\t\t<div className=\"nab-conversion-action-list nab-conversion-action-list--automatic\">\n\t\t\t{ 1 === conversionActions.length ? (\n\t\t\t\t<p\n\t\t\t\t\tkey=\"conversion-action-explanation\"\n\t\t\t\t\tclassName=\"nab-conversion-action-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'By default, there will be a new conversion in this test when the following conversion action occurs after the visitor has seen the tested element:',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\t<p\n\t\t\t\t\tkey=\"conversion-action-explanation\"\n\t\t\t\t\tclassName=\"nab-conversion-action-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Split tests are usually run with some specific goals in mind. In this type of test, theres a new conversion when at least one of the following conversion actions occurs after the visitor has seen the tested element:',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t{ goalId &&\n\t\t\t\tconversionActions.map( ( action ) => (\n\t\t\t\t\t<ConversionAction\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\treadOnly={ true }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoalId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal()?.id, [] );\n\nconst useConversionActions = ( goalId?: GoalId ): ReadonlyArray< CA > =>\n\tuseSelect(\n\t\t( select ) => {\n\t\t\tif ( ! goalId ) {\n\t\t\t\treturn EMPTY_ARRAY;\n\t\t\t}\n\t\t\tconst { getConversionActions } = select( NAB_EDITOR );\n\t\t\treturn getConversionActions( goalId ) || EMPTY_ARRAY;\n\t\t},\n\t\t[ goalId ]\n\t);\n","export * from './automatic';\nexport * from './regular';\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@safe-wordpress/data';\nimport { createInterpolateElement } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport type { ConversionAction as CA, GoalId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { ConversionAction } from '../conversion-action';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport const ConversionActionList = (): JSX.Element => {\n\tconst goal = useActiveGoal();\n\tconst goalId = goal?.id;\n\tconst conversionActions = useConversionActions( goalId );\n\n\tif ( ! conversionActions.length ) {\n\t\treturn (\n\t\t\t<div className=\"nab-conversion-action-list\">\n\t\t\t\t{ !! goal?.ai?.description ? (\n\t\t\t\t\t<p className=\"nab-conversion-action-list__help\">\n\t\t\t\t\t\t{ goal.ai.description }\n\t\t\t\t\t</p>\n\t\t\t\t) : (\n\t\t\t\t\t<p className=\"nab-conversion-action-list__help\">\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Split tests are usually run with some specific goals in mind, such as getting more subscribers or showing interest in your products. Goals are fulfilled when the visitor performs certain actions. For instance, a visitor might be showing interest in your products when they visit your pricing page or they submit a certain form in your website.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t<p className=\"nab-conversion-action-list__help\">\n\t\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'Use the following button to <strong>add the specific conversion actions</strong> that fulfill this goal.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"nab-conversion-action-list\">\n\t\t\t<p className=\"nab-conversion-action-list__help\">\n\t\t\t\t{ !! goal?.ai?.description && (\n\t\t\t\t\t<p className=\"nab-conversion-action-list__help\">\n\t\t\t\t\t\t{ goal.ai.description }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t{ _x(\n\t\t\t\t\t'After a visitor has seen the tested element, theres a new conversion every time one of the following conversion actions occurs:',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t{ goalId &&\n\t\t\t\tconversionActions.map( ( action ) => (\n\t\t\t\t\t<ConversionAction\n\t\t\t\t\t\tkey={ action.id }\n\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoal = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal(), [] );\n\nconst useConversionActions = ( goalId?: GoalId ): ReadonlyArray< CA > =>\n\tuseSelect(\n\t\t( select ) => {\n\t\t\tif ( ! goalId ) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tconst { getConversionActions } = select( NAB_EDITOR );\n\t\t\treturn getConversionActions( goalId ) || [];\n\t\t},\n\t\t[ goalId ]\n\t);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n} from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { difference, every, groupBy, keys, omitBy } from 'lodash';\nimport {\n\tstore as NAB_ACTIONS,\n\tcreateConversionAction as createConversionActionWithDefaults,\n} from '@nab/conversion-actions';\nimport type {\n\tConversionAction as CA,\n\tConversionActionType,\n\tConversionActionTypeName,\n\tGoalId,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../../store';\n\nconst CATEGORIES: Record< ConversionActionType[ 'category' ], string > = {\n\tview: _x( 'View', 'text', 'nelio-ab-testing' ),\n\tinteraction: _x( 'Interaction', 'text', 'nelio-ab-testing' ),\n\tecommerce: _x( 'E-Commerce', 'text', 'nelio-ab-testing' ),\n\tother: _x( 'Other', 'text', 'nelio-ab-testing' ),\n};\n\nexport const ConversionActionTypeList = (): JSX.Element => {\n\tconst goalId = useActiveGoalId();\n\tconst allConversionActionTypes = useConversionActionTypes();\n\tconst { addConversionActionsIntoGoal } = useDispatch( NAB_EDITOR );\n\n\tconst createConversionAction = ( type: ConversionActionTypeName ) => {\n\t\tif ( ! goalId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst act = createConversionActionWithDefaults( type );\n\t\tif ( act ) {\n\t\t\tvoid addConversionActionsIntoGoal( goalId, act );\n\t\t}\n\t};\n\n\tif ( ! allConversionActionTypes?.length ) {\n\t\treturn (\n\t\t\t<div className=\"nab-conversion-action-type-new\">\n\t\t\t\t<Button variant=\"secondary\" disabled>\n\t\t\t\t\t{ _x( 'Add Action', 'command', 'nelio-ab-testing' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst conversionActionTypes = omitBy(\n\t\tgroupBy( allConversionActionTypes, 'category' ),\n\t\t( types ) => ! types.length\n\t) as Partial<\n\t\tRecord<\n\t\t\tConversionActionType[ 'category' ],\n\t\t\tReadonlyArray< ConversionActionType >\n\t\t>\n\t>;\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName=\"nab-conversion-action-type-new\"\n\t\t\ticon={ null }\n\t\t\tlabel={ _x( 'Add Action', 'command', 'nelio-ab-testing' ) }\n\t\t\ttoggleProps={ {\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tchildren: _x( 'Add Action', 'command', 'nelio-ab-testing' ),\n\t\t\t} }\n\t\t\tpopoverProps={ {\n\t\t\t\tclassName: 'nab-conversion-action-type-new__list',\n\t\t\t\tplacement: 'top-center',\n\t\t\t} }\n\t\t\tchildren={ ( { onClose } ) =>\n\t\t\t\tkeys( CATEGORIES )\n\t\t\t\t\t.map( ( c ) => c as ConversionActionType[ 'category' ] )\n\t\t\t\t\t.filter( ( c ) => !! conversionActionTypes[ c ]?.length )\n\t\t\t\t\t.map( ( c ) => (\n\t\t\t\t\t\t<MenuGroup key={ c } label={ CATEGORIES[ c ] }>\n\t\t\t\t\t\t\t{ conversionActionTypes[ c ]?.map(\n\t\t\t\t\t\t\t\t( { name, title, icon: Icon } ) => (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\t\t\ticon={ <Icon /> }\n\t\t\t\t\t\t\t\t\t\t{ ...{ iconPosition: 'left' } }\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\tcreateConversionAction( name );\n\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t) )\n\t\t\t}\n\t\t/>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveGoalId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal()?.id, [] );\n\nconst useConversionActionTypes = () => {\n\tconst goalId = useActiveGoalId();\n\tconst conversionActions = useConversionActions( goalId );\n\tconst conversionActionTypes = useSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_ACTIONS )\n\t\t\t\t.getConversionActionTypes()\n\t\t\t\t.filter(\n\t\t\t\t\t( type ) => ! type.isActive || type.isActive( select )\n\t\t\t\t)\n\t\t\t\t.filter(\n\t\t\t\t\t( type ) =>\n\t\t\t\t\t\t! type.requiresSingleness ||\n\t\t\t\t\t\tconversionActions.every(\n\t\t\t\t\t\t\t( ca ) => ca.type !== type.name\n\t\t\t\t\t\t)\n\t\t\t\t),\n\t\t[ conversionActions ]\n\t);\n\n\tif ( ! conversionActions.length ) {\n\t\treturn conversionActionTypes;\n\t}\n\n\tconst uniformTypes = conversionActionTypes.filter(\n\t\t( type ) => !! type.requiresUniformity\n\t);\n\n\tfor ( const type of uniformTypes ) {\n\t\tif ( every( conversionActions, ( a ) => a.type === type.name ) ) {\n\t\t\treturn [ type ];\n\t\t}\n\t}\n\n\treturn uniformTypes.length\n\t\t? difference( conversionActionTypes, uniformTypes )\n\t\t: conversionActionTypes;\n};\n\nconst useConversionActions = ( goalId?: GoalId ): ReadonlyArray< CA > =>\n\tuseSelect(\n\t\t( select ) => {\n\t\t\tif ( ! goalId ) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn select( NAB_EDITOR ).getConversionActions( goalId ) || [];\n\t\t},\n\t\t[ goalId ]\n\t);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Button, Dashicon, PanelBody } from '@safe-wordpress/components';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { useCallback, useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { noop } from 'lodash';\nimport { store as NAB_ACTIONS } from '@nab/conversion-actions';\nimport { usePluginSetting } from '@nab/data';\nimport { getConversionActionScopeError, isEmpty } from '@nab/utils';\nimport type {\n\tConversionAction as CA,\n\tConversionActionId,\n\tConversionActionScope,\n\tConversionActionTypeName,\n\tGoalId,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport type ConversionActionProps = {\n\treadonly readOnly?: boolean;\n\treadonly action: CA;\n\treadonly goalId: GoalId;\n};\n\nexport const ConversionAction = ( {\n\treadOnly,\n\taction,\n\tgoalId,\n}: ConversionActionProps ): JSX.Element | null => {\n\tconst experimentId = useExperimentId();\n\tconst goal = useActiveGoal();\n\tconst goalIndex = useActiveGoalIndex();\n\tconst actionType = useConversionActionType( action.type );\n\tconst scope = useActionScope( action );\n\n\tconst View = actionType?.view;\n\tconst Edit = actionType?.edit;\n\tconst Icon = actionType?.icon;\n\tconst attributes = action?.attributes || {};\n\tconst validate = actionType?.validate ?? ( () => ( {} ) );\n\n\tconst scopeError = getConversionActionScopeError( scope );\n\tconst errors = {\n\t\t...validate( attributes ),\n\t\t...( scopeError ? { _scope: scopeError } : {} ),\n\t};\n\tconst hasErrors = ! isEmpty( errors );\n\tconst [ opened, onToggle ] = useState( hasErrors );\n\n\tconst { setAttributes, setScope } = useUpdater( goalId, action.id );\n\tconst remove = useRemove( goalId, action.id );\n\n\tif ( ! goal ) {\n\t\treturn null;\n\t}\n\n\tif ( readOnly ) {\n\t\treturn (\n\t\t\t<div className=\"nab-conversion-action\">\n\t\t\t\t<div className=\"nab-conversion-action__view\">\n\t\t\t\t\t{ !! Icon ? (\n\t\t\t\t\t\t<Icon className=\"nab-conversion-action__icon\" />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\tclassName=\"nab-conversion-action__icon nab-conversion-action__icon--invalid\"\n\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"nab-conversion-action__actual-view\">\n\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\tgoal={ goal.attributes }\n\t\t\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\t\t\tgoalIndex={ goalIndex }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Invalid conversion action.',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst showActualIcon = !! Icon && ( ! hasErrors || opened );\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-conversion-action\"\n\t\t\topened={ opened }\n\t\t\tonToggle={ onToggle }\n\t\t\ttitle={\n\t\t\t\t(\n\t\t\t\t\t<div className=\"nab-conversion-action__view\">\n\t\t\t\t\t\t{ showActualIcon ? (\n\t\t\t\t\t\t\t<Icon className=\"nab-conversion-action__icon\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-conversion-action__icon nab-conversion-action__icon--invalid\"\n\t\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div className=\"nab-conversion-action__actual-view\">\n\t\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\t\tgoal={ goal.attributes }\n\t\t\t\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\t\t\t\tgoalIndex={ goalIndex }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Invalid conversion action.',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t ) as unknown as string\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"nab-conversion-action__edit\">\n\t\t\t\t{ !! Edit ? (\n\t\t\t\t\t<Edit\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\tgoal={ goal.attributes }\n\t\t\t\t\t\tgoalId={ goalId }\n\t\t\t\t\t\tgoalIndex={ goalIndex }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\tsetScope={ setScope }\n\t\t\t\t\t\terrors={ errors }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'This conversion action cant be properly loaded. Please consider removing it.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"link\"\n\t\t\t\tisDestructive\n\t\t\t\tonClick={ remove }\n\t\t\t\tclassName=\"nab-conversion-action__delete-button\"\n\t\t\t>\n\t\t\t\t{ _x( 'Delete', 'command', 'neli-ab-testing' ) }\n\t\t\t</Button>\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentId(), [] );\n\nconst useActiveGoal = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal(), [] );\n\nconst useActiveGoalIndex = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoalIndex(), [] );\n\nconst useConversionActionType = ( type: ConversionActionTypeName ) =>\n\tuseSelect(\n\t\t( select ) => select( NAB_ACTIONS ).getConversionActionType( type ),\n\t\t[ type ]\n\t);\n\nconst useActionScope = ( action: CA ): ConversionActionScope => {\n\tconst goalTracking = usePluginSetting( 'goalTracking' );\n\tif ( 'custom' !== goalTracking ) {\n\t\treturn { type: goalTracking };\n\t}\n\n\tif ( action?.scope ) {\n\t\treturn action.scope;\n\t}\n\n\treturn { type: 'test-scope' };\n};\n\nconst useUpdater = ( goalId: GoalId, actionId: ConversionActionId ) => {\n\tconst { updateConversionAction } = useDispatch( NAB_EDITOR );\n\tconst update = useCallback(\n\t\t(\n\t\t\tattributes: Maybe< Partial< CA[ 'attributes' ] > >,\n\t\t\tscope: Maybe< ConversionActionScope >\n\t\t) => updateConversionAction( goalId, actionId, attributes, scope ),\n\t\t[ goalId, actionId, updateConversionAction ]\n\t);\n\n\tconst setAttributes = useCallback(\n\t\t( attributes: Partial< CA[ 'attributes' ] > ) =>\n\t\t\tupdate( attributes, undefined ),\n\t\t[ update ]\n\t);\n\n\tconst setScope = useCallback(\n\t\t( scope: ConversionActionScope ) => update( undefined, scope ),\n\t\t[ update ]\n\t);\n\n\treturn {\n\t\tsetAttributes: goalId && actionId ? setAttributes : noop,\n\t\tsetScope: goalId && actionId ? setScope : noop,\n\t};\n};\n\nconst useRemove = ( goalId: GoalId, actionId: ConversionActionId ) => {\n\tconst { removeConversionActionsFromGoal } = useDispatch( NAB_EDITOR );\n\treturn goalId && actionId\n\t\t? () => removeConversionActionsFromGoal( goalId, actionId )\n\t\t: noop;\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { CheckboxControl, SelectControl } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_DATA } from '@nab/data';\nimport type {\n\tECommercePlugin,\n\tGoal as RealGoal,\n\tMaybe,\n\tOrderStatus,\n\tOrderStatusName,\n\tConversionAction,\n} from '@nab/types';\ntype Goal = Omit< RealGoal, 'conversionActions' >;\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport const ECommerceGoalSettings = (): JSX.Element | null => {\n\tconst plugin = useECommercePlugin();\n\treturn plugin ? <ActualSettings plugin={ plugin } /> : null;\n};\n\nconst ActualSettings = ( { plugin }: { plugin: ECommercePlugin } ) => {\n\tconst title = useTitle( plugin );\n\tconst [ checked, onToggle ] = useOrderRevenueToggle();\n\tconst statuses = useECommerceOrderStatuses( plugin );\n\tconst [ orderStatus, setOrderStatus ] = useOrderStatus( plugin );\n\n\treturn (\n\t\t<div className=\"nab-ecommerce-goal-settings\">\n\t\t\t<p>\n\t\t\t\t<strong>{ title }</strong>\n\t\t\t</p>\n\t\t\t<SelectControl\n\t\t\t\tclassName=\"nab-ecommerce-goal-settings__order-status\"\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Order status required for conversions:',\n\t\t\t\t\t'command',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\toptions={ statuses }\n\t\t\t\tvalue={ orderStatus }\n\t\t\t\tonChange={ setOrderStatus }\n\t\t\t/>\n\t\t\t<CheckboxControl\n\t\t\t\tclassName=\"nab-ecommerce-goal-settings__track-revenue\"\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Track revenue and show in test results',\n\t\t\t\t\t'command',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tchecked={ checked }\n\t\t\t\tonChange={ onToggle }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useTitle = ( plugin: ECommercePlugin ): string => {\n\tswitch ( plugin ) {\n\t\tcase 'woocommerce':\n\t\t\treturn _x(\n\t\t\t\t'WooCommerce Goal Settings',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'edd':\n\t\t\treturn _x(\n\t\t\t\t'Easy Digital Downloads Goal Settings',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\t}\n};\n\nconst useECommercePlugin = () =>\n\tuseSelect( ( select ): Maybe< ECommercePlugin > => {\n\t\tconst { getActiveGoal } = select( NAB_EDITOR );\n\t\tconst { getConversionActions } = select( NAB_EDITOR );\n\t\tconst goalId = getActiveGoal()?.id;\n\t\tconst actions = goalId ? getConversionActions( goalId ) : [];\n\n\t\tif ( ! actions.length ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst isWcOrder = ( { type }: ConversionAction ) =>\n\t\t\t'nab/wc-order' === type;\n\t\tif ( actions.every( isWcOrder ) ) {\n\t\t\treturn 'woocommerce';\n\t\t}\n\n\t\tconst isEddOrder = ( { type }: ConversionAction ) =>\n\t\t\t'nab/edd-order' === type;\n\t\tif ( actions.every( isEddOrder ) ) {\n\t\t\treturn 'edd';\n\t\t}\n\n\t\treturn undefined;\n\t}, [] );\n\nconst useOrderRevenueToggle = () => {\n\tconst goal = useGoal();\n\tconst value = goal?.attributes.useOrderRevenue ?? true;\n\tconst { updateGoal } = useDispatch( NAB_EDITOR );\n\tconst update = () =>\n\t\tgoal ? updateGoal( goal.id, { useOrderRevenue: ! value } ) : void null;\n\treturn [ value, update ] as const;\n};\n\nconst useOrderStatus = ( plugin: ECommercePlugin ) => {\n\tconst goal = useGoal();\n\tconst validStatuses = useECommerceOrderStatuses( plugin );\n\tconst status = goal?.attributes.orderStatusForConversion;\n\tconst value =\n\t\tstatus &&\n\t\tvalidStatuses\n\t\t\t.map( ( s: OrderStatus ) => s.value )\n\t\t\t.includes( goal?.attributes.orderStatusForConversion )\n\t\t\t? status\n\t\t\t: getDefaultOrderStatus( plugin );\n\n\tconst { updateGoal } = useDispatch( NAB_EDITOR );\n\tconst update = ( v: OrderStatusName ) =>\n\t\tgoal\n\t\t\t? updateGoal( goal.id, { orderStatusForConversion: v } )\n\t\t\t: void null;\n\n\treturn [ value, update ] as const;\n};\n\nconst useECommerceOrderStatuses = ( plugin: ECommercePlugin ) =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_DATA ).getECommerceSetting( plugin, 'orderStatuses' ),\n\t\t[ plugin ]\n\t);\n\nconst useGoal = (): Maybe< Goal > =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveGoal(), [] );\n\n// =======\n// HELPERS\n// =======\n\nconst getDefaultOrderStatus = ( plugin: ECommercePlugin ): OrderStatusName => {\n\tswitch ( plugin ) {\n\t\tcase 'woocommerce':\n\t\t\treturn 'wc-completed';\n\n\t\tcase 'edd':\n\t\t\treturn 'complete';\n\t}\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Button, TextControl } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport {\n\tAutomaticConversionActionList,\n\tConversionActionList,\n} from './conversion-action-list';\nimport { ConversionActionTypeList } from './conversion-action-type-list';\nimport { ECommerceGoalSettings } from './ecommerce-goal-settings';\n\nexport type GoalProps = {\n\treadonly isAutomatic: boolean;\n\treadonly name: string;\n\treadonly removeGoal?: () => void;\n\treadonly setName: ( name: string ) => void;\n};\n\nexport const Goal = ( {\n\tname,\n\tsetName,\n\tremoveGoal,\n\tisAutomatic,\n}: GoalProps ): JSX.Element => (\n\t<div className=\"nab-current-goal-info\">\n\t\t{ ! isAutomatic && (\n\t\t\t<div className=\"nab-current-goal-info__header\">\n\t\t\t\t<TextControl\n\t\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t\t'Name your goal',\n\t\t\t\t\t\t'user',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ name }\n\t\t\t\t\tonChange={ ( value ) => setName( value ) }\n\t\t\t\t/>\n\t\t\t\t{ !! removeGoal && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tclassName=\"nab-current-goal-info__delete-button\"\n\t\t\t\t\t\tonClick={ removeGoal }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x( 'Delete', 'command (goal)', 'nelio-ab-testing' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t) }\n\n\t\t<ECommerceGoalSettings />\n\n\t\t{ isAutomatic ? (\n\t\t\t<AutomaticConversionActionList />\n\t\t) : (\n\t\t\t<>\n\t\t\t\t<ConversionActionList />\n\t\t\t\t<ConversionActionTypeList />\n\t\t\t</>\n\t\t) }\n\t</div>\n);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Button, Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useRef } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { SubscribeWithCouponButton, Tooltip } from '@nab/components';\nimport { store as NAB_DATA } from '@nab/data';\nimport { isInTheFuture } from '@nab/date';\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../hooks';\nimport { HelpButton } from '../help-button';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const Header = (): JSX.Element => {\n\tconst ref = useRef< HTMLDivElement >( null );\n\n\tconst Icon = useIcon();\n\tconst startLabel = useStartLabel();\n\n\tconst draftStatusRationale = useDraftStatusRationale();\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst isDraft = ( status || '' ).includes( 'draft' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\n\tconst isExperimentBeingSaved = useIsBeingSaved();\n\tconst hasExperimentBeenRecentlySaved = useHasBeenRecentlySaved();\n\n\tconst start = useStarter();\n\tconst { saveExperiment, setExperimentData } = useDispatch( NAB_EDITOR );\n\tconst saveExperimentAsReady = () => {\n\t\tvoid setExperimentData( { status: isPaused ? 'paused' : 'ready' } );\n\t\tvoid saveExperiment();\n\t};\n\tconst canUserStart = useCanUserStart();\n\n\treturn (\n\t\t<div ref={ ref } className=\"nab-edit-experiment-header\">\n\t\t\t<div className=\"nab-edit-experiment-header__info\">\n\t\t\t\t{ Icon && (\n\t\t\t\t\t<Icon className=\"nab-edit-experiment-header__experiment-icon\" />\n\t\t\t\t) }\n\t\t\t\t<h1 className=\"nab-edit-experiment-header__title\">\n\t\t\t\t\t{ _x( 'Edit Test', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t</h1>\n\t\t\t\t<SubscribeWithCouponButton\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'finished' === status\n\t\t\t\t\t\t\t? 'nab-edit-experiment-header__right-promo-button'\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"nab-edit-experiment-header__settings\">\n\t\t\t\t{ isExperimentBeingSaved && (\n\t\t\t\t\t<span className=\"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--is-saving\">\n\t\t\t\t\t\t<Dashicon icon=\"cloud\" />\n\t\t\t\t\t\t{ _x( 'Saving', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ hasExperimentBeenRecentlySaved && 'scheduled' !== status && (\n\t\t\t\t\t<span className=\"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--has-been-saved\">\n\t\t\t\t\t\t<Dashicon icon=\"yes\" />\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Saved',\n\t\t\t\t\t\t\t'text (experiment)',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isExperimentBeingSaved &&\n\t\t\t\t\t! (\n\t\t\t\t\t\thasExperimentBeenRecentlySaved && 'scheduled' !== status\n\t\t\t\t\t) && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tclassName=\"nab-edit-experiment-header__save-button\"\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t'scheduled' === status\n\t\t\t\t\t\t\t\t\t? saveExperimentAsReady\n\t\t\t\t\t\t\t\t\t: saveExperiment\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ 'scheduled' === status\n\t\t\t\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t\t\t\t'Save as Ready',\n\t\t\t\t\t\t\t\t\t\t'command (experiment)',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: _x( 'Save', 'command', 'nelio-ab-testing' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\n\t\t\t\t<div className=\"nab-edit-experiment-header__start-button\">\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\ttext={ draftStatusRationale }\n\t\t\t\t\t\tplacement=\"left\"\n\t\t\t\t\t\tgetTooltipContainer={\n\t\t\t\t\t\t\t!! ref.current\n\t\t\t\t\t\t\t\t? () => ref.current as HTMLDivElement\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\tisDraft ||\n\t\t\t\t\t\t\t\t\tisExperimentBeingSaved ||\n\t\t\t\t\t\t\t\t\t! canUserStart ||\n\t\t\t\t\t\t\t\t\t( hasExperimentBeenRecentlySaved &&\n\t\t\t\t\t\t\t\t\t\t'scheduled' === status )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={ start }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ startLabel }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t\t<HelpButton />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useCanUserStart = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { hasCapability } = select( NAB_DATA );\n\t\t\treturn hasCapability(\n\t\t\t\tisPaused ? 'resume_nab_experiments' : 'start_nab_experiments'\n\t\t\t);\n\t\t},\n\t\t[ isPaused ]\n\t);\n};\n\nconst useStartLabel = () => {\n\tconst [ startDate ] = useExperimentAttribute( 'startDate' );\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\n\tif ( isPaused ) {\n\t\treturn _x( 'Resume', 'command', 'nelio-ab-testing' );\n\t}\n\n\tif ( startDate && isInTheFuture( startDate ) ) {\n\t\treturn 'scheduled' === status\n\t\t\t? _x( 'Schedule', 'command', 'nelio-ab-testing' )\n\t\t\t: _x( 'Schedule', 'command', 'nelio-ab-testing' );\n\t}\n\n\treturn _x( 'Start', 'command', 'nelio-ab-testing' );\n};\n\nconst useIcon = () =>\n\tuseSelect( ( select ) => {\n\t\tconst { getExperimentTypes } = select( NAB_EXPERIMENTS );\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\n\t\tconst experimentTypes = getExperimentTypes();\n\t\tconst typeName = getExperimentType();\n\t\treturn experimentTypes[ typeName ]?.icon;\n\t}, [] );\n\nconst useDraftStatusRationale = () =>\n\tuseSelect(\n\t\t( select ) => select( NAB_EDITOR ).getDraftStatusRationale(),\n\t\t[]\n\t);\n\nconst useIsBeingSaved = () =>\n\tuseSelect(\n\t\t( select ) => select( NAB_EDITOR ).isExperimentBeingSaved(),\n\t\t[]\n\t);\n\nconst useHasBeenRecentlySaved = () =>\n\tuseSelect(\n\t\t( select ) => select( NAB_EDITOR ).hasExperimentBeenRecentlySaved(),\n\t\t[]\n\t);\n\nconst useStarter = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst [ startDate ] = useExperimentAttribute( 'startDate' );\n\tconst isPaused = ( status || '' ).includes( 'paused' );\n\n\tconst {\n\t\tresumeExperiment,\n\t\tsetExperimentData,\n\t\tsaveExperiment,\n\t\tstartExperiment,\n\t} = useDispatch( NAB_EDITOR );\n\n\treturn () => {\n\t\tif ( isPaused ) {\n\t\t\tvoid resumeExperiment();\n\t\t} else if ( startDate && isInTheFuture( startDate ) ) {\n\t\t\tvoid setExperimentData( { status: 'scheduled' } );\n\t\t\tvoid saveExperiment();\n\t\t} else {\n\t\t\tvoid startExperiment();\n\t\t}\n\t};\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { ContextualHelpButton } from '@nab/components';\nimport { store as NAB_DATA } from '@nab/data';\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\nimport { isPlan } from '@nab/utils';\nimport type { Question, TutorialStep } from '@nab/components';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../store';\nimport { ExperimentType, Maybe, SubscriptionPlan } from '@nab/types';\n\nexport const HelpButton = (): JSX.Element => {\n\tconst walkthroughProps = useSelect( ( select ) => {\n\t\tconst typeName = select( NAB_EDITOR ).getExperimentType();\n\t\tconst type = select( NAB_EXPERIMENTS ).getExperimentType( typeName );\n\t\tconst subscriptionPlan =\n\t\t\tselect( NAB_DATA ).getPluginSetting( 'subscription' );\n\t\treturn { type, subscriptionPlan };\n\t}, [] );\n\tconst typeName = walkthroughProps.type?.name ?? 'unknown';\n\n\treturn (\n\t\t<ContextualHelpButton\n\t\t\tplacement=\"bottom-start\"\n\t\t\tscreen={ `experiment-list:${ typeName }` }\n\t\t\tquestions={ questions }\n\t\t\twalkthrough={ getWalkthrough( walkthroughProps ) }\n\t\t/>\n\t);\n};\n\nconst questions: ReadonlyArray< Question > = [\n\t{\n\t\tlabel: _x(\n\t\t\t'What is the original page or post of a test?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: 'https://neliosoftware.com/testing/help/what-is-the-original-page-or-post-of-a-test/',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Why dont all my posts/pages appear in the selection list when Im creating a new test?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: 'https://neliosoftware.com/testing/help/why-dont-all-my-posts-appear-in-the-selection-list/',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'What is a conversion and what counts as one?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: 'https://neliosoftware.com/testing/help/what-is-a-conversion/',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'How can I track conversions occurring in third-party websites?',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t),\n\t\tlink: 'https://neliosoftware.com/testing/help/how-can-i-track-conversions-occurring-in-third-party-websites/',\n\t},\n];\n\n// =======\n// HELPERS\n// =======\n\nfunction getWalkthrough( props: {\n\treadonly type: Maybe< ExperimentType >;\n\treadonly subscriptionPlan: false | SubscriptionPlan;\n} ): ReadonlyArray< TutorialStep > {\n\tconst { type, subscriptionPlan } = props;\n\n\tconst isSubscribedTo = (\n\t\texpectedPlan: SubscriptionPlan,\n\t\tmode?: 'exactly' | 'or-above'\n\t) =>\n\t\t'exactly' === mode\n\t\t\t? isPlan( subscriptionPlan, 'exactly', expectedPlan )\n\t\t\t: isPlan( subscriptionPlan, 'exactly-or-above', expectedPlan );\n\n\treturn [\n\t\t{\n\t\t\ttitle: _x( 'Test Editor', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Welcome to the Test Editor. Here youll be able to select the element you want to test and create one or more variants to find out which one converts the most. As you can see, its quite similar to WordPress Block Editor: theres a header, a sidebar, and a main area.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Name', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Youll notice that all test types have a similar user interface. When creating a new test, youll first have to name it. Just type in a descriptive name that helps you identify the test in the future.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-title' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Variants', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Next, theres a Control Version and Variants section. Use it to (a) identify the element you want to test and (b) create one or more split testing variants.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-edit-experiment__alternative-section'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Variant A', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: type?.help?.original ?? '',\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-alternative-list__alternative--original'\n\t\t\t\t),\n\t\t\tactive: () => !! type?.help?.original,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Variant B', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: type?.help?.alternative ?? '',\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)'\n\t\t\t\t),\n\t\t\tactive: () =>\n\t\t\t\t!! type?.help?.alternative &&\n\t\t\t\t!! document.querySelector(\n\t\t\t\t\t'.nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Goals', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Split tests help you to improve the conversion rate of your website. Here you can set up the goals a test pursues and the specific conversion actions that, when performed by a visitor, will trigger a conversion.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-edit-experiment__goal-section' ),\n\t\t\tactive: () => ! type?.supports?.automaticGoalSetup,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Goals', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Split tests help you to improve the conversion rate of your website. With this type of test, the conversion goal and conversion action that might trigger a conversion is already set up by Nelio A/B Testing.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-edit-experiment__goal-section' ),\n\t\t\tactive: () => !! type?.supports?.automaticGoalSetup,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Actions', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Use these buttons to add the specific conversion actions that might trigger a conversion like, for example, visiting a page or clicking an element on the page.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-conversion-action-type-list' ),\n\t\t\tactive: () =>\n\t\t\t\t!! document.querySelector( '.nab-conversion-action-type-list' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Segmentation', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'If you subscribe to Nelio A/B Testing, youll be able to segment your visitors into groups and specify who may or may not participate in a test.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-edit-experiment__segmentation-section'\n\t\t\t\t),\n\t\t\tactive: () =>\n\t\t\t\t!! document.querySelector(\n\t\t\t\t\t'.nab-edit-experiment-segmentation-section__content--free'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Segmentation', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'You can segment your audience into different groups and look at the performance of your split test with respect to each group. You can also use segmentation to limit who may or may not participate in a test.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector(\n\t\t\t\t\t'.nab-edit-experiment__segmentation-section'\n\t\t\t\t),\n\t\t\tactive: () =>\n\t\t\t\t! document.querySelector(\n\t\t\t\t\t'.nab-edit-experiment-segmentation-section__content--free'\n\t\t\t\t),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Status', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Here you can see the current status of your test: once its Ready, youll be able to start it. Also, if you subscribe to our Professional plan, youll be able to schedule when a test should be started, as well as to define if and when it should be automatically stopped.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-experiment-management' ),\n\t\t\tactive: () => ! isSubscribedTo( 'professional' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Status', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'Here you can see the current status of your test: once its Ready, youll be able to start it. You can also schedule when the test should be started, as well as define a stop condition to automatically stop the test.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () =>\n\t\t\t\tdocument.querySelector( '.nab-experiment-management' ),\n\t\t\tactive: () => isSubscribedTo( 'professional' ),\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Scope', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'By default, this type of test will show up on all pages of your website. You can limit its scope by specifying the URLs in which the test should be visible.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-scope' ),\n\t\t\tactive: () =>\n\t\t\t\t'urls' === type?.supports?.scope ||\n\t\t\t\t'urls-with-tested-post' === type?.supports?.scope,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Scope', 'text', 'nelio-ab-testing' ),\n\t\t\tintro:\n\t\t\t\t_x(\n\t\t\t\t\t'By default, this type of test will show up on all pages of your website. You can limit its scope by specifying the URLs in which the test should be visible.',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) +\n\t\t\t\t' ' +\n\t\t\t\t_x(\n\t\t\t\t\t'Alternatively, you can specify where variants should be visible using PHP.',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-scope' ),\n\t\t\tactive: () => 'urls-or-php' === type?.supports?.scope,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Scope', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'This type of test applies to a specific element of your website, be it a page, a post, or what. If you enable Global Consistency, our plugin will also load the appropriate variant on any page in which the tested element (i.e. its title, featured image, and so on) shows up.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-scope' ),\n\t\t\tactive: () =>\n\t\t\t\t'tested-post-with-consistency' === type?.supports?.scope,\n\t\t},\n\t\t{\n\t\t\ttitle: _x( 'Scope', 'text', 'nelio-ab-testing' ),\n\t\t\tintro: _x(\n\t\t\t\t'This type of test applies to a specific product on your store. If you enable the option to run it on products page only, our plugin will only load alternative content when the visitor sees the tested products page. If the product shows up anywhere else on your store, the control version will be shown and no page views will be tracked.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\telement: () => document.querySelector( '.nab-experiment-scope' ),\n\t\t\tactive: () =>\n\t\t\t\t'tested-product-with-consistency' === type?.supports?.scope,\n\t\t},\n\t];\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { store as NAB_DATA, usePluginSetting } from '@nab/data';\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\nimport type { ExperimentType, Maybe, SubscriptionPlan } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../store';\nimport type { ExperimentAttributes } from '../store/types';\n\nexport function useExperimentAttribute< K extends keyof ExperimentAttributes >(\n\tattr: K\n): Readonly<\n\t[ ExperimentAttributes[ K ], ( v: ExperimentAttributes[ K ] ) => void ]\n> {\n\tconst value = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getExperimentAttribute( attr ),\n\t\t[ attr ]\n\t);\n\n\tconst { setExperimentData } = useDispatch( NAB_EDITOR );\n\tconst setValue = ( v: ExperimentAttributes[ K ] ): void =>\n\t\tvoid setExperimentData( { [ attr ]: v } );\n\n\treturn [ value, setValue ] as const;\n}\n\nexport function useExperimentType(): Maybe< ExperimentType > {\n\tconst typeName = useExperimentAttribute( 'type' )[ 0 ];\n\treturn useSelect(\n\t\t( select ) => select( NAB_EXPERIMENTS ).getExperimentType( typeName ),\n\t\t[ typeName ]\n\t);\n}\n\nexport const useIsSubscribedTo = ( plan: SubscriptionPlan ): boolean =>\n\tuseSelect(\n\t\t( select ) => select( NAB_DATA ).isSubscribedTo( plan ),\n\t\t[ plan ]\n\t);\n\nexport const useCanAddAlternatives = (): boolean => {\n\tconst maxAlternatives = usePluginSetting( 'maxCombinations' );\n\tconst numOfAlternatives = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getAlternativeIds().length,\n\t\t[]\n\t);\n\tconst isExperimentPaused = useIsExperimentPaused();\n\treturn ! isExperimentPaused && numOfAlternatives < maxAlternatives;\n};\n\nexport const useIsExperimentPaused = (): boolean => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn status.includes( 'paused' );\n};\n\nexport const useSubscription = (): SubscriptionPlan | false =>\n\tuseSelect(\n\t\t( select ) => select( NAB_DATA ).getPluginSetting( 'subscription' ),\n\t\t[]\n\t);\n","/**\n * WordPress dependencies\n */\nimport { NoticeList } from '@safe-wordpress/components';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\nimport { store as NOTICES } from '@safe-wordpress/notices';\n\n/**\n * External dependencies\n */\nimport { isEmpty } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { StatusManager } from '../status-manager';\nimport { Header } from '../header';\nimport { ExperimentName } from '../experiment-name';\nimport { GoalSection } from '../goal-section';\nimport { SegmentationSection } from '../segmentation-section';\nimport { Sidebar } from '../sidebar';\n\nimport { AlternativeSection } from '../alternative-section';\n\nexport const Layout = (): JSX.Element => {\n\tconst notices = useNotices();\n\tconst { removeNotice } = useDispatch( NOTICES );\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment-layout\">\n\t\t\t<StatusManager />\n\t\t\t<Header />\n\t\t\t<div className=\"nab-edit-experiment-layout__body\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"nab-edit-experiment-layout__content\"\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\t/* translators: %s: Accessibility text for the content landmark region. */\n\t\t\t\t\taria-label={ _x(\n\t\t\t\t\t\t'Editor content',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t>\n\t\t\t\t\t{ ! isEmpty( notices ) && (\n\t\t\t\t\t\t<NoticeList\n\t\t\t\t\t\t\tclassName=\"nab-edit-experiment-layout__notices\"\n\t\t\t\t\t\t\tnotices={ notices }\n\t\t\t\t\t\t\tonRemove={ removeNotice }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<ExperimentName />\n\t\t\t\t\t<AlternativeSection />\n\t\t\t\t\t<GoalSection />\n\t\t\t\t\t<SegmentationSection />\n\t\t\t\t</div>\n\n\t\t\t\t<Sidebar />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useNotices = () =>\n\tuseSelect( ( select ) => select( NOTICES ).getNotices(), [] );\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@safe-wordpress/data';\nimport { useEffect, useState } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { createGoal } from '@nab/utils';\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../../store';\n\nexport type EditorProviderProps = {\n\treadonly experiment?: Experiment;\n\treadonly children: JSX.Element;\n};\n\nexport const EditorProvider = ( {\n\texperiment,\n\tchildren,\n}: EditorProviderProps ): JSX.Element | null => {\n\tconst [ isReady, markAsReady ] = useState( false );\n\tconst { setupEditor, setActiveGoal, setActiveSegment } =\n\t\tuseDispatch( NAB_EDITOR );\n\n\tuseEffect( () => {\n\t\tif ( isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! experiment ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultGoal = experiment.goals[ 0 ] || createGoal();\n\t\tconst activeSegment = experiment.segments[ 0 ];\n\n\t\tvoid setupEditor( experiment );\n\t\tvoid setActiveGoal( defaultGoal.id );\n\t\tif ( activeSegment ) {\n\t\t\tvoid setActiveSegment( activeSegment.id );\n\t\t}\n\t\tmarkAsReady( true );\n\t}, [ experiment, isReady, setupEditor, setActiveGoal, setActiveSegment ] );\n\n\treturn isReady ? <div>{ children }</div> : null;\n};\n","/**\n * WordPress dependencies\n */\nimport { Button, Dashicon } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\nimport { trim } from 'lodash';\nimport { createSegment } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../hooks';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const SegmentList = (): JSX.Element => {\n\tconst activeSegmentId = useActiveSegmentId();\n\tconst segments = useSegments();\n\tconst isExperimentPaused = useIsExperimentPaused();\n\tconst { setActiveSegment, addSegments } = useDispatch( NAB_EDITOR );\n\tconst canAddSegments = true;\n\n\treturn (\n\t\t<ul className=\"nab-segment-list\">\n\t\t\t{ segments.map( ( segment, index ) => (\n\t\t\t\t<li\n\t\t\t\t\tkey={ segment.id }\n\t\t\t\t\tclassName={ clsx( 'nab-segment-list__item', {\n\t\t\t\t\t\t'nab-segment-list__item--is-active':\n\t\t\t\t\t\t\tsegment.id === activeSegmentId,\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={ segment.id === activeSegmentId }\n\t\t\t\t\t\tonClick={ () => setActiveSegment( segment.id ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ trim( segment.attributes.name ) ||\n\t\t\t\t\t\t\tgetDefaulSegmentNameForIndex( index ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) ) }\n\n\t\t\t{ ! isExperimentPaused && canAddSegments && (\n\t\t\t\t<li\n\t\t\t\t\tclassName=\"nab-segment-list__add-new-segment\"\n\t\t\t\t\tkey=\"add-new-segment\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"nab-segment-list__add-new-segment-button\"\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tconst segment = createSegment();\n\t\t\t\t\t\t\tvoid addSegments( segment );\n\t\t\t\t\t\t\tvoid setActiveSegment( segment.id );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dashicon icon=\"plus\" />\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'New',\n\t\t\t\t\t\t\t\t'command (segment)',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</li>\n\t\t\t) }\n\t\t</ul>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveSegmentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveSegment()?.id, [] );\n\nconst useSegments = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getSegments() || [], [] );\n\nconst useIsExperimentPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn status.includes( 'paused' );\n};\n\n// =======\n// HELPERS\n// =======\n\nconst getDefaulSegmentNameForIndex = ( index: number ) =>\n\tsprintf(\n\t\t/* translators: %d: Number. */\n\t\t_x( 'Segment %d', 'text', 'nelio-ab-testing' ),\n\t\tindex + 1\n\t);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Button, TextControl } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { createSegmentationRule as createSegmentationRuleWithDefaults } from '@nab/segmentation-rules';\nimport type { SegmentationRuleTypeName } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRuleList } from './segmentation-rule-list';\nimport { SegmentationRuleTypeCategoryList } from './segmentation-rule-type-category-list';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport type SegmentProps = {\n\treadonly name: string;\n\treadonly setName: ( name: string ) => void;\n\treadonly removeSegment?: () => void;\n};\n\nexport const Segment = ( {\n\tname,\n\tsetName,\n\tremoveSegment,\n}: SegmentProps ): JSX.Element => {\n\tconst activeSegmentRules = useActiveSegmentRules();\n\tconst createSegmentationRule = useSegmentationRuleCreator();\n\n\treturn (\n\t\t<div className=\"nab-current-segment-info\">\n\t\t\t<div className=\"nab-current-segment-info__header\">\n\t\t\t\t<TextControl\n\t\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t\t'Name your segment',\n\t\t\t\t\t\t'user',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ name }\n\t\t\t\t\tonChange={ ( value ) => setName( value ) }\n\t\t\t\t/>\n\t\t\t\t{ !! removeSegment && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tclassName=\"nab-current-segment-info__delete-button\"\n\t\t\t\t\t\tonClick={ removeSegment }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Delete',\n\t\t\t\t\t\t\t'command (segment)',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<SegmentationRuleList />\n\t\t\t<SegmentationRuleTypeCategoryList\n\t\t\t\tsegmentationRules={ activeSegmentRules }\n\t\t\t\tcreateSegmentationRule={ createSegmentationRule }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveSegment = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveSegment(), [] );\n\nconst useActiveSegmentRules = () => {\n\tconst activeSegment = useActiveSegment();\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSegmentationRules } = select( NAB_EDITOR );\n\t\t\treturn activeSegment?.id\n\t\t\t\t? getSegmentationRules( activeSegment.id ) || []\n\t\t\t\t: [];\n\t\t},\n\t\t[ activeSegment ]\n\t);\n};\n\nconst useSegmentationRuleCreator = () => {\n\tconst { addSegmentationRulesIntoSegment } = useDispatch( NAB_EDITOR );\n\tconst activeSegment = useActiveSegment();\n\treturn ( type: SegmentationRuleTypeName ) => {\n\t\tif ( ! activeSegment ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rule = createSegmentationRuleWithDefaults( type );\n\t\tif ( rule ) {\n\t\t\tvoid addSegmentationRulesIntoSegment( activeSegment.id, rule );\n\t\t}\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@safe-wordpress/data';\nimport { createInterpolateElement } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport type { Dict, SegmentationRuleId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRule } from '../segmentation-rule';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport const SegmentationRuleList = (): JSX.Element => {\n\tconst segmentationRules = useActiveSegmentRules();\n\tconst setRuleAttributes = useSetRuleAttributes();\n\tconst removeRule = useRemoveRule();\n\n\treturn (\n\t\t<div className=\"nab-segmentation-rule-list\">\n\t\t\t{ !! segmentationRules.length && (\n\t\t\t\t<p key=\"segmentation-rule-explanation-1\">\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'A visitor participates in the test every time all of the following segmentation rules match:',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t{ segmentationRules.map( ( rule ) => (\n\t\t\t\t<SegmentationRule\n\t\t\t\t\tkey={ rule.id }\n\t\t\t\t\trule={ rule }\n\t\t\t\t\tsetAttributes={ ( attrs ) =>\n\t\t\t\t\t\tsetRuleAttributes( rule.id, attrs )\n\t\t\t\t\t}\n\t\t\t\t\tremove={ () => removeRule( rule.id ) }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t{ ! segmentationRules.length && [\n\t\t\t\t<p\n\t\t\t\t\tkey=\"segmentation-rule-explanation-1\"\n\t\t\t\t\tclassName=\"nab-segmentation-rule-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Split tests are usually applied to all visitors. But you can narrow your audience using segmentation rules to target only a subset of your visitors.',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t</p>,\n\t\t\t\t<p\n\t\t\t\t\tkey=\"segmentation-rule-explanation-2\"\n\t\t\t\t\tclassName=\"nab-segmentation-rule-list__help\"\n\t\t\t\t>\n\t\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'Use the buttons below to <strong>add the specific segmentation rules</strong> for this segment.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t</p>,\n\t\t\t] }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveSegment = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getActiveSegment(), [] );\n\nconst useActiveSegmentRules = () => {\n\tconst activeSegment = useActiveSegment();\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSegmentationRules } = select( NAB_EDITOR );\n\t\t\treturn activeSegment?.id\n\t\t\t\t? getSegmentationRules( activeSegment.id ) || []\n\t\t\t\t: [];\n\t\t},\n\t\t[ activeSegment ]\n\t);\n};\n\nconst useSetRuleAttributes = (): ( (\n\truleId: SegmentationRuleId,\n\tattrs: Dict\n) => void ) => {\n\tconst segmentId = useActiveSegment()?.id;\n\tconst { updateSegmentationRule } = useDispatch( NAB_EDITOR );\n\treturn ( ruleId, attrs ) =>\n\t\tsegmentId ? updateSegmentationRule( segmentId, ruleId, attrs ) : noop;\n};\n\nconst useRemoveRule = (): ( ( ruleId: SegmentationRuleId ) => void ) => {\n\tconst segmentId = useActiveSegment()?.id;\n\tconst { removeSegmentationRulesFromSegment } = useDispatch( NAB_EDITOR );\n\treturn ( ruleId ) =>\n\t\tsegmentId\n\t\t\t? removeSegmentationRulesFromSegment( segmentId, ruleId )\n\t\t\t: noop;\n};\n\nconst noop = () => void null;\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { DropdownMenu } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport type { SegmentationRule, SegmentationRuleTypeName } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { SegmentationRuleTypeCategory } from '../segmentation-rule-type-category';\n\nexport type SegmentationRuleTypeCategoryListProps = {\n\treadonly createSegmentationRule: ( type: SegmentationRuleTypeName ) => void;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\nexport const SegmentationRuleTypeCategoryList = ( {\n\tcreateSegmentationRule,\n\tsegmentationRules,\n}: SegmentationRuleTypeCategoryListProps ): JSX.Element => {\n\tconst segmentationRuleTypeCategories = useSegmentationRuleTypeCategories();\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName=\"nab-segmentation-rule-type-new\"\n\t\t\ticon={ null }\n\t\t\tlabel={ _x( 'Add Rule', 'command', 'nelio-ab-testing' ) }\n\t\t\ttoggleProps={ {\n\t\t\t\tvariant: 'secondary',\n\t\t\t\tchildren: _x( 'Add Rule', 'command', 'nelio-ab-testing' ),\n\t\t\t} }\n\t\t\tpopoverProps={ {\n\t\t\t\tclassName: 'nab-segmentation-rule-type-new__list',\n\t\t\t\tplacement: 'top-center',\n\t\t\t} }\n\t\t\tchildren={ ( { onClose } ) =>\n\t\t\t\tsegmentationRuleTypeCategories.map( ( category ) => (\n\t\t\t\t\t<SegmentationRuleTypeCategory\n\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\tcreateSegmentationRule={ createSegmentationRule }\n\t\t\t\t\t\tsegmentationRules={ segmentationRules }\n\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t) )\n\t\t\t}\n\t\t/>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSegmentationRuleTypeCategories = () =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypeCategories() || [],\n\t\t[]\n\t);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { MenuGroup, MenuItem } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport { EMPTY_ARRAY } from '@nab/utils';\nimport type {\n\tSegmentationRule,\n\tSegmentationRuleCategory,\n\tSegmentationRuleCategoryName,\n\tSegmentationRuleTypeName,\n} from '@nab/types';\n\nexport type SegmentationRuleTypeCategoryProps = {\n\treadonly category: SegmentationRuleCategory;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n\treadonly createSegmentationRule: ( type: SegmentationRuleTypeName ) => void;\n\treadonly onClose: () => void;\n};\n\nexport const SegmentationRuleTypeCategory = ( {\n\tcategory,\n\tsegmentationRules,\n\tcreateSegmentationRule,\n\tonClose,\n}: SegmentationRuleTypeCategoryProps ): JSX.Element | null => {\n\tconst segmentationRuleTypes = useSegmentationRuleTypes( category.name );\n\n\tif ( ! segmentationRuleTypes.length ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuGroup label={ category.title }>\n\t\t\t{ segmentationRuleTypes.map(\n\t\t\t\t( { name, title, icon: Icon, singleton } ) => (\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\ticon={ <Icon /> }\n\t\t\t\t\t\t{ ...{ iconPosition: 'left' } }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tcreateSegmentationRule( name );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\tsingleton &&\n\t\t\t\t\t\t\tsegmentationRules.some(\n\t\t\t\t\t\t\t\t( rule ) => rule.type === name\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ title }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t)\n\t\t\t) }\n\t\t</MenuGroup>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSegmentationRuleTypes = ( catName: SegmentationRuleCategoryName ) => {\n\tconst ruleTypes = useSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypes() || EMPTY_ARRAY,\n\t\t[]\n\t);\n\treturn ruleTypes.filter( ( { category } ) => category === catName );\n};\n","/**\n * WordPress dependencies\n */\nimport { Button, Dashicon, PanelBody } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport { isEmpty } from '@nab/utils';\nimport type {\n\tDict,\n\tSegmentationRuleTypeName,\n\tSegmentationRule as SR,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport type SegmentationRuleProps = {\n\treadonly readOnly?: boolean;\n\treadonly rule: SR;\n\treadonly setAttributes: ( attrs: Dict ) => void;\n\treadonly remove: () => void;\n};\n\nexport const SegmentationRule = ( {\n\treadOnly,\n\trule,\n\tsetAttributes,\n\tremove,\n}: SegmentationRuleProps ): JSX.Element => {\n\tconst experimentId = useExperimentId();\n\tconst ruleType = useSegmentationRuleType( rule.type );\n\n\tconst View = ruleType?.view;\n\tconst Edit = ruleType?.edit;\n\tconst Icon = ruleType?.icon;\n\tconst attributes = rule?.attributes || {};\n\tconst validate = ruleType?.validate ?? ( () => ( {} ) );\n\n\tconst errors = validate( attributes );\n\tconst hasErrors = ! isEmpty( errors );\n\tconst [ opened, onToggle ] = useState( hasErrors );\n\n\tif ( readOnly ) {\n\t\treturn (\n\t\t\t<div className=\"nab-segmentation-rule\">\n\t\t\t\t<div className=\"nab-segmentation-rule__view\">\n\t\t\t\t\t{ !! Icon ? (\n\t\t\t\t\t\t<Icon className=\"nab-segmentation-rule__icon\" />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\tclassName=\"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid\"\n\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"nab-segmentation-rule__actual-view\">\n\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t'Invalid segmentation rule.',\n\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst showActualIcon = !! Icon && ( ! hasErrors || opened );\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-segmentation-rule\"\n\t\t\topened={ opened }\n\t\t\tonToggle={ onToggle }\n\t\t\ttitle={\n\t\t\t\t(\n\t\t\t\t\t<div className=\"nab-segmentation-rule__view\">\n\t\t\t\t\t\t{ showActualIcon ? (\n\t\t\t\t\t\t\t<Icon className=\"nab-segmentation-rule__icon\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\tclassName=\"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid\"\n\t\t\t\t\t\t\t\ticon=\"warning\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<div className=\"nab-segmentation-rule__actual-view\">\n\t\t\t\t\t\t\t{ !! View ? (\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t\t\t'Invalid segmentation rule.',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t ) as unknown as string\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"nab-segmentation-rule__edit\">\n\t\t\t\t{ !! Edit ? (\n\t\t\t\t\t<Edit\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\texperimentId={ experimentId }\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\terrors={ errors }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'This segmentation rule cant be properly loaded. Please consider removing it.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t<Button\n\t\t\t\tvariant=\"link\"\n\t\t\t\tisDestructive\n\t\t\t\tonClick={ remove }\n\t\t\t\tclassName=\"nab-segmentation-rule__delete-button\"\n\t\t\t>\n\t\t\t\t{ _x( 'Delete', 'command', 'neli-ab-testing' ) }\n\t\t\t</Button>\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentId = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentId(), [] );\n\nconst useSegmentationRuleType = ( type: SegmentationRuleTypeName ) =>\n\tuseSelect(\n\t\t( select ) => select( NAB_SEGMENTS ).getSegmentationRuleType( type ),\n\t\t[ type ]\n\t);\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Dashicon, SelectControl } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { createInterpolateElement } from '@safe-wordpress/element';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { findIndex } from 'lodash';\nimport { usePluginSetting } from '@nab/data';\nimport type { Dict, Segment as RealSegment, SegmentId } from '@nab/types';\ntype Segment = Omit< RealSegment, 'segmentationRules' >;\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../hooks';\nimport { Segment as SegmentView } from '../segment';\nimport { SegmentList } from '../segment-list';\nimport { store as NAB_EDITOR } from '../../store';\n\nexport const SegmentationSection = (): JSX.Element => {\n\tconst [ segment, updateActiveSegment ] = useActiveSegment();\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst [ segmentEvaluation, setSegmentEvaluation ] = useSegmentEvaluation();\n\tconst globalSegmentEvaluation = usePluginSetting( 'segmentEvaluation' );\n\tconst isExperimentPaused = ( status || '' ).includes( 'paused' );\n\n\tconst removeActiveSegment = useActiveSegmentRemover();\n\tconst canSegmentBeRemoved = ! isExperimentPaused;\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment__segmentation-section\">\n\t\t\t<h2>\n\t\t\t\t<span>\n\t\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t/* translators: %s: Dashicon. */\n\t\t\t\t\t\t\t_x( '%s Segmentation', 'text', 'nelio-ab-testing' ),\n\t\t\t\t\t\t\t'<icon></icon>'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\t\tclassName=\"nab-segmentation-section__title-icon\"\n\t\t\t\t\t\t\t\t\ticon=\"groups\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t</span>\n\n\t\t\t\t{ 'custom' === globalSegmentEvaluation && (\n\t\t\t\t\t<div className=\"nab-edit-experiment-segmentation-section__strategy\">\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tvalue={ segmentEvaluation }\n\t\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'site' as const,\n\t\t\t\t\t\t\t\t\tlabel: _x(\n\t\t\t\t\t\t\t\t\t\t'Evaluate on Site Landing',\n\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'tested-page' as const,\n\t\t\t\t\t\t\t\t\tlabel: _x(\n\t\t\t\t\t\t\t\t\t\t'Evaluate on Tested Pages',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\tonChange={ setSegmentEvaluation }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</h2>\n\n\t\t\t<div className=\"nab-edit-experiment-segmentation-section__content\">\n\t\t\t\t<SegmentList />\n\t\t\t\t{ segment ? (\n\t\t\t\t\t<SegmentView\n\t\t\t\t\t\tname={ segment.attributes.name }\n\t\t\t\t\t\tsetName={ ( name ) =>\n\t\t\t\t\t\t\tupdateActiveSegment( {\n\t\t\t\t\t\t\t\t...segment.attributes,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoveSegment={\n\t\t\t\t\t\t\tcanSegmentBeRemoved\n\t\t\t\t\t\t\t\t? removeActiveSegment\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<p className=\"nab-edit-experiment-segmentation-section__content--empty\">\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Add a new segment to narrow your tested audience and target only a subset of your visitors.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useActiveSegment = () => {\n\tconst segment = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getActiveSegment(),\n\t\t[]\n\t);\n\n\tconst { updateSegment: doUpdate } = useDispatch( NAB_EDITOR );\n\tconst updateSegment = ( attributes: Dict ) => {\n\t\tif ( segment?.id ) {\n\t\t\tvoid doUpdate( segment.id, attributes );\n\t\t}\n\t};\n\n\treturn [ segment, updateSegment ] as const;\n};\n\nconst useActiveSegmentRemover = () => {\n\tconst [ segment ] = useActiveSegment();\n\tconst segments = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getSegments(),\n\t\t[]\n\t);\n\n\tconst { removeSegments, setActiveSegment } = useDispatch( NAB_EDITOR );\n\n\tif ( ! segment ) {\n\t\treturn () => null;\n\t}\n\n\treturn () => {\n\t\tconst nextSegment = getAdjacentSegment( segments, segment.id );\n\t\tif ( nextSegment ) {\n\t\t\tvoid setActiveSegment( nextSegment.id );\n\t\t}\n\t\tvoid removeSegments( segment.id );\n\t};\n};\n\nconst useSegmentEvaluation = () => {\n\tconst segmentEvaluation = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getSegmentEvaluation(),\n\t\t[]\n\t);\n\tconst { setSegmentEvaluation } = useDispatch( NAB_EDITOR );\n\treturn [ segmentEvaluation, setSegmentEvaluation ] as const;\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getAdjacentSegment(\n\tsegments: ReadonlyArray< Segment >,\n\tsegmentId: SegmentId\n): Segment | false {\n\tconst index = findIndex( segments, { id: segmentId } );\n\treturn segments[ index + 1 ] || segments[ index - 1 ] || false;\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { PanelBody, TextareaControl } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useExperimentAttribute } from '../../hooks';\n\nexport const Description = (): JSX.Element => {\n\tconst [ description, setDescription ] =\n\t\tuseExperimentAttribute( 'description' );\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-experiment-description\"\n\t\t\ttitle={ _x( 'Description', 'text', 'nelio-ab-testing' ) }\n\t\t>\n\t\t\t<TextareaControl\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Describe your test (optional)',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tclassName=\"nab-experiment-description__textarea\"\n\t\t\t\tvalue={ description }\n\t\t\t\tonChange={ setDescription }\n\t\t\t/>\n\t\t</PanelBody>\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { CheckboxControl } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { useEffect } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * Internal dependencies\n */\nimport { useExperimentAttribute, useExperimentType } from '../../../hooks';\nimport { store as NAB_EDITOR } from '../../../../store';\nimport './style.scss';\n\nexport const AutoApplyWinner = (): JSX.Element | null => {\n\tconst [ isAutoApplyEnabled, enableAutoApply ] = useExperimentAttribute(\n\t\t'autoAlternativeApplication'\n\t);\n\tconst supportsAutoApply = useSupportsAlternativeApplication();\n\n\tuseEffect( () => {\n\t\tif ( 'yes' === supportsAutoApply ) {\n\t\t\treturn;\n\t\t}\n\t\tenableAutoApply( false );\n\t}, [ supportsAutoApply, enableAutoApply ] );\n\n\tif ( 'no' === supportsAutoApply ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"nab-experiment-auto-apply-winner\">\n\t\t\t<CheckboxControl\n\t\t\t\tclassName={ clsx( {\n\t\t\t\t\t'nab-experiment-auto-apply-winner__checkbox': true,\n\t\t\t\t\t'nab-experiment-auto-apply-winner__checkbox--disabled':\n\t\t\t\t\t\t'not-now' === supportsAutoApply,\n\t\t\t\t} ) }\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Apply winner automatically',\n\t\t\t\t\t'command',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t\tchecked={ isAutoApplyEnabled }\n\t\t\t\tonChange={ enableAutoApply }\n\t\t\t\tdisabled={ 'not-now' === supportsAutoApply }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSupportsAlternativeApplication = (): 'yes' | 'no' | 'not-now' => {\n\tconst type = useExperimentType();\n\tconst control = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getAlternative( 'control' ),\n\t\t[]\n\t);\n\n\tif ( ! control || ! type?.supports.alternativeApplication ) {\n\t\treturn 'no';\n\t}\n\n\tif ( 'boolean' === typeof type.supports.alternativeApplication ) {\n\t\treturn type.supports.alternativeApplication ? 'yes' : 'no';\n\t}\n\n\treturn type.supports.alternativeApplication( control.attributes )\n\t\t? 'yes'\n\t\t: 'not-now';\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tDropdown,\n\tPanelRow,\n\tSelectControl,\n\tTextControl,\n} from '@safe-wordpress/components';\nimport { useInstanceId } from '@safe-wordpress/compose';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useState } from '@safe-wordpress/element';\nimport { _n, _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { find } from 'lodash';\nimport { numberFormat } from '@nab/i18n';\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute, useIsSubscribedTo } from '../../../hooks';\nimport { store as NAB_EDITOR } from '../../../../store';\n\nexport const ExperimentEndSchedule = (): JSX.Element => {\n\tconst instanceId = useInstanceId( ExperimentEndSchedule );\n\n\tconst canBeScheduled = useIsSubscribedTo( 'professional' );\n\tconst [ endMode ] = useExperimentAttribute( 'endMode' );\n\tconst [ endValue ] = useExperimentAttribute( 'endValue' );\n\tconst experimentType = useExperimentType();\n\tconst options = END_MODE_OPTIONS[ endMode ];\n\n\tconst [ isCustom, setCustom ] = useCustomValue();\n\n\tconst { setExperimentData } = useDispatch( NAB_EDITOR );\n\tconst onUpdateEndSchedule = (\n\t\tmode: Experiment[ 'endMode' ],\n\t\tvalue: number\n\t) => setExperimentData( { endMode: mode, endValue: value } );\n\n\tif ( ! canBeScheduled ) {\n\t\treturn (\n\t\t\t<PanelRow className=\"nab-experiment-end-schedule\">\n\t\t\t\t<span>{ _x( 'End', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t\t<span>{ _x( 'Manual', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t</PanelRow>\n\t\t);\n\t}\n\n\treturn (\n\t\t<PanelRow className=\"nab-experiment-end-schedule\">\n\t\t\t<span>{ _x( 'End', 'text', 'nelio-ab-testing' ) }</span>\n\n\t\t\t<Dropdown\n\t\t\t\tplacement=\"bottom-end\"\n\t\t\t\tcontentClassName=\"nab-experiment-end-schedule__dropdown\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName=\"nab-experiment-end-schedule__value screen-reader-text\"\n\t\t\t\t\t\t\thtmlFor={ `nab-experiment-end-schedule__toggle-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t\t'Click to change',\n\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\tid={ `nab-experiment-end-schedule__toggle-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"nab-experiment-end-schedule__toggle\"\n\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ getLabel( endMode, endValue ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t\t\t'End Mode',\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tvalue={ endMode }\n\t\t\t\t\t\t\tonChange={ ( mode ) => {\n\t\t\t\t\t\t\t\tsetCustom( false );\n\t\t\t\t\t\t\t\tvoid onUpdateEndSchedule(\n\t\t\t\t\t\t\t\t\tmode,\n\t\t\t\t\t\t\t\t\tgetDefaultValue( mode )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\toptions={ END_MODES.filter(\n\t\t\t\t\t\t\t\t( { value } ) =>\n\t\t\t\t\t\t\t\t\t'confidence' !== value ||\n\t\t\t\t\t\t\t\t\t'nab/heatmap' !== experimentType\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{ !! options && (\n\t\t\t\t\t\t\t<div style={ { marginTop: '1em' } }>\n\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t\t\t\t\t'Value',\n\t\t\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tonChange={ ( value: string ) => {\n\t\t\t\t\t\t\t\t\t\tsetCustom( 'custom' === value );\n\t\t\t\t\t\t\t\t\t\tvoid onUpdateEndSchedule(\n\t\t\t\t\t\t\t\t\t\t\tendMode,\n\t\t\t\t\t\t\t\t\t\t\tNumber.parseInt( value ) || 0\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\tisCustom ? 'custom' : `${ endValue }`\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t{ !! options && isCustom && (\n\t\t\t\t\t\t\t<div style={ { marginTop: '0.5em' } }>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tplaceholder={ getCustomPlaceholder(\n\t\t\t\t\t\t\t\t\t\tendMode\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tvalue={ endValue || '' }\n\t\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\t\tonUpdateEndSchedule(\n\t\t\t\t\t\t\t\t\t\t\tendMode,\n\t\t\t\t\t\t\t\t\t\t\tNumber.parseInt( value ) || 0\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</PanelRow>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useExperimentType = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getExperimentType(), [] );\n\nconst useCustomValue = () => {\n\tconst [ endMode ] = useExperimentAttribute( 'endMode' );\n\tconst [ endValue ] = useExperimentAttribute( 'endValue' );\n\tconst options = END_MODE_OPTIONS[ endMode ];\n\tconst shouldBeCustom =\n\t\t!! find( options, { value: 'custom' } ) &&\n\t\t! find( options, { value: `${ endValue }` } );\n\tconst [ isCustom, setCustom ] = useState( shouldBeCustom );\n\treturn [ isCustom, setCustom ] as const;\n};\n\n// ====\n// DATA\n// ====\n\nconst END_MODES: ReadonlyArray< {\n\treadonly value: Experiment[ 'endMode' ];\n\treadonly label: string;\n} > = [\n\t{\n\t\tvalue: 'manual',\n\t\tlabel: _x( 'Manual', 'text', 'nelio-ab-testing' ),\n\t},\n\t{\n\t\tvalue: 'duration',\n\t\tlabel: _x( 'Duration', 'text', 'nelio-ab-testing' ),\n\t},\n\t{\n\t\tvalue: 'page-views',\n\t\tlabel: _x( 'Page Views', 'text', 'nelio-ab-testing' ),\n\t},\n\t{\n\t\tvalue: 'confidence',\n\t\tlabel: _x( 'Confidence', 'text', 'nelio-ab-testing' ),\n\t},\n];\n\nconst END_MODE_OPTIONS: Record<\n\tExperiment[ 'endMode' ],\n\tReadonlyArray< {\n\t\treadonly value: string;\n\t\treadonly label: string;\n\t\treadonly placeholder?: string;\n\t} >\n> = {\n\tmanual: [],\n\tconfidence: [ 95, 96, 97, 98, 99 ].map( ( percentage ) => ( {\n\t\tvalue: `${ percentage }`,\n\t\tlabel: sprintf(\n\t\t\t/* translators: %s: Percentage number, such as 95. */\n\t\t\t_x( '%s%%', 'text', 'nelio-ab-testing' ),\n\t\t\tnumberFormat( percentage )\n\t\t),\n\t} ) ),\n\tduration: [\n\t\t...[ 5, 7, 15, 30, 60, 90 ].map( ( duration ) => ( {\n\t\t\tvalue: `${ duration }`,\n\t\t\tlabel: sprintf(\n\t\t\t\t/* translators: %d: Number of days. */\n\t\t\t\t_n( '%d day', '%d days', duration, 'nelio-ab-testing' ),\n\t\t\t\tduration\n\t\t\t),\n\t\t} ) ),\n\t\t{\n\t\t\tvalue: 'custom',\n\t\t\tlabel: _x( 'Custom', 'text', 'nelio-ab-testing' ),\n\t\t\tplaceholder: _x( 'Days', 'text', 'nelio-ab-testing' ),\n\t\t},\n\t],\n\t'page-views': [\n\t\t...[ 2500, 5000, 10000, 20000, 50000, 100000 ].map( ( views ) => ( {\n\t\t\tvalue: `${ views }`,\n\t\t\tlabel: numberFormat( views ),\n\t\t} ) ),\n\t\t{\n\t\t\tvalue: 'custom',\n\t\t\tlabel: _x( 'Custom', 'text', 'nelio-ab-testing' ),\n\t\t\tplaceholder: _x( 'Days', 'text', 'nelio-ab-testing' ),\n\t\t},\n\t],\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getLabel(\n\tendMode: Experiment[ 'endMode' ],\n\tendValue: number\n): string {\n\tswitch ( endMode ) {\n\t\tcase 'duration':\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %d: Number of days. */\n\t\t\t\t_n(\n\t\t\t\t\t'After %d day',\n\t\t\t\t\t'After %d days',\n\t\t\t\t\tendValue,\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tendValue\n\t\t\t);\n\t\tcase 'page-views':\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s: Number. */\n\t\t\t\t_n(\n\t\t\t\t\t'After %s page view',\n\t\t\t\t\t'After %s page views',\n\t\t\t\t\tendValue,\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tnumberFormat( endValue )\n\t\t\t); // eslint-disable-line\n\t\tcase 'confidence':\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s: Percentage number, such as 95. */\n\t\t\t\t_x( 'At %s%% confidence', 'text', 'nelio-ab-testing' ),\n\t\t\t\tnumberFormat( endValue )\n\t\t\t);\n\t\tcase 'manual':\n\t\t\treturn _x( 'Manual', 'text', 'nelio-ab-testing' );\n\t}\n}\n\nfunction getDefaultValue( mode: Experiment[ 'endMode' ] ): number {\n\tswitch ( mode ) {\n\t\tcase 'duration':\n\t\t\treturn 15;\n\t\tcase 'page-views':\n\t\t\treturn 5000;\n\t\tcase 'confidence':\n\t\t\treturn 97;\n\t\tcase 'manual':\n\t\t\treturn 0;\n\t}\n}\n\nconst getCustomPlaceholder = ( mode: Experiment[ 'endMode' ] ) =>\n\tfind( END_MODE_OPTIONS[ mode ], { value: 'custom' } )?.placeholder ?? '';\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { PanelRow } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { DateTimePicker } from '@nab/components';\nimport { formatI18nDatetime } from '@nab/date';\n\n/**\n * Internal dependencies\n */\nimport { useExperimentAttribute, useIsSubscribedTo } from '../../../hooks';\n\nexport const ExperimentStartSchedule = (): JSX.Element => {\n\tconst [ startDate, setStartDate ] = useExperimentAttribute( 'startDate' );\n\tconst canBeScheduled = useIsSubscribedTo( 'professional' );\n\tconst isPaused = useIsPaused();\n\n\treturn (\n\t\t<PanelRow className=\"nab-experiment-start-schedule\">\n\t\t\t<span>{ _x( 'Start', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t<span>\n\t\t\t\t{ !! isPaused && !! startDate && (\n\t\t\t\t\t<span className=\"nab-experiment-start-schedule__date\">\n\t\t\t\t\t\t{ formatI18nDatetime( startDate ) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isPaused && ! canBeScheduled && (\n\t\t\t\t\t<span className=\"nab-experiment-start-schedule__date\">\n\t\t\t\t\t\t{ _x( 'Immediately', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isPaused && !! canBeScheduled && (\n\t\t\t\t\t<DateTimePicker\n\t\t\t\t\t\tclassName=\"nab-experiment-start-schedule__date\"\n\t\t\t\t\t\tdate={ startDate || '' }\n\t\t\t\t\t\tonChange={ ( v ) => setStartDate( v || '' ) }\n\t\t\t\t\t\tnoDateLabel={ _x(\n\t\t\t\t\t\t\t'Immediately',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\treadonly\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</span>\n\t\t</PanelRow>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useIsPaused = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn status.includes( 'paused' );\n};\n","/**\n * WordPress dependencies\n */\nimport { Button, PanelBody, PanelRow } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_DATA } from '@nab/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { Status } from './status';\nimport { ExperimentStartSchedule } from './experiment-start-schedule';\nimport { ExperimentEndSchedule } from './experiment-end-schedule';\nimport { AutoApplyWinner } from './auto-apply-winner';\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport const ExperimentManagement = (): JSX.Element => {\n\tconst canDelete = useCanDelete();\n\tconst { moveToTrash } = useDispatch( NAB_EDITOR );\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"nab-experiment-management\"\n\t\t\ttitle={ _x(\n\t\t\t\t'Status & Management',\n\t\t\t\t'text (experiment)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t) }\n\t\t>\n\t\t\t<Status />\n\t\t\t<ExperimentStartSchedule />\n\t\t\t<ExperimentEndSchedule />\n\t\t\t<AutoApplyWinner />\n\n\t\t\t{ canDelete && (\n\t\t\t\t<PanelRow className=\"nab-experiment-management__trash\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tonClick={ () => void moveToTrash() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ _x(\n\t\t\t\t\t\t\t'Move to Trash',\n\t\t\t\t\t\t\t'command (experiment)',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Button>\n\t\t\t\t</PanelRow>\n\t\t\t) }\n\t\t</PanelBody>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useCanDelete = () =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tselect( NAB_DATA ).hasCapability( 'delete_nab_experiments' ),\n\t\t[]\n\t);\n","/**\n * WordPress dependencies\n */\nimport { PanelRow } from '@safe-wordpress/components';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { useExperimentAttribute } from '../../../hooks';\n\nexport const Status = (): JSX.Element => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\treturn (\n\t\t<PanelRow className=\"nab-experiment-management__status\">\n\t\t\t<span>{ _x( 'Status', 'text', 'nelio-ab-testing' ) }</span>\n\t\t\t<strong className=\"nab-experiment-management__status-value\">\n\t\t\t\t{ getStatusLabel( status ) }\n\t\t\t</strong>\n\t\t</PanelRow>\n\t);\n};\n\n// =======\n// HELPERS\n// =======\n\nfunction getStatusLabel( status: Experiment[ 'status' ] ): string {\n\tswitch ( status ) {\n\t\tcase 'draft':\n\t\t\treturn _x(\n\t\t\t\t'Draft',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'ready':\n\t\t\treturn _x(\n\t\t\t\t'Ready',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'scheduled':\n\t\t\treturn _x(\n\t\t\t\t'Scheduled',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'paused':\n\t\t\treturn _x(\n\t\t\t\t'Paused',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'paused_draft':\n\t\t\treturn _x(\n\t\t\t\t'Paused Draft',\n\t\t\t\t'text (experiment status)',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\n\t\tcase 'running':\n\t\tcase 'finished':\n\t\tcase 'trash':\n\t\t\treturn '-';\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Dashicon } from '@safe-wordpress/components';\nimport { useSelect } from '@safe-wordpress/data';\nimport { createInterpolateElement } from '@safe-wordpress/element';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_DATA } from '@nab/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { ExperimentManagement } from './experiment-management';\nimport { Description } from './description';\nimport { Scope } from './scope';\n\nexport const Sidebar = (): JSX.Element => {\n\tconst dims = useSidebarDimensions();\n\treturn (\n\t\t<div className=\"nab-edit-experiment-sidebar\" style={ dims }>\n\t\t\t<div className=\"nab-edit-experiment-sidebar__element-wrapper\">\n\t\t\t\t<h2 className=\"nab-edit-experiment-sidebar__section-title\">\n\t\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t/* translators: %s: Dashicon. */\n\t\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t\t'%s Additional Settings',\n\t\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'<icon></icon>'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t<Dashicon\n\t\t\t\t\t\t\t\t\tclassName=\"nab-edit-experiment-sidebar__section-title-icon\"\n\t\t\t\t\t\t\t\t\ticon=\"admin-settings\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t</h2>\n\n\t\t\t\t<ExperimentManagement />\n\t\t\t\t<Description />\n\t\t\t\t<Scope />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useSidebarDimensions = () =>\n\tuseSelect( ( select ) => {\n\t\tconst { getPageAttribute } = select( NAB_DATA );\n\t\tconst { applyFix, ...dims } = getPageAttribute( 'sidebarDimensions' );\n\t\treturn applyFix ? dims : undefined;\n\t}, [] );\n","/**\n * WordPress dependencies\n */\nimport { CheckboxControl } from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createScopeRule } from '@nab/utils';\nimport type { ScopeRule } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport type ConsistencyScopeProps = {\n\treadonly rules: ReadonlyArray< ScopeRule >;\n};\n\nexport const ConsistencyScope = ( {\n\trules,\n}: ConsistencyScopeProps ): JSX.Element => {\n\tconst enableConsistency = useConsistencyEnabler();\n\treturn (\n\t\t<CheckboxControl\n\t\t\tlabel={ _x( 'Global Consistency', 'command', 'nelio-ab-testing' ) }\n\t\t\tchecked={ ! rules.length }\n\t\t\tonChange={ () => enableConsistency( ! rules.length ) }\n\t\t\thelp={\n\t\t\t\t! rules.length\n\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t'Variants will be visible on the tested elements page. All other pages will also show the appropriate variant of this test whenever the tested element appears on them.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t'Variants will be visible only on the tested elements page.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t}\n\t\t/>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useConsistencyEnabler = () => {\n\tconst { setScopeRules } = useDispatch( NAB_EDITOR );\n\treturn ( consistency: boolean ) =>\n\t\tsetScopeRules(\n\t\t\tconsistency ? [ createScopeRule( { type: 'tested-post' } ) ] : []\n\t\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { SelectControl, TextControl } from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { useState } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport clsx from 'clsx';\nimport { keys } from 'lodash';\nimport { ErrorText } from '@nab/components';\nimport { usePluginSetting } from '@nab/data';\nimport {\n\tcreateScopeRule,\n\tisUrlFragmentInvalid,\n\tgetLocalUrlError,\n} from '@nab/utils';\nimport type { CustomUrlScopeRule, ScopeRuleId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport type CustomUrlScopeProps = {\n\treadonly rules: ReadonlyArray< CustomUrlScopeRule >;\n\treadonly scopeSupport: 'urls-with-tested-post' | 'urls';\n};\n\nexport const CustomUrlScope = ( {\n\trules,\n\tscopeSupport,\n}: CustomUrlScopeProps ): JSX.Element => {\n\tconst [ newRule, setNewRule ] = useState(\n\t\tcreateScopeRule( { type: 'partial', value: '' } ) as CustomUrlScopeRule\n\t);\n\tconst { setScopeRules } = useDispatch( NAB_EDITOR );\n\n\tconst editRule = (\n\t\tid: ScopeRuleId,\n\t\tattributes: CustomUrlScopeRule[ 'attributes' ]\n\t) => {\n\t\tconst isNewRule = newRule.id === id;\n\t\tif ( isNewRule ) {\n\t\t\tsetNewRule(\n\t\t\t\tcreateScopeRule( {\n\t\t\t\t\ttype: 'partial',\n\t\t\t\t\tvalue: '',\n\t\t\t\t} ) as CustomUrlScopeRule\n\t\t\t);\n\t\t}\n\n\t\tconst ruleToAdd = { ...newRule, attributes };\n\t\tif ( isNewRule ) {\n\t\t\tvoid setScopeRules( [ ...rules, ruleToAdd ] );\n\t\t} else {\n\t\t\tvoid setScopeRules(\n\t\t\t\trules.map( ( r ) => ( r.id === id ? { ...r, attributes } : r ) )\n\t\t\t);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Explanation rules={ rules } scopeSupport={ scopeSupport } />\n\t\t\t<ul className=\"nab-experiment-scope__rule-list\">\n\t\t\t\t{ [ ...rules, newRule ].map( ( { id, attributes } ) => (\n\t\t\t\t\t<RuleSettings\n\t\t\t\t\t\tkey={ id }\n\t\t\t\t\t\tattributes={ attributes }\n\t\t\t\t\t\tsetAttributes={ ( attrs ) =>\n\t\t\t\t\t\t\teditRule( id, { ...attributes, ...attrs } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</ul>\n\t\t</>\n\t);\n};\n\n// ============\n// HELPER VIEWS\n// ============\n\nconst Explanation = ( {\n\trules,\n\tscopeSupport,\n}: CustomUrlScopeProps ): JSX.Element => {\n\tif ( ! rules.length ) {\n\t\treturn (\n\t\t\t<p>\n\t\t\t\t{ 'urls-with-tested-post' === scopeSupport\n\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t'Variants will be visible on all the pages of your website, including that of the tested element.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t'Variants will be visible on all the pages of your website.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  ) }{ ' ' }\n\t\t\t\t{ _x(\n\t\t\t\t\t'If you wish to limit its scope to certain pages only, use the following form to define the URLs in which the test should run.',\n\t\t\t\t\t'user',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t);\n\t}\n\n\treturn (\n\t\t<p>\n\t\t\t{ 'urls-with-tested-post' === scopeSupport\n\t\t\t\t? _x(\n\t\t\t\t\t\t'Variants will be visible on the tested elements page, as well as pages matching one of the following criteria.',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t  )\n\t\t\t\t: _x(\n\t\t\t\t\t\t'Variants will be visible only on pages matching one of the following criteria.',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t  ) }{ ' ' }\n\t\t\t{ _x(\n\t\t\t\t'To remove one criterion, leave it empty and save the test.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t) }\n\t\t</p>\n\t);\n};\n\nconst RuleSettings = ( {\n\tattributes,\n\tsetAttributes,\n}: {\n\treadonly attributes: CustomUrlScopeRule[ 'attributes' ];\n\treadonly setAttributes: (\n\t\tattrs: Partial< CustomUrlScopeRule[ 'attributes' ] >\n\t) => void;\n} ): JSX.Element => {\n\tconst error = useError( attributes.type, attributes.value );\n\treturn (\n\t\t<li\n\t\t\tclassName={ clsx( {\n\t\t\t\t'nab-experiment-scope__rule-list-item': true,\n\t\t\t} ) }\n\t\t\tdata-operator={ _x( 'or', 'text', 'nelio-ab-testing' ) }\n\t\t>\n\t\t\t<div className=\"nab-experiment-scope__rule-mode\">\n\t\t\t\t<SelectControl\n\t\t\t\t\tvalue={ attributes.type }\n\t\t\t\t\toptions={ OPTIONS }\n\t\t\t\t\tonChange={ ( type ) => setAttributes( { type } ) }\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div className=\"nab-experiment-scope__rule-value\">\n\t\t\t\t<TextControl\n\t\t\t\t\tplaceholder={ _x( 'Value', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t\tvalue={ attributes.value }\n\t\t\t\t\tonChange={ ( value ) => setAttributes( { value } ) }\n\t\t\t\t/>\n\t\t\t\t<ErrorText value={ error } />\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nfunction useError(\n\ttype: CustomUrlScopeRule[ 'attributes' ][ 'type' ],\n\tvalue: string\n): string {\n\tconst homeUrl = usePluginSetting( 'homeUrl' );\n\tswitch ( type ) {\n\t\tcase 'partial':\n\t\tcase 'partial-not-included':\n\t\t\treturn value ? isUrlFragmentInvalid( value ) || '' : '';\n\t\tcase 'exact':\n\t\tcase 'different':\n\t\t\treturn value ? getLocalUrlError( value, homeUrl ) || '' : '';\n\t}\n}\n\n// ====\n// DATA\n// ====\n\nconst OPTIONS_RECORD: Record<\n\tCustomUrlScopeRule[ 'attributes' ][ 'type' ],\n\tstring\n> = {\n\texact: _x( 'URL is', 'text', 'nelio-ab-testing' ),\n\tdifferent: _x( 'URL is not', 'text', 'nelio-ab-testing' ),\n\tpartial: _x( 'URL contains', 'text', 'nelio-ab-testing' ),\n\t'partial-not-included': _x(\n\t\t'URL does not contain',\n\t\t'text',\n\t\t'nelio-ab-testing'\n\t),\n};\n\nconst OPTIONS = keys( OPTIONS_RECORD )\n\t.map( ( value ) => value as CustomUrlScopeRule[ 'attributes' ][ 'type' ] )\n\t.map( ( value ) => ( {\n\t\tlabel: OPTIONS_RECORD[ value ],\n\t\tvalue,\n\t} ) );\n","/**\n * WordPress dependencies\n */\nimport { PanelBody } from '@safe-wordpress/components';\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useEffect } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\nimport { createScopeRule } from '@nab/utils';\nimport type {\n\tCustomPhpScopeRule,\n\tCustomUrlScopeRule,\n\tScopeRule,\n\tTestedUrlWithQueryArgsScopeRule,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { CustomUrlScope } from './custom-url-scope';\nimport { ConsistencyScope } from './consistency-scope';\nimport { ProductConsistencyScope } from './product-consistency-scope';\nimport { TestedUrlWithQueryArgsScope } from './tested-url-with-query-args-scope';\nimport { store as NAB_EDITOR } from '../../../store';\nimport { UrlsOrPhpScope } from './urls-or-php-scope';\n\nexport const Scope = (): JSX.Element | null => {\n\tconst rules = useRules();\n\tconst scopeSupport = useScopeSupport();\n\tconst testAgainstExistingContent = useTestAgainstExistingContent();\n\tconst { setScopeRules } = useDispatch( NAB_EDITOR );\n\n\tuseEffect( () => {\n\t\tif (\n\t\t\t'tested-post-with-consistency' === scopeSupport &&\n\t\t\ttestAgainstExistingContent\n\t\t) {\n\t\t\tvoid setScopeRules( [\n\t\t\t\tcreateScopeRule( { type: 'tested-post' } ),\n\t\t\t] );\n\t\t}\n\t}, [ scopeSupport, testAgainstExistingContent, setScopeRules ] );\n\n\tif ( ! scopeSupport ) {\n\t\treturn null;\n\t}\n\n\tif ( testAgainstExistingContent ) {\n\t\treturn null;\n\t}\n\n\tswitch ( scopeSupport ) {\n\t\tcase 'tested-post-with-consistency':\n\t\t\treturn (\n\t\t\t\t<PanelBody\n\t\t\t\t\tclassName=\"nab-experiment-scope\"\n\t\t\t\t\ttitle={ _x( 'Test Scope', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t>\n\t\t\t\t\t<ConsistencyScope rules={ rules } />\n\t\t\t\t</PanelBody>\n\t\t\t);\n\n\t\tcase 'tested-product-with-consistency':\n\t\t\treturn (\n\t\t\t\t<PanelBody\n\t\t\t\t\tclassName=\"nab-experiment-scope\"\n\t\t\t\t\ttitle={ _x( 'Test Scope', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t>\n\t\t\t\t\t<ProductConsistencyScope rules={ rules } />\n\t\t\t\t</PanelBody>\n\t\t\t);\n\n\t\tcase 'tested-url-with-query-args':\n\t\t\treturn (\n\t\t\t\t<PanelBody\n\t\t\t\t\tclassName=\"nab-experiment-scope\"\n\t\t\t\t\ttitle={ _x( 'Test Scope', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t>\n\t\t\t\t\t<TestedUrlWithQueryArgsScope\n\t\t\t\t\t\trules={ rules.filter(\n\t\t\t\t\t\t\tisTestedUrlWithQueryArgsScopeRule\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t);\n\n\t\tcase 'urls':\n\t\tcase 'urls-with-tested-post':\n\t\t\treturn (\n\t\t\t\t<PanelBody\n\t\t\t\t\tclassName=\"nab-experiment-scope\"\n\t\t\t\t\ttitle={ _x( 'Test Scope', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t>\n\t\t\t\t\t<CustomUrlScope\n\t\t\t\t\t\trules={ rules.filter( isCustomUrlScopeRule ) }\n\t\t\t\t\t\tscopeSupport={ scopeSupport }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t);\n\n\t\tcase 'urls-or-php':\n\t\t\treturn (\n\t\t\t\t<PanelBody\n\t\t\t\t\tclassName=\"nab-experiment-scope\"\n\t\t\t\t\ttitle={ _x( 'Test Scope', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t>\n\t\t\t\t\t<UrlsOrPhpScope\n\t\t\t\t\t\trules={ rules.filter(\n\t\t\t\t\t\t\t( r ) =>\n\t\t\t\t\t\t\t\tisCustomUrlScopeRule( r ) ||\n\t\t\t\t\t\t\t\tisCustomPhpScopeRule( r )\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t);\n\t}\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useRules = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getScope(), [] );\n\nconst useScopeSupport = () =>\n\tuseSelect( ( select ) => {\n\t\tconst { getExperimentSupport } = select( NAB_EXPERIMENTS );\n\t\tconst { getExperimentType } = select( NAB_EDITOR );\n\t\treturn getExperimentSupport( getExperimentType(), 'scope' );\n\t}, [] );\n\nconst useTestAgainstExistingContent = () =>\n\tuseSelect( ( select ) => {\n\t\tconst control = select( NAB_EDITOR ).getAlternative( 'control' );\n\t\treturn !! control?.attributes.testAgainstExistingContent;\n\t}, [] );\n\n// =======\n// HELPERS\n// =======\n\nexport const isTestedUrlWithQueryArgsScopeRule = (\n\tr: ScopeRule\n): r is TestedUrlWithQueryArgsScopeRule =>\n\t'tested-url-with-query-args' === r.attributes.type;\n\nconst CHECKER: Record< CustomUrlScopeRule[ 'attributes' ][ 'type' ], true > = {\n\texact: true,\n\tpartial: true,\n\t'partial-not-included': true,\n\tdifferent: true,\n};\nexport const isCustomUrlScopeRule = ( r: ScopeRule ): r is CustomUrlScopeRule =>\n\t( CHECKER as Record< string, boolean > )[ r.attributes.type ] || false;\n\nexport const isCustomPhpScopeRule = ( r: ScopeRule ): r is CustomPhpScopeRule =>\n\t'php-snippet' === r.attributes.type;\n","/**\n * WordPress dependencies\n */\nimport { CheckboxControl } from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createScopeRule } from '@nab/utils';\nimport type { ScopeRule } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport type ProductConsistencyScopeProps = {\n\treadonly rules: ReadonlyArray< ScopeRule >;\n};\n\nexport const ProductConsistencyScope = ( {\n\trules,\n}: ProductConsistencyScopeProps ): JSX.Element => {\n\tconst enableConsistency = useConsistencyEnabler();\n\treturn (\n\t\t<CheckboxControl\n\t\t\tlabel={ _x( 'Products page only', 'command', 'nelio-ab-testing' ) }\n\t\t\tchecked={ rules.length }\n\t\t\tonChange={ () => enableConsistency( ! rules.length ) }\n\t\t\thelp={\n\t\t\t\t! rules.length\n\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t'Variants will be visible everywhere on your store: the products page, shopping carts, the checkout page, on a related products section, etc.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t'Variants will be visible only on the tested products page.',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  ) +\n\t\t\t\t\t  ' ' +\n\t\t\t\t\t  _x(\n\t\t\t\t\t\t\t'Moreover, price testing is disabled.',\n\t\t\t\t\t\t\t'user',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t  )\n\t\t\t}\n\t\t/>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useConsistencyEnabler = () => {\n\tconst { setScopeRules } = useDispatch( NAB_EDITOR );\n\treturn ( consistency: boolean ) =>\n\t\tsetScopeRules(\n\t\t\tconsistency ? [ createScopeRule( { type: 'tested-post' } ) ] : []\n\t\t);\n};\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport {\n\tSelectControl,\n\tTextareaControl,\n\tTextControl,\n} from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { countBy, drop, take, toPairs } from 'lodash';\nimport { createScopeRule } from '@nab/utils';\nimport type {\n\tQueryArgSetting,\n\tTestedUrlWithQueryArgsScopeRule,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { store as NAB_EDITOR } from '../../../../store';\n\nexport type TestedUrlWithQueryArgsScopeProps = {\n\treadonly rules: ReadonlyArray< TestedUrlWithQueryArgsScopeRule >;\n};\n\nexport const TestedUrlWithQueryArgsScope = ( {\n\trules,\n}: TestedUrlWithQueryArgsScopeProps ): JSX.Element => {\n\tconst { setScopeRules } = useDispatch( NAB_EDITOR );\n\tconst rule = rules[ 0 ] ?? DEFAULT_RULE;\n\tconst values = rule.attributes.value.args ?? [];\n\treturn (\n\t\t<div className=\"tested-url-with-query-args-scope\">\n\t\t\t<p>\n\t\t\t\t{ _x(\n\t\t\t\t\t'Test will be active on tested URLs if their query parameters match the following conditions:',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<QueryArgSettings\n\t\t\t\tvalue={ values }\n\t\t\t\tonChange={ ( args ) =>\n\t\t\t\t\tsetScopeRules( [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...rule,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t...rule.attributes,\n\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\t...rule.attributes.value,\n\t\t\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t] )\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n// ============\n// HELPER VIEWS\n// ============\n\nconst QueryArgSettings = ( {\n\tvalue: args,\n\tonChange,\n}: {\n\treadonly value: ReadonlyArray< QueryArgSetting >;\n\treadonly onChange: ( args: ReadonlyArray< QueryArgSetting > ) => void;\n} ): JSX.Element => {\n\tconst names = countBy( args, 'name' );\n\treturn (\n\t\t<div className=\"tested-url-with-query-args-scope\">\n\t\t\t<div className=\"tested-url-with-query-args-scope__block\">\n\t\t\t\t<div className=\"tested-url-with-query-args-scope__arguments\">\n\t\t\t\t\t{ [ ...args, NEW_ARG ].map( ( arg, index ) => (\n\t\t\t\t\t\t<QueryArgSetting\n\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\tvalue={ arg }\n\t\t\t\t\t\t\thasDuplicateName={\n\t\t\t\t\t\t\t\t!! arg.name && ( names[ arg.name ] ?? 0 ) >= 2\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonChange={ ( newArg ) =>\n\t\t\t\t\t\t\t\tonChange( [\n\t\t\t\t\t\t\t\t\t...take( args, index ),\n\t\t\t\t\t\t\t\t\t{ ...arg, ...newArg },\n\t\t\t\t\t\t\t\t\t...drop( args, index + 1 ),\n\t\t\t\t\t\t\t\t] )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst QueryArgSetting = ( {\n\thasDuplicateName,\n\tvalue: setting,\n\tonChange,\n}: {\n\treadonly hasDuplicateName: boolean;\n\treadonly value: QueryArgSetting;\n\treadonly onChange: ( attrs: Partial< QueryArgSetting > ) => void;\n} ): JSX.Element => (\n\t<div\n\t\tclassName=\"tested-url-with-query-args-scope__argument\"\n\t\tdata-operator={ _x( 'and', 'text', 'nelio-ab-testing' ) }\n\t>\n\t\t<div className=\"tested-url-with-query-args-scope__argument-setup\">\n\t\t\t<TextControl\n\t\t\t\tplaceholder={ _x( 'Name', 'text', 'nelio-ab-testing' ) }\n\t\t\t\tvalue={ setting.name }\n\t\t\t\tonChange={ ( name ) => onChange( { name } ) }\n\t\t\t/>\n\t\t\t<SelectControl\n\t\t\t\toptions={ CONDITIONS }\n\t\t\t\tvalue={ setting.condition }\n\t\t\t\tonChange={ ( condition ) => onChange( { condition } ) }\n\t\t\t/>\n\t\t</div>\n\t\t<div className=\"tested-url-with-query-args-scope__argument-value\">\n\t\t\t<QueryArgValue\n\t\t\t\ttype={ setting.condition }\n\t\t\t\tvalue={ setting.value }\n\t\t\t\tonChange={ ( value ) => onChange( { value } ) }\n\t\t\t/>\n\t\t</div>\n\t\t{ hasDuplicateName && (\n\t\t\t<div className=\"tested-url-with-query-args-scope__argument-error\">\n\t\t\t\t{ sprintf(\n\t\t\t\t\t/* translators: %s: Query parameters name. */\n\t\t\t\t\t_x(\n\t\t\t\t\t\t'Query parameter %s should only appear once in the test scope',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t),\n\t\t\t\t\tsetting.name\n\t\t\t\t) }\n\t\t\t</div>\n\t\t) }\n\t</div>\n);\n\nconst QueryArgValue = ( {\n\ttype,\n\tvalue,\n\tonChange,\n}: {\n\treadonly type: QueryArgSetting[ 'condition' ];\n\treadonly value: string;\n\treadonly onChange: ( value: string ) => void;\n} ): JSX.Element | null => {\n\tswitch ( type ) {\n\t\tcase 'exists':\n\t\tcase 'does-not-exist':\n\t\t\treturn null;\n\n\t\tcase 'is-equal-to':\n\t\tcase 'is-not-equal-to':\n\t\tcase 'contains':\n\t\tcase 'does-not-contain':\n\t\t\treturn (\n\t\t\t\t<TextControl\n\t\t\t\t\tplaceholder={ _x( 'Value', 'text', 'nelio-ab-testing' ) }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t);\n\n\t\tcase 'is-any-of':\n\t\tcase 'is-none-of':\n\t\t\treturn (\n\t\t\t\t<TextareaControl\n\t\t\t\t\tplaceholder={ _x(\n\t\t\t\t\t\t'Value (one per line)',\n\t\t\t\t\t\t'text',\n\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t);\n\t}\n};\n\n// ====\n// DATA\n// ====\n\nconst NEW_ARG: QueryArgSetting = {\n\tname: '',\n\tcondition: 'exists',\n\tvalue: '',\n};\n\nconst DEFAULT_RULE = createScopeRule( {\n\ttype: 'tested-url-with-query-args',\n\tvalue: { urls: [], args: [] },\n} ) as TestedUrlWithQueryArgsScopeRule;\n\ntype Condition = QueryArgSetting[ 'condition' ];\nconst CONDITION_LABEL_RECORD: Record< Condition, string > = {\n\texists: _x( 'Exists', 'text', 'nelio-ab-testing' ),\n\t'does-not-exist': _x( 'Does not exist', 'text', 'nelio-ab-testing' ),\n\t'is-equal-to': _x( 'Is equal to', 'text', 'nelio-ab-testing' ),\n\t'is-not-equal-to': _x( 'Is not equal to', 'text', 'nelio-ab-testing' ),\n\tcontains: _x( 'Contains', 'text', 'nelio-ab-testing' ),\n\t'does-not-contain': _x( 'Does not contain', 'text', 'nelio-ab-testing' ),\n\t'is-any-of': _x( 'Is any of', 'text', 'nelio-ab-testing' ),\n\t'is-none-of': _x( 'Is none of', 'text', 'nelio-ab-testing' ),\n};\nconst CONDITIONS = toPairs( CONDITION_LABEL_RECORD ).map(\n\t( [ value, label ] ) => ( {\n\t\tlabel,\n\t\tvalue,\n\t} )\n);\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { Button, SelectControl, TextControl } from '@safe-wordpress/components';\nimport { useDispatch } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { CodeEditor } from '@nab/components';\nimport { usePluginSetting } from '@nab/data';\nimport { createScopeRule, getLocalUrlError } from '@nab/utils';\nimport type {\n\tCustomPhpScopeRule,\n\tCustomUrlScopeRule,\n\tMaybe,\n\tScopeRule,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { CustomUrlScope } from '../custom-url-scope';\nimport { store as NAB_EDITOR } from '../../../../store';\n\nexport type UrlsOrPhpScopeProps = {\n\treadonly rules: ReadonlyArray< CustomUrlScopeRule | CustomPhpScopeRule >;\n};\n\nexport const UrlsOrPhpScope = ( {\n\trules,\n}: UrlsOrPhpScopeProps ): JSX.Element => {\n\tconst { setScopeRules } = useDispatch( NAB_EDITOR );\n\n\tconst [ firstRule ] = rules;\n\tif ( isCustomPhpScopeRule( firstRule ) ) {\n\t\treturn <PhpCode rule={ firstRule } />;\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<CustomUrlScope\n\t\t\t\trules={ rules.filter( isCustomUrlScopeRule ) }\n\t\t\t\tscopeSupport=\"urls\"\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<p>\n\t\t\t\t{ _x(\n\t\t\t\t\t'Alternatively, you can specify where variants should be visible using PHP.',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<Button\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tonClick={ () =>\n\t\t\t\t\tsetScopeRules( [\n\t\t\t\t\t\tcreateScopeRule( {\n\t\t\t\t\t\t\ttype: 'php-snippet',\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\tpriority: 'low',\n\t\t\t\t\t\t\t\tsnippet: 'return true;',\n\t\t\t\t\t\t\t\tpreviewUrl: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} ),\n\t\t\t\t\t] )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ _x( 'Define Scope in PHP', 'command', 'nelio-ab-testing' ) }\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\n// ============\n// HELPER VIEWS\n// ============\n\nconst PhpCode = ( {\n\trule,\n}: {\n\treadonly rule: CustomPhpScopeRule;\n} ): JSX.Element => {\n\tconst { setScopeRules } = useDispatch( NAB_EDITOR );\n\tconst editRule = (\n\t\tvalue: Partial< CustomPhpScopeRule[ 'attributes' ][ 'value' ] >\n\t) =>\n\t\tsetScopeRules( [\n\t\t\t{\n\t\t\t\t...rule,\n\t\t\t\tattributes: {\n\t\t\t\t\t...rule.attributes,\n\t\t\t\t\tvalue: { ...rule.attributes.value, ...value },\n\t\t\t\t},\n\t\t\t},\n\t\t] );\n\n\tconst { priority, snippet, errorMessage, warningMessage, previewUrl } =\n\t\trule.attributes.value;\n\tconst homeUrl = usePluginSetting( 'homeUrl' );\n\tconst previewUrlError = getLocalUrlError( previewUrl, homeUrl );\n\n\treturn (\n\t\t<div className=\"nab-edit-experiment-php-scope\">\n\t\t\t<SelectControl\n\t\t\t\tclassName=\"nab-edit-experiment-php-scope__hook\"\n\t\t\t\tvalue={ priority }\n\t\t\t\toptions={ PRIORITY_OPTIONS }\n\t\t\t\tonChange={ ( value ) => editRule( { priority: value } ) }\n\t\t\t/>\n\t\t\t<div className=\"nab-edit-experiment-php-scope__snippet\">\n\t\t\t\t<CodeEditor\n\t\t\t\t\tlanguage=\"php\"\n\t\t\t\t\twithBorder\n\t\t\t\t\tbefore=\"function is_test_active(): bool {\"\n\t\t\t\t\tvalue={ snippet }\n\t\t\t\t\tafter=\"}\"\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\teditRule( {\n\t\t\t\t\t\t\tsnippet: value,\n\t\t\t\t\t\t\terrorMessage: undefined,\n\t\t\t\t\t\t\twarningMessage: undefined,\n\t\t\t\t\t\t\tvalidateSnippet: true,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{ !! errorMessage && (\n\t\t\t\t<p className=\"nab-edit-experiment-php-scope__snippet-error\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %s: Error message. */\n\t\t\t\t\t\t'Theres a problem with your code: %s',\n\t\t\t\t\t\terrorMessage\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t{ !! warningMessage && (\n\t\t\t\t<p className=\"nab-edit-experiment-php-scope__snippet-error\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %s: Error message. */\n\t\t\t\t\t\t'There might be a problem with your code: %s',\n\t\t\t\t\t\twarningMessage\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t<TextControl\n\t\t\t\tlabel={ _x( 'Preview URL', 'text', 'nelio-ab-testing' ) }\n\t\t\t\tvalue={ previewUrl }\n\t\t\t\tonChange={ ( value ) => editRule( { previewUrl: value } ) }\n\t\t\t/>\n\t\t\t{ previewUrlError && (\n\t\t\t\t<p className=\"nab-edit-experiment-php-scope__preview-error\">\n\t\t\t\t\t{ previewUrlError }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\n// =====\n// HOOKS\n// =====\n\n// =======\n// HELPERS\n// =======\n\nconst PRIORITY_OPTIONS = [\n\t{\n\t\tvalue: 'high' as const,\n\t\tlabel: sprintf(\n\t\t\t/* translators: %s: Hook name. */\n\t\t\t_x( 'Run on %s', 'command', 'nelio-ab-testing' ),\n\t\t\t'plugins_loaded'\n\t\t),\n\t},\n\t{\n\t\tvalue: 'mid' as const,\n\t\tlabel: sprintf(\n\t\t\t/* translators: %s: Hook name. */\n\t\t\t_x( 'Run on %s', 'command', 'nelio-ab-testing' ),\n\t\t\t'parse_query'\n\t\t),\n\t},\n\t{\n\t\tvalue: 'low' as const,\n\t\tlabel: sprintf(\n\t\t\t/* translators: %s: Hook name. */\n\t\t\t_x( 'Run on %s', 'command', 'nelio-ab-testing' ),\n\t\t\t'wp'\n\t\t),\n\t},\n];\n\nconst CHECKER: Record< CustomUrlScopeRule[ 'attributes' ][ 'type' ], true > = {\n\texact: true,\n\tpartial: true,\n\t'partial-not-included': true,\n\tdifferent: true,\n};\nexport const isCustomUrlScopeRule = (\n\tr: Maybe< ScopeRule >\n): r is CustomUrlScopeRule =>\n\t( CHECKER as Record< string, boolean > )[ r?.attributes.type ?? '' ] ||\n\tfalse;\n\nexport const isCustomPhpScopeRule = (\n\tr: Maybe< ScopeRule >\n): r is CustomPhpScopeRule => 'php-snippet' === r?.attributes.type;\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useCallback, useEffect } from '@safe-wordpress/element';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { find, keyBy } from 'lodash';\nimport { store as NAB_ACTIONS } from '@nab/conversion-actions';\nimport { isInTheFuture } from '@nab/date';\nimport { store as NAB_SEGMENTS } from '@nab/segmentation-rules';\nimport type {\n\tAlternative,\n\tConversionAction,\n\tExperiment,\n\tGoal,\n\tGoalId,\n\tSegment,\n\tSegmentationRule,\n\tSegmentId,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { shouldExperimentBeDraft } from './utils';\nimport { useExperimentAttribute, useExperimentType } from '../hooks';\nimport { store as NAB_EDITOR } from '../../store';\nimport { EMPTY_ARRAY } from '@nab/utils';\n\nexport const StatusManager = (): null => {\n\tuseStatusUpdateEffect();\n\tuseInvalidControlEffect();\n\treturn null;\n};\n\n// =====\n// HOOKS\n// =====\n\nconst useStatusUpdateEffect = () => {\n\tconst startDate = useExperimentAttribute( 'startDate' )[ 0 ] || '';\n\tconst [ status, setStatus ] = useExperimentAttribute( 'status' );\n\tconst rationale = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getDraftStatusRationale(),\n\t\t[]\n\t);\n\n\tconst { setDraftStatusRationale } = useDispatch( NAB_EDITOR );\n\tconst setStatusAndRationale = useCallback(\n\t\t( newStatus: Experiment[ 'status' ], newRationale?: string ): void => {\n\t\t\tif ( status.includes( 'paused' ) ) {\n\t\t\t\tnewStatus = 'draft' === newStatus ? 'paused_draft' : 'paused';\n\t\t\t}\n\t\t\tnewRationale = newRationale ?? '';\n\t\t\tif ( status === newStatus && rationale === newRationale ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetStatus( newStatus );\n\t\t\tvoid setDraftStatusRationale( newRationale );\n\t\t},\n\t\t[ rationale, status, setStatus, setDraftStatusRationale ]\n\t);\n\n\tconst proposedRationale = useProposedRationale();\n\tuseEffect( () => {\n\t\tif ( 'running' === status || 'trash' === status ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( proposedRationale ) {\n\t\t\tsetStatusAndRationale( 'draft', proposedRationale );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'ready' === status ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'scheduled' === status && ! isInTheFuture( startDate ) ) {\n\t\t\tsetStatusAndRationale( 'ready' );\n\t\t}\n\n\t\tif ( 'scheduled' !== status ) {\n\t\t\tsetStatusAndRationale( 'ready' );\n\t\t}\n\t}, [ proposedRationale, startDate, status, setStatusAndRationale ] );\n};\n\nconst useInvalidControlEffect = () => {\n\tconst [ status ] = useExperimentAttribute( 'status' );\n\tconst alternatives = useAlternatives();\n\tconst type = useExperimentType();\n\tconst control = find( alternatives, { id: 'control' } );\n\n\tconst isInvalid = useSelect(\n\t\t( select ) =>\n\t\t\t'running' !== status &&\n\t\t\t!! control &&\n\t\t\t!! type &&\n\t\t\t!! type.checks.getControlError( control.attributes, select ),\n\t\t[ control, status, type ]\n\t);\n\n\tconst { setTestedElementAsInvalid } = useDispatch( NAB_EDITOR );\n\tuseEffect(\n\t\t() => void setTestedElementAsInvalid( isInvalid ),\n\t\t[ isInvalid, setTestedElementAsInvalid ]\n\t);\n};\n\nconst useProposedRationale = () => {\n\tconst name = useExperimentAttribute( 'name' )[ 0 ] || '';\n\tconst type = useExperimentType();\n\n\tconst alternatives = useAlternatives();\n\tconst goals = useGoals();\n\tconst segments = useSegments();\n\tconst scope = useScope();\n\n\tconst conversionActionTypes = useConversionActionTypes();\n\tconst segmentationRuleTypes = useSegmentationRuleTypes();\n\n\tconst control = find( alternatives, { id: 'control' } ) as Alternative;\n\tconst newRationale = ! type\n\t\t? _x( 'Type not found', 'text', 'nelio-ab-testing' )\n\t\t: shouldExperimentBeDraft(\n\t\t\t\t{ name, control, alternatives, scope, goals, segments, type },\n\t\t\t\tconversionActionTypes,\n\t\t\t\tsegmentationRuleTypes\n\t\t  );\n\n\treturn newRationale || '';\n};\n\nconst useAlternatives = (): ReadonlyArray< Alternative > =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getAlternatives(), [] );\n\nconst useGoals = (): ReadonlyArray< Goal > => {\n\tconst goals = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getGoals(),\n\t\t[]\n\t);\n\tconst actions = useSelect(\n\t\t( select ) =>\n\t\t\tgoals.reduce(\n\t\t\t\t( r, g ) => ( {\n\t\t\t\t\t...r,\n\t\t\t\t\t[ g.id ]: select( NAB_EDITOR ).getConversionActions( g.id ),\n\t\t\t\t} ),\n\t\t\t\t{} as Record< GoalId, ReadonlyArray< ConversionAction > >\n\t\t\t),\n\t\t[ goals ]\n\t);\n\n\treturn goals.map( ( g ) => ( {\n\t\t...g,\n\t\tconversionActions: actions[ g.id ] ?? EMPTY_ARRAY,\n\t} ) );\n};\n\nconst useSegments = (): ReadonlyArray< Segment > => {\n\tconst segments = useSelect(\n\t\t( select ) => select( NAB_EDITOR ).getSegments(),\n\t\t[]\n\t);\n\tconst rules = useSelect(\n\t\t( select ) =>\n\t\t\tsegments.reduce(\n\t\t\t\t( r, s ) => ( {\n\t\t\t\t\t...r,\n\t\t\t\t\t[ s.id ]: select( NAB_EDITOR ).getSegmentationRules( s.id ),\n\t\t\t\t} ),\n\t\t\t\t{} as Record< SegmentId, ReadonlyArray< SegmentationRule > >\n\t\t\t),\n\t\t[ segments ]\n\t);\n\treturn segments.map( ( s ) => ( {\n\t\t...s,\n\t\tsegmentationRules: rules[ s.id ] ?? EMPTY_ARRAY,\n\t} ) );\n};\n\nconst useScope = () =>\n\tuseSelect( ( select ) => select( NAB_EDITOR ).getScope(), [] );\n\nconst useConversionActionTypes = () =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tkeyBy(\n\t\t\t\tselect( NAB_ACTIONS ).getConversionActionTypes() || [],\n\t\t\t\t'name'\n\t\t\t),\n\t\t[]\n\t);\n\nconst useSegmentationRuleTypes = () =>\n\tuseSelect(\n\t\t( select ) =>\n\t\t\tkeyBy(\n\t\t\t\tselect( NAB_SEGMENTS ).getSegmentationRuleTypes() || [],\n\t\t\t\t'name'\n\t\t\t),\n\t\t[]\n\t);\n","/**\n * WordPress dependencies\n */\nimport { select as doSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { countBy, toPairs, trim } from 'lodash';\nimport { getConversionActionScopeError, getLetter, isEmpty } from '@nab/utils';\nimport type {\n\tAlternative,\n\tConversionActionType,\n\tConversionActionTypeName,\n\tCustomPhpScopeRule,\n\tExperiment,\n\tExperimentType,\n\tGoal,\n\tMaybe,\n\tScopeRule,\n\tSegment,\n\tSegmentationRuleType,\n\tSegmentationRuleTypeName,\n\tTestedUrlWithQueryArgsScopeRule,\n} from '@nab/types';\n\ntype ExperimentSummary = Pick<\n\tExperiment,\n\t'name' | 'goals' | 'segments' | 'scope'\n> & {\n\treadonly alternatives: ReadonlyArray< Alternative >;\n\treadonly control: Alternative;\n\treadonly type: ExperimentType;\n};\n\ntype ConversionActionTypes = Record<\n\tConversionActionTypeName,\n\tConversionActionType\n>;\ntype SegmentationRuleTypes = Record<\n\tSegmentationRuleTypeName,\n\tSegmentationRuleType\n>;\n\nexport function shouldExperimentBeDraft(\n\texperiment: ExperimentSummary,\n\tconversionActionTypes: ConversionActionTypes,\n\tsegmentationRuleTypes: SegmentationRuleTypes\n): string | false {\n\tconst { control, alternatives, goals, scope, segments, name, type } =\n\t\texperiment;\n\n\tif ( ! name ) {\n\t\treturn _x( 'Test is unnamed', 'text', 'nelio-ab-testing' );\n\t}\n\n\tif ( alternatives.length < 2 ) {\n\t\treturn _x(\n\t\t\t'Test doesnt have any variants',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t);\n\t}\n\n\tconst errorWithTestedElement = type.checks.getControlError(\n\t\tcontrol.attributes,\n\t\tdoSelect\n\t);\n\tif ( errorWithTestedElement ) {\n\t\treturn errorWithTestedElement;\n\t}\n\n\tconst [ _, ...alts ] = alternatives;\n\tconst errorWithAlternative: string | false = alts.reduce(\n\t\t( error: false | string, alt, index ) =>\n\t\t\t! error\n\t\t\t\t? type.checks.getAlternativeError(\n\t\t\t\t\t\talt.attributes,\n\t\t\t\t\t\tgetLetter( index + 1 ),\n\t\t\t\t\t\tcontrol.attributes,\n\t\t\t\t\t\tdoSelect\n\t\t\t\t  )\n\t\t\t\t: error,\n\t\tfalse\n\t);\n\tif ( errorWithAlternative ) {\n\t\treturn errorWithAlternative;\n\t}\n\n\tconst aiErrorWithAlternative: string | false = alts.reduce(\n\t\t( error: false | string, alt, index ) =>\n\t\t\t! error && !! alt.ai && ! alt.ai.isReady\n\t\t\t\t? sprintf(\n\t\t\t\t\t\t/* translators: %1$s: Nelio AI. %2$s: Variant letter. */\n\t\t\t\t\t\t_x(\n\t\t\t\t\t\t\t'%1$s Variant %2$s has pending changes that need to be applied',\n\t\t\t\t\t\t\t'text',\n\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'Nelio AI',\n\t\t\t\t\t\tgetLetter( index + 1 )\n\t\t\t\t  )\n\t\t\t\t: error,\n\t\tfalse\n\t);\n\tif ( aiErrorWithAlternative ) {\n\t\treturn aiErrorWithAlternative;\n\t}\n\n\tconst errorWithScope = isScopeInvalid( scope );\n\tif ( errorWithScope ) {\n\t\treturn errorWithScope;\n\t}\n\n\tconst errorWithGoals = areGoalsInvalid( goals, conversionActionTypes );\n\tif ( errorWithGoals ) {\n\t\treturn errorWithGoals;\n\t}\n\n\tconst errorWithSegments = areSegmentsInvalid(\n\t\tsegments,\n\t\tsegmentationRuleTypes\n\t);\n\tif ( errorWithSegments ) {\n\t\treturn errorWithSegments;\n\t}\n\n\treturn false;\n}\n\n// =======\n// HELPERS\n// =======\n\nfunction areGoalsInvalid(\n\tgoals: ReadonlyArray< Goal >,\n\tconversionActionTypes: ConversionActionTypes\n): string | false {\n\tif ( ! goals.length ) {\n\t\treturn _x( 'Test doesnt have any goals', 'text', 'nelio-ab-testing' );\n\t}\n\n\tfor ( let i = 0; i < goals.length; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst errorWithGoal = isGoalInvalid( goal, i, conversionActionTypes );\n\t\tif ( errorWithGoal ) {\n\t\t\treturn errorWithGoal;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction isGoalInvalid(\n\tgoal: Goal,\n\tgoalIndex: number,\n\tconversionActionTypes: ConversionActionTypes\n): string | false {\n\tif ( ! goal.conversionActions.length ) {\n\t\treturn sprintf(\n\t\t\t/* translators: %s: Goal name. */\n\t\t\t_x(\n\t\t\t\t'%s doesnt have any conversion actions',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\tgetGoalName( goal, goalIndex )\n\t\t);\n\t}\n\n\tfor ( let i = 0; i < goal.conversionActions.length; ++i ) {\n\t\tconst conversionAction = goal.conversionActions[ i ];\n\t\tif ( ! conversionAction ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst conversionActionType =\n\t\t\tconversionActionTypes[ conversionAction.type ];\n\t\tif ( ! conversionActionType ) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s: Goal name. */\n\t\t\t\t_x(\n\t\t\t\t\t'%s has one or more invalid conversion actions',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetGoalName( goal, goalIndex )\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\t! isEmpty(\n\t\t\t\tconversionActionType.validate?.( conversionAction.attributes )\n\t\t\t) ||\n\t\t\t! isEmpty( getConversionActionScopeError( conversionAction.scope ) )\n\t\t) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s: Goal name, as in Goal 2 or Default Goal. */\n\t\t\t\t_x(\n\t\t\t\t\t'One or more conversion actions in %s are invalid',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetGoalName( goal, goalIndex )\n\t\t\t);\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction getGoalName( goal: Goal, index: number ): string {\n\tlet goalName = sprintf(\n\t\t/* translators: %d: Goal id. */\n\t\t_x( 'Goal %d', 'text', 'nelio-ab-testing' ),\n\t\tindex + 1\n\t);\n\tif ( 0 === index ) {\n\t\tgoalName = _x( 'Default Goal', 'text', 'nelio-ab-testing' );\n\t}\n\n\tif ( trim( goal.attributes.name ) ) {\n\t\tgoalName = sprintf(\n\t\t\t/* translators: %s: Goal name. */\n\t\t\t_x( 'Goal %s', 'text', 'nelio-ab-testing' ),\n\t\t\ttrim( goal.attributes.name )\n\t\t);\n\t}\n\n\treturn goalName;\n}\n\nfunction areSegmentsInvalid(\n\tsegments: ReadonlyArray< Segment >,\n\tsegmentationRuleTypes: SegmentationRuleTypes\n): string | false {\n\tfor ( let i = 0; i < segments.length; ++i ) {\n\t\tconst segment = segments[ i ];\n\t\tif ( ! segment ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst errorWithSegment = isSegmentInvalid(\n\t\t\tsegment,\n\t\t\ti,\n\t\t\tsegmentationRuleTypes\n\t\t);\n\t\tif ( errorWithSegment ) {\n\t\t\treturn errorWithSegment;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction isSegmentInvalid(\n\tsegment: Segment,\n\tsegmentIndex: number,\n\tsegmentationRuleTypes: SegmentationRuleTypes\n) {\n\tif ( ! segment.segmentationRules.length ) {\n\t\treturn sprintf(\n\t\t\t/* translators: %s: Segment name. */\n\t\t\t_x(\n\t\t\t\t'%s doesnt have any segmentation rules',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t),\n\t\t\tgetSegmentName( segment, segmentIndex )\n\t\t);\n\t}\n\n\tfor ( let i = 0; i < segment.segmentationRules.length; ++i ) {\n\t\tconst segmentationRule = segment.segmentationRules[ i ];\n\t\tif ( ! segmentationRule ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst segmentationRuleType =\n\t\t\tsegmentationRuleTypes[ segmentationRule.type ];\n\t\tif ( ! segmentationRuleType ) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s: Segment name. */\n\t\t\t\t_x(\n\t\t\t\t\t'%s has one or more invalid segmentation rules',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetSegmentName( segment, segmentIndex )\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\t! isEmpty(\n\t\t\t\tsegmentationRuleType.validate?.( segmentationRule.attributes )\n\t\t\t)\n\t\t) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s: Segment name, as in Segment 2. */\n\t\t\t\t_x(\n\t\t\t\t\t'One or more segmentation rules in %s are invalid',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tgetSegmentName( segment, segmentIndex )\n\t\t\t);\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction getSegmentName( segment: Segment, index: number ): string {\n\tlet segmentName = sprintf(\n\t\t/* translators: %d: Segment id. */\n\t\t_x( 'Segment %d', 'text', 'nelio-ab-testing' ),\n\t\tindex + 1\n\t);\n\n\tif ( trim( segment.attributes.name ) ) {\n\t\tsegmentName = sprintf(\n\t\t\t/* translators: %s: Segment name. */\n\t\t\t_x( 'Segment %s', 'text', 'nelio-ab-testing' ),\n\t\t\ttrim( segment.attributes.name )\n\t\t);\n\t}\n\n\treturn segmentName;\n}\n\nfunction isScopeInvalid( scope: ReadonlyArray< ScopeRule > ): string | false {\n\t// First, we check if a PHP scope is invalid.\n\tconst [ firstRule ] = scope;\n\tif ( isCustomPhpScopeRule( firstRule ) ) {\n\t\treturn firstRule.attributes.value.errorMessage\n\t\t\t? _x( 'Test scope is incorrect', 'text', 'nelio-ab-testing' )\n\t\t\t: false;\n\t}\n\n\t// If there's no PHP scope, then we only need to check this type, because all other types are supposed to be valid by default.\n\tconst rules = scope.filter(\n\t\t( r ): r is TestedUrlWithQueryArgsScopeRule =>\n\t\t\t'tested-url-with-query-args' === r.attributes.type\n\t);\n\n\tfor ( const rule of rules ) {\n\t\tconst names = toPairs( countBy( rule.attributes.value.args, 'name' ) );\n\t\tconst name = names.find( ( [ n, c ] ) => !! n && c >= 2 )?.[ 0 ];\n\t\tif ( name ) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: %s: Query parameters name. */\n\t\t\t\t_x(\n\t\t\t\t\t'Query parameter %s should only appear once in the test scope',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tname\n\t\t\t);\n\t\t}\n\t}\n\n\treturn false;\n}\n\nconst isCustomPhpScopeRule = (\n\tr: Maybe< ScopeRule >\n): r is CustomPhpScopeRule => 'php-snippet' === r?.attributes.type;\n","export * as editor from './index';\n","/**\n * WordPress dependencies\n */\nimport '@safe-wordpress/core-data';\nimport { dispatch } from '@safe-wordpress/data';\nimport domReady from '@safe-wordpress/dom-ready';\nimport { render } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport { debounce } from 'lodash';\nimport { store as NAB_DATA } from '@nab/data';\nimport { registerCoreExperiments } from '@nab/experiment-library';\nimport type { ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { Editor } from './components/editor';\n\nexport * from './store';\nexport * from './components/provider';\nexport * from './components/experiment-name';\nexport * from './components/header';\nexport * from './components/sidebar';\n\nexport function initializeExperimentEditor(\n\tid: string,\n\texperimentId: ExperimentId\n): void {\n\tconst target = document.getElementById( id );\n\tif ( ! target ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn( `Unable to find container node ${ id }.` );\n\t\treturn;\n\t}\n\tregisterCoreExperiments();\n\trender( <Editor experimentId={ experimentId } />, target );\n}\n\n// =======\n// HELPERS\n// =======\n\nfunction fixSidebarDimensions() {\n\tconst height = window.innerHeight;\n\tconst wpAdminBar = document.getElementById( 'wpadminbar' );\n\tconst adminBarHeight = wpAdminBar\n\t\t? wpAdminBar.getBoundingClientRect().height\n\t\t: 0;\n\n\tconst { setPageAttribute } = dispatch( NAB_DATA );\n\tvoid setPageAttribute( 'sidebarDimensions', {\n\t\ttop: adminBarHeight,\n\t\theight: `${ height - adminBarHeight }px`,\n\t\tapplyFix: 782 <= window.innerWidth, // medium breakpoint\n\t} );\n}\nwindow.addEventListener( 'resize', debounce( fixSidebarDimensions, 100 ) );\ndomReady( fixSidebarDimensions );\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { Alternative, AlternativeId } from '@nab/types';\n\nexport type AlternativeAction =\n\t| AddAlternatives\n\t| RemoveAlternatives\n\t| ReplaceAlternatives\n\t| UpdateAlternative;\n\nexport function addAlternatives(\n\talternatives: Alternative | ReadonlyArray< Alternative >\n): AddAlternatives {\n\treturn {\n\t\ttype: 'ADD_ALTERNATIVES',\n\t\talternatives: castArray( alternatives ),\n\t};\n}\n\nexport function removeAlternatives(\n\tids: AlternativeId | ReadonlyArray< AlternativeId >\n): RemoveAlternatives {\n\treturn {\n\t\ttype: 'REMOVE_ALTERNATIVES',\n\t\tids: castArray( ids ),\n\t};\n}\n\nexport function replaceAlternatives(\n\toldIds: AlternativeId | ReadonlyArray< AlternativeId >,\n\talternatives: Alternative | ReadonlyArray< Alternative >\n): ReplaceAlternatives {\n\treturn {\n\t\ttype: 'REPLACE_ALTERNATIVES',\n\t\toldIds: castArray( oldIds ),\n\t\talternatives: castArray( alternatives ),\n\t};\n}\n\nexport function setAlternative(\n\tid: AlternativeId,\n\talternative: Alternative\n): UpdateAlternative {\n\treturn {\n\t\ttype: 'SET_ALTERNATIVE',\n\t\tid,\n\t\talternative,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddAlternatives = {\n\treadonly type: 'ADD_ALTERNATIVES';\n\treadonly alternatives: ReadonlyArray< Alternative >;\n};\n\ntype RemoveAlternatives = {\n\treadonly type: 'REMOVE_ALTERNATIVES';\n\treadonly ids: ReadonlyArray< AlternativeId >;\n};\n\ntype ReplaceAlternatives = {\n\treadonly type: 'REPLACE_ALTERNATIVES';\n\treadonly oldIds: ReadonlyArray< AlternativeId >;\n\treadonly alternatives: ReadonlyArray< Alternative >;\n};\n\ntype UpdateAlternative = {\n\treadonly type: 'SET_ALTERNATIVE';\n\treadonly id: AlternativeId;\n\treadonly alternative: Alternative;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tConversionAction,\n\tConversionActionScope,\n\tConversionActionId,\n\tGoalId,\n\tMaybe,\n} from '@nab/types';\n\nexport type CAAction =\n\t| AddConversionActionsIntoGoal\n\t| ReplaceConversionActionsInGoal\n\t| RemoveConversionActionsFromGoal\n\t| UpdateConversionAction;\n\nexport function addConversionActionsIntoGoal(\n\tgoalId: GoalId,\n\tconversionActions: ConversionAction | ReadonlyArray< ConversionAction >\n): AddConversionActionsIntoGoal {\n\treturn {\n\t\ttype: 'ADD_CONVERSION_ACTIONS_INTO_GOAL',\n\t\tgoalId,\n\t\tconversionActions: castArray( conversionActions ),\n\t};\n}\n\nexport function replaceConversionActionsInGoal(\n\tgoalId: GoalId,\n\tconversionActions: ConversionAction | ReadonlyArray< ConversionAction >\n): ReplaceConversionActionsInGoal {\n\treturn {\n\t\ttype: 'REPLACE_CONVERSION_ACTIONS_IN_GOAL',\n\t\tgoalId,\n\t\tconversionActions: castArray( conversionActions ),\n\t};\n}\n\nexport function removeConversionActionsFromGoal(\n\tgoalId: GoalId,\n\tconversionActionIds:\n\t\t| ConversionActionId\n\t\t| ReadonlyArray< ConversionActionId >\n): RemoveConversionActionsFromGoal {\n\treturn {\n\t\ttype: 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL',\n\t\tgoalId,\n\t\tconversionActionIds: castArray( conversionActionIds ),\n\t};\n}\n\nexport function updateConversionAction(\n\tgoalId: GoalId,\n\tconversionActionId: ConversionActionId,\n\tattributes: Maybe< ConversionAction[ 'attributes' ] >,\n\tscope: Maybe< ConversionActionScope >\n): UpdateConversionAction {\n\treturn {\n\t\ttype: 'UPDATE_CONVERSION_ACTION',\n\t\tgoalId,\n\t\tconversionActionId,\n\t\tattributes,\n\t\tscope,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddConversionActionsIntoGoal = {\n\treadonly type: 'ADD_CONVERSION_ACTIONS_INTO_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActions: ReadonlyArray< ConversionAction >;\n};\n\ntype ReplaceConversionActionsInGoal = {\n\treadonly type: 'REPLACE_CONVERSION_ACTIONS_IN_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActions: ReadonlyArray< ConversionAction >;\n};\n\ntype RemoveConversionActionsFromGoal = {\n\treadonly type: 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL';\n\treadonly goalId: GoalId;\n\treadonly conversionActionIds: ReadonlyArray< ConversionActionId >;\n};\n\ntype UpdateConversionAction = {\n\treadonly type: 'UPDATE_CONVERSION_ACTION';\n\treadonly goalId: GoalId;\n\treadonly conversionActionId: ConversionActionId;\n\treadonly attributes: Maybe< ConversionAction[ 'attributes' ] >;\n\treadonly scope: Maybe< ConversionActionScope >;\n};\n","/**\n * External dependencies\n */\nimport type {\n\tAlternativeId,\n\tExperiment,\n\tGoalId,\n\tMaybe,\n\tSegmentId,\n} from '@nab/types';\n\nexport type EditorAction =\n\t| SetActiveGoal\n\t| SetActiveSegment\n\t| SetExperimentAsBeingSaved\n\t| SetDraftStatusRationale\n\t| SetExperimentAsRecentlySaved\n\t| SetupEditor\n\t| OpenAlternativePreviewer\n\t| CloseAlternativePreviewer\n\t| ShowAiAlternativeModal;\n\nexport type SetupEditor = {\n\treadonly type: 'SETUP_EDITOR';\n\treadonly experiment: Experiment;\n};\n\nexport function setupEditor( experiment: Experiment ): SetupEditor {\n\treturn {\n\t\ttype: 'SETUP_EDITOR',\n\t\texperiment,\n\t};\n}\n\nexport function setActiveGoal( goalId: GoalId ): SetActiveGoal {\n\treturn {\n\t\ttype: 'SET_ACTIVE_GOAL',\n\t\tgoalId,\n\t};\n}\n\nexport function setActiveSegment( segmentId: SegmentId ): SetActiveSegment {\n\treturn {\n\t\ttype: 'SET_ACTIVE_SEGMENT',\n\t\tsegmentId,\n\t};\n}\n\nexport function setExperimentAsBeingSaved(\n\tstatus: boolean\n): SetExperimentAsBeingSaved {\n\treturn {\n\t\ttype: 'SET_EXPERIMENT_AS_BEING_SAVED',\n\t\tstatus,\n\t};\n}\n\nexport function setDraftStatusRationale(\n\trationale: string\n): SetDraftStatusRationale {\n\treturn {\n\t\ttype: 'SET_DRAFT_STATUS_RATIONALE',\n\t\trationale,\n\t};\n}\n\nexport function setExperimentAsRecentlySaved(): SetExperimentAsRecentlySaved {\n\treturn {\n\t\ttype: 'SET_EXPERIMENT_AS_RECENTLY_SAVED',\n\t};\n}\n\nexport function openAlternativePreviewer(\n\turl: string\n): OpenAlternativePreviewer {\n\treturn {\n\t\ttype: 'OPEN_ALTERNATIVE_PREVIEWER',\n\t\turl,\n\t};\n}\n\nexport function closeAlternativePreviewer(): CloseAlternativePreviewer {\n\treturn {\n\t\ttype: 'CLOSE_ALTERNATIVE_PREVIEWER',\n\t};\n}\n\nexport function showAiAlternativeModal(\n\talternativeId: Maybe< AlternativeId >\n): ShowAiAlternativeModal {\n\treturn {\n\t\ttype: 'SHOW_AI_ALTERNATIVE_MODAL',\n\t\talternativeId,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype SetActiveGoal = {\n\treadonly type: 'SET_ACTIVE_GOAL';\n\treadonly goalId: GoalId;\n};\n\ntype SetActiveSegment = {\n\treadonly type: 'SET_ACTIVE_SEGMENT';\n\treadonly segmentId: SegmentId;\n};\n\ntype SetExperimentAsBeingSaved = {\n\treadonly type: 'SET_EXPERIMENT_AS_BEING_SAVED';\n\treadonly status: boolean;\n};\n\ntype SetDraftStatusRationale = {\n\treadonly type: 'SET_DRAFT_STATUS_RATIONALE';\n\treadonly rationale: string;\n};\n\ntype SetExperimentAsRecentlySaved = {\n\treadonly type: 'SET_EXPERIMENT_AS_RECENTLY_SAVED';\n};\n\ntype OpenAlternativePreviewer = {\n\treadonly type: 'OPEN_ALTERNATIVE_PREVIEWER';\n\treadonly url: string;\n};\n\ntype CloseAlternativePreviewer = {\n\treadonly type: 'CLOSE_ALTERNATIVE_PREVIEWER';\n};\n\ntype ShowAiAlternativeModal = {\n\treadonly type: 'SHOW_AI_ALTERNATIVE_MODAL';\n\treadonly alternativeId: Maybe< AlternativeId >;\n};\n","/**\n * Internal dependencies\n */\nimport type { ExperimentData, HeatmapAttributes } from '../types';\n\nexport type ExperimentDataAction =\n\t| SetExperimentData\n\t| SetTestedElementAsInvalid;\n\nexport function setExperimentData(\n\tattributes: Partial< ExperimentData >\n): SetExperimentData {\n\treturn {\n\t\ttype: 'UPDATE_EXPERIMENT_DATA',\n\t\tattributes,\n\t};\n}\n\nexport function setHeatmapData(\n\tattributes: Partial< HeatmapAttributes >\n): SetExperimentData {\n\treturn {\n\t\ttype: 'UPDATE_EXPERIMENT_DATA',\n\t\tattributes,\n\t};\n}\n\nexport function setTestedElementAsInvalid(\n\tinvalid: boolean\n): SetTestedElementAsInvalid {\n\treturn {\n\t\ttype: 'SET_TESTED_ELEMENT_AS_INVALID',\n\t\tinvalid,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype SetExperimentData = {\n\treadonly type: 'UPDATE_EXPERIMENT_DATA';\n\treadonly attributes: Partial< ExperimentData >;\n};\n\ntype SetTestedElementAsInvalid = {\n\treadonly type: 'SET_TESTED_ELEMENT_AS_INVALID';\n\treadonly invalid: boolean;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { Goal, GoalId } from '@nab/types';\n\nexport type GoalAction = AddGoals | RemoveGoals | UpdateGoal;\n\nexport function addGoals( goals: Goal | ReadonlyArray< Goal > ): AddGoals {\n\treturn {\n\t\ttype: 'ADD_GOALS',\n\t\tgoals: castArray( goals ),\n\t};\n}\n\nexport function removeGoals(\n\tids: GoalId | ReadonlyArray< GoalId >\n): RemoveGoals {\n\treturn {\n\t\ttype: 'REMOVE_GOALS',\n\t\tids: castArray( ids ),\n\t};\n}\n\nexport function updateGoal(\n\tgoalId: GoalId,\n\tattributes: Partial< Goal[ 'attributes' ] >\n): UpdateGoal {\n\treturn {\n\t\ttype: 'UPDATE_GOAL',\n\t\tgoalId,\n\t\tattributes,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddGoals = {\n\treadonly type: 'ADD_GOALS';\n\treadonly goals: ReadonlyArray< Goal >;\n};\n\ntype RemoveGoals = {\n\treadonly type: 'REMOVE_GOALS';\n\treadonly ids: ReadonlyArray< GoalId >;\n};\n\ntype UpdateGoal = {\n\treadonly type: 'UPDATE_GOAL';\n\treadonly goalId: GoalId;\n\treadonly attributes: Partial< Goal[ 'attributes' ] >;\n};\n","export * from './alternatives';\nexport * from './conversion-actions';\nexport * from './editor';\nexport * from './experiment-data';\nexport * from './goals';\nexport * from './scope';\nexport * from './segmentation';\n","/**\n * External dependencies\n */\nimport type { ScopeRule } from '@nab/types';\n\nexport type ScopeAction = SetScopeRules;\n\nexport function setScopeRules(\n\trules: ReadonlyArray< ScopeRule >\n): SetScopeRules {\n\treturn {\n\t\ttype: 'SET_SCOPE_RULES',\n\t\trules,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype SetScopeRules = {\n\treadonly type: 'SET_SCOPE_RULES';\n\treadonly rules: ReadonlyArray< ScopeRule >;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tSegment,\n\tSegmentationRule,\n\tSegmentationRuleId,\n\tSegmentId,\n} from '@nab/types';\n\nexport type SegmentationAction =\n\t| AddSegments\n\t| RemoveSegments\n\t| UpdateSegment\n\t| AddSegmentationRulesIntoSegment\n\t| ReplaceSegmentationRulesInSegment\n\t| RemoveSegmentationRulesFromSegment\n\t| UpdateSegmentationRule\n\t| SetSegmentEvaluation;\n\nexport function addSegments(\n\tsegments: Segment | ReadonlyArray< Segment >\n): AddSegments {\n\treturn {\n\t\ttype: 'ADD_SEGMENTS',\n\t\tsegments: castArray( segments ),\n\t};\n}\n\nexport function removeSegments(\n\tids: SegmentId | ReadonlyArray< SegmentId >\n): RemoveSegments {\n\treturn {\n\t\ttype: 'REMOVE_SEGMENTS',\n\t\tids: castArray( ids ),\n\t};\n}\n\nexport function updateSegment(\n\tsegmentId: SegmentId,\n\tattributes: Partial< Segment[ 'attributes' ] >\n): UpdateSegment {\n\treturn {\n\t\ttype: 'UPDATE_SEGMENT',\n\t\tsegmentId,\n\t\tattributes,\n\t};\n}\n\nexport function addSegmentationRulesIntoSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRules: SegmentationRule | ReadonlyArray< SegmentationRule >\n): AddSegmentationRulesIntoSegment {\n\treturn {\n\t\ttype: 'ADD_SEGMENTATION_RULES_INTO_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRules: castArray( segmentationRules ),\n\t};\n}\n\nexport function replaceSegmentationRulesInSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRules: SegmentationRule | ReadonlyArray< SegmentationRule >\n): ReplaceSegmentationRulesInSegment {\n\treturn {\n\t\ttype: 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRules: castArray( segmentationRules ),\n\t};\n}\n\nexport function removeSegmentationRulesFromSegment(\n\tsegmentId: SegmentId,\n\tsegmentationRuleIds:\n\t\t| SegmentationRuleId\n\t\t| ReadonlyArray< SegmentationRuleId >\n): RemoveSegmentationRulesFromSegment {\n\treturn {\n\t\ttype: 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT',\n\t\tsegmentId,\n\t\tsegmentationRuleIds: castArray( segmentationRuleIds ),\n\t};\n}\n\nexport function updateSegmentationRule(\n\tsegmentId: SegmentId,\n\tsegmentationRuleId: SegmentationRuleId,\n\tattributes: Partial< SegmentationRule[ 'attributes' ] >\n): UpdateSegmentationRule {\n\treturn {\n\t\ttype: 'UPDATE_SEGMENTATION_RULE',\n\t\tsegmentId,\n\t\tsegmentationRuleId,\n\t\tattributes,\n\t};\n}\n\nexport function setSegmentEvaluation(\n\tstrategy: 'site' | 'tested-page'\n): SetSegmentEvaluation {\n\treturn {\n\t\ttype: 'SET_SEGMENT_EVALUATION',\n\t\tstrategy,\n\t};\n}\n\n// =====\n// TYPES\n// =====\n\ntype AddSegments = {\n\treadonly type: 'ADD_SEGMENTS';\n\treadonly segments: ReadonlyArray< Segment >;\n};\n\ntype RemoveSegments = {\n\treadonly type: 'REMOVE_SEGMENTS';\n\treadonly ids: ReadonlyArray< SegmentId >;\n};\n\ntype UpdateSegment = {\n\treadonly type: 'UPDATE_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly attributes: Partial< Segment[ 'attributes' ] >;\n};\n\ntype AddSegmentationRulesIntoSegment = {\n\treadonly type: 'ADD_SEGMENTATION_RULES_INTO_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\ntype ReplaceSegmentationRulesInSegment = {\n\treadonly type: 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRules: ReadonlyArray< SegmentationRule >;\n};\n\ntype RemoveSegmentationRulesFromSegment = {\n\treadonly type: 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRuleIds: ReadonlyArray< SegmentationRuleId >;\n};\n\ntype UpdateSegmentationRule = {\n\treadonly type: 'UPDATE_SEGMENTATION_RULE';\n\treadonly segmentId: SegmentId;\n\treadonly segmentationRuleId: SegmentationRuleId;\n\treadonly attributes: Partial< SegmentationRule[ 'attributes' ] >;\n};\n\ntype SetSegmentEvaluation = {\n\treadonly type: 'SET_SEGMENT_EVALUATION';\n\treadonly strategy: 'site' | 'tested-page';\n};\n","/**\n * Internal dependencies\n */\nimport type { ExperimentId, GoalId, SegmentId } from '@nab/types';\nimport type { State } from './types';\n\nexport const INIT_STATE: State = {\n\teditor: {\n\t\tactiveGoalId: '' as GoalId,\n\t\tactiveSegmentId: '' as SegmentId,\n\t\taiAlternativeModal: undefined,\n\t\talternativePreviewerUrl: '',\n\t\tdraftStatusRationale: '',\n\t\thasExperimentBeenRecentlySaved: false,\n\t\tisExperimentBeingSaved: false,\n\t},\n\n\texperiment: {\n\t\talternatives: {\n\t\t\tbyId: {\n\t\t\t\tcontrol: {\n\t\t\t\t\tid: 'control',\n\t\t\t\t\tattributes: {},\n\t\t\t\t\tlinks: { edit: '', heatmap: '', preview: '' },\n\t\t\t\t},\n\t\t\t},\n\t\t\tallIds: [],\n\t\t},\n\n\t\tconversionActions: {},\n\n\t\tdata: {\n\t\t\tid: 0 as ExperimentId,\n\t\t\ttype: '',\n\t\t\tstatus: 'draft',\n\t\t\tname: '',\n\t\t\tdescription: '',\n\t\t\tstartDate: '',\n\t\t\tendDate: '',\n\t\t\tendMode: 'manual',\n\t\t\tendValue: 0,\n\t\t\tautoAlternativeApplication: false,\n\t\t\tisTestedElementInvalid: false,\n\t\t\tlinks: {\n\t\t\t\tedit: '',\n\t\t\t\tpreview: '',\n\t\t\t},\n\t\t},\n\n\t\tgoals: {},\n\n\t\tscope: {},\n\n\t\tsegmentation: {\n\t\t\tevaluation: 'tested-page',\n\t\t\trules: {},\n\t\t\tsegments: {},\n\t\t},\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, register, controls } from '@safe-wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as realActions from './actions';\nimport * as sideEffects from './side-effects/actions';\n\nconst actions = { ...realActions, ...sideEffects };\n\nexport const store = createReduxStore( 'nab/editor', {\n\treducer,\n\tcontrols,\n\tactions,\n\tselectors,\n} );\nregister( store );\n","/**\n * External dependencies\n */\nimport { difference, isEqual, keyBy, map, omit, zip } from 'lodash';\nimport { isDefined } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'alternatives' ];\n\nimport type { AlternativeAction } from '../actions/alternatives';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = AlternativeAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.alternatives;\n\nexport function alternatives( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_ALTERNATIVES': {\n\t\t\tconst newAlternatives = action.alternatives.filter(\n\t\t\t\t( alt ) => ! isEqual( state.byId[ alt.id ], alt )\n\t\t\t);\n\t\t\tif ( ! newAlternatives.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tbyId: {\n\t\t\t\t\t...state.byId,\n\t\t\t\t\t...keyBy( newAlternatives, 'id' ),\n\t\t\t\t},\n\t\t\t\tallIds: [ ...state.allIds, ...map( newAlternatives, 'id' ) ],\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_ALTERNATIVES': {\n\t\t\tconst newAlternatives = {\n\t\t\t\tcontrol: state.byId.control,\n\t\t\t\t...omit( state.byId, action.ids ),\n\t\t\t};\n\t\t\tconst newAlternativeIds = difference(\n\t\t\t\tstate.allIds,\n\t\t\t\taction.ids.filter( ( id ) => id !== 'control' )\n\t\t\t);\n\t\t\tif (\n\t\t\t\tisEqual( state.byId, newAlternatives ) &&\n\t\t\t\tisEqual( state.allIds, newAlternativeIds )\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tbyId: newAlternatives,\n\t\t\t\tallIds: newAlternativeIds,\n\t\t\t};\n\t\t}\n\n\t\tcase 'REPLACE_ALTERNATIVES': {\n\t\t\tconst pairs = zip(\n\t\t\t\taction.oldIds,\n\t\t\t\tmap( action.alternatives, 'id' )\n\t\t\t);\n\t\t\tconst newAlternativesById = {\n\t\t\t\tcontrol: state.byId.control,\n\t\t\t\t...omit( state.byId, action.oldIds ),\n\t\t\t\t...keyBy( action.alternatives, 'id' ),\n\t\t\t};\n\t\t\tconst newAlternativeIds = [\n\t\t\t\t...state.allIds\n\t\t\t\t\t.map( ( id ) => {\n\t\t\t\t\t\tconst r = pairs.find( ( p ) => p[ 0 ] === id );\n\t\t\t\t\t\treturn r ? r[ 1 ] : id;\n\t\t\t\t\t} )\n\t\t\t\t\t.filter( isDefined ),\n\t\t\t\t...pairs\n\t\t\t\t\t.filter( ( p ) => ! p[ 0 ] )\n\t\t\t\t\t.map( ( p ) => p[ 1 ] )\n\t\t\t\t\t.filter( isDefined ),\n\t\t\t];\n\n\t\t\tconst oldAlternatives = state.byId;\n\t\t\tconst newAlternatives = newAlternativesById;\n\n\t\t\tconst oldAlternativesWithoutId = Object.values(\n\t\t\t\toldAlternatives\n\t\t\t).map( ( r ) => omit( r, 'id' ) );\n\t\t\tconst newAlternativesWithoutId = Object.values(\n\t\t\t\tnewAlternatives\n\t\t\t).map( ( r ) => omit( r, 'id' ) );\n\t\t\tif (\n\t\t\t\tisEqual( oldAlternativesWithoutId, newAlternativesWithoutId )\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbyId: newAlternativesById,\n\t\t\t\tallIds: newAlternativeIds,\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_ALTERNATIVE':\n\t\t\tconst oldAlternative = state.byId[ action.id ];\n\t\t\tif ( ! oldAlternative ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newAlternative = action.alternative;\n\t\t\tif ( ! newAlternative ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tif ( isEqual( oldAlternative, newAlternative ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbyId: {\n\t\t\t\t\t...state.byId,\n\t\t\t\t\t[ action.id ]: newAlternative,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn INIT_STATE;\n\t\t\t}\n\n\t\t\tconst newState = {\n\t\t\t\tbyId: {\n\t\t\t\t\tcontrol: state.byId.control,\n\t\t\t\t\t...keyBy( action.experiment.alternatives, 'id' ),\n\t\t\t\t},\n\t\t\t\tallIds: map( action.experiment.alternatives, 'id' ),\n\t\t\t};\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy, omit } from 'lodash';\nimport { EMPTY_OBJECT } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'conversionActions' ];\n\nimport type { CAAction } from '../actions/conversion-actions';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = CAAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.conversionActions;\n\nexport function conversionActions(\n\tstate = INIT_STATE,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_CONVERSION_ACTIONS_INTO_GOAL': {\n\t\t\tconst newConversionActions = action.conversionActions.filter(\n\t\t\t\t( conversionAction ) =>\n\t\t\t\t\t! isEqual(\n\t\t\t\t\t\tstate[ action.goalId ]?.[ conversionAction.id ],\n\t\t\t\t\t\tconversionAction\n\t\t\t\t\t)\n\t\t\t);\n\t\t\tif ( ! newConversionActions.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...state[ action.goalId ],\n\t\t\t\t\t...keyBy( newConversionActions, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REPLACE_CONVERSION_ACTIONS_IN_GOAL': {\n\t\t\tconst oldConvActions = state[ action.goalId ] ?? {};\n\t\t\tconst newConvActions = keyBy( action.conversionActions, 'id' );\n\n\t\t\tconst oldConvActionsWithoutId = Object.values( oldConvActions ).map(\n\t\t\t\t( r ) => omit( r, 'id' )\n\t\t\t);\n\t\t\tconst newConvActionsWithoutId = Object.values( newConvActions ).map(\n\t\t\t\t( r ) => omit( r, 'id' )\n\t\t\t);\n\t\t\tif ( isEqual( oldConvActionsWithoutId, newConvActionsWithoutId ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: newConvActions,\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_CONVERSION_ACTION': {\n\t\t\tconst goal = state[ action.goalId ];\n\t\t\tif ( ! goal ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst oldConversionAction = goal[ action.conversionActionId ];\n\t\t\tif ( ! oldConversionAction ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newConversionAction = {\n\t\t\t\t...oldConversionAction,\n\t\t\t\tattributes: action.attributes\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...oldConversionAction.attributes,\n\t\t\t\t\t\t\t...action.attributes,\n\t\t\t\t\t  }\n\t\t\t\t\t: oldConversionAction.attributes,\n\t\t\t\tscope: action.scope ? action.scope : oldConversionAction.scope,\n\t\t\t};\n\t\t\tif ( isEqual( oldConversionAction, newConversionAction ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: {\n\t\t\t\t\t...goal,\n\t\t\t\t\t[ action.conversionActionId ]: newConversionAction,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_CONVERSION_ACTIONS_FROM_GOAL': {\n\t\t\tconst newConversionActions = omit(\n\t\t\t\tstate[ action.goalId ],\n\t\t\t\taction.conversionActionIds\n\t\t\t);\n\t\t\tif ( isEqual( state[ action.goalId ], newConversionActions ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: newConversionActions,\n\t\t\t};\n\t\t}\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\n\t\t\tconst newState = action.experiment.goals.reduce( ( memo, goal ) => {\n\t\t\t\tmemo[ goal.id ] = keyBy( goal.conversionActions, 'id' );\n\t\t\t\treturn memo;\n\t\t\t}, {} as State );\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'editor' ];\n\nimport type { EditorAction as Action } from '../actions/editor';\n\nconst INIT_STATE = IS.editor;\n\nexport function editor( state = INIT_STATE, action: AnyAction ): State {\n\tstate = { ...state, hasExperimentBeenRecentlySaved: false };\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_ACTIVE_GOAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveGoalId: action.goalId,\n\t\t\t};\n\n\t\tcase 'SET_ACTIVE_SEGMENT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveSegmentId: action.segmentId,\n\t\t\t};\n\n\t\tcase 'SET_EXPERIMENT_AS_BEING_SAVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisExperimentBeingSaved: !! action.status,\n\t\t\t};\n\n\t\tcase 'SET_EXPERIMENT_AS_RECENTLY_SAVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\thasExperimentBeenRecentlySaved: true,\n\t\t\t};\n\n\t\tcase 'SET_DRAFT_STATUS_RATIONALE':\n\t\t\tif ( isEqual( state.draftStatusRationale, action.rationale ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdraftStatusRationale: action.rationale,\n\t\t\t};\n\n\t\tcase 'OPEN_ALTERNATIVE_PREVIEWER':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\talternativePreviewerUrl: action.url,\n\t\t\t};\n\n\t\tcase 'CLOSE_ALTERNATIVE_PREVIEWER':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\talternativePreviewerUrl: '',\n\t\t\t};\n\n\t\tcase 'SHOW_AI_ALTERNATIVE_MODAL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taiAlternativeModal: action.alternativeId,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\treturn state;\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'data' ];\n\nimport type { ExperimentDataAction } from '../actions/experiment-data';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = ExperimentDataAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.data;\n\nexport function data( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_EXPERIMENT_DATA': {\n\t\t\tconst newAttributes = {\n\t\t\t\t...state,\n\t\t\t\t...action.attributes,\n\t\t\t};\n\t\t\tif ( isEqual( state, newAttributes ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn newAttributes;\n\t\t}\n\n\t\tcase 'SET_TESTED_ELEMENT_AS_INVALID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisTestedElementInvalid: !! action.invalid,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tconst newState = {\n\t\t\t\t...state,\n\t\t\t\t...omit( action.experiment, [\n\t\t\t\t\t'alternatives',\n\t\t\t\t\t'goals',\n\t\t\t\t\t'scope',\n\t\t\t\t\t'segments',\n\t\t\t\t] ),\n\t\t\t};\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy, omit } from 'lodash';\nimport { EMPTY_OBJECT } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'goals' ];\n\nimport type { GoalAction } from '../actions/goals';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = GoalAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.goals;\n\nexport function goals( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_GOALS': {\n\t\t\tconst newGoals = action.goals.filter(\n\t\t\t\t( goal ) => ! isEqual( state[ goal.id ], goal )\n\t\t\t);\n\t\t\tif ( ! newGoals.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...keyBy( newGoals, 'id' ),\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_GOAL': {\n\t\t\tconst goal = state[ action.goalId ];\n\t\t\tif ( ! goal ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newGoal = {\n\t\t\t\t...goal,\n\t\t\t\tattributes: {\n\t\t\t\t\t...goal.attributes,\n\t\t\t\t\t...action.attributes,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif ( isEqual( goal, newGoal ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.goalId ]: newGoal,\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_GOALS':\n\t\t\treturn omit( state, action.ids );\n\n\t\tcase 'SETUP_EDITOR':\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\n\t\t\tconst newState = keyBy(\n\t\t\t\taction.experiment.goals.map( ( goal ) =>\n\t\t\t\t\tomit( goal, 'conversionActions' )\n\t\t\t\t),\n\t\t\t\t'id'\n\t\t\t);\n\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@safe-wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { editor } from './editor';\nimport { alternatives } from './alternatives';\nimport { conversionActions } from './conversion-actions';\nimport { data } from './experiment-data';\nimport { goals } from './goals';\nimport { scope } from './scope';\nimport { segmentation } from './segmentation';\n\nexport default combineReducers( {\n\teditor,\n\texperiment: combineReducers( {\n\t\talternatives,\n\t\tconversionActions,\n\t\tdata,\n\t\tgoals,\n\t\tscope,\n\t\tsegmentation,\n\t} ),\n} );\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy } from 'lodash';\nimport { EMPTY_OBJECT } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'scope' ];\n\nimport type { ScopeAction } from '../actions/scope';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = ScopeAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.scope;\n\nexport function scope( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_SCOPE_RULES': {\n\t\t\tconst newRules = action.rules.map( ( rule ) =>\n\t\t\t\tstate[ rule.id ] && isEqual( state[ rule.id ], rule )\n\t\t\t\t\t? state[ rule.id ]\n\t\t\t\t\t: rule\n\t\t\t);\n\t\t\treturn keyBy( newRules, 'id' );\n\t\t}\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\n\t\t\tconst newState = keyBy( action.experiment.scope, 'id' );\n\t\t\treturn isEqual( newState, state ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy, omit } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE as IS } from '../config';\n\nimport type { State as FullState } from '../types';\ntype State = FullState[ 'experiment' ][ 'segmentation' ];\n\nimport type { SegmentationAction } from '../actions/segmentation';\nimport type { SetupEditor } from '../actions/editor';\ntype Action = SegmentationAction | SetupEditor;\n\nconst INIT_STATE = IS.experiment.segmentation;\n\nexport function segmentation( state = INIT_STATE, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_SEGMENTS': {\n\t\t\tconst newSegments = action.segments.filter(\n\t\t\t\t( segment ) =>\n\t\t\t\t\t! isEqual( state.segments[ segment.id ], segment )\n\t\t\t);\n\t\t\tif ( ! newSegments.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: {\n\t\t\t\t\t...state.segments,\n\t\t\t\t\t...keyBy( newSegments, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_SEGMENT': {\n\t\t\tconst oldSegment = state.segments[ action.segmentId ];\n\t\t\tif ( ! oldSegment ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newSegment = {\n\t\t\t\t...oldSegment,\n\t\t\t\tattributes: {\n\t\t\t\t\t...oldSegment.attributes,\n\t\t\t\t\t...action.attributes,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif ( isEqual( newSegment, oldSegment ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: {\n\t\t\t\t\t...state.segments,\n\t\t\t\t\t[ action.segmentId ]: newSegment,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_SEGMENTS': {\n\t\t\tconst newSegments = omit( state.segments, action.ids );\n\t\t\tif ( isEqual( state.segments, newSegments ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsegments: newSegments,\n\t\t\t};\n\t\t}\n\n\t\tcase 'ADD_SEGMENTATION_RULES_INTO_SEGMENT': {\n\t\t\tconst oldRules = state.rules[ action.segmentId ];\n\t\t\tconst newRules = action.segmentationRules.filter(\n\t\t\t\t( rule ) => ! isEqual( oldRules?.[ rule.id ], rule )\n\t\t\t);\n\t\t\tif ( ! newRules.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...oldRules,\n\t\t\t\t\t\t...keyBy( newRules, 'id' ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REPLACE_SEGMENTATION_RULES_IN_SEGMENT': {\n\t\t\tconst oldRules = state.rules[ action.segmentId ] ?? {};\n\t\t\tconst newRules = keyBy( action.segmentationRules, 'id' );\n\n\t\t\tconst oldRulesWithoutId = Object.values( oldRules ).map( ( r ) =>\n\t\t\t\tomit( r, 'id' )\n\t\t\t);\n\t\t\tconst newRulesWithoutId = Object.values( newRules ).map( ( r ) =>\n\t\t\t\tomit( r, 'id' )\n\t\t\t);\n\t\t\tif ( isEqual( oldRulesWithoutId, newRulesWithoutId ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: newRules,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_SEGMENTATION_RULE': {\n\t\t\tconst segment = state.rules[ action.segmentId ];\n\t\t\tif ( ! segment ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst oldSegmentationRule = segment[ action.segmentationRuleId ];\n\t\t\tif ( ! oldSegmentationRule ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newSegmentationRule = {\n\t\t\t\t...oldSegmentationRule,\n\t\t\t\tattributes: {\n\t\t\t\t\t...oldSegmentationRule.attributes,\n\t\t\t\t\t...action.attributes,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif ( isEqual( oldSegmentationRule, newSegmentationRule ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: {\n\t\t\t\t\t\t...segment,\n\t\t\t\t\t\t[ action.segmentationRuleId ]: newSegmentationRule,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_SEGMENTATION_RULES_FROM_SEGMENT': {\n\t\t\tconst rules = state.rules[ action.segmentId ];\n\t\t\tif ( ! rules ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newRules = omit( rules, action.segmentationRuleIds );\n\t\t\tif ( isEqual( rules, newRules ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trules: {\n\t\t\t\t\t...state.rules,\n\t\t\t\t\t[ action.segmentId ]: newRules,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_SEGMENT_EVALUATION':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tevaluation: action.strategy,\n\t\t\t};\n\n\t\tcase 'SETUP_EDITOR': {\n\t\t\tif ( 'nab/heatmap' === action.experiment.type ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newState = {\n\t\t\t\tevaluation: action.experiment.segmentEvaluation,\n\t\t\t\trules: action.experiment.segments.reduce(\n\t\t\t\t\t( memo, segment ) => {\n\t\t\t\t\t\tmemo[ segment.id ] = keyBy(\n\t\t\t\t\t\t\tsegment.segmentationRules,\n\t\t\t\t\t\t\t'id'\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn memo;\n\t\t\t\t\t},\n\t\t\t\t\t{} as State[ 'rules' ]\n\t\t\t\t),\n\t\t\t\tsegments: keyBy(\n\t\t\t\t\taction.experiment.segments.map( ( segment ) =>\n\t\t\t\t\t\tomit( segment, 'segmentationRules' )\n\t\t\t\t\t),\n\t\t\t\t\t'id'\n\t\t\t\t),\n\t\t\t};\n\n\t\t\treturn isEqual( state, newState ) ? state : newState;\n\t\t}\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies.\n */\nimport { values } from 'lodash';\nimport type { Alternative, AlternativeId, Dict, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\nimport { isDefined } from '@nab/utils';\n\ntype GetAlternative = typeof _getAlternative & {\n\tCurriedSignature: typeof __getAlternative;\n};\nexport const getAlternative = _getAlternative as GetAlternative;\nfunction _getAlternative< A extends Dict = Dict >(\n\tstate: State,\n\tid: AlternativeId\n): Maybe< Alternative< A > > {\n\treturn state.experiment.alternatives.byId[ id ] as Alternative< A >;\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nfunction __getAlternative< A extends Dict = Dict >(\n\tid: 'control'\n): Alternative< A >;\nfunction __getAlternative< A extends Dict = Dict >(\n\tid: AlternativeId\n): Maybe< Alternative< A > >;\nfunction __getAlternative< A extends Dict = Dict >(\n\t_: AlternativeId\n): Maybe< Alternative< A > > {\n\treturn undefined;\n}\n/* eslint-enable @typescript-eslint/no-unused-vars */\n\nexport const getAlternatives = createSelector(\n\t( state: State ): ReadonlyArray< Alternative > =>\n\t\tvalues( state.experiment.alternatives.byId ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.alternatives.byId ]\n);\n\nexport const getAlternativeIds = (\n\tstate: State\n): ReadonlyArray< AlternativeId > => state.experiment.alternatives.allIds;\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { createIndexedSelector } from '@nab/utils';\nimport type { ConversionAction, GoalId } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getConversionActions = createIndexedSelector(\n\t( state: State, goalId: GoalId ): ReadonlyArray< ConversionAction > =>\n\t\tvalues( state.experiment.conversionActions[ goalId ] ),\n\t( state: State, goalId: GoalId ) => ( {\n\t\tkey: goalId,\n\t\tdependants: [ state.experiment.conversionActions[ goalId ] ],\n\t} )\n);\n","/**\n * External dependencies\n */\nimport { filter, map, values } from 'lodash';\nimport type { AlternativeId, Goal, Maybe, Segment } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport function isExperimentBeingSaved( state: State ): boolean {\n\treturn !! state.editor.isExperimentBeingSaved;\n}\n\nexport function hasExperimentBeenRecentlySaved( state: State ): boolean {\n\treturn !! state.editor.hasExperimentBeenRecentlySaved;\n}\n\nexport function getActiveGoal(\n\tstate: State\n): Maybe< Omit< Goal, 'conversionActions' > > {\n\treturn (\n\t\tstate.experiment.goals[ state.editor.activeGoalId ] ||\n\t\tvalues( state.experiment.goals )[ 0 ]\n\t);\n}\n\nexport function getActiveGoalIndex( state: State ): number {\n\treturn (\n\t\tmap( state.experiment.goals, 'id' ).indexOf(\n\t\t\tstate.editor.activeGoalId\n\t\t) || 0\n\t);\n}\n\nexport function getActiveSegment(\n\tstate: State\n): Maybe< Omit< Segment, 'segmentationRules' > > {\n\treturn filter( state.experiment.segmentation.segments, {\n\t\tid: state.editor.activeSegmentId,\n\t} )[ 0 ];\n}\n\nexport function getActiveSegmentIndex( state: State ): number {\n\treturn (\n\t\tmap( state.experiment.segmentation.segments, 'id' ).indexOf(\n\t\t\tstate.editor.activeSegmentId\n\t\t) || 0\n\t);\n}\n\nexport function getDraftStatusRationale( state: State ): Maybe< string > {\n\tif ( ! state.experiment || ! state.experiment.data ) {\n\t\treturn;\n\t}\n\n\tconst isDraft = [ 'draft', 'paused_draft' ].includes(\n\t\tstate.experiment.data.status\n\t);\n\tif ( ! isDraft ) {\n\t\treturn;\n\t}\n\n\treturn state.editor.draftStatusRationale;\n}\n\nexport function getAlternativePreviewerUrl( state: State ): string {\n\treturn state.editor.alternativePreviewerUrl;\n}\n\nexport function getAiAlternativeModal( state: State ): Maybe< AlternativeId > {\n\treturn state.editor.aiAlternativeModal;\n}\n","/**\n * External dependencies.\n */\nimport type { ExperimentId, ExperimentTypeName, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { ExperimentAttributes, HeatmapAttributes, State } from '../types';\n\nexport function getExperimentId( state: State ): ExperimentId {\n\treturn state.experiment.data.id;\n}\n\nexport function getExperimentType( state: State ): ExperimentTypeName {\n\treturn state.experiment.data.type;\n}\n\ntype GetExperimentAttribute = typeof _getExperimentAttribute & {\n\tCurriedSignature: < K extends keyof ExperimentAttributes >(\n\t\tattribute: K\n\t) => ExperimentAttributes[ K ];\n};\nexport const getExperimentAttribute =\n\t_getExperimentAttribute as GetExperimentAttribute;\nfunction _getExperimentAttribute< K extends keyof ExperimentAttributes >(\n\tstate: State,\n\tattribute: K\n): ExperimentAttributes[ K ] {\n\treturn state.experiment.data[ attribute ];\n}\n\ntype GetHeatmapAttribute = typeof _getHeatmapAttribute & {\n\tCurriedSignature: < K extends keyof HeatmapAttributes >(\n\t\tattribute: K\n\t) => Maybe< HeatmapAttributes[ K ] >;\n};\nexport const getHeatmapAttribute = _getHeatmapAttribute as GetHeatmapAttribute;\nfunction _getHeatmapAttribute< K extends keyof HeatmapAttributes >(\n\tstate: State,\n\tattribute: K\n): Maybe< HeatmapAttributes[ K ] > {\n\treturn state.experiment.data[ attribute ];\n}\n\nexport function isTestedElementInvalid( state: State ): boolean {\n\treturn !! state.experiment.data.isTestedElementInvalid;\n}\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport type { Goal } from '@nab/types';\nimport { isDefined } from '@nab/utils';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getGoals = createSelector(\n\t( state: State ): ReadonlyArray< Omit< Goal, 'conversionActions' > > =>\n\t\tvalues( state.experiment.goals ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.goals ]\n);\n","export * from './alternatives';\nexport * from './conversion-actions';\nexport * from './editor';\nexport * from './experiment-data';\nexport * from './goals';\nexport * from './scope';\nexport * from './segmentation';\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { isDefined } from '@nab/utils';\nimport type { ScopeRule } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getScope = createSelector(\n\t( state: State ): ReadonlyArray< ScopeRule > =>\n\t\tvalues( state.experiment.scope ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.scope ]\n);\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { createIndexedSelector, isDefined } from '@nab/utils';\nimport type { Segment, SegmentId, SegmentationRule } from '@nab/types';\n\n/**\n * Internal dependencies.\n */\nimport type { State } from '../types';\n\nexport const getSegments = createSelector(\n\t( state: State ): ReadonlyArray< Omit< Segment, 'segmentationRules' > > =>\n\t\tvalues( state.experiment.segmentation.segments ).filter( isDefined ),\n\t( state: State ) => [ state.experiment.segmentation.segments ]\n);\n\nexport const getSegmentationRules = createIndexedSelector(\n\t( state: State, segmentId: SegmentId ): ReadonlyArray< SegmentationRule > =>\n\t\tvalues( state.experiment.segmentation.rules[ segmentId ] ),\n\t( state: State, segmentId: SegmentId ) => ( {\n\t\tkey: segmentId,\n\t\tdependants: [ state.experiment.segmentation.rules[ segmentId ] ],\n\t} )\n);\n\nexport function getSegmentEvaluation( state: State ): 'site' | 'tested-page' {\n\treturn state.experiment.segmentation.evaluation;\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, select } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\nimport { store as NOTICES } from '@safe-wordpress/notices';\n\n/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { store as NAB_DATA } from '@nab/data';\nimport { store as NAB_EXPERIMENTS } from '@nab/experiments';\nimport type {\n\tAlternative,\n\tAlternativeId,\n\tConversionAction,\n\tECommercePlugin,\n\tExperiment,\n\tGoal,\n\tHeatmap,\n\tMaybe,\n\tOrderStatus,\n\tOrderStatusName,\n\tSegment,\n\tUrl,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_EDITOR } from '../../../store';\n\nexport async function saveExperiment(): Promise< void > {\n\tconst isSaving = select( NAB_EDITOR ).isExperimentBeingSaved();\n\tif ( isSaving ) {\n\t\treturn;\n\t}\n\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( true );\n\n\tconst goals: Goal[] = [];\n\tconst goalsWithoutActions = select( NAB_EDITOR ).getGoals();\n\tfor ( const goal of goalsWithoutActions ) {\n\t\tconst actions = select( NAB_EDITOR ).getConversionActions( goal.id );\n\t\tconst ecommerce = getECommercePlugin( actions );\n\n\t\tgoals.push( {\n\t\t\t...goal,\n\t\t\tattributes: {\n\t\t\t\t...goal.attributes,\n\t\t\t\tuseOrderRevenue: !! ecommerce\n\t\t\t\t\t? goal.attributes.useOrderRevenue ?? true\n\t\t\t\t\t: undefined,\n\t\t\t\torderStatusForConversion: !! ecommerce\n\t\t\t\t\t? getOrderStatusForConversion( ecommerce, goal )\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\tconversionActions: actions,\n\t\t} );\n\t}\n\n\tconst segments: Segment[] = [];\n\tconst segmentsWithoutRules = select( NAB_EDITOR ).getSegments();\n\tfor ( const segment of segmentsWithoutRules ) {\n\t\tsegments.push( {\n\t\t\t...segment,\n\t\t\tsegmentationRules: select( NAB_EDITOR ).getSegmentationRules(\n\t\t\t\tsegment.id\n\t\t\t),\n\t\t} );\n\t}\n\n\tconst nonControlAlternatives: Alternative[] = [];\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tconst isTestedElementInvalid =\n\t\tselect( NAB_EDITOR ).isTestedElementInvalid();\n\n\tconst control = select( NAB_EDITOR ).getAlternative( 'control' );\n\tfor ( const alternativeId of alternativeIds ) {\n\t\tif ( 'control' === alternativeId ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst alt = select( NAB_EDITOR ).getAlternative( alternativeId );\n\t\tif ( alt ) {\n\t\t\tnonControlAlternatives.push( alt );\n\t\t}\n\t}\n\n\tlet experiment: Omit< Experiment, 'links' > | Omit< Heatmap, 'links' >;\n\tconst type = select( NAB_EDITOR ).getExperimentType();\n\tif ( 'nab/heatmap' === type ) {\n\t\texperiment = {\n\t\t\tid: select( NAB_EDITOR ).getExperimentId(),\n\t\t\ttype,\n\t\t\tname: select( NAB_EDITOR ).getExperimentAttribute( 'name' ),\n\t\t\tdescription:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'description' ),\n\t\t\tstatus: select( NAB_EDITOR ).getExperimentAttribute( 'status' ),\n\t\t\tstartDate:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'startDate' ),\n\t\t\tendDate: false,\n\t\t\tendMode: select( NAB_EDITOR ).getExperimentAttribute( 'endMode' ),\n\t\t\tendValue: select( NAB_EDITOR ).getExperimentAttribute( 'endValue' ),\n\t\t\ttrackingMode:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackingMode' ) ??\n\t\t\t\t'post',\n\t\t\ttrackedPostId:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedPostId' ) ??\n\t\t\t\t0,\n\t\t\ttrackedPostType:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedPostType' ) ??\n\t\t\t\t'page',\n\t\t\ttrackedUrl:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute( 'trackedUrl' ) ??\n\t\t\t\t( '' as Url ),\n\t\t\tparticipationConditions:\n\t\t\t\tselect( NAB_EDITOR ).getHeatmapAttribute(\n\t\t\t\t\t'participationConditions'\n\t\t\t\t) ?? [],\n\t\t};\n\t} else {\n\t\texperiment = {\n\t\t\tid: select( NAB_EDITOR ).getExperimentId(),\n\t\t\ttype,\n\t\t\tname: select( NAB_EDITOR ).getExperimentAttribute( 'name' ),\n\t\t\tdescription:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'description' ),\n\t\t\tstatus: select( NAB_EDITOR ).getExperimentAttribute( 'status' ),\n\t\t\tstartDate:\n\t\t\t\tselect( NAB_EDITOR ).getExperimentAttribute( 'startDate' ),\n\t\t\tendDate: false,\n\t\t\tendMode: select( NAB_EDITOR ).getExperimentAttribute( 'endMode' ),\n\t\t\tendValue: select( NAB_EDITOR ).getExperimentAttribute( 'endValue' ),\n\t\t\tautoAlternativeApplication: select(\n\t\t\t\tNAB_EDITOR\n\t\t\t).getExperimentAttribute( 'autoAlternativeApplication' ),\n\t\t\tscope: select( NAB_EDITOR ).getScope(),\n\t\t\talternatives: isTestedElementInvalid\n\t\t\t\t? [ control ]\n\t\t\t\t: [ control, ...nonControlAlternatives ],\n\t\t\tgoals,\n\t\t\tsegmentEvaluation: select( NAB_EDITOR ).getSegmentEvaluation(),\n\t\t\tsegments,\n\t\t};\n\t}\n\n\ttry {\n\t\tlet savedExperiment = await apiFetch< Experiment >( {\n\t\t\tpath: `/nab/v1/experiment/${ experiment.id }`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: experiment,\n\t\t} );\n\n\t\tif ( 'nab/heatmap' !== experiment.type && isTestedElementInvalid ) {\n\t\t\tsavedExperiment = {\n\t\t\t\t...savedExperiment,\n\t\t\t\talternatives: [\n\t\t\t\t\tsavedExperiment.alternatives[ 0 ],\n\t\t\t\t\t...nonControlAlternatives,\n\t\t\t\t],\n\t\t\t};\n\t\t}\n\n\t\tawait dispatch( NAB_EDITOR ).setupEditor( savedExperiment );\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsRecentlySaved();\n\t} catch ( e ) {\n\t\tconst message = getErrorMessage( e );\n\t\tawait dispatch( NOTICES ).createErrorNotice( message );\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t}\n}\n\nexport async function saveExperimentAndEditAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t}\n\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tif ( ! alternativeIds.includes( alternativeId ) ) {\n\t\treturn;\n\t}\n\n\tconst alternative = select( NAB_EDITOR ).getAlternative( alternativeId );\n\tif ( ! alternative ) {\n\t\treturn;\n\t}\n\n\tif ( ! alternative.links.edit ) {\n\t\treturn;\n\t}\n\n\twindow.location.href = alternative.links.edit;\n}\n\nexport async function saveExperimentAndPreviewAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t}\n\n\tconst alternativeIds = select( NAB_EDITOR ).getAlternativeIds();\n\tif ( ! alternativeIds.includes( alternativeId ) ) {\n\t\treturn;\n\t}\n\n\tconst alternative = select( NAB_EDITOR ).getAlternative( alternativeId );\n\tif ( ! alternative?.links.preview ) {\n\t\tlet message = _x(\n\t\t\t'Preview not available.',\n\t\t\t'text',\n\t\t\t'nelio-ab-testing'\n\t\t);\n\t\tconst type = select( NAB_EDITOR ).getExperimentType();\n\t\tconst scopeType = select( NAB_EXPERIMENTS ).getExperimentSupport(\n\t\t\ttype,\n\t\t\t'scope'\n\t\t);\n\t\tif ( 'urls' === scopeType || 'urls-with-tested-post' === scopeType ) {\n\t\t\tmessage += ' ';\n\t\t\tmessage += _x(\n\t\t\t\t'Please review your test scope and consider adding an exact URL where the test should be active so that Nelio can use it in the preview.',\n\t\t\t\t'user',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t);\n\t\t}\n\t\tawait dispatch( NOTICES ).createWarningNotice( message );\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_EDITOR ).openAlternativePreviewer(\n\t\talternative.links.preview\n\t);\n}\n\nexport async function moveToTrash(): Promise< void > {\n\tawait dispatch( NAB_EDITOR ).setExperimentData( { status: 'trash' } );\n\tawait saveExperiment();\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'edit.php', {\n\t\tpost_type: 'nab_experiment',\n\t} );\n}\n\nexport async function startExperiment(): Promise< void > {\n\tawait startOrResumeExperiment( 'start' );\n}\n\nexport async function resumeExperiment(): Promise< void > {\n\tawait startOrResumeExperiment( 'resume' );\n}\n\n// =======\n// HELPERS\n// =======\n\nasync function startOrResumeExperiment(\n\taction: 'start' | 'resume',\n\tignoreScopeOverlap = false\n): Promise< void > {\n\tawait saveExperiment();\n\tif ( ! select( NAB_EDITOR ).hasExperimentBeenRecentlySaved() ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( true );\n\tconst experimentId = select( NAB_EDITOR ).getExperimentId();\n\n\ttry {\n\t\tawait apiFetch( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/${ action }`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: { ignoreScopeOverlap },\n\t\t} );\n\t} catch ( e ) {\n\t\tconst message = getErrorMessage(\n\t\t\te,\n\t\t\t'start' === action\n\t\t\t\t? _x( 'Test cant be started', 'text', 'nelio-ab-testing' )\n\t\t\t\t: _x( 'Test cant be resumed', 'text', 'nelio-ab-testing' )\n\t\t);\n\n\t\tif ( 'equivalent-experiment-running' === getErrorCode( e ) ) {\n\t\t\tconst { notice } = ( await dispatch( NOTICES ).createWarningNotice(\n\t\t\t\tmessage,\n\t\t\t\t{\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\t\t'start' === action\n\t\t\t\t\t\t\t\t\t? _x(\n\t\t\t\t\t\t\t\t\t\t\t'Start anyway',\n\t\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t: _x(\n\t\t\t\t\t\t\t\t\t\t\t'Resume anyway',\n\t\t\t\t\t\t\t\t\t\t\t'command',\n\t\t\t\t\t\t\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t\tvariant: 'primary',\n\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\tawait dispatch( NOTICES ).removeNotice(\n\t\t\t\t\t\t\t\t\tnotice.id\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tawait startOrResumeExperiment( action, true );\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t) ) as { notice: { id: string } };\n\t\t} else {\n\t\t\tawait dispatch( NOTICES ).createErrorNotice( message );\n\t\t}\n\n\t\tawait dispatch( NAB_EDITOR ).setExperimentAsBeingSaved( false );\n\t\treturn;\n\t}\n\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'admin.php', {\n\t\tpage: 'nelio-ab-testing-experiment-view',\n\t\texperiment: experimentId,\n\t} );\n}\n\nfunction getECommercePlugin(\n\tactions: ReadonlyArray< ConversionAction >\n): Maybe< ECommercePlugin > {\n\tif ( ! actions.length ) {\n\t\treturn undefined;\n\t}\n\n\tconst isWcOrder = ( { type }: ConversionAction ) => 'nab/wc-order' === type;\n\tif ( actions.every( isWcOrder ) ) {\n\t\treturn 'woocommerce';\n\t}\n\n\tconst isEddOrder = ( { type }: ConversionAction ) =>\n\t\t'nab/edd-order' === type;\n\tif ( actions.every( isEddOrder ) ) {\n\t\treturn 'edd';\n\t}\n\n\treturn undefined;\n}\n\nfunction getOrderStatusForConversion(\n\tplugin: ECommercePlugin,\n\tgoal: Omit< Goal, 'conversionActions' >\n): OrderStatusName {\n\tconst validStatuses = select( NAB_DATA ).getECommerceSetting(\n\t\tplugin,\n\t\t'orderStatuses'\n\t);\n\n\tconst status = goal.attributes.orderStatusForConversion;\n\treturn status &&\n\t\tvalidStatuses.map( ( s: OrderStatus ) => s.value ).includes( status )\n\t\t? status\n\t\t: getDefaultOrderStatus( plugin );\n}\n\nfunction getDefaultOrderStatus( plugin: ECommercePlugin ): string {\n\tswitch ( plugin ) {\n\t\tcase 'woocommerce':\n\t\t\treturn 'wc-completed';\n\n\t\tcase 'edd':\n\t\t\treturn 'complete';\n\t}\n}\n\nfunction getErrorCode( e: unknown ): false | 'equivalent-experiment-running' {\n\tif ( ! e || 'object' !== typeof e ) {\n\t\treturn false;\n\t}\n\n\tif ( 'code' in e && 'equivalent-experiment-running' === e.code ) {\n\t\treturn 'equivalent-experiment-running';\n\t}\n\n\tif ( ! ( 'errors' in e ) || 'object' !== typeof e.errors ) {\n\t\treturn false;\n\t}\n\n\tconst errors = e.errors || {};\n\treturn (\n\t\tObject.keys( errors ).includes( 'equivalent-experiment-running' ) &&\n\t\t'equivalent-experiment-running'\n\t);\n}\n\nfunction getErrorMessage( e: unknown, defaultMessage?: string ): string {\n\tconst fallback =\n\t\tdefaultMessage || _x( 'Unknown error', 'text', 'nelio-ab-testing' );\n\n\tif ( ! e || 'object' !== typeof e ) {\n\t\treturn fallback;\n\t}\n\n\tif ( 'errors' in e && 'object' === typeof e.errors ) {\n\t\tconst errors = Array.isArray( e.errors )\n\t\t\t? e.errors\n\t\t\t: values( e.errors );\n\n\t\tif ( 'string' === typeof errors[ 0 ] ) {\n\t\t\treturn errors[ 0 ] || fallback;\n\t\t}\n\n\t\tconst firstError =\n\t\t\tArray.isArray( errors[ 0 ] ) && 'string' === typeof errors[ 0 ][ 0 ]\n\t\t\t\t? errors[ 0 ][ 0 ]\n\t\t\t\t: undefined;\n\t\tif ( firstError ) {\n\t\t\treturn firstError || fallback;\n\t\t}\n\t}\n\n\tif ( 'message' in e && 'string' === typeof e.message ) {\n\t\treturn e.message || fallback;\n\t}\n\n\treturn fallback;\n}\n","export * from './editor';\n","/**\n * WordPress dependencies\n */\nimport baseApiFetch from '@wordpress/api-fetch';\nimport { format } from '@wordpress/date';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport type { APIFetchOptions } from '@wordpress/api-fetch';\n\nconst apiFetch = < T >( options: APIFetchOptions ): Promise< T > => {\n\tconst { url, path } = options;\n\tconst nabts = format( 'YmjHi' ).substring( 0, 11 ) + '0';\n\treturn baseApiFetch( {\n\t\t...options,\n\t\t...( url && {\n\t\t\turl: isRestApiRequest( options )\n\t\t\t\t? addQueryArgs( url, { nabts } )\n\t\t\t\t: url,\n\t\t} ),\n\t\t...( path && { path: addQueryArgs( path, { nabts } ) } ),\n\t\tparse: true,\n\t} );\n};\n\nexport * from '@wordpress/api-fetch';\nexport default apiFetch;\n\n// =======\n// HELPERS\n// =======\nconst isRestApiRequest = ( options: APIFetchOptions ): boolean =>\n\t!! options.url?.includes( '/wp-json/' ) ||\n\t!! options.url?.includes( 'rest_route' ) ||\n\t!! Object.keys( options ).includes( 'rest_route' );\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/block-editor';\n\nimport { store } from '@wordpress/block-editor';\nimport type Actions from '@wordpress/block-editor/store/actions';\nimport type Selectors from '@wordpress/block-editor/store/selectors';\ndeclare module '@wordpress/data' {\n\tfunction dispatch( key: typeof store ): typeof Actions;\n\tfunction select( key: typeof store ): typeof Selectors;\n}\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/components';\n\nexport {\n\t__experimentalGrid as Grid,\n\t__experimentalHeading as Heading,\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalInputControl as InputControl,\n\t__experimentalInputControlPrefixWrapper as InputControlPrefixWrapper,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalVStack as VStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\t__experimentalSpacer as Spacer,\n\t__experimentalTruncate as Truncate,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalHasSplitBorders as hasSplitBorders,\n\t__experimentalIsDefinedBorder as isDefinedBorder,\n\t__experimentalText as Text,\n\t__experimentalView as View,\n} from '@wordpress/components';\n\nexport type { BaseControlProps } from '@wordpress/components/build-types/base-control/types';\nexport type { BoxControlValue } from '@wordpress/components/build-types/box-control/types';\nexport type { ButtonAsButtonProps } from '@wordpress/components/build-types/button/types';\nexport type {\n\tColorObject,\n\tPaletteObject,\n} from '@wordpress/components/build-types/color-palette/types';\nexport type { ControlledRangeValue } from '@wordpress/components/build-types/range-control/types';\nexport type { DropdownProps } from '@wordpress/components/build-types/dropdown/types';\nexport type { GradientPickerComponentProps } from '@wordpress/components/build-types/gradient-picker/types';\nexport type { HeadingSize } from '@wordpress/components/build-types/heading/types';\nexport type { ItemGroupProps } from '@wordpress/components/build-types/item-group/types';\nexport type { PopoverProps } from '@wordpress/components/build-types/popover/types';\nexport type { Size } from '@wordpress/components/build-types/input-control/types';\nexport type { ToggleGroupControlProps } from '@wordpress/components/build-types/toggle-group-control/types';\nexport type {\n\tUnitControlProps,\n\tUnitControlOnChangeCallback,\n} from '@wordpress/components/build-types/unit-control/types';\nexport type { WordPressComponentProps } from '@wordpress/components/build-types/context';\nexport type { WPUnitControlUnit } from '@wordpress/components/build-types/unit-control/types';\n\nimport {\n\t// eslint-disable-next-line\n\t__experimentalToggleGroupControl as OriginalToggleGroupControl,\n\tBaseControl as OriginalBaseControl,\n\tCheckboxControl as OriginalCheckboxControl,\n\tFormTokenField as OriginalFormTokenField,\n\tRangeControl as OriginalRangeControl,\n\tSelectControl as OriginalSelectControl,\n\tTextControl as OriginalTextControl,\n\tTextareaControl as OriginalTextareaControl,\n\tToggleControl as OriginalToggleControl,\n} from '@wordpress/components';\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedBaseControl: typeof OriginalBaseControl = ( props ) => (\n\t<OriginalBaseControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const BaseControl = Object.assign(\n\tWrappedBaseControl,\n\tOriginalBaseControl\n);\n\nconst WrappedCheckboxControl: typeof OriginalCheckboxControl = ( props ) => (\n\t<OriginalCheckboxControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const CheckboxControl = Object.assign(\n\tWrappedCheckboxControl,\n\tOriginalCheckboxControl\n);\n\nconst WrappedFormTokenField: typeof OriginalFormTokenField = ( props ) => (\n\t<OriginalFormTokenField\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const FormTokenField = Object.assign(\n\tWrappedFormTokenField,\n\tOriginalFormTokenField\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedRangeControl: typeof OriginalRangeControl = ( props ) => (\n\t<OriginalRangeControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const RangeControl = Object.assign(\n\tWrappedRangeControl,\n\tOriginalRangeControl\n);\n\nexport const SelectControl: typeof OriginalSelectControl = ( props ) => (\n\t<OriginalSelectControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedTextControl: typeof OriginalTextControl = ( props ) => (\n\t<OriginalTextControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const TextControl = Object.assign(\n\tWrappedTextControl,\n\tOriginalTextControl\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedTextareaControl: typeof OriginalTextareaControl = ( props ) => (\n\t<OriginalTextareaControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const TextareaControl = Object.assign(\n\tWrappedTextareaControl,\n\tOriginalTextareaControl\n);\n\n// @ts-expect-error Compiler complains, but this is just a temporary fix.\nconst WrappedToggleControl: typeof OriginalToggleControl = ( props ) => (\n\t<OriginalToggleControl\n\t\t{ ...{\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const ToggleControl = Object.assign(\n\tWrappedToggleControl,\n\tOriginalToggleControl\n);\n\nconst WrappedToggleGroupControl: typeof OriginalToggleGroupControl = (\n\t// @ts-expect-error Compiler complains, but this is just a temporary fix.\n\tprops\n) => (\n\t<OriginalToggleGroupControl\n\t\t{ ...{\n\t\t\t__next40pxDefaultSize: true,\n\t\t\t__nextHasNoMarginBottom: true,\n\t\t\t...props,\n\t\t} }\n\t/>\n);\nexport const ToggleGroupControl = Object.assign(\n\tWrappedToggleGroupControl,\n\tOriginalToggleGroupControl\n);\n","/**\n * WordPress dependencies\n */\nimport { useRef, useInsertionEffect, useCallback } from '@wordpress/element';\n\n/**\n * Any function.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type AnyFunction = ( ...args: any ) => any;\n\n/**\n * Creates a stable callback function that has access to the latest state and\n * can be used within event handlers and effect callbacks. Throws when used in\n * the render phase.\n *\n * @param callback The callback function to wrap.\n *\n * @example\n *\n * ```tsx\n * function Component( props ) {\n *   const onClick = useEvent( props.onClick );\n *   useEffect( () => {\n *     onClick();\n *     // Won't trigger the effect again when props.onClick is updated.\n *   }, [ onClick ] );\n *   // Won't re-render Button when props.onClick is updated (if `Button` is\n *   // wrapped in `React.memo`).\n *   return <Button onClick={ onClick } />;\n * }\n * ```\n */\nexport default function useEvent< T extends AnyFunction >(\n\t/**\n\t * The callback function to wrap.\n\t */\n\tcallback?: T\n): T {\n\tconst ref = useRef< AnyFunction | undefined >( () => {\n\t\tthrow new Error(\n\t\t\t'Callbacks created with `useEvent` cannot be called during rendering.'\n\t\t);\n\t} );\n\tuseInsertionEffect( () => {\n\t\tref.current = callback;\n\t} );\n\treturn useCallback< AnyFunction >(\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-argument\n\t\t( ...args ) => ref.current?.( ...args ),\n\t\t[]\n\t) as T;\n}\n","/**\n * Internal dependencies\n */\nimport { useResizeObserver as _useResizeObserver } from './use-resize-observer';\n\n/**\n * Sets up a [`ResizeObserver`](https://developer.mozilla.org/en-US/docs/Web/API/Resize_Observer_API)\n * for an HTML or SVG element.\n *\n * Pass the returned setter as a callback ref to the React element you want\n * to observe, or use it in layout effects for advanced use cases.\n *\n * @example\n *\n * ```tsx\n * const setElement = useResizeObserver(\n * \t( resizeObserverEntries ) => console.log( resizeObserverEntries ),\n * \t{ box: 'border-box' }\n * );\n * <div ref={ setElement } />;\n *\n * // The setter can be used in other ways, for example:\n * useLayoutEffect( () => {\n * \tsetElement( document.querySelector( `data-element-id=\"${ elementId }\"` ) );\n * }, [ elementId ] );\n * ```\n *\n * @param callback The `ResizeObserver` callback - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/ResizeObserver#callback).\n * @param options  Options passed to `ResizeObserver.observe` when called - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/observe#options). Changes will be ignored.\n */\nexport default function useResizeObserver< T extends Element >(\n\t/**\n\t * The `ResizeObserver` callback - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/ResizeObserver#callback).\n\t */\n\tcallback: ResizeObserverCallback,\n\t/**\n\t * Options passed to `ResizeObserver.observe` when called - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/observe#options). Changes will be ignored.\n\t */\n\toptions?: ResizeObserverOptions\n): ( element?: T | null ) => void;\n\n/**\n * **This is a legacy API and should not be used.**\n *\n * @param      callback\n * @param      options\n * @deprecated Use the other `useResizeObserver` API instead: `const ref = useResizeObserver( ( entries ) => { ... } )`.\n *\n * Hook which allows to listen to the resize event of any target element when it changes size.\n * _Note: `useResizeObserver` will report `null` sizes until after first render.\n *\n * @example\n *\n * ```js\n * const App = () => {\n * \tconst [ resizeListener, sizes ] = useResizeObserver();\n *\n * \treturn (\n * \t\t<div>\n * \t\t\t{ resizeListener }\n * \t\t\tYour content here\n * \t\t</div>\n * \t);\n * };\n * ```\n */\nexport default function useResizeObserver< T extends HTMLElement >(\n\tcallback: ResizeObserverCallback,\n\toptions: ResizeObserverOptions = {}\n): ( element?: T | null ) => void {\n\treturn _useResizeObserver( callback, options );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport useEvent from '../use-event';\n\n// This is the current implementation of `useResizeObserver`.\n//\n// The legacy implementation is still supported for backwards compatibility.\n// This is achieved by overloading the exported function with both signatures,\n// and detecting which API is being used at runtime.\nexport function useResizeObserver< T extends HTMLElement >(\n\tcallback: ResizeObserverCallback,\n\tresizeObserverOptions: ResizeObserverOptions = {}\n): ( element?: T | null ) => void {\n\tconst callbackEvent = useEvent( callback );\n\n\tconst observedElementRef = useRef< T | null >();\n\tconst resizeObserverRef = useRef< ResizeObserver >();\n\treturn useEvent( ( element?: T | null ) => {\n\t\tif ( element === observedElementRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set up `ResizeObserver`.\n\t\tresizeObserverRef.current ??= new ResizeObserver( callbackEvent );\n\t\tconst { current: resizeObserver } = resizeObserverRef;\n\n\t\t// Unobserve previous element.\n\t\tif ( observedElementRef.current ) {\n\t\t\tresizeObserver.unobserve( observedElementRef.current );\n\t\t}\n\n\t\t// Observe new element.\n\t\tobservedElementRef.current = element;\n\t\tif ( element ) {\n\t\t\tresizeObserver.observe( element, resizeObserverOptions );\n\t\t}\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/compose';\n\nexport { default as useEvent } from './hooks/use-event';\nexport { default as useResizeObserver } from './hooks/use-resize-observer';\nexport { __experimentalUseDragging as useDragging } from '@wordpress/compose';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/core-data';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * WordPress dependencies\n */\nexport * from '@wordpress/data';\nimport {\n\tregister as doRegister,\n\tresolveSelect as doResolveSelect,\n\tsubscribe as doSubscribe,\n\tuseSelect as doUseSelect,\n} from '@wordpress/data';\nimport type {\n\tMapSelect,\n\tReduxStoreConfig,\n\tStoreDescriptor,\n\tUseSelectReturn,\n} from '@wordpress/data/build-types/types';\n\n// ==========\n// TYPESCRIPT\n// ==========\n\n// register should exist.\nexport function register(\n\tstore: StoreDescriptor< ReduxStoreConfig< any, any, any > >\n): void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call\n\tdoRegister( store );\n}\n\n// subscribe should exist.\nexport function subscribe(\n\tlistener: () => void,\n\tstore?: StoreDescriptor< any > | string\n): () => void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doSubscribe( listener, store );\n}\n\n// useSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function useSelect< T extends MapSelect | StoreDescriptor< any > >(\n\tmapSelect: T,\n\tdependencies?: unknown[]\n): UseSelectReturn< T > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\treturn doUseSelect< T >( mapSelect, dependencies );\n}\n\n// resolveSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function resolveSelect< T extends StoreDescriptor< any > >(\n\tkey: T\n): ResolvableSelectors< UseSelectReturn< T > > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doResolveSelect( key );\n}\n\ntype ResolvableSelectors<\n\tS extends Record< string, ( ...args: any[] ) => any >,\n> = {\n\treadonly [ K in keyof S ]: S[ K ] extends {\n\t\tPromisedSignature: ( ...args: any[] ) => any;\n\t}\n\t\t? S[ K ][ 'PromisedSignature' ]\n\t\t: S[ K ] extends ( ...args: infer A ) => infer R\n\t\t? ( ...args: A ) => Promise< R >\n\t\t: never;\n};\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/dom-ready';\nimport domReady from '@wordpress/dom-ready';\nexport default domReady;\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/element';\nimport { createRoot, render as legacyRender } from '@wordpress/element';\n\nexport function render(\n\telement: JSX.Element,\n\tcontainer: Element | null\n): void {\n\tif ( ! container ) {\n\t\treturn;\n\t}\n\n\tif ( createRoot ) {\n\t\tconst root = createRoot( container );\n\t\troot.render( element );\n\t} else {\n\t\tlegacyRender( element, container );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/i18n';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/notices';\n","module.exports = window[\"nab\"][\"components\"];","module.exports = window[\"nab\"][\"conversionActions\"];","module.exports = window[\"nab\"][\"data\"];","module.exports = window[\"nab\"][\"date\"];","module.exports = window[\"nab\"][\"experimentLibrary\"];","module.exports = window[\"nab\"][\"experiments\"];","module.exports = window[\"nab\"][\"i18n\"];","module.exports = window[\"nab\"][\"segmentationRules\"];","module.exports = window[\"nab\"][\"utils\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"domReady\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"lodash\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-editor\"], () => (__webpack_require__(\"./packages/editor/export.ts\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["Modal","useDispatch","useSelect","_x","sprintf","store","NAB_EDITOR","AiAlternativeAttributesModal","alternativeId","alternative","select","id","getAiAlternativeModal","undefined","alt","getAlternative","showAiAlternativeModal","attributes","ai","changes","length","close","_jsxs","className","title","isDismissible","onRequestClose","shouldCloseOnClickOutside","children","_jsx","name","map","change","index","AlternativePreviewer","closeAlternativePreviewer","url","getAlternativePreviewerUrl","src","Button","CheckboxControl","createInterpolateElement","useEffect","useState","clsx","HelpIcon","NAB_EXPERIMENTS","createAlternative","duplicateAlternative","getLetter","omitUndefineds","useCanAddAlternatives","useExperimentAttribute","AlternativeContainer","disabled","control","useAlternative","AlternativeView","useView","canBeRemoved","useCanBeRemoved","experimentType","useExperimentType","help","useHelp","isBeingSaved","useIsBeingSaved","isExternalEdit","useIsExternalEdit","isControl","canAddAlternatives","duplicate","useDuplicator","isPreviewDisabled","useIsPreviewDisabled","customActions","useCustomActions","saveExperimentAndEditAlternative","saveExperimentAndPreviewAlternative","removeAlternatives","replaceAlternatives","setAlternative","setAttributes","Object","assign","resetAlternative","_a","isReady","checked","onChange","label","a","variant","onClick","action","isVisible","isEnabled","base","isDestructive","text","getExperimentType","useDefaults","type","defaults","alternatives","getAlternatives","didApplyDefaults","markApplyDefaults","defaultAttributes","original","status","getAlternativeIds","isPaused","includes","isExperimentBeingSaved","EMPTY_VIEW","_Fragment","getExperimentView","view","getHelpString","getExperimentSupport","alternativeEdition","enabled","_b","checks","isAlternativePreviewDisabled","call","supports","alternativeCustomActions","Dashicon","difference","AnimatedList","AlternativeSection","alternativeIds","useAlternativeIds","addAlternative","useAddAlternative","isTestedElementInvalid","useIsTestedElementInvalid","isReplacingAlternatives","useIsReplacingAlternatives","icon","disableAnimations","exit","addAlternatives","altIds","prevAltIds","setPrevAltIds","d1","d2","StrictMode","NAB_DATA","EditorProvider","Layout","Editor","experimentId","experiment","getExperiment","PlainText","ExperimentName","setName","value","placeholder","trim","createGoal","GoalList","activeGoalId","useActiveGoalId","goals","useGoals","isExperimentPaused","useIsExperimentPaused","setActiveGoal","addGoals","goal","getDefaultGoalNameForIndex","getActiveGoal","getGoals","findIndex","Goal","GoalView","GoalSection","useAutoConversionActionsEffect","useActiveGoal","numberOfGoals","isAutomatic","useIsActiveGoalAutomatic","removeGoals","updateGoal","canGoalBeRemoved","removeActiveGoal","nextGoal","getAdjacentGoal","updateActiveGoal","removeGoal","firstGoal","hasExperimentSupport","replaceConversionActionsInGoal","goalId","automaticGoalSetup","auto","EMPTY_ARRAY","ConversionAction","AutomaticConversionActionList","conversionActions","useConversionActions","readOnly","getConversionActions","ConversionActionList","description","strong","DropdownMenu","MenuGroup","MenuItem","every","groupBy","keys","omitBy","NAB_ACTIONS","createConversionAction","createConversionActionWithDefaults","CATEGORIES","interaction","ecommerce","other","ConversionActionTypeList","allConversionActionTypes","useConversionActionTypes","addConversionActionsIntoGoal","act","conversionActionTypes","types","toggleProps","popoverProps","placement","onClose","c","filter","Icon","role","iconPosition","getConversionActionTypes","isActive","requiresSingleness","ca","uniformTypes","requiresUniformity","PanelBody","useCallback","noop","usePluginSetting","getConversionActionScopeError","isEmpty","useExperimentId","goalIndex","useActiveGoalIndex","actionType","useConversionActionType","scope","useActionScope","View","Edit","edit","validate","scopeError","errors","_scope","hasErrors","opened","onToggle","setScope","useUpdater","remove","useRemove","showActualIcon","getExperimentId","getActiveGoalIndex","getConversionActionType","goalTracking","actionId","updateConversionAction","update","removeConversionActionsFromGoal","SelectControl","ECommerceGoalSettings","plugin","useECommercePlugin","ActualSettings","useTitle","useOrderRevenueToggle","statuses","useECommerceOrderStatuses","orderStatus","setOrderStatus","useOrderStatus","options","actions","isWcOrder","isEddOrder","useGoal","useOrderRevenue","validStatuses","orderStatusForConversion","s","getDefaultOrderStatus","v","getECommerceSetting","TextControl","useRef","SubscribeWithCouponButton","Tooltip","isInTheFuture","HelpButton","Header","ref","useIcon","startLabel","useStartLabel","draftStatusRationale","useDraftStatusRationale","isDraft","hasExperimentBeenRecentlySaved","useHasBeenRecentlySaved","start","useStarter","saveExperiment","setExperimentData","saveExperimentAsReady","canUserStart","useCanUserStart","getTooltipContainer","current","hasCapability","startDate","getExperimentTypes","experimentTypes","typeName","getDraftStatusRationale","resumeExperiment","startExperiment","ContextualHelpButton","isPlan","walkthroughProps","subscriptionPlan","getPluginSetting","screen","questions","walkthrough","getWalkthrough","link","props","isSubscribedTo","expectedPlan","mode","intro","element","document","querySelector","active","_d","_c","attr","getExperimentAttribute","setValue","useIsSubscribedTo","plan","maxAlternatives","numOfAlternatives","useSubscription","NoticeList","NOTICES","StatusManager","SegmentationSection","Sidebar","notices","useNotices","removeNotice","tabIndex","onRemove","getNotices","markAsReady","setupEditor","setActiveSegment","defaultGoal","activeSegment","segments","createSegment","SegmentList","activeSegmentId","useActiveSegmentId","useSegments","addSegments","canAddSegments","segment","getDefaulSegmentNameForIndex","getActiveSegment","getSegments","createSegmentationRule","createSegmentationRuleWithDefaults","SegmentationRuleList","SegmentationRuleTypeCategoryList","Segment","removeSegment","activeSegmentRules","useActiveSegmentRules","useSegmentationRuleCreator","segmentationRules","useActiveSegment","getSegmentationRules","addSegmentationRulesIntoSegment","rule","SegmentationRule","setRuleAttributes","useSetRuleAttributes","removeRule","useRemoveRule","attrs","segmentId","updateSegmentationRule","ruleId","removeSegmentationRulesFromSegment","NAB_SEGMENTS","SegmentationRuleTypeCategory","segmentationRuleTypeCategories","useSegmentationRuleTypeCategories","category","getSegmentationRuleTypeCategories","segmentationRuleTypes","useSegmentationRuleTypes","singleton","some","catName","ruleTypes","getSegmentationRuleTypes","ruleType","useSegmentationRuleType","getSegmentationRuleType","SegmentView","updateActiveSegment","segmentEvaluation","setSegmentEvaluation","useSegmentEvaluation","globalSegmentEvaluation","removeActiveSegment","useActiveSegmentRemover","canSegmentBeRemoved","updateSegment","doUpdate","removeSegments","nextSegment","getAdjacentSegment","getSegmentEvaluation","TextareaControl","Description","setDescription","AutoApplyWinner","isAutoApplyEnabled","enableAutoApply","supportsAutoApply","useSupportsAlternativeApplication","alternativeApplication","Dropdown","PanelRow","useInstanceId","_n","find","numberFormat","ExperimentEndSchedule","instanceId","canBeScheduled","endMode","endValue","END_MODE_OPTIONS","isCustom","setCustom","useCustomValue","onUpdateEndSchedule","contentClassName","renderToggle","isOpen","htmlFor","getLabel","renderContent","getDefaultValue","END_MODES","style","marginTop","Number","parseInt","getCustomPlaceholder","shouldBeCustom","manual","confidence","percentage","duration","views","DateTimePicker","formatI18nDatetime","ExperimentStartSchedule","setStartDate","useIsPaused","date","noDateLabel","readonly","Status","ExperimentManagement","canDelete","useCanDelete","moveToTrash","getStatusLabel","Scope","dims","useSidebarDimensions","getPageAttribute","applyFix","__rest","createScopeRule","ConsistencyScope","rules","enableConsistency","useConsistencyEnabler","setScopeRules","consistency","ErrorText","isUrlFragmentInvalid","getLocalUrlError","CustomUrlScope","scopeSupport","newRule","setNewRule","editRule","isNewRule","ruleToAdd","r","Explanation","RuleSettings","error","useError","OPTIONS","homeUrl","OPTIONS_RECORD","exact","different","partial","ProductConsistencyScope","TestedUrlWithQueryArgsScope","UrlsOrPhpScope","useRules","useScopeSupport","testAgainstExistingContent","useTestAgainstExistingContent","isTestedUrlWithQueryArgsScopeRule","isCustomUrlScopeRule","isCustomPhpScopeRule","getScope","CHECKER","countBy","drop","take","toPairs","DEFAULT_RULE","values","args","QueryArgSettings","names","NEW_ARG","arg","QueryArgSetting","hasDuplicateName","newArg","setting","CONDITIONS","condition","QueryArgValue","urls","CONDITION_LABEL_RECORD","exists","contains","CodeEditor","firstRule","PhpCode","priority","snippet","previewUrl","errorMessage","warningMessage","previewUrlError","PRIORITY_OPTIONS","language","withBorder","before","after","validateSnippet","keyBy","shouldExperimentBeDraft","useStatusUpdateEffect","useInvalidControlEffect","setStatus","rationale","setDraftStatusRationale","setStatusAndRationale","newStatus","newRationale","proposedRationale","useProposedRationale","useAlternatives","isInvalid","getControlError","setTestedElementAsInvalid","useScope","reduce","g","doSelect","errorWithTestedElement","_","alts","errorWithAlternative","getAlternativeError","aiErrorWithAlternative","errorWithScope","isScopeInvalid","errorWithGoals","areGoalsInvalid","errorWithSegments","areSegmentsInvalid","i","errorWithGoal","isGoalInvalid","getGoalName","conversionAction","conversionActionType","goalName","errorWithSegment","isSegmentInvalid","segmentIndex","getSegmentName","segmentationRule","segmentationRuleType","segmentName","n","editor","dispatch","domReady","render","debounce","registerCoreExperiments","initializeExperimentEditor","target","getElementById","console","warn","fixSidebarDimensions","height","window","innerHeight","wpAdminBar","adminBarHeight","getBoundingClientRect","setPageAttribute","top","innerWidth","addEventListener","castArray","ids","oldIds","conversionActionIds","conversionActionId","setExperimentAsBeingSaved","setExperimentAsRecentlySaved","openAlternativePreviewer","setHeatmapData","invalid","replaceSegmentationRulesInSegment","segmentationRuleIds","segmentationRuleId","strategy","INIT_STATE","aiAlternativeModal","alternativePreviewerUrl","byId","links","heatmap","preview","allIds","data","endDate","autoAlternativeApplication","segmentation","evaluation","createReduxStore","register","controls","reducer","selectors","realActions","sideEffects","isEqual","omit","zip","isDefined","IS","state","actualReducer","newAlternatives","newAlternativeIds","pairs","newAlternativesById","p","oldAlternatives","oldAlternativesWithoutId","newAlternativesWithoutId","oldAlternative","newAlternative","newState","EMPTY_OBJECT","newConversionActions","oldConvActions","newConvActions","oldConvActionsWithoutId","newConvActionsWithoutId","oldConversionAction","newConversionAction","memo","newAttributes","newGoals","newGoal","combineReducers","newRules","newSegments","oldSegment","newSegment","oldRules","oldRulesWithoutId","newRulesWithoutId","oldSegmentationRule","newSegmentationRule","createSelector","_getAlternative","__getAlternative","createIndexedSelector","key","dependants","indexOf","getActiveSegmentIndex","_getExperimentAttribute","attribute","getHeatmapAttribute","_getHeatmapAttribute","apiFetch","isSaving","goalsWithoutActions","getECommercePlugin","push","getOrderStatusForConversion","segmentsWithoutRules","nonControlAlternatives","trackingMode","trackedPostId","trackedPostType","trackedUrl","_e","participationConditions","_f","savedExperiment","path","method","e","message","getErrorMessage","createErrorNotice","location","href","scopeType","createWarningNotice","getAdminUrl","post_type","startOrResumeExperiment","action_1","ignoreScopeOverlap","getErrorCode","notice","__awaiter","page","code","defaultMessage","fallback","Array","isArray","firstError","baseApiFetch","format","addQueryArgs","nabts","substring","isRestApiRequest","parse","__experimentalGrid","Grid","__experimentalHeading","Heading","__experimentalItemGroup","ItemGroup","__experimentalInputControl","InputControl","__experimentalInputControlPrefixWrapper","InputControlPrefixWrapper","__experimentalToggleGroupControlOption","ToggleGroupControlOption","__experimentalToggleGroupControlOptionIcon","ToggleGroupControlOptionIcon","__experimentalUnitControl","UnitControl","__experimentalNumberControl","NumberControl","__experimentalToolsPanel","ToolsPanel","__experimentalToolsPanelItem","ToolsPanelItem","__experimentalHStack","HStack","__experimentalZStack","ZStack","__experimentalVStack","VStack","__experimentalDropdownContentWrapper","DropdownContentWrapper","__experimentalSpacer","Spacer","__experimentalTruncate","Truncate","__experimentalParseQuantityAndUnitFromRawValue","parseQuantityAndUnitFromRawValue","__experimentalUseCustomUnits","useCustomUnits","__experimentalHasSplitBorders","hasSplitBorders","__experimentalIsDefinedBorder","isDefinedBorder","__experimentalText","Text","__experimentalView","__experimentalToggleGroupControl","OriginalToggleGroupControl","BaseControl","OriginalBaseControl","OriginalCheckboxControl","FormTokenField","OriginalFormTokenField","RangeControl","OriginalRangeControl","OriginalSelectControl","OriginalTextControl","OriginalTextareaControl","ToggleControl","OriginalToggleControl","WrappedBaseControl","__nextHasNoMarginBottom","WrappedCheckboxControl","WrappedFormTokenField","__next40pxDefaultSize","WrappedRangeControl","WrappedTextControl","WrappedTextareaControl","WrappedToggleControl","WrappedToggleGroupControl","ToggleGroupControl","useInsertionEffect","useEvent","callback","Error","useResizeObserver","_useResizeObserver","resizeObserverOptions","callbackEvent","observedElementRef","resizeObserverRef","ResizeObserver","resizeObserver","unobserve","observe","default","__experimentalUseDragging","useDragging","doRegister","resolveSelect","doResolveSelect","subscribe","doSubscribe","doUseSelect","listener","mapSelect","dependencies","createRoot","legacyRender","container","root"],"ignoreList":[],"sourceRoot":""}