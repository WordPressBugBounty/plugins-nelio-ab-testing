{"version":3,"file":"js/visitor-type.js","mappings":"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A;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD,CAAC;;AAED;AACA;AACA;AACA,2BAA2B,iEAAiE;AAC5F,0BAA0B,8BAA8B;AACxD,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrFa;;AAEb,eAAe,mBAAO,CAAC,2DAAa;;AAEpC;AACA;AACA;AACA;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,cAAc;AACpC;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;;;;;;;;;;AC9BY;;AAEb,iBAAiB,mBAAO,CAAC,0EAAkB,mBAAmB,mBAAO,CAAC,0EAAkB;;;;;;;;;;;;ACF3E;;AAEb;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNa;;AAEb,kBAAkB,mBAAO,CAAC,4DAAiB;;AAE3C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;;;;;;;;;;;AClBa;;AAEb,cAAc,mBAAO,CAAC,oDAAa;;AAEnC;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;;;;;;;;;;;;ACVa;;AAEb,iBAAiB,mBAAO,CAAC,0DAAgB;;AAEzC,4BAA4B,EAAE;;AAE9B;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACVa;;AAEb,eAAe,mBAAO,CAAC,sDAAc;;AAErC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;ACZa;;AAEb;AACA;;AAEA,oCAAoC;;;;;;;UCLpC;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;;;;;;;;;;;ACNA;;;AAGoB;AAEpB;;;AAG8E;AAE9E,KAAO;EACNyC,2FAAgB,EAAE;AACnB,CAAC,CAAE,CAAE,C","sources":["webpack://nab/./assets/src/public/utils/cookies.ts","webpack://nab/./assets/src/public/utils/segmentation/segmentation-settings.ts","webpack://nab/./node_modules/d/index.js","webpack://nab/./node_modules/es5-ext/function/noop.js","webpack://nab/./node_modules/es5-ext/object/assign/index.js","webpack://nab/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://nab/./node_modules/es5-ext/object/assign/shim.js","webpack://nab/./node_modules/es5-ext/object/is-value.js","webpack://nab/./node_modules/es5-ext/object/keys/index.js","webpack://nab/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://nab/./node_modules/es5-ext/object/keys/shim.js","webpack://nab/./node_modules/es5-ext/object/normalize-options.js","webpack://nab/./node_modules/es5-ext/object/valid-value.js","webpack://nab/./node_modules/es5-ext/string/\u0000#/contains/index.js","webpack://nab/./node_modules/es5-ext/string/\u0000#/contains/is-implemented.js","webpack://nab/./node_modules/es5-ext/string/\u0000#/contains/shim.js","webpack://nab/./node_modules/es6-symbol/index.js","webpack://nab/./node_modules/es6-symbol/is-implemented.js","webpack://nab/./node_modules/es6-symbol/is-symbol.js","webpack://nab/./node_modules/es6-symbol/lib/private/generate-name.js","webpack://nab/./node_modules/es6-symbol/lib/private/setup/standard-symbols.js","webpack://nab/./node_modules/es6-symbol/lib/private/setup/symbol-registry.js","webpack://nab/./node_modules/es6-symbol/polyfill.js","webpack://nab/./node_modules/es6-symbol/validate-symbol.js","webpack://nab/./node_modules/ext/global-this/implementation.js","webpack://nab/./node_modules/ext/global-this/index.js","webpack://nab/./node_modules/ext/global-this/is-implemented.js","webpack://nab/./node_modules/type/function/is.js","webpack://nab/./node_modules/type/object/is.js","webpack://nab/./node_modules/type/plain-function/is.js","webpack://nab/./node_modules/type/prototype/is.js","webpack://nab/./node_modules/type/value/is.js","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./assets/src/public/visitor-type.ts"],"sourcesContent":["/**\n * External dependencies\n */\nimport type { Maybe } from '@nab/types';\n\ntype CookieName =\n\t| 'nabAlternative'\n\t| 'nabCheckWritePermission'\n\t| 'nabExperimentsWithPageViews'\n\t| 'nabIsUserLoggedIn'\n\t| 'nabSimulateStaging'\n\t| 'nabSegmentation'\n\t| 'nabUniqueViews'\n\t| 'nabSessionChecksum';\ntype CookieListenerId = string;\ntype CookieOptions = {\n\treadonly path: string;\n\treadonly expires: number;\n};\n\nexport function setCookie(\n\tname: CookieName,\n\tvalue: number | boolean | string,\n\toptions?: Partial< CookieOptions >\n): void {\n\tconst opts: CookieOptions = {\n\t\tpath: '/',\n\t\texpires: 0,\n\t\t...( options || {} ),\n\t};\n\n\tlet cookie = `${ name }=${ encodeURIComponent( value ) };`;\n\n\tif ( 0 < opts.expires ) {\n\t\tconst expiration = new Date(\n\t\t\tnew Date().getTime() + opts.expires * 864e5\n\t\t);\n\t\tcookie += ` expires=${ expiration.toUTCString() };`;\n\t}\n\n\tcookie += ` path=${ opts.path };`;\n\tcookie += ' SameSite=None; Secure;';\n\n\tdocument.cookie = cookie;\n}\n\nexport function getCookie( name: string ): Maybe< string > {\n\tconst cookies = document.cookie\n\t\t.split( ';' )\n\t\t.map( ( cookie ) => cookie.trim() )\n\t\t.reduce(\n\t\t\t( memo, cookie ) => {\n\t\t\t\tmemo[ cookie.split( '=' )[ 0 ] ?? '' ] =\n\t\t\t\t\tcookie.split( '=' )[ 1 ] ?? '';\n\t\t\t\treturn memo;\n\t\t\t},\n\t\t\t{} as Record< string, string >\n\t\t);\n\n\tif ( ! cookies[ name ] ) {\n\t\treturn;\n\t}\n\treturn decodeURIComponent( cookies[ name ] ?? '' );\n}\n\nexport function removeCookie( name: string ): void {\n\tdocument.cookie = `${ name }=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=None; Secure`;\n}\n\nexport function addCookieListener( fn: () => void ): CookieListenerId {\n\tconst id = getNewId();\n\tlisteners[ id ] = fn;\n\tresetTimeout();\n\treturn id;\n}\n\nexport function removeCookieListener( name: string ): void {\n\tif ( listeners[ name ] ) {\n\t\tdelete listeners[ name ];\n\t}\n}\n\n// ========\n// INTERNAL\n// ========\n\nconst trackState = {\n\ttimeoutId: undefined as undefined | ReturnType< typeof setInterval >,\n\tcookie: '',\n\tcounter: 0,\n};\nconst listeners: Record< CookieListenerId, () => void > = {};\n\nfunction tick() {\n\tif ( ! trackState.counter || trackState.cookie !== document.cookie ) {\n\t\tObject.values( listeners ).forEach( ( fn ) => fn() );\n\t}\n\ttrackState.cookie = document.cookie ?? '';\n\t++trackState.counter;\n\n\tif ( ! Object.values( listeners ).length ) {\n\t\treturn;\n\t}\n\n\ttrackState.timeoutId = setTimeout(\n\t\ttick,\n\t\ttrackState.counter < 120 ? 500 : 2000\n\t);\n}\n\nfunction resetTimeout() {\n\ttrackState.counter = 0;\n\tclearInterval( trackState.timeoutId );\n\ttrackState.timeoutId = setTimeout( tick, 500 );\n}\n\nconst getNewId = () => {\n\tlet id = '';\n\tdo {\n\t\tid = `${ Math.random() }`.slice( 2 );\n\t} while ( Object.keys( listeners ).includes( id ) );\n\treturn id;\n};\n","/**\n * External dependencies\n */\nimport type { ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { getCookie, setCookie } from '../cookies';\n\nexport type SegmentationSettings = {\n\treadonly activeSegments: Partial<\n\t\tRecord< ExperimentId, ReadonlyArray< number > >\n\t>;\n\treadonly firstVisit: number;\n\treadonly geo: {\n\t\treadonly ipAddress: string;\n\t\treadonly location: string;\n\t\treadonly lastUpdate: string;\n\t};\n};\n\nexport function updateFirstVisit(): void {\n\tconst settings = getSegmentationSettings();\n\tsetSegmentationSettings( {\n\t\t...settings,\n\t\tfirstVisit:\n\t\t\tsettings.firstVisit ||\n\t\t\tNumber.parseInt( Date.now().toString() ) ||\n\t\t\t0,\n\t} );\n}\n\nconst DEFAULT_SEGMENTATION_SETTINGS: SegmentationSettings = {\n\tactiveSegments: {},\n\tgeo: {\n\t\tlocation: '',\n\t\tipAddress: '',\n\t\tlastUpdate: '',\n\t},\n\tfirstVisit: 0,\n};\nexport function getSegmentationSettings(): SegmentationSettings {\n\ttry {\n\t\tconst settings = JSON.parse(\n\t\t\tgetCookie( 'nabSegmentation' ) || '{}'\n\t\t) as Partial< SegmentationSettings >;\n\t\treturn {\n\t\t\t...DEFAULT_SEGMENTATION_SETTINGS,\n\t\t\t...settings,\n\t\t};\n\t} catch ( _ ) {\n\t\treturn DEFAULT_SEGMENTATION_SETTINGS;\n\t}\n}\n\nexport function setSegmentationSettings(\n\tsettings: SegmentationSettings\n): void {\n\tsetCookie( 'nabSegmentation', JSON.stringify( settings ), {\n\t\texpires: 120,\n\t} );\n}\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString /*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? require(\"ext/global-this\").Symbol\n\t: require(\"./polyfill\");\n","\"use strict\";\n\nvar global     = require(\"ext/global-this\")\n  , validTypes = { object: true, symbol: true };\n\nmodule.exports = function () {\n\tvar Symbol = global.Symbol;\n\tvar symbol;\n\tif (typeof Symbol !== \"function\") return false;\n\tsymbol = Symbol(\"test symbol\");\n\ttry { String(symbol); }\n\tcatch (e) { return false; }\n\n\t// Return 'true' also for polyfills\n\tif (!validTypes[typeof Symbol.iterator]) return false;\n\tif (!validTypes[typeof Symbol.toPrimitive]) return false;\n\tif (!validTypes[typeof Symbol.toStringTag]) return false;\n\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function (value) {\n\tif (!value) return false;\n\tif (typeof value === \"symbol\") return true;\n\tif (!value.constructor) return false;\n\tif (value.constructor.name !== \"Symbol\") return false;\n\treturn value[value.constructor.toStringTag] === \"Symbol\";\n};\n","\"use strict\";\n\nvar d = require(\"d\");\n\nvar create = Object.create, defineProperty = Object.defineProperty, objPrototype = Object.prototype;\n\nvar created = create(null);\nmodule.exports = function (desc) {\n\tvar postfix = 0, name, ie11BugWorkaround;\n\twhile (created[desc + (postfix || \"\")]) ++postfix;\n\tdesc += postfix || \"\";\n\tcreated[desc] = true;\n\tname = \"@@\" + desc;\n\tdefineProperty(\n\t\tobjPrototype, name,\n\t\td.gs(null, function (value) {\n\t\t\t// For IE11 issue see:\n\t\t\t// https://connect.microsoft.com/IE/feedbackdetail/view/1928508/\n\t\t\t//    ie11-broken-getters-on-dom-objects\n\t\t\t// https://github.com/medikoo/es6-symbol/issues/12\n\t\t\tif (ie11BugWorkaround) return;\n\t\t\tie11BugWorkaround = true;\n\t\t\tdefineProperty(this, name, d(value));\n\t\t\tie11BugWorkaround = false;\n\t\t})\n\t);\n\treturn name;\n};\n","\"use strict\";\n\nvar d            = require(\"d\")\n  , NativeSymbol = require(\"ext/global-this\").Symbol;\n\nmodule.exports = function (SymbolPolyfill) {\n\treturn Object.defineProperties(SymbolPolyfill, {\n\t\t// To ensure proper interoperability with other native functions (e.g. Array.from)\n\t\t// fallback to eventual native implementation of given symbol\n\t\thasInstance: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.hasInstance) || SymbolPolyfill(\"hasInstance\")\n\t\t),\n\t\tisConcatSpreadable: d(\n\t\t\t\"\",\n\t\t\t(NativeSymbol && NativeSymbol.isConcatSpreadable) ||\n\t\t\t\tSymbolPolyfill(\"isConcatSpreadable\")\n\t\t),\n\t\titerator: d(\"\", (NativeSymbol && NativeSymbol.iterator) || SymbolPolyfill(\"iterator\")),\n\t\tmatch: d(\"\", (NativeSymbol && NativeSymbol.match) || SymbolPolyfill(\"match\")),\n\t\treplace: d(\"\", (NativeSymbol && NativeSymbol.replace) || SymbolPolyfill(\"replace\")),\n\t\tsearch: d(\"\", (NativeSymbol && NativeSymbol.search) || SymbolPolyfill(\"search\")),\n\t\tspecies: d(\"\", (NativeSymbol && NativeSymbol.species) || SymbolPolyfill(\"species\")),\n\t\tsplit: d(\"\", (NativeSymbol && NativeSymbol.split) || SymbolPolyfill(\"split\")),\n\t\ttoPrimitive: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.toPrimitive) || SymbolPolyfill(\"toPrimitive\")\n\t\t),\n\t\ttoStringTag: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.toStringTag) || SymbolPolyfill(\"toStringTag\")\n\t\t),\n\t\tunscopables: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.unscopables) || SymbolPolyfill(\"unscopables\")\n\t\t)\n\t});\n};\n","\"use strict\";\n\nvar d              = require(\"d\")\n  , validateSymbol = require(\"../../../validate-symbol\");\n\nvar registry = Object.create(null);\n\nmodule.exports = function (SymbolPolyfill) {\n\treturn Object.defineProperties(SymbolPolyfill, {\n\t\tfor: d(function (key) {\n\t\t\tif (registry[key]) return registry[key];\n\t\t\treturn (registry[key] = SymbolPolyfill(String(key)));\n\t\t}),\n\t\tkeyFor: d(function (symbol) {\n\t\t\tvar key;\n\t\t\tvalidateSymbol(symbol);\n\t\t\tfor (key in registry) {\n\t\t\t\tif (registry[key] === symbol) return key;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t})\n\t});\n};\n","// ES2015 Symbol polyfill for environments that do not (or partially) support it\n\n\"use strict\";\n\nvar d                    = require(\"d\")\n  , validateSymbol       = require(\"./validate-symbol\")\n  , NativeSymbol         = require(\"ext/global-this\").Symbol\n  , generateName         = require(\"./lib/private/generate-name\")\n  , setupStandardSymbols = require(\"./lib/private/setup/standard-symbols\")\n  , setupSymbolRegistry  = require(\"./lib/private/setup/symbol-registry\");\n\nvar create = Object.create\n  , defineProperties = Object.defineProperties\n  , defineProperty = Object.defineProperty;\n\nvar SymbolPolyfill, HiddenSymbol, isNativeSafe;\n\nif (typeof NativeSymbol === \"function\") {\n\ttry {\n\t\tString(NativeSymbol());\n\t\tisNativeSafe = true;\n\t} catch (ignore) {}\n} else {\n\tNativeSymbol = null;\n}\n\n// Internal constructor (not one exposed) for creating Symbol instances.\n// This one is used to ensure that `someSymbol instanceof Symbol` always return false\nHiddenSymbol = function Symbol(description) {\n\tif (this instanceof HiddenSymbol) throw new TypeError(\"Symbol is not a constructor\");\n\treturn SymbolPolyfill(description);\n};\n\n// Exposed `Symbol` constructor\n// (returns instances of HiddenSymbol)\nmodule.exports = SymbolPolyfill = function Symbol(description) {\n\tvar symbol;\n\tif (this instanceof Symbol) throw new TypeError(\"Symbol is not a constructor\");\n\tif (isNativeSafe) return NativeSymbol(description);\n\tsymbol = create(HiddenSymbol.prototype);\n\tdescription = description === undefined ? \"\" : String(description);\n\treturn defineProperties(symbol, {\n\t\t__description__: d(\"\", description),\n\t\t__name__: d(\"\", generateName(description))\n\t});\n};\n\nsetupStandardSymbols(SymbolPolyfill);\nsetupSymbolRegistry(SymbolPolyfill);\n\n// Internal tweaks for real symbol producer\ndefineProperties(HiddenSymbol.prototype, {\n\tconstructor: d(SymbolPolyfill),\n\ttoString: d(\"\", function () { return this.__name__; })\n});\n\n// Proper implementation of methods exposed on Symbol.prototype\n// They won't be accessible on produced symbol instances as they derive from HiddenSymbol.prototype\ndefineProperties(SymbolPolyfill.prototype, {\n\ttoString: d(function () { return \"Symbol (\" + validateSymbol(this).__description__ + \")\"; }),\n\tvalueOf: d(function () { return validateSymbol(this); })\n});\ndefineProperty(\n\tSymbolPolyfill.prototype, SymbolPolyfill.toPrimitive,\n\td(\"\", function () {\n\t\tvar symbol = validateSymbol(this);\n\t\tif (typeof symbol === \"symbol\") return symbol;\n\t\treturn symbol.toString();\n\t})\n);\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toStringTag, d(\"c\", \"Symbol\"));\n\n// Proper implementaton of toPrimitive and toStringTag for returned symbol instances\ndefineProperty(\n\tHiddenSymbol.prototype, SymbolPolyfill.toStringTag,\n\td(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])\n);\n\n// Note: It's important to define `toPrimitive` as last one, as some implementations\n// implement `toPrimitive` natively without implementing `toStringTag` (or other specified symbols)\n// And that may invoke error in definition flow:\n// See: https://github.com/medikoo/es6-symbol/issues/13#issuecomment-164146149\ndefineProperty(\n\tHiddenSymbol.prototype, SymbolPolyfill.toPrimitive,\n\td(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive])\n);\n","\"use strict\";\n\nvar isSymbol = require(\"./is-symbol\");\n\nmodule.exports = function (value) {\n\tif (!isSymbol(value)) throw new TypeError(value + \" is not a symbol\");\n\treturn value;\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of Object.prototype being sealed (via preventExtensions, seal or freeze)\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ is resolved with global context, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? globalThis : require(\"./implementation\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tif (typeof globalThis !== \"object\") return false;\n\tif (!globalThis) return false;\n\treturn globalThis.Array === Array;\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport 'es6-symbol';\n\n/**\n * Internal dependencies\n */\nimport { updateFirstVisit } from './utils/segmentation/segmentation-settings';\n\nvoid ( function (): void {\n\tupdateFirstVisit();\n} )();\n"],"names":["setCookie","name","value","options","opts","Object","assign","path","expires","cookie","encodeURIComponent","expiration","Date","getTime","toUTCString","document","getCookie","cookies","split","map","trim","reduce","memo","_a","_b","decodeURIComponent","removeCookie","addCookieListener","fn","id","getNewId","listeners","resetTimeout","removeCookieListener","trackState","timeoutId","undefined","counter","tick","values","forEach","length","setTimeout","clearInterval","Math","random","slice","keys","includes","updateFirstVisit","settings","getSegmentationSettings","setSegmentationSettings","firstVisit","Number","parseInt","now","toString","DEFAULT_SEGMENTATION_SETTINGS","activeSegments","geo","location","ipAddress","lastUpdate","JSON","parse","_","stringify"],"ignoreList":[],"sourceRoot":""}