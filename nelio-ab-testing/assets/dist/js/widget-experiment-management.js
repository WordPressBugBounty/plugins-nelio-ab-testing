(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";var t={};e.r(t),e.d(t,{initAlternativeEdition:()=>C,initControlEdition:()=>v});var n={};e.r(n),e.d(n,{initAlternativeEdition:()=>k,initControlEdition:()=>T});const i=window.ReactJSXRuntime,o=window.wp.element;function a(e,t){t&&(o.createRoot?(0,o.createRoot)(t).render(e):(0,o.render)(e,t))}const r=window.wp.data;function s(e,t){return(0,r.subscribe)(e,t)}const l=window.wp.blockEditor,c=window.nab.utils,d=window.lodash;function u(e){const t=document.getElementById("nab-widget-global-style");if(!t)return;const n=e.reduce((e,t)=>`${e}\n#block-${t} { display: none; }`,"");t.textContent=n}function g(e){const{id:t}=e.attributes;return"string"==typeof t&&t.startsWith("nab_alt_sidebar")}const b=window.wp.apiFetch;var m=e.n(b);const p=window.wp.date,w=window.wp.url,x=e=>{const{url:t,path:n}=e,i=(0,p.format)("YmjHi").substring(0,11)+"0";return m()(Object.assign(Object.assign(Object.assign(Object.assign({},e),t&&{url:f(e)?(0,w.addQueryArgs)(t,{nabts:i}):t}),n&&{path:(0,w.addQueryArgs)(n,{nabts:i})}),{parse:!0}))},f=e=>{var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")},_=window.wp.components,y=(Object.assign(e=>(0,i.jsx)(_.BaseControl,Object.assign({__nextHasNoMarginBottom:!0},e)),_.BaseControl),Object.assign(e=>(0,i.jsx)(_.CheckboxControl,Object.assign({__nextHasNoMarginBottom:!0},e)),_.CheckboxControl),Object.assign(e=>(0,i.jsx)(_.FormTokenField,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),_.FormTokenField),Object.assign(e=>(0,i.jsx)(_.RangeControl,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),_.RangeControl),Object.assign(e=>(0,i.jsx)(_.TextControl,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),_.TextControl),Object.assign(e=>(0,i.jsx)(_.TextareaControl,Object.assign({__nextHasNoMarginBottom:!0},e)),_.TextareaControl),Object.assign(e=>(0,i.jsx)(_.ToggleControl,Object.assign({__nextHasNoMarginBottom:!0},e)),_.ToggleControl),Object.assign(e=>(0,i.jsx)(_.__experimentalToggleGroupControl,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),_.__experimentalToggleGroupControl),window.wp.i18n),j=window.nab.components,h=({experiment:e,alternative:t})=>{const[n,a]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),l=n?(0,y._x)("Duplicating…","text (widgets)","nelio-ab-testing"):(0,y._x)("Duplicate","command","nelio-ab-testing");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Button,{variant:"secondary",onClick:()=>s(!0),children:(0,y._x)("Duplicate Control Widgets","command","nelio-ab-testing")}),(0,i.jsx)(j.ConfirmationDialog,{title:(0,y._x)("Duplicate Control Widgets?","title","nelio-ab-testing"),text:(0,y._x)("This will overwrite any widgets you may have in this variant with those included in your theme. Are you sure you want to continue?","user","nelio-ab-testing"),confirmLabel:l,isConfirmEnabled:!n,isCancelEnabled:!n,isDismissible:!n,isOpen:r,onCancel:()=>s(!1),onConfirm:()=>{n||(a(!0),x({path:(0,w.addQueryArgs)("/nab/v1/widget/duplicate-control",{experiment:e,alternative:t}),method:"PUT"}).finally(()=>window.location.reload()))}})]})};function v(){!function(){let e=[];const t=(0,d.debounce)(()=>{const t=(0,r.select)(l.store).getBlocks().filter(({name:e})=>"core/widget-area"===e),n=t.map(({clientId:e})=>e);(0,c.areEqual)(e,n)||(e=n,u(t.filter(g).map(({clientId:e})=>e)))},100);s(t,l.store),t()}()}function C(e){!function(e){e=[...e,"wp_inactive_widgets"];let t=[];const n=(0,d.debounce)(()=>{const n=(0,r.select)(l.store).getBlocks().filter(({name:e})=>"core/widget-area"===e),i=n.map(({clientId:e})=>e);(0,c.areEqual)(t,i)||(t=i,u(n.filter(({attributes:{id:t}})=>"string"==typeof t&&!e.includes(t)).map(({clientId:e})=>e)))},100);s(n,l.store),n()}(e.sidebars),function(e){let t=0;const n=()=>{var o;const r=document.querySelector(".edit-widgets-header__actions");!(null===(o=null==r?void 0:r.children)||void 0===o?void 0:o.length)&&t<40?setTimeout(n,250*++t):r&&(t=>{const n=t.children[0];if(!n)return;const o=document.createElement("div");t.insertBefore(o,n),a((0,i.jsx)(h,{experiment:e.experiment,alternative:e.alternative}),o)})(r)};n()}(e)}const O=window.nab.data;function E(){return Array.from(document.querySelectorAll("div[id^=nab_alt_sidebar_]"))}function S(){E().forEach(e=>function(e){const t=function(e){const t=e.replace(/^nab_alt_sidebar_[0-9]+_([^-]+-){4}[^-]+_/,"");return t===e?"":t}(e.getAttribute("id")||"");if(!t)return;const n=document.getElementById(t);n&&e.parentElement&&n.parentElement&&(0,c.appendSibling)(e.parentElement,n.parentElement)}(e))}const B=({experiment:e,alternative:t})=>{const[n,o]=A(),[a,r]=D(e,t);return(0,i.jsxs)("span",{children:[(0,i.jsx)(_.Button,{className:"page-title-action",onClick:()=>o(!0),style:{height:"auto"},children:(0,y._x)("Duplicate Control Widgets","command","nelio-ab-testing")}),(0,i.jsx)(j.ConfirmationDialog,{title:(0,y._x)("Duplicate Control Widgets?","title","nelio-ab-testing"),text:(0,y._x)("This will overwrite any widgets you may have in this variant with those included in your theme. Are you sure you want to continue?","user","nelio-ab-testing"),confirmLabel:a?(0,y._x)("Duplicating…","text (widgets)","nelio-ab-testing"):(0,y._x)("Duplicate","command","nelio-ab-testing"),isConfirmEnabled:!a,isCancelEnabled:!a,isOpen:n,onCancel:()=>o(!1),onConfirm:r})]})},A=()=>(0,O.usePageAttribute)("widgets/isConfirmationDialogForWidgetDuplicationVisible",!1),D=(e,t)=>{const[n,i]=(0,O.usePageAttribute)("widgets/isDuplicatingWidgets",!1);return[n,()=>{n||(i(!0),x({path:(0,w.addQueryArgs)("/nab/v1/widget/duplicate-control",{experiment:e,alternative:t}),method:"PUT"}).finally(()=>{window.location.reload()}))}]};function T(){S(),E().forEach(e=>{e.parentElement&&(e.parentElement.style.display="none")})}function k(e){S(),Array.from(document.querySelectorAll(".sidebars-column-1 > .widgets-holder-wrap, .sidebars-column-2 > .widgets-holder-wrap")).forEach(e=>e.style.display="none"),(0,d.filter)(e.sidebars.map(e=>document.getElementById(e)),e=>!!e).forEach(e=>{e.parentElement&&(e.parentElement.style.display="block")}),function(){const e=document.querySelector("#wpbody-content .wrap .wp-heading-inline");e&&(e.textContent=(0,y._x)("Widget Variant","text","nelio-ab-testing"))}(),Array.from(document.querySelectorAll(".page-title-action")).forEach(e=>e.remove()),function(e){const t=document.querySelector("#wpbody-content .wrap .wp-heading-inline"),n=document.createElement("div");a((0,i.jsx)(B,{experiment:e.experiment,alternative:e.alternative}),n);const o=n.children[0],r=document.createElement("a");r.className="page-title-action",r.textContent=(0,y._x)("Back to Test","command","nelio-ab-testing"),r.setAttribute("href",e.links.experimentUrl),t&&((0,c.appendSibling)(r,t),o&&(0,c.appendSibling)(o,t))}(e)}var M;window.nab=Object.assign(Object.assign({},(M=window)&&"object"==typeof M&&"nab"in M?window.nab:{}),{widgets:{blocks:t,classic:n}})})();var n=nab="undefined"==typeof nab?{}:nab;for(var i in t)n[i]=t[i];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();