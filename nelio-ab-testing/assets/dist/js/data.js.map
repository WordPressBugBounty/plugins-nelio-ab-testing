{"version":3,"file":"js/data.js","mappings":";;;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY,GAAG,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,MAAM;AACpD;AACA,IAAI;AACJ,eAAe;AACf,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;;;;;;;;;;;;;;;ACtDZ;AACA,iEAAe,EAAE,YAAY,EAAC;;;;;;;;;;;;;;;;ACD9B,iEAAe,cAAc,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAAE,UAAU,GAAG,8EAA8E,EAAC;;;;;;;;;;;;;;;;ACA1K;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACVqC;AACrC;AACA,gBAAgB,SAAS;AACzB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,wDAAQ;AACjB;AACA;AACA;AACA;AACA,iEAAe,SAAS,EAAC;;;;;;;;;;;;;;;;;;;AClCQ;AACN;AACsB;AACjD;AACA,QAAQ,kDAAM;AACd,eAAe,kDAAM;AACrB;AACA;AACA,sDAAsD,mDAAG;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,GAAG,aAAa;AAC3E;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,WAAW,8DAAe;AAC1B;AACA,iEAAe,EAAE,EAAC;;;;;;;;;;;;;;;;;AC1Ba;AAC/B;AACA,uCAAuC,iDAAK;AAC5C;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;;;;;;ACJxB;;;AAG8D;AAO9D;;;AAG4C;AAGtC,SAAU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","sources":["webpack://nab/./node_modules/ts-brand/lib/index.js","webpack://nab/./node_modules/uuid/dist/esm-browser/native.js","webpack://nab/./node_modules/uuid/dist/esm-browser/regex.js","webpack://nab/./node_modules/uuid/dist/esm-browser/rng.js","webpack://nab/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://nab/./node_modules/uuid/dist/esm-browser/v4.js","webpack://nab/./node_modules/uuid/dist/esm-browser/validate.js","webpack://nab/./packages/data/hooks.ts","webpack://nab/./packages/data/index.ts","webpack://nab/./packages/data/store/actions/entities.ts","webpack://nab/./packages/data/store/actions/experiment.ts","webpack://nab/./packages/data/store/actions/fastspring.ts","webpack://nab/./packages/data/store/actions/index.ts","webpack://nab/./packages/data/store/actions/media.ts","webpack://nab/./packages/data/store/actions/page.ts","webpack://nab/./packages/data/store/actions/results.ts","webpack://nab/./packages/data/store/actions/settings.ts","webpack://nab/./packages/data/store/actions/site-quota.ts","webpack://nab/./packages/data/store/config.ts","webpack://nab/./packages/data/store/index.ts","webpack://nab/./packages/data/store/reducer/entities.ts","webpack://nab/./packages/data/store/reducer/experiments.ts","webpack://nab/./packages/data/store/reducer/fastspring.ts","webpack://nab/./packages/data/store/reducer/index.ts","webpack://nab/./packages/data/store/reducer/media.ts","webpack://nab/./packages/data/store/reducer/page.ts","webpack://nab/./packages/data/store/reducer/results.ts","webpack://nab/./packages/data/store/reducer/settings.ts","webpack://nab/./packages/data/store/reducer/site-quota.ts","webpack://nab/./packages/data/store/selectors/entities.ts","webpack://nab/./packages/data/store/selectors/experiment.ts","webpack://nab/./packages/data/store/selectors/fastspring.ts","webpack://nab/./packages/data/store/selectors/index.ts","webpack://nab/./packages/data/store/selectors/media.ts","webpack://nab/./packages/data/store/selectors/page.ts","webpack://nab/./packages/data/store/selectors/results.ts","webpack://nab/./packages/data/store/selectors/settings.ts","webpack://nab/./packages/data/store/selectors/site-quota.ts","webpack://nab/./packages/data/store/side-effects/actions/ai/test-generation.ts","webpack://nab/./packages/data/store/side-effects/actions/experiment.ts","webpack://nab/./packages/data/store/side-effects/actions/fastspring.ts","webpack://nab/./packages/data/store/side-effects/actions/index.ts","webpack://nab/./packages/data/store/side-effects/resolvers/entities.ts","webpack://nab/./packages/data/store/side-effects/resolvers/experiment.ts","webpack://nab/./packages/data/store/side-effects/resolvers/fastspring.ts","webpack://nab/./packages/data/store/side-effects/resolvers/index.ts","webpack://nab/./packages/data/store/side-effects/resolvers/media.ts","webpack://nab/./packages/data/store/side-effects/resolvers/results.ts","webpack://nab/./packages/data/store/side-effects/resolvers/settings.ts","webpack://nab/./packages/data/store/side-effects/resolvers/site-quota.ts","webpack://nab/./packages/data/store/utils.ts","webpack://nab/./packages/experiment-library/custom-post-type/get-post-type-exceptions.ts","webpack://nab/./packages/safe-wordpress/api-fetch.ts","webpack://nab/./packages/safe-wordpress/data.ts","webpack://nab/./packages/safe-wordpress/html-entities.ts","webpack://nab/./packages/safe-wordpress/i18n.ts","webpack://nab/./packages/safe-wordpress/url.ts","webpack://nab/external window [\"nab\",\"date\"]","webpack://nab/external window [\"nab\",\"utils\"]","webpack://nab/external window [\"wp\",\"apiFetch\"]","webpack://nab/external window [\"wp\",\"data\"]","webpack://nab/external window [\"wp\",\"date\"]","webpack://nab/external window [\"wp\",\"htmlEntities\"]","webpack://nab/external window [\"wp\",\"i18n\"]","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/external window \"lodash\"","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.make = exports.identity = void 0;\n/**\n * A generic function that, when given some branded type, can take a value with\n * the base type of the branded type, and cast that value to the branded type.\n * It fulfills the contract of a `Brander`.\n *\n * At runtime, this function simply returns the value as-is.\n *\n * @param underlying The value with a base type, to be casted\n * @return The same underlying value, but casted\n * @example\n * ```\n * type UserId = Brand<number, 'user'>;\n * const UserId: Brander<UserId> = identity;\n * ```\n */\nfunction identity(underlying) {\n    return underlying;\n}\nexports.identity = identity;\n/**\n * Produces a `Brander<B>`, given a brand type `B`. By default this returns\n * `identity` and relies on type inference to give the return type the correct\n * type. Optionally, `validator` can be used to assert on the value.\n *\n * @example\n * ```\n * type UserId = Brand<number, 'user'>;\n * const UserId = make<UserId>();\n * const myUserId = UserId(42);\n * ```\n * @example\n * ```\n * type UserId = Brand<number, 'user'>;\n * const UserId = make<UserId>((value) => {\n *   if (value <= 0) {\n *     throw new Error(`Non-positive value: ${value}`);\n *   }\n * });\n * UserId(42); // Ok\n * UserId(-1); // Error: Non-positive value: -1\n * ```\n */\nfunction make(validator) {\n    if (!validator) {\n        return identity;\n    }\n    return function (underlying) {\n        validator(underlying);\n        return underlying;\n    };\n}\nexports.make = make;\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from './store';\nimport type { State } from './store/types';\n\nexport function useExperimentAttribute< K extends keyof Experiment >(\n\tattr: K,\n\tdefaultValue: Experiment[ K ]\n): Experiment[ K ] {\n\treturn useSelect( ( select ) => {\n\t\tconst { getPageAttribute, getExperimentAttribute } = select( NAB_DATA );\n\t\tconst exp = getPageAttribute( 'editor/activeExperiment' );\n\t\treturn exp\n\t\t\t? getExperimentAttribute( exp, attr ) ?? defaultValue\n\t\t\t: defaultValue;\n\t} );\n}\n\ntype PageAttributes = Required< State[ 'page' ] >;\nexport function usePageAttribute< A extends keyof PageAttributes >(\n\tattr: A,\n\tdefaultValue: PageAttributes[ A ]\n): [ PageAttributes[ A ], ( v: PageAttributes[ A ] ) => void ] {\n\tconst value: PageAttributes[ A ] =\n\t\tuseSelect(\n\t\t\t( select ) =>\n\t\t\t\tselect( NAB_DATA ).getPageAttribute(\n\t\t\t\t\tattr\n\t\t\t\t) as PageAttributes[ A ]\n\t\t) ?? defaultValue;\n\n\tconst { setPageAttribute } = useDispatch( NAB_DATA );\n\tconst setValue = ( v: PageAttributes[ A ] ) => setPageAttribute( attr, v );\n\n\treturn [ value, setValue ];\n} // ennd usePageAttribute()\n\ntype PluginSettings = State[ 'settings' ][ 'nelio' ];\nexport function usePluginSetting< A extends keyof PluginSettings >(\n\tattr: A\n): PluginSettings[ A ] {\n\treturn useSelect( ( select ) =>\n\t\tselect( NAB_DATA ).getPluginSetting( attr )\n\t);\n} // ennd usePageAttribute()\n\nexport const useAdminUrl = (\n\tpath: string,\n\targs: Record< string, string | boolean | number >\n): string =>\n\tuseSelect( ( select ) => select( NAB_DATA ).getAdminUrl( path, args ) );\n","export * from './store';\nexport * from './hooks';\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { EntityInstance, EntityKind, EntityKindName } from '@nab/types';\n\nexport type EntityAction = ReceiveKindEntitiesQuery | ReceiveEntityRecords;\n\nexport function receiveKindEntitiesQuery(\n\tkindEntities: EntityKind | ReadonlyArray< EntityKind >\n): ReceiveKindEntitiesQuery {\n\treturn {\n\t\ttype: 'RECEIVE_TYPE_QUERY',\n\t\tkindEntities: castArray( kindEntities ),\n\t};\n}\n\nexport function receiveEntityRecords(\n\tkind: EntityKindName,\n\trecords: EntityInstance | ReadonlyArray< EntityInstance >\n): ReceiveEntityRecords {\n\treturn {\n\t\ttype: 'RECEIVE_ITEMS',\n\t\titems: castArray( records ),\n\t\tkind,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveKindEntitiesQuery = {\n\treadonly type: 'RECEIVE_TYPE_QUERY';\n\treadonly kindEntities: ReadonlyArray< EntityKind >;\n};\n\ntype ReceiveEntityRecords = {\n\treadonly type: 'RECEIVE_ITEMS';\n\treadonly kind: EntityKindName;\n\treadonly items: ReadonlyArray< EntityInstance >;\n};\n","/**\n * External dependencies\n */\nimport type { AlternativeId, Experiment, ExperimentId } from '@nab/types';\n\nexport type ExperimentAction = ChangeLastAppliedAlternative | ReceiveExperiment;\n\nexport function changeLastAppliedAlternative(\n\texperimentId: ExperimentId,\n\talternativeId: AlternativeId\n): ChangeLastAppliedAlternative {\n\treturn {\n\t\ttype: 'CHANGE_LAST_APPLIED_ALTERNATIVE',\n\t\texperimentId,\n\t\talternativeId,\n\t};\n}\n\nexport function receiveExperiment(\n\tkey: ExperimentId,\n\texperiment: Experiment\n): ReceiveExperiment {\n\treturn {\n\t\ttype: 'RECEIVE_EXPERIMENT',\n\t\tkey,\n\t\texperiment,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ChangeLastAppliedAlternative = {\n\treadonly type: 'CHANGE_LAST_APPLIED_ALTERNATIVE';\n\treadonly experimentId: ExperimentId;\n\treadonly alternativeId: AlternativeId;\n};\n\ntype ReceiveExperiment = {\n\treadonly type: 'RECEIVE_EXPERIMENT';\n\treadonly key: ExperimentId;\n\treadonly experiment: Experiment;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { FastSpringProduct } from '@nab/types';\n\nexport type FastSpringAction =\n\t| ReceiveFSCurrency\n\t| ReceiveFSProducts\n\t| ReceiveFSSubscriptionId;\n\nexport function receiveFSCurrency( currency: string ): ReceiveFSCurrency {\n\treturn {\n\t\ttype: 'RECEIVE_FS_CURRENCY',\n\t\tcurrency,\n\t};\n}\n\nexport function receiveFSProducts(\n\tproducts: FastSpringProduct | ReadonlyArray< FastSpringProduct >\n): ReceiveFSProducts {\n\treturn {\n\t\ttype: 'RECEIVE_FS_PRODUCTS',\n\t\tproducts: castArray( products ),\n\t};\n}\n\nexport function receiveFSSubscriptionId(\n\tsubscriptionId: string\n): ReceiveFSSubscriptionId {\n\treturn {\n\t\ttype: 'RECEIVE_FS_SUBSCRIPTION_ID',\n\t\tsubscriptionId,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveFSCurrency = {\n\treadonly type: 'RECEIVE_FS_CURRENCY';\n\treadonly currency: string;\n};\n\ntype ReceiveFSProducts = {\n\treadonly type: 'RECEIVE_FS_PRODUCTS';\n\treadonly products: ReadonlyArray< FastSpringProduct >;\n};\n\ntype ReceiveFSSubscriptionId = {\n\treadonly type: 'RECEIVE_FS_SUBSCRIPTION_ID';\n\treadonly subscriptionId: string;\n};\n","export * from './entities';\nexport * from './experiment';\nexport * from './fastspring';\nexport * from './media';\nexport * from './page';\nexport * from './results';\nexport * from './settings';\nexport * from './site-quota';\n","/**\n * External dependencies\n */\nimport type { MediaId, Url } from '@nab/types';\n\nexport type MediaAction = ReceiveMediaUrl;\n\nexport function receiveMediaUrl( id: MediaId, url: Url ): ReceiveMediaUrl {\n\treturn {\n\t\ttype: 'RECEIVE_MEDIA_URL',\n\t\tid,\n\t\turl,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveMediaUrl = {\n\treadonly type: 'RECEIVE_MEDIA_URL';\n\treadonly id: MediaId;\n\treadonly url: Url;\n};\n","/**\n * Internal dependencies\n */\nimport type { State } from '../types';\n\nexport type PageAction = SetPageAttributeAction | Lock | Unlock;\n\nexport function setPageAttribute< K extends keyof State[ 'page' ] >(\n\tname: K,\n\tvalue: State[ 'page' ][ K ]\n): SetPageAttributeAction< K > {\n\treturn {\n\t\ttype: 'SET_PAGE_ATTRIBUTE',\n\t\tname,\n\t\tvalue,\n\t};\n}\n\nexport function lock(): Lock {\n\treturn {\n\t\ttype: 'LOCK_UI',\n\t};\n}\n\nexport function unlock(): Unlock {\n\treturn {\n\t\ttype: 'UNLOCK_UI',\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype SetPageAttributeAction<\n\tK extends keyof State[ 'page' ] = keyof State[ 'page' ],\n> = {\n\treadonly type: 'SET_PAGE_ATTRIBUTE';\n\treadonly name: K;\n\treadonly value: State[ 'page' ][ K ];\n};\n\ntype Lock = {\n\treadonly type: 'LOCK_UI';\n};\n\ntype Unlock = {\n\treadonly type: 'UNLOCK_UI';\n};\n","/**\n * External dependencies\n */\nimport type { ExperimentId, Results } from '@nab/types';\n\nexport type ResultsAction = ReceiveExperimentResult;\n\nexport function receiveExperimentResult(\n\tkey: ExperimentId,\n\tresult: Results\n): ReceiveExperimentResult {\n\treturn {\n\t\ttype: 'RECEIVE_RESULT',\n\t\tkey,\n\t\tresult,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveExperimentResult = {\n\treadonly type: 'RECEIVE_RESULT';\n\treadonly key: ExperimentId;\n\treadonly result: Results;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tAiSettings,\n\tECommercePlugin,\n\tEntityKindName,\n\tMenu,\n\tPluginSettings,\n\tTemplate,\n\tTemplateContextGroup,\n\tTemplateContextGroupName,\n\tTheme,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport type { ECommerceSettings } from '../types';\n\nexport type SettingsAction =\n\t| SetToday\n\t| SetSiteLanguage\n\t| ReceivePlugins\n\t| ReceiveMenus\n\t| ReceiveTemplateContexts\n\t| ReceiveTemplates\n\t| ReceiveThemes\n\t| ReceivePluginSettings\n\t| ReceiveECommerceSettings\n\t| UpdateAiSettings;\n\nexport function setToday( today: string ): SetToday {\n\treturn {\n\t\ttype: 'SET_TODAY',\n\t\ttoday,\n\t};\n}\n\nexport function setSiteLanguage( language: string ): SetSiteLanguage {\n\treturn {\n\t\ttype: 'SET_SITE_LANGUAGE',\n\t\tlanguage,\n\t};\n}\n\nexport function receivePlugins(\n\tplugins: string | ReadonlyArray< string >\n): ReceivePlugins {\n\treturn {\n\t\ttype: 'RECEIVE_PLUGINS',\n\t\tplugins: castArray( plugins ),\n\t};\n}\n\nexport function receiveMenus(\n\tmenus: Menu | ReadonlyArray< Menu >\n): ReceiveMenus {\n\treturn {\n\t\ttype: 'RECEIVE_MENUS',\n\t\tmenus: castArray( menus ),\n\t};\n}\n\nexport function receiveTemplateContexts(\n\ttemplateContexts: Record< TemplateContextGroupName, TemplateContextGroup >\n): ReceiveTemplateContexts {\n\treturn {\n\t\ttype: 'RECEIVE_TEMPLATE_CONTEXTS',\n\t\ttemplateContexts,\n\t};\n}\n\nexport function receiveTemplates(\n\ttemplates: Record< EntityKindName, ReadonlyArray< Template > >\n): ReceiveTemplates {\n\treturn {\n\t\ttype: 'RECEIVE_TEMPLATES',\n\t\ttemplates,\n\t};\n}\n\nexport function receiveThemes(\n\tthemes: Theme | ReadonlyArray< Theme >\n): ReceiveThemes {\n\treturn {\n\t\ttype: 'RECEIVE_THEMES',\n\t\tthemes: castArray( themes ),\n\t};\n}\n\nexport function receivePluginSettings(\n\tsettings: PluginSettings\n): ReceivePluginSettings {\n\treturn {\n\t\ttype: 'RECEIVE_PLUGIN_SETTINGS',\n\t\tsettings,\n\t};\n}\n\nexport function receiveECommerceSettings(\n\tecommerce: ECommercePlugin,\n\tsettings: ECommerceSettings\n): ReceiveECommerceSettings {\n\treturn {\n\t\ttype: 'RECEIVE_ECOMMERCE_SETTINGS',\n\t\tecommerce,\n\t\tsettings,\n\t};\n}\n\nexport function updateAiSettings( settings: AiSettings ): UpdateAiSettings {\n\treturn {\n\t\ttype: 'UPDATE_AI_SETTINGS',\n\t\tsettings,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype SetToday = {\n\treadonly type: 'SET_TODAY';\n\treadonly today: string;\n};\n\ntype SetSiteLanguage = {\n\treadonly type: 'SET_SITE_LANGUAGE';\n\treadonly language: string;\n};\n\ntype ReceivePlugins = {\n\treadonly type: 'RECEIVE_PLUGINS';\n\treadonly plugins: ReadonlyArray< string >;\n};\n\ntype ReceiveMenus = {\n\treadonly type: 'RECEIVE_MENUS';\n\treadonly menus: ReadonlyArray< Menu >;\n};\n\ntype ReceiveTemplateContexts = {\n\treadonly type: 'RECEIVE_TEMPLATE_CONTEXTS';\n\treadonly templateContexts: Record<\n\t\tTemplateContextGroupName,\n\t\tTemplateContextGroup\n\t>;\n};\n\ntype ReceiveTemplates = {\n\treadonly type: 'RECEIVE_TEMPLATES';\n\treadonly templates: Record< EntityKindName, ReadonlyArray< Template > >;\n};\n\ntype ReceiveThemes = {\n\treadonly type: 'RECEIVE_THEMES';\n\treadonly themes: ReadonlyArray< Theme >;\n};\n\ntype ReceivePluginSettings = {\n\treadonly type: 'RECEIVE_PLUGIN_SETTINGS';\n\treadonly settings: PluginSettings;\n};\n\ntype ReceiveECommerceSettings = {\n\treadonly type: 'RECEIVE_ECOMMERCE_SETTINGS';\n\treadonly ecommerce: ECommercePlugin;\n\treadonly settings: ECommerceSettings;\n};\n\ntype UpdateAiSettings = {\n\treadonly type: 'UPDATE_AI_SETTINGS';\n\treadonly settings: AiSettings;\n};\n","/**\n * External dependencies\n */\nimport type { Quota } from '@nab/types';\n\nexport type SiteAction = ReceiveSiteQuota;\n\nexport function receiveSiteQuota( quota: Quota ): ReceiveSiteQuota {\n\treturn {\n\t\ttype: 'RECEIVE_SITE_QUOTA',\n\t\tquota,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveSiteQuota = {\n\treadonly type: 'RECEIVE_SITE_QUOTA';\n\treadonly quota: Quota;\n};\n","/**\n * External dependencies\n */\nimport type { SiteId, Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport type { State } from './types';\n\nexport const INIT_STATE: State = {\n\tentities: {\n\t\tconfig: [],\n\t\tdata: {},\n\t},\n\n\texperiments: {},\n\n\tfastspring: {\n\t\tcurrency: 'USD',\n\t\tproducts: [],\n\t\tsubscriptionId: '',\n\t},\n\n\tmedia: {},\n\n\tpage: {\n\t\tisLocked: false,\n\t\tsidebarDimensions: {\n\t\t\ttop: 0,\n\t\t\theight: '100vh',\n\t\t\tapplyFix: true,\n\t\t},\n\t},\n\n\tresults: {},\n\n\tsettings: {\n\t\ttoday: '2013-01-01',\n\t\tlanguage: 'en_US',\n\t\tmenus: {},\n\t\tnelio: {\n\t\t\tadminUrl: '/wp-admin/' as Url,\n\t\t\tapiUrl: '' as Url,\n\t\t\tareAutoTutorialsEnabled: true,\n\t\t\tareSubscriptionControlsDisabled: false,\n\t\t\tcapabilities: [],\n\t\t\tgoalTracking: 'all-pages',\n\t\t\thomeUrl: '/' as Url,\n\t\t\tisCookieTestingEnabled: false,\n\t\t\tmaxCombinations: 24,\n\t\t\tminConfidence: 95,\n\t\t\tminSampleSize: 100,\n\t\t\trestUrl: '' as Url,\n\t\t\tsegmentEvaluation: 'site',\n\t\t\tsiteId: '' as SiteId,\n\t\t\tsubscription: false,\n\t\t\tthemeSupport: {\n\t\t\t\tmenus: false,\n\t\t\t\twidgets: false,\n\t\t\t},\n\t\t},\n\t\tplugins: [],\n\t\ttemplateContexts: {},\n\t\ttemplates: {},\n\t\tthemes: {},\n\t\tecommerce: {\n\t\t\twoocommerce: {\n\t\t\t\tcurrency: 'USD',\n\t\t\t\tcurrencyPosition: 'before',\n\t\t\t\tcurrencySymbol: '$',\n\t\t\t\tdecimalSeparator: '.',\n\t\t\t\tnumberOfDecimals: 2,\n\t\t\t\torderStatuses: [],\n\t\t\t\tthousandsSeparator: ',',\n\t\t\t},\n\t\t\tedd: {\n\t\t\t\tcurrency: 'USD',\n\t\t\t\tcurrencyPosition: 'before',\n\t\t\t\tcurrencySymbol: '$',\n\t\t\t\tdecimalSeparator: '.',\n\t\t\t\tnumberOfDecimals: 2,\n\t\t\t\torderStatuses: [],\n\t\t\t\tthousandsSeparator: ',',\n\t\t\t},\n\t\t},\n\t},\n\n\tsiteQuota: undefined,\n};\n","/**\n * WordPress dependencies\n */\nimport {\n\tcontrols,\n\tcreateReduxStore,\n\tdispatch,\n\tregister,\n\tselect,\n} from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { format } from '@nab/date';\nimport type { WithResolverDispatch, WithResolverSelect } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as realActions from './actions';\nimport * as sideEffects from './side-effects/actions';\nimport * as resolvers from './side-effects/resolvers';\nimport { syncPageAttributeWithLocalStore } from './utils';\n\nexport * from './types';\n\nconst actions = { ...realActions, ...sideEffects };\n\nexport const store = createReduxStore( 'nab/data', {\n\treducer,\n\tcontrols,\n\tactions: actions as WithResolverDispatch<\n\t\ttypeof actions,\n\t\ttypeof resolvers\n\t>,\n\tselectors: selectors as WithResolverSelect<\n\t\ttypeof selectors,\n\t\ttypeof resolvers\n\t>,\n\tresolvers,\n} );\nregister( store );\n\nselect( store ).getPluginSetting( 'siteId' );\nvoid dispatch( store ).setToday( format( 'Y-m-d', new Date() ) );\n\nsyncPageAttributeWithLocalStore( 'results/shouldShowUniqueResults', false );\n","/**\n * External dependencies\n */\nimport { keyBy } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { EntityAction as Action } from '../actions/entities';\n\ntype State = FullState[ 'entities' ];\n\nexport function entities(\n\tstate = INIT_STATE.entities,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_TYPE_QUERY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconfig: action.kindEntities,\n\t\t\t};\n\n\t\tcase 'RECEIVE_ITEMS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdata: {\n\t\t\t\t\t...state.data,\n\t\t\t\t\t[ action.kind ]: {\n\t\t\t\t\t\t...state.data[ action.kind ],\n\t\t\t\t\t\t...keyBy( action.items, 'id' ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport { createAlternative, createGoal } from '@nab/utils';\nimport type {\n\tAlternative,\n\tAlternativeId,\n\tAnyAction,\n\tExperiment,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { ExperimentAction as Action } from '../actions/experiment';\n\ntype State = FullState[ 'experiments' ];\n\nexport function experiments(\n\tstate = INIT_STATE.experiments,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_EXPERIMENT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.key ]: {\n\t\t\t\t\t...action.experiment,\n\t\t\t\t\talternatives: maybeAddDefaultAlternatives(\n\t\t\t\t\t\taction.experiment.alternatives\n\t\t\t\t\t),\n\t\t\t\t\tgoals: action.experiment.goals || [ createGoal() ],\n\t\t\t\t\tsegments: action.experiment.segments || [],\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'CHANGE_LAST_APPLIED_ALTERNATIVE':\n\t\t\tconst experiment: Maybe< Experiment > =\n\t\t\t\tstate[ action.experimentId ];\n\t\t\tif ( ! experiment ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.experimentId ]: {\n\t\t\t\t\t...experiment,\n\t\t\t\t\talternatives: experiment.alternatives.map(\n\t\t\t\t\t\tisLastApplied( action.alternativeId )\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\t\t\t) as any as Experiment[ 'alternatives' ],\n\t\t\t\t},\n\t\t\t};\n\t}\n}\n\n// =======\n// HELPERS\n// =======\n\nconst isLastApplied = ( aid: AlternativeId ) =>\n\tfunction < T extends Alternative >( a: T ): T {\n\t\treturn { ...a, isLastApplied: a.id === aid };\n\t};\n\nfunction maybeAddDefaultAlternatives< T extends Experiment[ 'alternatives' ] >(\n\talternatives: T\n): T {\n\tconst defaultOriginal = createAlternative( 'control' );\n\tconst defaultFirstAlt = createAlternative();\n\n\tif ( ! alternatives ) {\n\t\treturn [ defaultOriginal, defaultFirstAlt ] as unknown as T;\n\t}\n\n\tif ( alternatives[ 0 ].id !== 'control' ) {\n\t\treturn [ defaultOriginal, ...alternatives ] as unknown as T;\n\t}\n\n\tif ( 1 === alternatives.length ) {\n\t\treturn [ alternatives[ 0 ], defaultFirstAlt ] as unknown as T;\n\t}\n\n\treturn alternatives;\n}\n","/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { FastSpringAction as Action } from '../actions/fastspring';\n\ntype State = FullState[ 'fastspring' ];\n\nexport function fastspring(\n\tstate = INIT_STATE.fastspring,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_FS_CURRENCY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrency: action.currency,\n\t\t\t};\n\n\t\tcase 'RECEIVE_FS_PRODUCTS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tproducts: action.products,\n\t\t\t};\n\n\t\tcase 'RECEIVE_FS_SUBSCRIPTION_ID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsubscriptionId: action.subscriptionId,\n\t\t\t};\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@safe-wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { entities } from './entities';\nimport { experiments } from './experiments';\nimport { fastspring } from './fastspring';\nimport { media } from './media';\nimport { page } from './page';\nimport { results } from './results';\nimport { settings } from './settings';\nimport { siteQuota } from './site-quota';\n\nexport default combineReducers( {\n\tentities,\n\texperiments,\n\tfastspring,\n\tmedia,\n\tpage,\n\tresults,\n\tsettings,\n\tsiteQuota,\n} );\n","/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { MediaAction as Action } from '../actions/media';\n\ntype State = FullState[ 'media' ];\n\nexport function media( state = INIT_STATE.media, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_MEDIA_URL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.id ]: action.url,\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { PageAction as Action } from '../actions/page';\n\ntype State = FullState[ 'page' ];\n\nexport function page( state = INIT_STATE.page, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_PAGE_ATTRIBUTE': {\n\t\t\tconst { name, value } = action;\n\t\t\tif ( ! name ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ name ]: value,\n\t\t\t};\n\t\t}\n\n\t\tcase 'LOCK_UI':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLocked: true,\n\t\t\t};\n\n\t\tcase 'UNLOCK_UI':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLocked: false,\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { ResultsAction as Action } from '../actions/results';\n\ntype State = FullState[ 'results' ];\n\nexport function results(\n\tstate = INIT_STATE.results,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_RESULT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.key ]: action.result,\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport { keyBy, sortBy } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { SettingsAction as Action } from '../actions/settings';\n\ntype State = FullState[ 'settings' ];\n\nexport function settings(\n\tstate = INIT_STATE.settings,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_TODAY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttoday: action.today,\n\t\t\t};\n\n\t\tcase 'SET_SITE_LANGUAGE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlanguage: action.language,\n\t\t\t};\n\n\t\tcase 'RECEIVE_MENUS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmenus: {\n\t\t\t\t\t...state.menus,\n\t\t\t\t\t...keyBy( action.menus, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'RECEIVE_PLUGINS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tplugins: action.plugins || [],\n\t\t\t};\n\n\t\tcase 'RECEIVE_TEMPLATE_CONTEXTS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttemplateContexts: action.templateContexts,\n\t\t\t};\n\n\t\tcase 'RECEIVE_TEMPLATES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttemplates: action.templates,\n\t\t\t};\n\n\t\tcase 'RECEIVE_THEMES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tthemes: keyBy( action.themes, 'id' ),\n\t\t\t};\n\n\t\tcase 'RECEIVE_PLUGIN_SETTINGS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnelio: action.settings,\n\t\t\t};\n\n\t\tcase 'RECEIVE_ECOMMERCE_SETTINGS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tecommerce: {\n\t\t\t\t\t...state.ecommerce,\n\t\t\t\t\t[ action.ecommerce ]: {\n\t\t\t\t\t\t...action.settings,\n\t\t\t\t\t\torderStatuses: sortBy(\n\t\t\t\t\t\t\taction.settings.orderStatuses,\n\t\t\t\t\t\t\t'label'\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase 'UPDATE_AI_SETTINGS':\n\t\t\tif ( ! state.nelio.aiSettings ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnelio: {\n\t\t\t\t\t...state.nelio,\n\t\t\t\t\taiSettings: action.settings,\n\t\t\t\t},\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { SiteAction as Action } from '../actions/site-quota';\n\ntype State = FullState[ 'siteQuota' ];\n\nexport function siteQuota(\n\tstate = INIT_STATE.siteQuota,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( _: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_SITE_QUOTA':\n\t\t\treturn action.quota;\n\t}\n}\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\nimport type {\n\tEntityId,\n\tEntityInstance,\n\tEntityKind,\n\tEntityKindName,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport type { State } from '../types';\n\nexport function getKindEntities( state: State ): ReadonlyArray< EntityKind > {\n\treturn state.entities.config;\n}\n\nexport function getEntityRecord(\n\tstate: State,\n\tkind: EntityKindName,\n\tkey: EntityId\n): Maybe< EntityInstance > {\n\treturn get( state.entities.data, [ kind, key ] );\n}\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\nimport type {\n\tGoal,\n\tGoalId,\n\tECommercePlugin,\n\tExperiment,\n\tExperimentId,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getExperiment(\n\tstate: State,\n\tkey?: ExperimentId\n): Maybe< Experiment > {\n\treturn key ? get( state.experiments, key ) : undefined;\n}\n\nexport type GetExperimentAttributeFunction = < K extends keyof Experiment >(\n\tkey: ExperimentId,\n\tattribute: K\n) => Maybe< Experiment[ K ] >;\n\ntype GetExperimentAttribute = typeof _getExperimentAttribute & {\n\tCurriedSignature: < K extends keyof Experiment >(\n\t\tkey: ExperimentId,\n\t\tattribute: K\n\t) => Maybe< Experiment[ K ] >;\n};\nexport const getExperimentAttribute =\n\t_getExperimentAttribute as GetExperimentAttribute;\nfunction _getExperimentAttribute< K extends keyof Experiment >(\n\tstate: State,\n\tkey: ExperimentId,\n\tattribute: K\n): Maybe< Experiment[ K ] > {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn;\n\t}\n\treturn experiment[ attribute ];\n}\n\nexport function getDefaultGoal(\n\tstate: State,\n\tkey: ExperimentId\n): Maybe< Goal > {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn;\n\t}\n\treturn experiment.goals[ 0 ];\n}\n\nexport function getECommercePlugin(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< ECommercePlugin > {\n\tif ( isWooCommerceGoal( state, key, goalId ) ) {\n\t\treturn 'woocommerce';\n\t}\n\n\tif ( isEddGoal( state, key, goalId ) ) {\n\t\treturn 'edd';\n\t}\n\n\treturn undefined;\n} //end getECommercePlugin();\n\n// ========\n// INTERNAL\n// ========\n\nfunction isWooCommerceGoal(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): boolean {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn false;\n\t}\n\n\tgoalId = goalId ?? getDefaultGoal( state, key )?.id;\n\tconst goal = experiment.goals.find( ( g ) => g.id === goalId );\n\tif ( ! goal ) {\n\t\treturn false;\n\t}\n\n\tconst actions = goal?.conversionActions ?? [];\n\treturn (\n\t\t0 < actions.length &&\n\t\tactions.every( ( { type } ) => type === 'nab/wc-order' )\n\t);\n}\n\nfunction isEddGoal(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): boolean {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn false;\n\t}\n\n\tgoalId = goalId ?? getDefaultGoal( state, key )?.id;\n\tconst goal = experiment.goals.find( ( g ) => g.id === goalId );\n\tif ( ! goal ) {\n\t\treturn false;\n\t}\n\n\tconst actions = goal?.conversionActions ?? [];\n\treturn (\n\t\t0 < actions.length &&\n\t\tactions.every( ( { type } ) => type === 'nab/edd-order' )\n\t);\n}\n","/**\n * External dependencies\n */\nimport type { FastSpringProduct, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getCurrency( state: State ): string {\n\treturn state.fastspring.currency;\n}\n\nexport function getProducts(\n\tstate: State\n): ReadonlyArray< FastSpringProduct > {\n\treturn state.fastspring.products;\n}\n\nexport function getSubscriptionId( state: State ): Maybe< string > {\n\treturn state.fastspring.subscriptionId || undefined;\n}\n","export * from './entities';\nexport * from './experiment';\nexport * from './fastspring';\nexport * from './media';\nexport * from './page';\nexport * from './results';\nexport * from './settings';\nexport * from './site-quota';\n","/**\n * External dependencies\n */\nimport type { Maybe, MediaId, Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getMediaUrl( state: State, id: MediaId ): Maybe< Url > {\n\treturn state.media[ id ];\n}\n","/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\ntype GetPageAttribute = typeof _getPageAttribute & {\n\tCurriedSignature: < K extends keyof State[ 'page' ] >(\n\t\tname: K\n\t) => State[ 'page' ][ K ];\n};\nexport const getPageAttribute = _getPageAttribute as GetPageAttribute;\nfunction _getPageAttribute< K extends keyof State[ 'page' ] >(\n\tstate: State,\n\tname: K\n): State[ 'page' ][ K ] {\n\treturn state.page[ name ];\n}\n\nexport function isLocked( state: State ): boolean {\n\treturn getPageAttribute( state, 'isLocked' );\n}\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport type {\n\tAlternativeTrackingData,\n\tAlternativeId,\n\tGoalId,\n\tExperimentId,\n\tMaybe,\n\tResultStatus,\n\tResults,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { differenceInDays } from '../utils';\nimport { getDefaultGoal, getExperiment } from './experiment';\nimport { getPageAttribute } from './page';\nimport { getPluginSetting } from './settings';\nimport { State } from '../types';\n\nexport function getExperimentResults(\n\tstate: State,\n\tkey?: ExperimentId\n): Maybe< Results > {\n\treturn key ? state.results[ key ] : undefined;\n}\n\nexport function getWinnersInExperiment(\n\tstate: State,\n\tkey: ExperimentId\n): Maybe< Results[ 'winners' ] > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\tconst winnerKey = areResultsUnique ? 'winnersUnique' : 'winners';\n\treturn activeSegment === 'default'\n\t\t? results[ winnerKey ]\n\t\t: results.segments[ activeSegment ]?.[ winnerKey ];\n}\n\nexport function getAlternativeResultsInExperiment(\n\tstate: State,\n\tkey: ExperimentId\n): Maybe< ReadonlyArray< AlternativeTrackingData > > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\treturn activeSegment === 'default'\n\t\t? values( results.alternatives )\n\t\t: values( results.segments[ activeSegment ]?.alternatives );\n}\n\nexport function getPageViews( state: State, key: ExperimentId ): number {\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\treturn areResultsUnique\n\t\t? getUniquePageViews( state, key )\n\t\t: getTotalPageViews( state, key );\n}\n\nexport function getTotalPageViews( state: State, key: ExperimentId ): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results?.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\treturn resultsOfAlternatives.reduce(\n\t\t( memo, alternative ) => memo + alternative.visits,\n\t\t0\n\t);\n}\n\nexport function getUniquePageViews( state: State, key: ExperimentId ): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results?.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\treturn resultsOfAlternatives.reduce(\n\t\t( memo, alternative ) => memo + alternative.uniqueVisits,\n\t\t0\n\t);\n}\n\nexport function getAlternativePageViews(\n\tstate: State,\n\texperimentId: ExperimentId,\n\talternativeId: AlternativeId\n): number {\n\tconst results = getExperimentResults( state, experimentId );\n\tif ( ! results?.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\tconst alternative =\n\t\tactiveSegment === 'default'\n\t\t\t? results.alternatives[ alternativeId ]\n\t\t\t: results.segments[ activeSegment ]?.alternatives[ alternativeId ];\n\tif ( ! alternative ) {\n\t\treturn 0;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, experimentId );\n\treturn areResultsUnique ? alternative.uniqueVisits : alternative.visits;\n}\n\nexport function getConversions(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results || ! results.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn 0;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\treturn resultsOfAlternatives.reduce(\n\t\t( memo, alternative ) =>\n\t\t\tmemo +\n\t\t\t( ( areResultsUnique\n\t\t\t\t? alternative.uniqueConversions[ gid ]\n\t\t\t\t: alternative.conversions[ gid ] ) || 0 ),\n\t\t0\n\t);\n}\n\nexport function getTotalRevenue(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results || ! results.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn 0;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\treturn resultsOfAlternatives.reduce(\n\t\t( memo, alternative ) =>\n\t\t\tmemo +\n\t\t\t( ( areResultsUnique\n\t\t\t\t? alternative.uniqueValues[ gid ]\n\t\t\t\t: alternative.values[ gid ] ) ?? 0 ),\n\t\t0\n\t);\n}\n\nexport function getDaysRunning( state: State, key: ExperimentId ): number {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn 0;\n\t}\n\n\tconst startDate = experiment.startDate;\n\tlet endDate = '';\n\tif ( 'finished' === experiment.status ) {\n\t\tendDate = experiment.endDate || '';\n\t}\n\n\treturn differenceInDays( startDate, endDate );\n}\n\nexport function getExperimentResultsStatus(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< ResultStatus > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn;\n\t}\n\n\tconst requiredConfidence = getPluginSetting( state, 'minConfidence' );\n\tif ( ! requiredConfidence ) {\n\t\treturn;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\tconst winnerKey = areResultsUnique ? 'winnersUnique' : 'winners';\n\n\tconst winner =\n\t\tactiveSegment === 'default'\n\t\t\t? results[ winnerKey ]?.[ gid ]\n\t\t\t: results.segments[ activeSegment ]?.[ winnerKey ]?.[ gid ];\n\tif ( ! winner ) {\n\t\treturn 'testing';\n\t} else if ( winner.confidence >= requiredConfidence ) {\n\t\treturn 'winner';\n\t}\n\treturn 'possible-winner';\n}\n\nexport function getWinnerAlternative(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< number > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn;\n\t}\n\n\tconst requiredConfidence = getPluginSetting( state, 'minConfidence' );\n\tif ( ! requiredConfidence ) {\n\t\treturn;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\tconst winnerKey = areResultsUnique ? 'winnersUnique' : 'winners';\n\n\tconst winner =\n\t\tactiveSegment === 'default'\n\t\t\t? results[ winnerKey ]?.[ gid ]\n\t\t\t: results.segments[ activeSegment ]?.[ winnerKey ]?.[ gid ];\n\tif ( ! winner || winner.confidence < requiredConfidence ) {\n\t\treturn;\n\t}\n\n\treturn winner.alternative;\n}\n\nexport function getConversionRatesOfAlternativesInGoal(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< ReadonlyArray< number > > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id;\n\tif ( ! gid ) {\n\t\treturn;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\treturn resultsOfAlternatives.map( ( alternative ) =>\n\t\tareResultsUnique\n\t\t\t? alternative.uniqueConversionRates[ gid ] || 0\n\t\t\t: alternative.conversionRates[ gid ] || 0\n\t);\n}\n\nexport function getRevenuesOfAlternativesInGoal(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< ReadonlyArray< number > > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\treturn resultsOfAlternatives.map( ( alternative ) =>\n\t\tareResultsUnique\n\t\t\t? alternative.uniqueValues[ gid ] || 0\n\t\t\t: alternative.values[ gid ] || 0\n\t);\n}\n\nexport function getResultsOfAlternatives(\n\tstate: State,\n\tkey: ExperimentId\n): Maybe< Results[ 'alternatives' ] > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\treturn activeSegment === 'default'\n\t\t? results.alternatives\n\t\t: results.segments[ activeSegment ]?.alternatives;\n}\n\nexport function areUniqueResultsVisible(\n\tstate: State,\n\tkey: ExperimentId\n): boolean {\n\tconst shouldShowUniqueResults =\n\t\tgetPageAttribute( state, 'results/shouldShowUniqueResults' ) ?? false;\n\treturn shouldShowUniqueResults && areUniqueResultsAvailable( state, key );\n}\n\nexport function areUniqueResultsAvailable(\n\tstate: State,\n\tkey: Maybe< ExperimentId >\n): boolean {\n\tconst results = getExperimentResults( state, key );\n\treturn values( results?.alternatives ).some( ( a ) => a.uniqueVisits > 0 );\n}\n","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@safe-wordpress/url';\n\n/**\n * External dependencies\n */\nimport { keys, values } from 'lodash';\nimport { make } from 'ts-brand';\nimport type {\n\tECommercePlugin,\n\tMaybe,\n\tMenu,\n\tMenuId,\n\tNabCapability,\n\tSubscriptionPlan,\n\tTheme,\n\tUrl,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { ECommerceSettings, State } from '../types';\nimport { isDefined } from '@nab/utils';\n\nexport function getToday( state: State ): string {\n\treturn state.settings.today;\n}\n\nexport function getSiteLanguage( state: State ): string {\n\treturn state.settings.language;\n}\n\nexport function getActivePlugins( state: State ): ReadonlyArray< string > {\n\treturn state.settings.plugins;\n}\n\nexport function hasMenus( state: State ): boolean {\n\treturn !! keys( state.settings.menus ).length;\n}\n\nexport function getMenu( state: State, id: MenuId ): Maybe< Menu > {\n\treturn state.settings.menus[ id ];\n}\n\nexport function getTemplateContexts(\n\tstate: State\n): State[ 'settings' ][ 'templateContexts' ] {\n\treturn state.settings.templateContexts;\n}\n\nexport function getTemplates(\n\tstate: State\n): State[ 'settings' ][ 'templates' ] {\n\treturn state.settings.templates;\n}\n\nexport function getThemes( state: State ): ReadonlyArray< Theme > {\n\treturn values( state.settings.themes ).filter( isDefined );\n}\n\nexport function getAdminUrl(\n\tstate: State,\n\tpath: string,\n\targs?: Record< string, string | boolean | number >\n): string {\n\tconst adminUrl = getPluginSetting( state, 'adminUrl' );\n\treturn addQueryArgs( `${ adminUrl }${ path }`, args );\n}\n\nexport function hasCapability(\n\tstate: State,\n\tcapability: NabCapability\n): boolean {\n\treturn state.settings.nelio.capabilities.includes( capability );\n}\n\ntype GetPluginSetting = typeof _getPluginSetting & {\n\tCurriedSignature: < K extends keyof State[ 'settings' ][ 'nelio' ] >(\n\t\tname: K\n\t) => State[ 'settings' ][ 'nelio' ][ K ];\n};\nexport const getPluginSetting = _getPluginSetting as GetPluginSetting;\nfunction _getPluginSetting< K extends keyof State[ 'settings' ][ 'nelio' ] >(\n\tstate: State,\n\tname: K\n): State[ 'settings' ][ 'nelio' ][ K ] {\n\treturn state.settings.nelio[ name ];\n}\n\nexport function getRestUrl( state: State, path = '/' ): Url {\n\tconst url = state.settings.nelio.restUrl;\n\treturn make< Url >()(\n\t\turl.includes( 'rest_route=' )\n\t\t\t? url.replace( 'rest_route=', `rest_route=${ path }` )\n\t\t\t: `${ url }${ path }`\n\t);\n}\n\ntype GetECommerceSetting = typeof _getECommerceSetting & {\n\tCurriedSignature: < K extends keyof ECommerceSettings >(\n\t\tplugin: ECommercePlugin,\n\t\tname: K\n\t) => ECommerceSettings[ K ];\n};\nexport const getECommerceSetting = _getECommerceSetting as GetECommerceSetting;\nfunction _getECommerceSetting< K extends keyof ECommerceSettings >(\n\tstate: State,\n\tplugin: ECommercePlugin,\n\tname: K\n): ECommerceSettings[ K ] {\n\treturn state.settings.ecommerce[ plugin ][ name ];\n}\n\nexport function canLimitSiteQuota( state: State ): boolean {\n\treturn isSubscribedTo( state, 'professional', 'or-above' );\n}\n\nexport function isSubscribedTo(\n\tstate: State,\n\tplan: SubscriptionPlan,\n\tmode: 'exactly' | 'or-above' = 'or-above'\n): boolean {\n\tconst actualPlan = getPluginSetting( state, 'subscription' );\n\tif ( ! actualPlan ) {\n\t\treturn false;\n\t}\n\n\tconst plans = [ 'basic', 'professional', 'enterprise' ];\n\tconst expectedIndex = plans.indexOf( plan );\n\tconst actualIndex = plans.indexOf( actualPlan );\n\n\tif ( -1 === expectedIndex || -1 === actualIndex ) {\n\t\treturn false;\n\t}\n\n\tif ( 'or-above' !== mode ) {\n\t\treturn expectedIndex === actualIndex;\n\t}\n\n\treturn actualIndex >= expectedIndex;\n}\n","/**\n * External dependencies\n */\nimport type { Maybe, Quota } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getQuota( state: State ): Maybe< Quota > {\n\treturn state.siteQuota;\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, select, resolveSelect } from '@safe-wordpress/data';\nimport { decodeEntities } from '@safe-wordpress/html-entities';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { groupBy, map, mapValues, omit, toPairs, uniq } from 'lodash';\nimport { Uuid, v4 as uuid } from 'uuid';\nimport {\n\tcreateAlternative,\n\tgetContentMetrics,\n\tgetContentSummary,\n\tgetLetter,\n\tisDefined,\n} from '@nab/utils';\nimport type {\n\tAiBestSeller,\n\tAiCloudTestCandidate,\n\tAiCloudTestHypothesis,\n\tAiExperiment,\n\tAiHeatmap,\n\tAiOrderSummary,\n\tAiPostSummary,\n\tAiProductSummary,\n\tAiSettings,\n\tAiSiteAnalysis,\n\tAiTestCandidate,\n\tAiTestHypothesis,\n\tAiTestHypothesisState,\n\tAlternative,\n\tDict,\n\tExperiment,\n\tExperimentType,\n\tGoal,\n\tHeatmap,\n\tMaybe,\n\tScopeRule,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../../store';\nimport type { State } from '../../../../store/types';\n\nimport { getPostTypeExceptions } from '../../../../../experiment-library/custom-post-type/get-post-type-exceptions';\n\nconst MAX_PAGES = 100;\nconst MAX_ITEMS_PER_TYPE = 50;\nconst MIN_RUN_TIME_FOR_ASYNC_CALLBACK = 1500;\n\ntype MostViewedItem =\n\t| {\n\t\t\treadonly type: 'post';\n\t\t\treadonly postType: string;\n\t\t\treadonly postId: number;\n\t\t\treadonly monthlyViews: number;\n\t  }\n\t| {\n\t\t\treadonly type: 'url';\n\t\t\treadonly url: string;\n\t\t\treadonly monthlyViews: number;\n\t  };\n\ntype AnalysisContext = {\n\treadonly analytics: ReadonlyArray< MostViewedItem >;\n\treadonly abTesting: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ];\n};\n\nexport async function searchTestCandidates(\n\tvalidExperimentTypes: ReadonlyArray< ExperimentType >,\n\tnewAiSettings?: AiSettings\n): Promise< void > {\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'intro' !== state.type ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tif ( newAiSettings ) {\n\t\t\tconst previousAiSettings =\n\t\t\t\tselect( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\t\t\tif ( previousAiSettings?.type === 'ready' ) {\n\t\t\t\tthrow new Error( 'cant-override-settings' );\n\t\t\t}\n\t\t\tawait breathe( () => saveAiSettings( newAiSettings, state.id ) );\n\t\t}\n\t} catch ( error ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( error ),\n\t\t} );\n\t\treturn;\n\t}\n\n\tconst currentAiSettings =\n\t\tselect( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( currentAiSettings?.type !== 'ready' ) {\n\t\tthrow new Error( 'invalid-ai-settings' );\n\t}\n\n\tconst abTesting = await breathe( () => getAbTestingData( state.id ) );\n\tif ( 'error' === abTesting.type ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( abTesting.error ),\n\t\t} );\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst result = await getCachedCandidates(\n\t\t\tabTesting.aiAnalysis,\n\t\t\tabTesting.base.experiments,\n\t\t\tstate.id\n\t\t);\n\t\tif ( result ) {\n\t\t\tconst candidates = await expandFirstCandidate( {\n\t\t\t\tcandidates: result.candidates,\n\t\t\t\texperiments: abTesting.base.experiments,\n\t\t\t\tsiteAnalysis: result.siteAnalysis,\n\t\t\t\tstateId: state.id,\n\t\t\t\tvalidExperimentTypes,\n\t\t\t} );\n\t\t\tawait setState( {\n\t\t\t\tid: state.id,\n\t\t\t\ttype: 'hypothesis-selection',\n\t\t\t\tsiteAnalysis: result.siteAnalysis,\n\t\t\t\tcandidates,\n\t\t\t\ttesting: abTesting.base,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\t} catch ( _ ) {}\n\n\ttry {\n\t\tconst siteAnalysis = await analyzeSite(\n\t\t\tabTesting.aiAnalysis,\n\t\t\tstate.id\n\t\t);\n\t\tconst baseCandidates = await processSiteAnalysis(\n\t\t\tsiteAnalysis,\n\t\t\tabTesting.base.experiments,\n\t\t\tstate.id\n\t\t);\n\t\tconst candidates = await expandFirstCandidate( {\n\t\t\tcandidates: baseCandidates,\n\t\t\texperiments: abTesting.base.experiments,\n\t\t\tsiteAnalysis,\n\t\t\tstateId: state.id,\n\t\t\tvalidExperimentTypes,\n\t\t} );\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'hypothesis-selection',\n\t\t\tsiteAnalysis,\n\t\t\tcandidates,\n\t\t\ttesting: abTesting.base,\n\t\t} );\n\t} catch ( error ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( error ),\n\t\t} );\n\t}\n}\n\nexport async function generateTestHypotheses(\n\tcandidate: AiTestCandidate,\n\tvalidExperimentTypes: ReadonlyArray< ExperimentType >\n): Promise< void > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn;\n\t}\n\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'hypothesis-selection' !== state.type ) {\n\t\treturn;\n\t}\n\n\tif ( 'ready' === candidate.hypothesisState.status ) {\n\t\tawait updateCandidate( {\n\t\t\t...candidate,\n\t\t\thypothesisState: {\n\t\t\t\t...candidate.hypothesisState,\n\t\t\t\tisVisible: true,\n\t\t\t},\n\t\t} );\n\t\treturn;\n\t}\n\n\tif ( 'pending' !== candidate.hypothesisState.status ) {\n\t\treturn;\n\t}\n\n\tcandidate = await updateCandidate( {\n\t\t...candidate,\n\t\thypothesisState: { status: 'generating' },\n\t} );\n\n\tawait loadTestHypotheses( {\n\t\tcandidate,\n\t\texperiments: state.testing.experiments,\n\t\tlanguage: state.siteAnalysis.metaInformation.language,\n\t\tvalidExperimentTypes,\n\t} );\n}\n\nexport async function createTestFromHypothesis(\n\thypothesis: AiTestHypothesis,\n\tvalidExperimentTypes: ReadonlyArray< ExperimentType >\n): Promise< void > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn;\n\t}\n\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'hypothesis-selection' !== state.type ) {\n\t\treturn;\n\t}\n\n\tawait setState( { ...state, type: 'creating-test' } );\n\ttry {\n\t\tconst type = validExperimentTypes.find(\n\t\t\t( t ) => t.name === hypothesis.testType\n\t\t);\n\t\tif ( ! type ) {\n\t\t\tthrow new Error( 'invalid-experiment-type' );\n\t\t}\n\n\t\tconst baseExperiment = await createExperiment( type );\n\n\t\tconst defaultGoal: Maybe< Goal > = type.supports.automaticGoalSetup\n\t\t\t? {\n\t\t\t\t\tid: uuid(),\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tname: _x( 'Default Goal', 'text', 'nelio-ab-testing' ),\n\t\t\t\t\t},\n\t\t\t\t\tconversionActions:\n\t\t\t\t\t\ttype.supports.automaticGoalSetup(\n\t\t\t\t\t\t\tbaseExperiment.alternatives[ 0 ]\n\t\t\t\t\t\t) ?? [],\n\t\t\t  }\n\t\t\t: undefined;\n\n\t\tconst scope: Maybe< ReadonlyArray< ScopeRule > > =\n\t\t\ttype.supports.scope === 'urls' ||\n\t\t\ttype.supports.scope === 'urls-or-php'\n\t\t\t\t? [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: uuid(),\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\ttype: 'exact',\n\t\t\t\t\t\t\t\tvalue: hypothesis.controlUrl,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t  ]\n\t\t\t\t: undefined;\n\n\t\tconst experiment = await saveExperiment( {\n\t\t\t...baseExperiment,\n\t\t\tscope: scope ?? baseExperiment.scope,\n\t\t\tname: hypothesis.name,\n\t\t\tdescription: hypothesis.description,\n\t\t\tai: {\n\t\t\t\tversion: 1,\n\t\t\t\tbasedOnNelioAIHypothesis: hypothesis.id,\n\t\t\t},\n\t\t\talternatives: [\n\t\t\t\t{\n\t\t\t\t\tid: 'control' as const,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tpostId: hypothesis.control.id,\n\t\t\t\t\t\tpostType: hypothesis.control.type,\n\t\t\t\t\t},\n\t\t\t\t\tlinks: createAlternative().links,\n\t\t\t\t},\n\t\t\t\t...hypothesis.variants.map( ( v ): Alternative => {\n\t\t\t\t\tconst alt = createAlternative();\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...alt,\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...alt.attributes,\n\t\t\t\t\t\t\tname: v.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai: {\n\t\t\t\t\t\t\tisReady: false,\n\t\t\t\t\t\t\tname: v.name,\n\t\t\t\t\t\t\tchanges: v.changes,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t],\n\t\t\tgoals: [\n\t\t\t\tdefaultGoal,\n\t\t\t\t...hypothesis.goals.map(\n\t\t\t\t\t( g ): Goal => ( {\n\t\t\t\t\t\tid: uuid(),\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\tname: g.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai: {\n\t\t\t\t\t\t\tname: g.name,\n\t\t\t\t\t\t\tdescription: g.description,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tconversionActions: [],\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t].filter( isDefined ),\n\t\t} );\n\n\t\tawait setState( { ...state, experiment, type: 'done' } );\n\t} catch ( error ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( error ),\n\t\t} );\n\t}\n}\n\n// =======\n// HELPERS\n// =======\n\nasync function analyzeSite(\n\tabTesting: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ],\n\tstateId: Uuid\n): Promise< AiSiteAnalysis > {\n\tconst analytics = await breathe( () => getMostViewedItems( stateId ) );\n\tconst context: AnalysisContext = {\n\t\tanalytics,\n\t\tabTesting,\n\t};\n\n\tconst pages = await breathe( () => getPages( context, stateId ) );\n\tconst customPosts = await breathe( () =>\n\t\tgetCustomPosts( context, stateId )\n\t);\n\tconst blogAnalysis = await breathe( () =>\n\t\tgetBlogAnalysis( context, stateId )\n\t);\n\tconst woocommerceAnalysis = await breathe( () =>\n\t\tgetWooCommerceAnalysis( stateId )\n\t);\n\n\treturn {\n\t\tcontent: {\n\t\t\t...mapValues( customPosts, ( items ) =>\n\t\t\t\titems?.length ? items : undefined\n\t\t\t),\n\t\t\tpage: pages.length ? pages : undefined,\n\t\t\tpost: blogAnalysis?.posts,\n\t\t\tproduct: woocommerceAnalysis?.products,\n\t\t},\n\t\tmetaInformation: {\n\t\t\tlanguage: select( NAB_DATA ).getSiteLanguage(),\n\t\t\tblog: blogAnalysis?.info,\n\t\t\twoocommerce: woocommerceAnalysis?.info,\n\t\t\tabTesting,\n\t\t\turlAnalytics: analytics\n\t\t\t\t.filter( ( a ) => a.type === 'url' )\n\t\t\t\t.map( ( a ) => ( {\n\t\t\t\t\turl: a.url,\n\t\t\t\t\tmonthlyViews: a.monthlyViews,\n\t\t\t\t} ) ),\n\t\t},\n\t};\n}\n\nasync function getCachedCandidates(\n\tabTesting: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ],\n\texperiments: ReadonlyArray< Experiment >,\n\tstateId: Uuid\n): Promise<\n\tMaybe< {\n\t\treadonly siteAnalysis: AiSiteAnalysis;\n\t\treadonly candidates: ReadonlyArray< AiTestCandidate >;\n\t} >\n> {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'previous-candidates',\n\t} );\n\tconst candidates = await apiFetch< ReadonlyArray< AiCloudTestCandidate > >(\n\t\t{\n\t\t\tpath: '/nab/v1/ai/test-candidates',\n\t\t\tmethod: 'GET',\n\t\t}\n\t);\n\n\tif ( ! candidates.length ) {\n\t\treturn undefined;\n\t}\n\n\tconst itemsToLoad = toPairs(\n\t\tmapValues( groupBy( candidates, 'type' ), ( items ) =>\n\t\t\titems.map( ( i ) => i.id )\n\t\t)\n\t).filter( ( p ): p is [ string, number[] ] => 'string' === typeof p[ 0 ] );\n\n\tconst settledPromises = await Promise.allSettled(\n\t\titemsToLoad.map( ( [ postType, postIds ] ) =>\n\t\t\tgetItemsInType( postType, postIds )\n\t\t)\n\t);\n\n\tconst validSettledPromises = settledPromises\n\t\t.filter( ( p ) => p.status === 'fulfilled' )\n\t\t.map( ( p ) => p.value );\n\tconst postsByType = groupBy(\n\t\tvalidSettledPromises\n\t\t\t.filter(\n\t\t\t\t( ps ): ps is ReadonlyArray< AiPostSummary > =>\n\t\t\t\t\tps[ 0 ]?.type !== 'product'\n\t\t\t)\n\t\t\t.flatMap( ( ps ) => ps ),\n\t\t'type'\n\t);\n\tconst itemsByType: Record<\n\t\tstring,\n\t\tReadonlyArray< AiPostSummary > | ReadonlyArray< AiProductSummary >\n\t> = {\n\t\tproduct:\n\t\t\tvalidSettledPromises.find(\n\t\t\t\t( ps ): ps is ReadonlyArray< AiProductSummary > =>\n\t\t\t\t\tps[ 0 ]?.type === 'product'\n\t\t\t) ?? [],\n\t\t...postsByType,\n\t};\n\n\tconst PENDING_HYPOTHESIS_STATE = { status: 'pending' as const };\n\tconst finalCandidates = candidates\n\t\t.map( ( { type, id, ...attrs } ): Maybe< AiTestCandidate > => {\n\t\t\tconst item = itemsByType[ type ]?.find( ( c ) => c.id === id );\n\t\t\tconst hypothesisState: AiTestHypothesisState =\n\t\t\t\titem && attrs.hypotheses\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tstatus: 'ready',\n\t\t\t\t\t\t\thypotheses: attrs.hypotheses.map(\n\t\t\t\t\t\t\t\t( h ): AiTestHypothesis => ( {\n\t\t\t\t\t\t\t\t\t...h,\n\t\t\t\t\t\t\t\t\tcontrolUrl: item.url,\n\t\t\t\t\t\t\t\t\trelatedTests: experiments\n\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t( e ) =>\n\t\t\t\t\t\t\t\t\t\t\t\te.ai\n\t\t\t\t\t\t\t\t\t\t\t\t\t?.basedOnNelioAIHypothesis ===\n\t\t\t\t\t\t\t\t\t\t\t\th.id\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.map( ( e ) => e.id ),\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tisVisible: false,\n\t\t\t\t\t  }\n\t\t\t\t\t: PENDING_HYPOTHESIS_STATE;\n\t\t\treturn item ? { ...item, ...attrs, hypothesisState } : undefined;\n\t\t} )\n\t\t.filter( isDefined );\n\tif ( ! finalCandidates.length ) {\n\t\treturn undefined;\n\t}\n\n\treturn {\n\t\tsiteAnalysis: {\n\t\t\tcontent: itemsByType,\n\t\t\tmetaInformation: {\n\t\t\t\tlanguage: select( NAB_DATA ).getSiteLanguage(),\n\t\t\t\tblog: undefined,\n\t\t\t\twoocommerce: undefined,\n\t\t\t\tabTesting,\n\t\t\t\turlAnalytics: [],\n\t\t\t},\n\t\t},\n\t\tcandidates: finalCandidates,\n\t};\n}\n\nasync function processSiteAnalysis(\n\tanalysis: AiSiteAnalysis,\n\texperiments: ReadonlyArray< Experiment >,\n\tstateId: Uuid\n): Promise< ReadonlyArray< AiTestCandidate > > {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'searching-candidates',\n\t\tstep: 'just-started',\n\t} );\n\n\tconst isSearchingCandidates = () => {\n\t\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t\t'ai/testGenerationState'\n\t\t);\n\t\treturn !! state && 'searching-candidates' === state.type;\n\t};\n\n\tsetTimeout(\n\t\t() =>\n\t\t\tisSearchingCandidates() &&\n\t\t\tsetState( {\n\t\t\t\tid: stateId,\n\t\t\t\ttype: 'searching-candidates',\n\t\t\t\tstep: 'keep-waiting',\n\t\t\t} ),\n\t\t12_000\n\t);\n\n\tsetTimeout(\n\t\t() =>\n\t\t\tisSearchingCandidates() &&\n\t\t\tsetState( {\n\t\t\t\tid: stateId,\n\t\t\t\ttype: 'searching-candidates',\n\t\t\t\tstep: 'quite-slow',\n\t\t\t} ),\n\t\t24_000\n\t);\n\n\tconst candidates = await apiFetch< ReadonlyArray< AiCloudTestCandidate > >(\n\t\t{\n\t\t\tpath: '/nab/v1/ai/test-candidates',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tanalysis: {\n\t\t\t\t\t...analysis,\n\t\t\t\t\tcontent: mapValues(\n\t\t\t\t\t\tanalysis.content,\n\t\t\t\t\t\t( ps ) =>\n\t\t\t\t\t\t\tps?.map( ( p ) => omit( p, 'contentSummary' ) )\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t},\n\t\t}\n\t);\n\n\tconst PENDING_HYPOTHESIS_STATE = { status: 'pending' as const };\n\treturn candidates\n\t\t.map(\n\t\t\t( {\n\t\t\t\ttype,\n\t\t\t\tid,\n\t\t\t\trationale,\n\t\t\t\tpriority,\n\t\t\t\thypotheses,\n\t\t\t\thypothesisGeneration,\n\t\t\t} ): Maybe< AiTestCandidate > => {\n\t\t\t\tconst item = analysis.content[ type ]?.find(\n\t\t\t\t\t( c ) => c.id === id\n\t\t\t\t);\n\t\t\t\tconst hypothesisState: AiTestHypothesisState =\n\t\t\t\t\titem && hypotheses\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tstatus: 'ready',\n\t\t\t\t\t\t\t\thypotheses: hypotheses.map(\n\t\t\t\t\t\t\t\t\t( h ): AiTestHypothesis => ( {\n\t\t\t\t\t\t\t\t\t\t...h,\n\t\t\t\t\t\t\t\t\t\tcontrolUrl: item.url,\n\t\t\t\t\t\t\t\t\t\trelatedTests: experiments\n\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t( e ) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\te.ai\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.basedOnNelioAIHypothesis ===\n\t\t\t\t\t\t\t\t\t\t\t\t\th.id\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.map( ( e ) => e.id ),\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tisVisible: false,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: PENDING_HYPOTHESIS_STATE;\n\t\t\t\treturn item\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\trationale,\n\t\t\t\t\t\t\tpriority,\n\t\t\t\t\t\t\thypothesisState,\n\t\t\t\t\t\t\thypothesisGeneration,\n\t\t\t\t\t  }\n\t\t\t\t\t: undefined;\n\t\t\t}\n\t\t)\n\t\t.filter( isDefined );\n}\n\nasync function expandFirstCandidate( attrs: {\n\treadonly candidates: ReadonlyArray< AiTestCandidate >;\n\treadonly experiments: ReadonlyArray< Experiment >;\n\treadonly siteAnalysis: AiSiteAnalysis;\n\treadonly stateId: Uuid;\n\treadonly validExperimentTypes: ReadonlyArray< ExperimentType >;\n} ): Promise< ReadonlyArray< AiTestCandidate > > {\n\tconst firstCandidate = attrs.candidates.find(\n\t\t( c ) => 'available' === c.hypothesisGeneration\n\t);\n\tif ( ! firstCandidate ) {\n\t\treturn attrs.candidates;\n\t}\n\n\tif ( 'ready' === firstCandidate.hypothesisState.status ) {\n\t\tconst firstCandidateWithHypotheses = await updateCandidate( {\n\t\t\t...firstCandidate,\n\t\t\thypothesisState: {\n\t\t\t\t...firstCandidate.hypothesisState,\n\t\t\t\tisVisible: true,\n\t\t\t},\n\t\t} );\n\t\treturn attrs.candidates.map( ( c ) =>\n\t\t\tc === firstCandidate ? firstCandidateWithHypotheses : c\n\t\t);\n\t}\n\n\tawait setState( {\n\t\tid: attrs.stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'first-hypotheses',\n\t} );\n\tconst firstCandidateWithHypotheses = await loadTestHypotheses( {\n\t\tcandidate: firstCandidate,\n\t\tlanguage: attrs.siteAnalysis.metaInformation.language,\n\t\tvalidExperimentTypes: attrs.validExperimentTypes,\n\t\texperiments: attrs.experiments,\n\t} );\n\treturn attrs.candidates.map( ( c ) =>\n\t\tc === firstCandidate ? firstCandidateWithHypotheses : c\n\t);\n}\n\nasync function loadTestHypotheses( {\n\tcandidate,\n\texperiments,\n\tlanguage,\n\tvalidExperimentTypes,\n}: {\n\treadonly candidate: AiTestCandidate;\n\treadonly experiments: ReadonlyArray< Experiment >;\n\treadonly language: string;\n\treadonly validExperimentTypes: ReadonlyArray< ExperimentType >;\n} ): Promise< AiTestCandidate > {\n\tcandidate = await updateCandidate( {\n\t\t...candidate,\n\t\tcontentSummary: !! candidate.contentSummary?.length\n\t\t\t? candidate.contentSummary\n\t\t\t: await getContentSummary( candidate.url ),\n\t} );\n\n\tconst names = validExperimentTypes.map( ( t ) => t.name );\n\ttry {\n\t\tconst suggestedHypotheses = await apiFetch<\n\t\t\tReadonlyArray< AiCloudTestHypothesis >\n\t\t>( {\n\t\t\tpath: '/nab/v1/ai/test-hypotheses',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tlanguage,\n\t\t\t\tid: candidate.id,\n\t\t\t\ttype: candidate.type,\n\t\t\t\turl: candidate.url,\n\t\t\t\tcontent: candidate.contentSummary || [],\n\t\t\t},\n\t\t} );\n\n\t\tconst unsortedHypotheses = suggestedHypotheses\n\t\t\t.filter( ( h ) => names.includes( h.testType ) )\n\t\t\t.map(\n\t\t\t\t( h ): AiTestHypothesis => ( {\n\t\t\t\t\t...h,\n\t\t\t\t\tcontrolUrl: candidate.url,\n\t\t\t\t\trelatedTests: experiments\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t( e ) => e.ai?.basedOnNelioAIHypothesis === h.id\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map( ( e ) => e.id ),\n\t\t\t\t} )\n\t\t\t);\n\t\tconst hypotheses = [\n\t\t\t...unsortedHypotheses.filter( ( h ) => ! h.relatedTests.length ),\n\t\t\t...unsortedHypotheses.filter( ( h ) => !! h.relatedTests.length ),\n\t\t];\n\t\tif ( ! hypotheses.length ) {\n\t\t\tthrow new Error( 'no-hypotheses-available' );\n\t\t}\n\n\t\treturn updateCandidate( {\n\t\t\t...candidate,\n\t\t\thypothesisState: {\n\t\t\t\tstatus: 'ready',\n\t\t\t\thypotheses,\n\t\t\t\tisVisible: true,\n\t\t\t},\n\t\t} );\n\t} catch ( error ) {\n\t\treturn updateCandidate( {\n\t\t\t...candidate,\n\t\t\thypothesisState: {\n\t\t\t\tstatus: 'error',\n\t\t\t\treason: getErrorCode( error ) || 'nelio-ai-unknown-error-901',\n\t\t\t},\n\t\t} );\n\t}\n}\n\nasync function setState(\n\tstate: Exclude<\n\t\tRequired< State[ 'page' ] >[ 'ai/testGenerationState' ],\n\t\tfalse\n\t>\n): Promise< void > {\n\tconst currentState = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! currentState || currentState.id !== state.id ) {\n\t\treturn;\n\t}\n\n\tconst { setPageAttribute } = dispatch( NAB_DATA );\n\tawait setPageAttribute( 'ai/testGenerationState', state );\n}\n\ntype WpPost = {\n\tid: number;\n\ttype: string;\n\tlink?: string;\n\ttitle?: { rendered?: string };\n\tcontent?: { rendered?: string };\n\tdate?: string;\n\tmodified?: string;\n\tyoast_head_json?: {\n\t\ttitle?: string;\n\t\tdescription?: string;\n\t};\n};\n\nconst wpPost2aiPost =\n\t( { analytics }: Pick< AnalysisContext, 'analytics' > ) =>\n\t( p: WpPost ): AiPostSummary => ( {\n\t\tid: p.id,\n\t\ttype: p.type,\n\t\ttitle: decodeEntities( p.title?.rendered ?? '' ),\n\t\turl: p.link || '',\n\t\tcontentMetrics: getContentMetrics(\n\t\t\tselect( NAB_DATA ).getPluginSetting( 'homeUrl' ),\n\t\t\tp.content?.rendered\n\t\t),\n\t\tpublicationDate: p.date || '',\n\t\tlastUpdate: p.modified || '',\n\t\tmonthlyViews: analytics.find(\n\t\t\t( a ) =>\n\t\t\t\ta.type === 'post' && a.postType === p.type && a.postId === p.id\n\t\t)?.monthlyViews,\n\t\tseoTitle: p.yoast_head_json?.title?.trim() || undefined,\n\t\tseoDescription: p.yoast_head_json?.description?.trim() || undefined,\n\t} );\n\nasync function getPages(\n\tcontext: AnalysisContext,\n\tstateId: Uuid\n): Promise< ReadonlyArray< AiPostSummary > > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn [];\n\t}\n\n\tif ( ! aiSettings.privacy.postTypes.includes( 'page' ) ) {\n\t\treturn [];\n\t}\n\n\ttry {\n\t\tawait setState( {\n\t\t\tid: stateId,\n\t\t\ttype: 'analyzing-site',\n\t\t\twhat: 'pages',\n\t\t} );\n\t\treturn getItemsUnsafe( {\n\t\t\tcontext,\n\t\t\tpostType: 'page',\n\t\t\texperimentTypes: [ 'nab/page' ],\n\t\t\tmaxItems: MAX_PAGES,\n\t\t} );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getBlogAnalysis(\n\tcontext: AnalysisContext,\n\tstateId: Uuid\n): Promise<\n\tMaybe< {\n\t\tposts: ReadonlyArray< AiPostSummary >;\n\t\tinfo: Required< AiSiteAnalysis[ 'metaInformation' ] >[ 'blog' ];\n\t} >\n> {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn undefined;\n\t}\n\n\tif ( ! aiSettings.privacy.postTypes.includes( 'post' ) ) {\n\t\treturn undefined;\n\t}\n\n\tawait setState( { id: stateId, type: 'analyzing-site', what: 'blog' } );\n\ttry {\n\t\t// @ts-expect-error This variable exists in the global scope.\n\t\tconst wpApiSettings = window.wpApiSettings as {\n\t\t\troot: string;\n\t\t\tnonce: string;\n\t\t};\n\t\tconst response = await fetch(\n\t\t\t`${ wpApiSettings.root.replace(\n\t\t\t\t/\\/$/,\n\t\t\t\t''\n\t\t\t) }/wp/v2/posts?status=publish&per_page=1&after=${ getLastYear() }`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'X-WP-Nonce': wpApiSettings.nonce,\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tcredentials: 'same-origin', // ensures cookies (if needed) are sent\n\t\t\t}\n\t\t);\n\n\t\tconst totalPostsInLastYear =\n\t\t\tNumber.parseInt( response.headers.get( 'X-WP-Total' ) || '' ) || 0;\n\n\t\tconst posts = await getItemsUnsafe( {\n\t\t\tcontext,\n\t\t\tpostType: 'post',\n\t\t\texperimentTypes: [ 'nab/post', 'nab/headline' ],\n\t\t\tmaxItems: MAX_ITEMS_PER_TYPE,\n\t\t} );\n\n\t\treturn {\n\t\t\tposts,\n\t\t\tinfo: {\n\t\t\t\ttotalPostsInLastYear,\n\t\t\t\taveragePostsPerMonth: totalPostsInLastYear / 12,\n\t\t\t},\n\t\t};\n\t} catch ( _ ) {\n\t\treturn undefined;\n\t}\n}\n\nasync function getCustomPosts(\n\tcontext: AnalysisContext,\n\tstateId: Uuid\n): Promise< AiSiteAnalysis[ 'content' ] > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn {};\n\t}\n\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'custom-posts',\n\t} );\n\n\ttry {\n\t\tconst kinds = await resolveSelect( NAB_DATA ).getKindEntities();\n\t\tconst postTypeExceptions = getPostTypeExceptions( {\n\t\t\tisWooCommerceEnabled: await isWooCommerceEnabled(),\n\t\t} );\n\t\tconst postTypes = kinds\n\t\t\t.filter( ( k ) => k.kind === 'entity' )\n\t\t\t.map( ( k ) => k.name )\n\t\t\t.filter( ( t ) => ! t.startsWith( 'nab_' ) )\n\t\t\t.filter( ( t ) => ! postTypeExceptions.includes( t ) )\n\t\t\t.filter( ( t ) => aiSettings.privacy.postTypes.includes( t ) );\n\t\tif ( ! postTypes.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst settledPromises = await Promise.allSettled(\n\t\t\tpostTypes.map( ( type ) =>\n\t\t\t\tgetItemsUnsafe( {\n\t\t\t\t\tpostType: type,\n\t\t\t\t\texperimentTypes: [ 'nab/custom-post-type' ],\n\t\t\t\t\tcontext,\n\t\t\t\t\tmaxItems: MAX_ITEMS_PER_TYPE,\n\t\t\t\t} )\n\t\t\t)\n\t\t);\n\t\treturn groupBy(\n\t\t\tsettledPromises\n\t\t\t\t.filter( ( p ) => p.status === 'fulfilled' )\n\t\t\t\t.flatMap( ( p ) => p.value ),\n\t\t\t'type'\n\t\t);\n\t} catch ( _ ) {\n\t\treturn {};\n\t}\n}\n\nasync function getItemsUnsafe( {\n\tcontext,\n\tpostType,\n\texperimentTypes,\n\tmaxItems,\n}: {\n\treadonly context: AnalysisContext;\n\treadonly postType: string;\n\treadonly experimentTypes: ReadonlyArray< string >;\n\treadonly maxItems: number;\n} ): Promise< ReadonlyArray< AiPostSummary > > {\n\tconst relevantIds = uniq( [\n\t\t...context.analytics\n\t\t\t.map( ( a ) =>\n\t\t\t\ta.type === 'post' && a.postType === postType ? a.postId : 0\n\t\t\t)\n\t\t\t.filter( ( id ) => !! id ),\n\n\t\t...context.abTesting.experiments\n\t\t\t.filter( ( e ) => experimentTypes.includes( e.type ) )\n\t\t\t.map(\n\t\t\t\t( e ) =>\n\t\t\t\t\te.alternatives[ 0 ]?.attributes as Maybe<\n\t\t\t\t\t\tDict< number | string >\n\t\t\t\t\t>\n\t\t\t)\n\t\t\t.filter(\n\t\t\t\t( attrs ) => ! attrs?.postType || attrs?.postType === postType\n\t\t\t)\n\t\t\t.map( ( attrs ) => attrs?.postId ?? 0 )\n\t\t\t.filter( ( id ) => !! id ),\n\n\t\t...context.abTesting.heatmaps\n\t\t\t.filter(\n\t\t\t\t( h ) =>\n\t\t\t\t\th.trackingMode === 'post' && h.trackedPostType === postType\n\t\t\t)\n\t\t\t.map( ( h ) => h.trackedPostId )\n\t\t\t.filter( ( id ) => 'number' === typeof id )\n\t\t\t.filter( ( id ) => !! id ),\n\t] );\n\n\tconst restType =\n\t\t'page' === postType || 'post' === postType\n\t\t\t? `${ postType }s`\n\t\t\t: postType;\n\n\tconst relevantItems = ! relevantIds.length\n\t\t? []\n\t\t: await apiFetch< ReadonlyArray< WpPost > >( {\n\t\t\t\tpath: `/wp/v2/${ restType }?include=${ relevantIds.join(\n\t\t\t\t\t','\n\t\t\t\t) }`,\n\t\t  } );\n\n\tconst excludedIds = relevantItems.map( ( p ) => p.id ).join( ',' );\n\tconst pendingItemCount = Math.max( 0, maxItems - relevantItems.length );\n\tconst remainingItems = ! pendingItemCount\n\t\t? []\n\t\t: await apiFetch< ReadonlyArray< WpPost > >( {\n\t\t\t\tpath: ! excludedIds\n\t\t\t\t\t? `/wp/v2/${ restType }?per_page=${ pendingItemCount }&status=publish&orderby=rand`\n\t\t\t\t\t: `/wp/v2/${ restType }?per_page=${ pendingItemCount }&exclude=${ excludedIds }&status=publish&orderby=rand`,\n\t\t  } );\n\n\treturn [ ...relevantItems, ...remainingItems ].map(\n\t\twpPost2aiPost( context )\n\t);\n}\n\nasync function getWooCommerceAnalysis( stateId: Uuid ): Promise<\n\tMaybe< {\n\t\tproducts: ReadonlyArray< AiProductSummary >;\n\t\tinfo: Required< AiSiteAnalysis[ 'metaInformation' ] >[ 'woocommerce' ];\n\t} >\n> {\n\tif ( ! ( await isWooCommerceEnabled() ) ) {\n\t\treturn undefined;\n\t}\n\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn undefined;\n\t}\n\n\tif ( ! aiSettings.privacy.isWooCommerceEnabled ) {\n\t\treturn undefined;\n\t}\n\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'ecommerce',\n\t} );\n\n\tconst bestSellers = await getBestSellers();\n\tconst latestOrders = await getLatestOrders();\n\n\tconst randomProducts = await getProducts( 'random' );\n\tconst missingProductIds = uniq(\n\t\tlatestOrders.flatMap( ( o ) => o.products )\n\t).filter( ( id ) => ! randomProducts.some( ( p ) => p.id === id ) );\n\tconst missingProducts = await getProducts( missingProductIds );\n\tconst products = [ ...randomProducts, ...missingProducts ];\n\n\treturn {\n\t\tproducts,\n\t\tinfo: {\n\t\t\tbestSellers,\n\t\t\tlatestOrders,\n\t\t},\n\t};\n}\n\nasync function getMostViewedItems(\n\tstateId: Uuid\n): Promise< ReadonlyArray< MostViewedItem > > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn [];\n\t}\n\n\tif ( ! aiSettings.analytics.enabled ) {\n\t\treturn [];\n\t}\n\n\ttry {\n\t\tawait setState( {\n\t\t\tid: stateId,\n\t\t\ttype: 'analyzing-site',\n\t\t\twhat: 'google-analytics',\n\t\t} );\n\t\tconst analytics = await apiFetch< ReadonlyArray< MostViewedItem > >( {\n\t\t\tpath: '/nab/v1/ai/top-viewed-items',\n\t\t} );\n\t\t// NOTE. Keep URL analytics when cloud supports them.\n\t\treturn analytics.filter( ( i ) => i.type !== 'url' );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getAbTestingData( stateId: Uuid ): Promise<\n\t| { readonly type: 'error'; readonly error: unknown }\n\t| {\n\t\t\treadonly type: 'data';\n\t\t\treadonly base: {\n\t\t\t\treadonly experiments: ReadonlyArray< Experiment >;\n\t\t\t\treadonly heatmaps: ReadonlyArray< Heatmap >;\n\t\t\t};\n\t\t\treadonly aiAnalysis: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ];\n\t  }\n> {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'ab-testing',\n\t} );\n\n\ttry {\n\t\tconst allExperiments = await getLatestExperiments();\n\t\treturn {\n\t\t\ttype: 'data',\n\t\t\tbase: {\n\t\t\t\texperiments: allExperiments.filter(\n\t\t\t\t\t( e ): e is Experiment => 'nab/heatmap' !== e.type\n\t\t\t\t),\n\t\t\t\theatmaps: allExperiments.filter(\n\t\t\t\t\t( e ): e is Heatmap => 'nab/heatmap' === e.type\n\t\t\t\t),\n\t\t\t},\n\t\t\taiAnalysis: {\n\t\t\t\texperiments: allExperiments\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t( e ): e is Experiment => 'nab/heatmap' !== e.type\n\t\t\t\t\t)\n\t\t\t\t\t.map(\n\t\t\t\t\t\t( e ): AiExperiment => ( {\n\t\t\t\t\t\t\tid: e.id,\n\t\t\t\t\t\t\ttype: e.type,\n\t\t\t\t\t\t\tstatus: e.status,\n\t\t\t\t\t\t\tname: e.name,\n\t\t\t\t\t\t\tdescription: e.description,\n\t\t\t\t\t\t\tstartDate: e.startDate,\n\t\t\t\t\t\t\tendDate: e.endDate || undefined,\n\t\t\t\t\t\t\talternatives: map( e.alternatives, ( a, i ) => ( {\n\t\t\t\t\t\t\t\tname: getVariantLabel( i, a.attributes.name ),\n\t\t\t\t\t\t\t\tattributes: omit( a.attributes, 'name' ),\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t\tgoals: map( e.goals, ( g, i ) => ( {\n\t\t\t\t\t\t\t\tname: getGoalLabel( i, g.attributes.name ),\n\t\t\t\t\t\t\t\tactions: g.conversionActions.map( ( ca ) => ( {\n\t\t\t\t\t\t\t\t\ttype: ca.type,\n\t\t\t\t\t\t\t\t\tattributes: ca.attributes,\n\t\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\theatmaps: allExperiments\n\t\t\t\t\t.filter( ( e ): e is Heatmap => 'nab/heatmap' === e.type )\n\t\t\t\t\t.map(\n\t\t\t\t\t\t( h ): AiHeatmap => ( {\n\t\t\t\t\t\t\tid: h.id,\n\t\t\t\t\t\t\ttype: h.type,\n\t\t\t\t\t\t\tstatus: h.status,\n\t\t\t\t\t\t\tname: h.name,\n\t\t\t\t\t\t\tdescription: h.description,\n\t\t\t\t\t\t\tstartDate: h.startDate,\n\t\t\t\t\t\t\tendDate: h.endDate || undefined,\n\t\t\t\t\t\t\ttrackingMode: h.trackingMode,\n\t\t\t\t\t\t\ttrackedPostId: h.trackedPostId,\n\t\t\t\t\t\t\ttrackedPostType: h.trackedPostType,\n\t\t\t\t\t\t\ttrackedUrl: h.trackedUrl,\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t},\n\t\t};\n\t} catch ( error ) {\n\t\treturn { type: 'error', error };\n\t}\n}\n\nasync function isWooCommerceEnabled() {\n\tconst plugins = await resolveSelect( NAB_DATA ).getActivePlugins();\n\treturn plugins.includes( 'woocommerce/woocommerce.php' );\n}\n\nasync function getBestSellers(): Promise< ReadonlyArray< AiBestSeller > > {\n\ttry {\n\t\ttype Response = ReadonlyArray< {\n\t\t\treadonly rows: ReadonlyArray<\n\t\t\t\t[\n\t\t\t\t\tPartial< { display: string } > | undefined,\n\t\t\t\t\tPartial< { value: number } > | undefined,\n\t\t\t\t]\n\t\t\t>;\n\t\t} >;\n\t\tconst response = await apiFetch< Response >( {\n\t\t\tpath: `/wc-analytics/leaderboards?leaderboard=products&after=${ getLastYear() }&before=${ getToday() }&per_page=10`,\n\t\t} );\n\n\t\tconst aux = document.createElement( 'div' );\n\t\treturn ( response[ 0 ]?.rows ?? [] )\n\t\t\t.map( ( r ): AiBestSeller => {\n\t\t\t\taux.innerHTML = r[ 0 ]?.display || '';\n\t\t\t\tconst url = aux.querySelector( 'a' )?.href ?? '';\n\t\t\t\tconst matches = url.match( /\\bproducts=([0-9]+)\\b/ ) || [];\n\t\t\t\tconst id = Number.parseInt( matches[ 1 ] || '0' ) || 0;\n\t\t\t\treturn { id, quantity: r[ 1 ]?.value || 0 };\n\t\t\t} )\n\t\t\t.filter( ( r ) => !! r.id && !! r.quantity );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getLatestOrders(): Promise< ReadonlyArray< AiOrderSummary > > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn [];\n\t}\n\n\tconst includeOrders =\n\t\taiSettings.privacy.isWooCommerceEnabled &&\n\t\taiSettings.privacy.includeWooCommerceOrderInfo;\n\tif ( includeOrders ) {\n\t\treturn [];\n\t}\n\n\ttry {\n\t\ttype Order = {\n\t\t\treadonly date_created: string;\n\t\t\treadonly total: string;\n\t\t\treadonly status: string;\n\t\t\treadonly line_items: ReadonlyArray< { product_id: number } >;\n\t\t};\n\t\tconst latestOrdersRaw = await apiFetch< ReadonlyArray< Order > >( {\n\t\t\tpath: '/wc/v3/orders?per_page=50',\n\t\t} );\n\t\treturn latestOrdersRaw.map(\n\t\t\t( o ): AiOrderSummary => ( {\n\t\t\t\tdate: o.date_created,\n\t\t\t\ttotal: o.total,\n\t\t\t\tstatus: o.status,\n\t\t\t\tproducts: o.line_items.map( ( i ) => i.product_id ),\n\t\t\t} )\n\t\t);\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\ntype WpProduct = {\n\treadonly id: number;\n\treadonly date_created?: string;\n\treadonly date_modified?: string;\n\treadonly name?: string;\n\treadonly price?: string;\n\treadonly permalink?: string;\n};\n\nconst wpProduct2aiProduct = ( p: WpProduct ): AiProductSummary => ( {\n\tid: p.id,\n\ttype: 'product',\n\turl: p.permalink || '',\n\tname: p.name || '',\n\tprice: p.price ? `${ p.price }` : '',\n\tpublicationDate: p.date_created || '',\n\tlastUpdate: p.date_modified || '',\n} );\n\nasync function getProducts(\n\twhat: 'random' | ReadonlyArray< number >\n): Promise< ReadonlyArray< AiProductSummary > > {\n\ttry {\n\t\tconst products = await apiFetch< ReadonlyArray< WpProduct > >( {\n\t\t\tpath:\n\t\t\t\t'random' === what\n\t\t\t\t\t? '/wc/v3/products?per_page=50&status=publish&orderby=rand'\n\t\t\t\t\t: `/wc/v3/products?include=${ what.join( ',' ) }`,\n\t\t} );\n\n\t\treturn products.map( wpProduct2aiProduct );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getLatestExperiments(): Promise<\n\tReadonlyArray< Experiment | Heatmap >\n> {\n\ttry {\n\t\treturn apiFetch< ReadonlyArray< Experiment | Heatmap > >( {\n\t\t\tpath: '/nab/v1/ai/latest-experiments',\n\t\t} );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nfunction getToday() {\n\tconst date = new Date();\n\treturn date.toISOString();\n}\n\nfunction getLastYear() {\n\tconst date = new Date();\n\tdate.setFullYear( date.getFullYear() - 1 );\n\treturn date.toISOString();\n}\n\nfunction getVariantLabel( index: number, variantName = '' ): string {\n\tconst prefix = sprintf(\n\t\t/* translators: %s: Letter, such as A, B, or C. */\n\t\t_x( 'Variant %s', 'text', 'nelio-ab-testing' ),\n\t\tgetLetter( index )\n\t);\n\tvariantName = variantName.trim();\n\treturn variantName ? `${ prefix }  ${ variantName }` : prefix;\n}\n\nfunction getGoalLabel( index: number, goalName = '' ): string {\n\tconst prefix =\n\t\t0 === index\n\t\t\t? _x( 'Default Goal', 'text', 'nelio-ab-testing' )\n\t\t\t: sprintf(\n\t\t\t\t\t/* translators: %d: Number. */\n\t\t\t\t\t_x( 'Goal %d', 'text', 'nelio-ab-testing' ),\n\t\t\t\t\tindex\n\t\t\t  );\n\tgoalName = goalName.trim();\n\treturn goalName ? `${ prefix }  ${ goalName }` : prefix;\n}\n\nasync function breathe< T >( callback: () => Promise< T > ): Promise< T > {\n\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\tconst start = Date.now();\n\tconst result = await callback();\n\tif ( undefined === result ) {\n\t\treturn result;\n\t}\n\n\tconst elapsed = Date.now() - start;\n\tconst delay = Math.max( 0, MIN_RUN_TIME_FOR_ASYNC_CALLBACK - elapsed );\n\tawait new Promise( ( r ) => setTimeout( r, delay ) );\n\n\treturn result;\n}\n\nasync function updateCandidate< T extends AiTestCandidate >(\n\tcandidate: T\n): Promise< T > {\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'hypothesis-selection' !== state.type ) {\n\t\treturn candidate;\n\t}\n\n\tawait setState( {\n\t\t...state,\n\t\tcandidates: state.candidates.map( ( c ) =>\n\t\t\tc.type === candidate.type && c.id === candidate.id ? candidate : c\n\t\t),\n\t} );\n\treturn candidate;\n}\n\nasync function getItemsInType(\n\tpostType: string,\n\tpostIds: ReadonlyArray< number >\n): Promise<\n\tReadonlyArray< AiPostSummary > | ReadonlyArray< AiProductSummary >\n> {\n\tconst ids = postIds.join( ',' );\n\tif ( 'product' === postType && ( await isWooCommerceEnabled() ) ) {\n\t\tconst products = await apiFetch< ReadonlyArray< WpProduct > >( {\n\t\t\tpath: `/wc/v3/products?include=${ ids }`,\n\t\t} );\n\t\treturn products.map( wpProduct2aiProduct );\n\t}\n\n\tconst restType =\n\t\t'page' === postType || 'post' === postType\n\t\t\t? `${ postType }s`\n\t\t\t: postType;\n\n\tconst posts = await apiFetch< ReadonlyArray< WpPost > >( {\n\t\tpath: `/wp/v2/${ restType }?include=${ ids }`,\n\t} );\n\treturn posts.map( wpPost2aiPost( { analytics: [] } ) );\n}\n\nasync function createExperiment( type: ExperimentType ): Promise< Experiment > {\n\tconst addTestedPostScopeRule =\n\t\t'tested-post-with-consistency' === type.supports?.scope ||\n\t\t'tested-product-with-consistency' === type.supports?.scope;\n\treturn apiFetch< Experiment >( {\n\t\tpath: '/nab/v1/experiment',\n\t\tmethod: 'post',\n\t\tdata: {\n\t\t\ttype: type.name,\n\t\t\taddTestedPostScopeRule,\n\t\t},\n\t} );\n}\n\nasync function saveExperiment( experiment: Experiment ): Promise< Experiment > {\n\treturn apiFetch< Experiment >( {\n\t\tpath: `/nab/v1/experiment/${ experiment.id }`,\n\t\tmethod: 'PUT',\n\t\tdata: experiment,\n\t} );\n}\n\nasync function saveAiSettings(\n\tsettings: AiSettings,\n\tstateId: Uuid\n): Promise< void > {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'saving-ai-settings',\n\t} );\n\tconst result = await apiFetch< AiSettings >( {\n\t\tpath: '/nab/v1/ai/settings',\n\t\tmethod: 'PUT',\n\t\tdata: { settings },\n\t} );\n\tawait dispatch( NAB_DATA ).updateAiSettings( result );\n}\n\nfunction getErrorCode( error: unknown ): Maybe< string > {\n\tif ( ! error ) {\n\t\treturn undefined;\n\t}\n\n\tif ( 'string' === typeof error ) {\n\t\treturn error ? error : undefined;\n\t}\n\n\tconst code =\n\t\t'object' === typeof error &&\n\t\t'code' in error &&\n\t\t'string' === typeof error.code &&\n\t\t!! error.code\n\t\t\t? error.code\n\t\t\t: undefined;\n\n\tif ( ! code ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( error );\n\t}\n\n\treturn code;\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect, select } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { keyBy } from 'lodash';\nimport { createErrorNotice } from '@nab/utils';\nimport type { Alternative, AlternativeId, Experiment, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\n/**\n * Stops the experiment in the database.\n */\nexport async function stopExperiment(): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/isExperimentBeingStopped',\n\t\ttrue\n\t);\n\n\tlet experiment: Maybe< Experiment >;\n\ttry {\n\t\texperiment =\n\t\t\tawait resolveSelect( NAB_DATA ).getExperiment( experimentId );\n\t\tif ( ! experiment ) {\n\t\t\treturn;\n\t\t}\n\t} catch ( e ) {\n\t\tawait createErrorNotice( e );\n\t\treturn;\n\t}\n\n\tlet stoppedExperiment: Experiment;\n\ttry {\n\t\tstoppedExperiment = await apiFetch< Experiment >( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/stop`,\n\t\t\tmethod: 'PUT',\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x( 'Test cant be stopped', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t\t'editor/isExperimentBeingStopped',\n\t\t\tfalse\n\t\t);\n\t\treturn;\n\t}\n\n\tconst newAlternatives = keyBy( stoppedExperiment.alternatives || [], 'id' );\n\n\tconst newExperiment: Experiment = {\n\t\t...stoppedExperiment,\n\t\tlinks: {\n\t\t\t...stoppedExperiment.links,\n\t\t\t...experiment.links,\n\t\t},\n\t\talternatives: ( experiment.alternatives || [] ).map(\n\t\t\t( alternative ) => ( {\n\t\t\t\t...alternative,\n\t\t\t\tlinks: updateLinksKeepingPreviewAndHeatmap(\n\t\t\t\t\talternative,\n\t\t\t\t\tnewAlternatives[ alternative.id ]\n\t\t\t\t),\n\t\t\t} )\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t) as any as Experiment[ 'alternatives' ],\n\t};\n\n\tawait dispatch( NAB_DATA ).receiveExperiment(\n\t\texperiment.id,\n\t\tnewExperiment\n\t);\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/isExperimentBeingStopped',\n\t\tfalse\n\t);\n}\n\n/**\n * Pauses the experiment in the database.\n */\nexport async function pauseExperiment(): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/isExperimentBeingPaused',\n\t\ttrue\n\t);\n\n\ttry {\n\t\tawait apiFetch( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/pause`,\n\t\t\tmethod: 'PUT',\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x( 'Test cant be paused', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t\t'editor/isExperimentBeingPaused',\n\t\t\tfalse\n\t\t);\n\t\treturn;\n\t}\n\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'admin.php', {\n\t\tpage: 'nelio-ab-testing-experiment-edit',\n\t\texperiment: experimentId,\n\t} );\n}\n\n/**\n * Applies the given alternative.\n *\n * @param {string} alternativeId the alternative to apply.\n */\nexport async function applyAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/alternativeBeingApplied',\n\t\talternativeId\n\t);\n\n\tlet experiment: Experiment;\n\ttry {\n\t\texperiment = await apiFetch( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/apply/${ alternativeId }`,\n\t\t\tmethod: 'PUT',\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x( 'Alternative cant be applied', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t\t'editor/alternativeBeingApplied',\n\t\t\tfalse\n\t\t);\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).changeLastAppliedAlternative(\n\t\texperiment.id,\n\t\talternativeId\n\t);\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/alternativeBeingApplied',\n\t\tfalse\n\t);\n}\n\n/**\n * Changes the public result status of the experiment in the database.\n * @param status\n */\nexport async function setPublicResultStatus(\n\tstatus: boolean\n): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute( 'isLocked', true );\n\n\tlet changedStatus = status;\n\ttry {\n\t\tchangedStatus = await apiFetch< boolean >( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/public-result-status`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: { status },\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x(\n\t\t\t\t'Public results status cant be changed',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t)\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute( 'isLocked', false );\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute( 'isLocked', false );\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'results/isReadOnlyActive',\n\t\tchangedStatus\n\t);\n}\n\n// =======\n// HELPERS\n// =======\n\nfunction updateLinksKeepingPreviewAndHeatmap(\n\toldAlternative?: Alternative,\n\tnewAlternative?: Alternative\n): Maybe< Alternative[ 'links' ] > {\n\tif ( ! oldAlternative?.links ) {\n\t\treturn;\n\t}\n\n\tif ( ! newAlternative?.links ) {\n\t\treturn oldAlternative.links;\n\t}\n\n\treturn {\n\t\t...newAlternative.links,\n\t\theatmap: oldAlternative.links.heatmap,\n\t\tpreview: oldAlternative.links.preview,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, select } from '@safe-wordpress/data';\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function purchaseQuota(\n\tquantity: number,\n\tcurrency: string\n): Promise< void > {\n\tconst subscriptionId = select( NAB_DATA ).getSubscriptionId();\n\tif ( ! subscriptionId ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tawait dispatch( NAB_DATA ).lock();\n\n\t\tawait apiFetch( {\n\t\t\tpath: `/nab/v1/subscription/${ subscriptionId }/quota`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tquantity,\n\t\t\t\tcurrency,\n\t\t\t},\n\t\t} );\n\n\t\twindow.location.reload();\n\t} catch ( error ) {\n\t\tawait dispatch( NAB_DATA ).unlock();\n\t\tawait createErrorNotice( error );\n\t}\n}\n","export * from './ai';\nexport * from './experiment';\nexport * from './fastspring';\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { find, values } from 'lodash';\nimport type {\n\tEntityKind,\n\tEntityKindName,\n\tEntityId,\n\tEntityInstance,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getKindEntities(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch< Record< EntityKindName, EntityKind > >(\n\t\t\t{ path: '/nab/v1/types' }\n\t\t);\n\t\tawait dispatch( NAB_DATA ).receiveKindEntitiesQuery(\n\t\t\tvalues( response )\n\t\t);\n\t} catch ( e ) {\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( e );\n\t}\n}\n\nexport async function getEntityRecord(\n\tkind?: EntityKindName,\n\tkey?: EntityId\n): Promise< void > {\n\tif ( ! kind || ! key ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst entities = await resolveSelect( NAB_DATA ).getKindEntities();\n\t\tconst entity = find( entities, { name: kind } );\n\t\tif ( ! entity ) {\n\t\t\t// eslint-disable-next-line\n\t\t\tconsole.warn( `Entity ${ kind } not found in`, entities );\n\t\t\treturn;\n\t\t}\n\n\t\tconst record = await apiFetch< EntityInstance >( {\n\t\t\tpath: `/nab/v1/post/?id=${ key }&type=${ kind }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveEntityRecords( kind, record );\n\t} catch ( e ) {\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( e );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport type { Experiment, ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getExperiment( id: ExperimentId ): Promise< void > {\n\ttry {\n\t\tconst experiment = await apiFetch< Experiment >( {\n\t\t\tpath: `/nab/v1/experiment/${ id }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveExperiment( id, experiment );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to retrieve experiment ${ id }. Error: ${ message }.`\n\t\t);\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\nimport type { State } from '../../types';\n\nexport async function getProducts(): Promise< void > {\n\ttry {\n\t\tconst { currency, products, subscriptionId } = await apiFetch<\n\t\t\tState[ 'fastspring' ]\n\t\t>( {\n\t\t\tpath: '/nab/v1/fastspring',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveFSCurrency( currency );\n\t\tawait dispatch( NAB_DATA ).receiveFSProducts( products );\n\t\tawait dispatch( NAB_DATA ).receiveFSSubscriptionId( subscriptionId );\n\t} catch ( error ) {\n\t\tawait createErrorNotice(\n\t\t\terror,\n\t\t\t_x(\n\t\t\t\t'Error while retrieving NC products.',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t)\n\t\t);\n\t\tthrow error;\n\t}\n}\n\nexport const getCurrency = async (): Promise< void > =>\n\tvoid ( await resolveSelect( NAB_DATA ).getProducts() );\n\nexport const getSubscriptionId = async (): Promise< void > =>\n\tvoid ( await resolveSelect( NAB_DATA ).getProducts() );\n","export * from './entities';\nexport * from './experiment';\nexport * from './fastspring';\nexport * from './media';\nexport * from './results';\nexport * from './settings';\nexport * from './site-quota';\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport type { MediaId, Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getMediaUrl( id: MediaId ): Promise< void > {\n\tif ( ! id ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\ttype Media = { readonly source_url: Url };\n\t\tconst media = await apiFetch< Media >( {\n\t\t\tpath: `/wp/v2/media/${ id }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveMediaUrl( id, media.source_url );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Error while retrieving media. Error: ${ message }` );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\nimport type { CloudResults, ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\nimport { processResult } from '../../utils';\n\nexport async function getExperimentResults(\n\tid: ExperimentId\n): Promise< void > {\n\ttry {\n\t\tconst experiment = await resolveSelect( NAB_DATA ).getExperiment( id );\n\t\tif ( ! experiment ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = await apiFetch< CloudResults >( {\n\t\t\tpath: `/nab/v1/experiment/${ id }/result`,\n\t\t} );\n\n\t\tconst result = processResult( data, experiment );\n\t\tawait dispatch( NAB_DATA ).receiveExperimentResult( id, result );\n\t} catch ( error ) {\n\t\tawait createErrorNotice(\n\t\t\terror,\n\t\t\tsprintf(\n\t\t\t\t/* translators: %d: Test id. */\n\t\t\t\t_x(\n\t\t\t\t\t'Unable to retrieve results in test %d.',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tid\n\t\t\t)\n\t\t);\n\t}\n}\n\nexport async function getPageViews( id: ExperimentId ): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getAlternativePageViews(\n\tid: ExperimentId\n): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getDaysRunning( id: ExperimentId ): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getExperimentResultsStatus(\n\tid: ExperimentId\n): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getConversionRatesOfAlternativesInGoal(\n\tid: ExperimentId\n): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\nimport { addQueryArgs } from '@safe-wordpress/url';\n\n/**\n * External dependencies\n */\nimport type {\n\tEntityKindName,\n\tMenuId,\n\tMenu,\n\tPaginatedResults,\n\tTheme,\n\tTemplate,\n\tTemplateContextGroup,\n\tTemplateContextGroupName,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getActivePlugins(): Promise< void > {\n\ttry {\n\t\tconst plugins = await apiFetch< ReadonlyArray< string > >( {\n\t\t\tpath: '/nab/v1/plugins',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receivePlugins( plugins );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to retrieve active plugins. Error: ${ message }`\n\t\t);\n\t}\n}\n\nexport async function hasMenus(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch< PaginatedResults< Menu > >( {\n\t\t\tpath: '/nab/v1/menu/search?query',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveMenus( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to check if site has menus. Error: ${ message }`\n\t\t);\n\t}\n}\n\nexport async function getMenu( id: MenuId ): Promise< void > {\n\ttry {\n\t\tconst record = await apiFetch< Menu >( {\n\t\t\tpath: `/nab/v1/menu/${ id }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveMenus( record );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Unable to retrieve menu ${ id }. Error: ${ message }` );\n\t}\n}\n\nexport async function getTemplateContexts(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch<\n\t\t\tPaginatedResults<\n\t\t\t\tRecord< TemplateContextGroupName, TemplateContextGroup >\n\t\t\t>\n\t\t>( {\n\t\t\tpath: addQueryArgs( `/nab/v1/template-contexts` ),\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveTemplateContexts( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to retrieve template contexts. Error: ${ message }`\n\t\t);\n\t}\n}\n\nexport async function getTemplates(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch<\n\t\t\tPaginatedResults<\n\t\t\t\tRecord< EntityKindName, ReadonlyArray< Template > >\n\t\t\t>\n\t\t>( {\n\t\t\tpath: addQueryArgs( `/nab/v1/templates` ),\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveTemplates( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Unable to retrieve templates. Error: ${ message }` );\n\t}\n}\n\nexport async function getThemes(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch<\n\t\t\tPaginatedResults< ReadonlyArray< Theme > >\n\t\t>( {\n\t\t\tpath: `/nab/v1/themes`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveThemes( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Unable to retrieve themes. Error: ${ message }` );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\nimport type { Quota } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getQuota(): Promise< void > {\n\ttry {\n\t\tconst quota = await apiFetch< Quota >( {\n\t\t\tpath: '/nab/v1/site/quota',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveSiteQuota( quota );\n\t} catch ( error ) {\n\t\tawait createErrorNotice(\n\t\t\t_x( 'Unable to retrieve quota.', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tthrow error;\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { dispatch, select, subscribe } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { keyBy, find } from 'lodash';\nimport { getDate, format, date as formatDate } from '@nab/date';\nimport { getValue, setValue } from '@nab/utils';\nimport type {\n\tAlternativeId,\n\tAlternativeTrackingData,\n\tCloudAlternativeResults,\n\tCloudDayResults,\n\tCloudResults,\n\tCloudSegmentResults,\n\tDayResults,\n\tGoal,\n\tExperiment,\n\tResults,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store } from './index';\nimport type { State } from './types';\n\nexport function syncPageAttributeWithLocalStore<\n\tAttr extends keyof State[ 'page' ],\n>( attr: Attr, defaultValue: State[ 'page' ][ Attr ] ): void {\n\tvoid dispatch( store ).setPageAttribute(\n\t\tattr,\n\t\tgetValue( attr, defaultValue )\n\t);\n\tlet prevValue = select( store ).getPageAttribute( attr ) ?? defaultValue;\n\tsubscribe( () => {\n\t\tconst value = select( store ).getPageAttribute( attr ) ?? defaultValue;\n\t\tif ( value === prevValue ) {\n\t\t\treturn;\n\t\t}\n\t\tprevValue = value;\n\t\tsetValue( attr, value );\n\t}, store );\n}\n\nexport function differenceInDays(\n\td1: string | Date,\n\td2: string | Date\n): number {\n\tif ( 'string' === typeof d1 ) {\n\t\td1 = new Date( d1 );\n\t}\n\n\tif ( 'string' === typeof d2 ) {\n\t\td2 = new Date( d2 );\n\t}\n\n\tconst now = new Date();\n\tif ( ! d1 || isNaN( d1.getTime() ) ) {\n\t\td1 = now;\n\t}\n\n\tif ( ! d2 || isNaN( d2.getTime() ) ) {\n\t\td2 = now;\n\t}\n\n\tconst diffTime = Math.abs( d2.getTime() - d1.getTime() );\n\treturn Math.ceil( diffTime / ( 1000 * 60 * 60 * 24 ) );\n}\n\nexport function processResult(\n\tdata: CloudResults,\n\texperiment: Experiment\n): Results {\n\treturn {\n\t\twinners: extractWinnersInfo( data.results || {}, experiment.goals ),\n\t\twasEnoughData: extractWhetherThereWasEnoughData(\n\t\t\tdata.results || {},\n\t\t\texperiment.goals\n\t\t),\n\t\talternatives: extractAlternativesInfo( data, experiment ),\n\t\tsegments: processResultOfSegments( data, experiment ),\n\t\t...( data.uniqueResults && {\n\t\t\twinnersUnique: extractWinnersInfo(\n\t\t\t\tdata.uniqueResults || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t\twasEnoughDataUnique: extractWhetherThereWasEnoughData(\n\t\t\t\tdata.uniqueResults || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t} ),\n\t};\n}\n\nfunction processResultOfSegments(\n\tdata: CloudResults,\n\texperiment: Experiment\n): Results[ 'segments' ] {\n\tconst { segments } = experiment;\n\tconst EMPTY_SEGMENT_RESULTS = { results: {} };\n\n\treturn keyBy(\n\t\tsegments.map( ( segment, index ) => ( {\n\t\t\twinners: extractWinnersInfo(\n\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.results || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t\twasEnoughData: extractWhetherThereWasEnoughData(\n\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.results || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t\talternatives: extractAlternativesInfo(\n\t\t\t\tdata.segments?.[ `s${ index + 1 }` ] || EMPTY_SEGMENT_RESULTS,\n\t\t\t\texperiment\n\t\t\t),\n\t\t\t...( data.segments?.[ `s${ index + 1 }` ]?.uniqueResults && {\n\t\t\t\twinnersUnique: extractWinnersInfo(\n\t\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.uniqueResults || {},\n\t\t\t\t\texperiment.goals\n\t\t\t\t),\n\t\t\t\twasEnoughDataUnique: extractWhetherThereWasEnoughData(\n\t\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.uniqueResults || {},\n\t\t\t\t\texperiment.goals\n\t\t\t\t),\n\t\t\t} ),\n\t\t\tid: segment.id,\n\t\t} ) ),\n\t\t'id'\n\t);\n}\n\nfunction extractWinnersInfo(\n\tresults: CloudSegmentResults[ 'results' ],\n\tgoals: ReadonlyArray< Goal >\n): Results[ 'winners' ] {\n\tconst winners: Results[ 'winners' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst data = results[ `g${ i }` ] || false;\n\n\t\tif ( data && 'win' === data.status ) {\n\t\t\twinners[ goalId ] = {\n\t\t\t\talternative: data.winner,\n\t\t\t\tconfidence: data.confidence,\n\t\t\t};\n\t\t}\n\t}\n\n\treturn winners;\n}\n\nfunction extractWhetherThereWasEnoughData(\n\tresults: CloudSegmentResults[ 'results' ],\n\tgoals: ReadonlyArray< Goal >\n): Results[ 'wasEnoughData' ] {\n\tconst enoughData: Results[ 'wasEnoughData' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst data = results[ `g${ i }` ];\n\t\tenoughData[ goalId ] = 'low-data' !== data?.status;\n\t}\n\n\treturn enoughData;\n}\n\nfunction extractAlternativesInfo(\n\tdata: CloudSegmentResults,\n\texperiment: Experiment\n): Results[ 'alternatives' ] {\n\tconst { alternatives } = experiment;\n\tconst endDate =\n\t\t'finished' === experiment.status\n\t\t\t? getDate( experiment.endDate || '' )\n\t\t\t: new Date();\n\tconst formattedEndDate = formatDate( 'Y-m-d', endDate );\n\n\treturn {\n\t\tcontrol: setAlternativeTrackingData( {}, 'control', '', '', [] ),\n\t\t...keyBy(\n\t\t\talternatives.map( ( alternative, index ) =>\n\t\t\t\tsetAlternativeTrackingData(\n\t\t\t\t\tdata[ `a${ index }` ] || {},\n\t\t\t\t\talternative.id,\n\t\t\t\t\texperiment.startDate,\n\t\t\t\t\tformattedEndDate,\n\t\t\t\t\texperiment.goals\n\t\t\t\t)\n\t\t\t),\n\t\t\t'id'\n\t\t),\n\t};\n}\n\nfunction setAlternativeTrackingData(\n\tdata: CloudAlternativeResults,\n\tid: AlternativeId,\n\tstartDate: string,\n\tendDate: string,\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData {\n\treturn {\n\t\tid,\n\t\tvisits: data.v || 0,\n\t\tvalues: fixConversionValues( data.cv, goals ),\n\t\tconversions: fixConversionCounts( data.c, goals ),\n\t\tconversionRates: fixConversionRates( data.cr, goals ),\n\t\timprovementFactors: fixImprovementFactors( data.i, goals ),\n\n\t\tuniqueVisits: data.uv || 0,\n\t\tuniqueValues: fixConversionValues( data.ucv, goals ),\n\t\tuniqueConversions: fixConversionCounts( data.uc, goals ),\n\t\tuniqueConversionRates: fixConversionRates( data.ucr, goals ),\n\t\tuniqueImprovementFactors: fixImprovementFactors( data.ui, goals ),\n\n\t\ttimeline: fixTimelineData( data.t, startDate, endDate, goals ),\n\t};\n}\n\nfunction fixConversionValues(\n\tvalues: CloudAlternativeResults[ 'cv' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'conversions' ] {\n\tconst result: AlternativeTrackingData[ 'conversions' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tresult[ goalId ] = values?.[ `g${ i }` ] || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixConversionCounts(\n\tconversions: CloudAlternativeResults[ 'c' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'conversions' ] {\n\tconst result: AlternativeTrackingData[ 'conversions' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tresult[ goalId ] = conversions?.[ `g${ i }` ] || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixConversionRates(\n\tconversionRates: CloudAlternativeResults[ 'cr' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'conversionRates' ] {\n\tconst result: AlternativeTrackingData[ 'conversionRates' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst cr = conversionRates?.[ `g${ i }` ] || 0;\n\t\tresult[ goalId ] = Math.round( cr * 100 ) / 100 || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixImprovementFactors(\n\timprovementFactors: CloudAlternativeResults[ 'i' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'improvementFactors' ] {\n\tconst result: AlternativeTrackingData[ 'improvementFactors' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst factor = improvementFactors?.[ `g${ i }` ] || 0;\n\t\tresult[ goalId ] = Math.round( factor * 100 ) / 100 || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixTimelineData(\n\ttimeline: CloudAlternativeResults[ 't' ],\n\tstartDate: string,\n\tendDate: string,\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'timeline' ] {\n\tconst result: DayResults[] = [];\n\tconst day = getDate( startDate );\n\tlet dayLabel;\n\n\tdo {\n\t\tdayLabel = format( 'Y-m-d', day );\n\t\tconst cloudDayResults = findDayResults( timeline, dayLabel );\n\t\tconst dayResults = fixDayResults( cloudDayResults, goals );\n\t\tresult.push( dayResults );\n\t\tday.setDate( day.getDate() + 1 );\n\t} while ( endDate > dayLabel );\n\n\treturn result;\n}\n\nfunction findDayResults(\n\ttimeline: CloudAlternativeResults[ 't' ],\n\tdate: string\n): CloudDayResults {\n\tconst result = find( timeline, { d: date } ) || {};\n\t// NOTE. We need the explicit cast because TypeScript doesn't understand that d is and can be a string.\n\treturn { v: 0, ...result, d: date } as CloudDayResults;\n}\n\nfunction fixDayResults(\n\tdata: CloudDayResults,\n\tgoals: ReadonlyArray< Goal >\n): DayResults {\n\tconst result: DayResults = {\n\t\tvisits: data.v || 0,\n\t\tdate: data.d,\n\t\tconversions: {},\n\t\tvalues: {},\n\t\tuniqueVisits: data.uv || 0,\n\t\tuniqueConversions: {},\n\t\tuniqueValues: {},\n\t};\n\n\tconst numberOfGoals = goals.length;\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tresult.conversions[ goalId ] = data[ `g${ i }` ] || 0;\n\t\tresult.values[ goalId ] = data[ `val${ i }` ] || 0;\n\t\tresult.uniqueConversions[ goalId ] = data[ `ug${ i }` ] || 0;\n\t\tresult.uniqueValues[ goalId ] = data[ `uval${ i }` ] || 0;\n\t}\n\n\treturn result;\n}\n","export const getPostTypeExceptions = ( {\n\tisWooCommerceEnabled,\n}: {\n\tisWooCommerceEnabled: boolean;\n} ): ReadonlyArray< string > => [\n\t'page',\n\t'post',\n\t'attachment',\n\t'nelio_popup',\n\t'nelio_form',\n\t'elementor_library',\n\t'e-floating-buttons',\n\t'nab_elementor_popup',\n\t'sc_product',\n\t'wp_block',\n\t...( isWooCommerceEnabled ? [ 'product', 'product_variation' ] : [] ),\n];\n","/**\n * WordPress dependencies\n */\nimport baseApiFetch from '@wordpress/api-fetch';\nimport { format } from '@wordpress/date';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport type { APIFetchOptions } from '@wordpress/api-fetch';\n\nconst apiFetch = < T >( options: APIFetchOptions ): Promise< T > => {\n\tconst { url, path } = options;\n\tconst nabts = format( 'YmjHi' ).substring( 0, 11 ) + '0';\n\treturn baseApiFetch( {\n\t\t...options,\n\t\t...( url && {\n\t\t\turl: isRestApiRequest( options )\n\t\t\t\t? addQueryArgs( url, { nabts } )\n\t\t\t\t: url,\n\t\t} ),\n\t\t...( path && { path: addQueryArgs( path, { nabts } ) } ),\n\t\tparse: true,\n\t} );\n};\n\nexport * from '@wordpress/api-fetch';\nexport default apiFetch;\n\n// =======\n// HELPERS\n// =======\nconst isRestApiRequest = ( options: APIFetchOptions ): boolean =>\n\t!! options.url?.includes( '/wp-json/' ) ||\n\t!! options.url?.includes( 'rest_route' ) ||\n\t!! Object.keys( options ).includes( 'rest_route' );\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * WordPress dependencies\n */\nexport * from '@wordpress/data';\nimport {\n\tregister as doRegister,\n\tresolveSelect as doResolveSelect,\n\tsubscribe as doSubscribe,\n\tuseSelect as doUseSelect,\n} from '@wordpress/data';\nimport type {\n\tMapSelect,\n\tReduxStoreConfig,\n\tStoreDescriptor,\n\tUseSelectReturn,\n} from '@wordpress/data/build-types/types';\n\n// ==========\n// TYPESCRIPT\n// ==========\n\n// register should exist.\nexport function register(\n\tstore: StoreDescriptor< ReduxStoreConfig< any, any, any > >\n): void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call\n\tdoRegister( store );\n}\n\n// subscribe should exist.\nexport function subscribe(\n\tlistener: () => void,\n\tstore?: StoreDescriptor< any > | string\n): () => void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doSubscribe( listener, store );\n}\n\n// useSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function useSelect< T extends MapSelect | StoreDescriptor< any > >(\n\tmapSelect: T,\n\tdependencies?: unknown[]\n): UseSelectReturn< T > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\treturn doUseSelect< T >( mapSelect, dependencies );\n}\n\n// resolveSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function resolveSelect< T extends StoreDescriptor< any > >(\n\tkey: T\n): ResolvableSelectors< UseSelectReturn< T > > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doResolveSelect( key );\n}\n\ntype ResolvableSelectors<\n\tS extends Record< string, ( ...args: any[] ) => any >,\n> = {\n\treadonly [ K in keyof S ]: S[ K ] extends {\n\t\tPromisedSignature: ( ...args: any[] ) => any;\n\t}\n\t\t? S[ K ][ 'PromisedSignature' ]\n\t\t: S[ K ] extends ( ...args: infer A ) => infer R\n\t\t? ( ...args: A ) => Promise< R >\n\t\t: never;\n};\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/html-entities';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/i18n';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/url';\n","module.exports = window[\"nab\"][\"date\"];","module.exports = window[\"nab\"][\"utils\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"lodash\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["useDispatch","useSelect","store","NAB_DATA","useExperimentAttribute","attr","defaultValue","select","getPageAttribute","getExperimentAttribute","exp","_a","usePageAttribute","value","setPageAttribute","setValue","v","usePluginSetting","getPluginSetting","useAdminUrl","path","args","getAdminUrl","castArray","receiveKindEntitiesQuery","kindEntities","type","receiveEntityRecords","kind","records","items","changeLastAppliedAlternative","experimentId","alternativeId","receiveExperiment","key","experiment","receiveFSCurrency","currency","receiveFSProducts","products","receiveFSSubscriptionId","subscriptionId","receiveMediaUrl","id","url","name","lock","unlock","receiveExperimentResult","result","setToday","today","setSiteLanguage","language","receivePlugins","plugins","receiveMenus","menus","receiveTemplateContexts","templateContexts","receiveTemplates","templates","receiveThemes","themes","receivePluginSettings","settings","receiveECommerceSettings","ecommerce","updateAiSettings","receiveSiteQuota","quota","INIT_STATE","entities","config","data","experiments","fastspring","media","page","isLocked","sidebarDimensions","top","height","applyFix","results","nelio","adminUrl","apiUrl","areAutoTutorialsEnabled","areSubscriptionControlsDisabled","capabilities","goalTracking","homeUrl","isCookieTestingEnabled","maxCombinations","minConfidence","minSampleSize","restUrl","segmentEvaluation","siteId","subscription","themeSupport","widgets","woocommerce","currencyPosition","currencySymbol","decimalSeparator","numberOfDecimals","orderStatuses","thousandsSeparator","edd","siteQuota","undefined","controls","createReduxStore","dispatch","register","format","reducer","selectors","realActions","sideEffects","resolvers","syncPageAttributeWithLocalStore","actions","Object","assign","Date","keyBy","state","action","actualReducer","createAlternative","createGoal","alternatives","maybeAddDefaultAlternatives","goals","segments","map","isLastApplied","aid","a","defaultOriginal","defaultFirstAlt","length","combineReducers","sortBy","aiSettings","_","get","getKindEntities","getEntityRecord","getExperiment","_getExperimentAttribute","attribute","getDefaultGoal","getECommercePlugin","goalId","isWooCommerceGoal","isEddGoal","goal","find","g","_b","conversionActions","every","getCurrency","getProducts","getSubscriptionId","getMediaUrl","_getPageAttribute","values","differenceInDays","getExperimentResults","getWinnersInExperiment","areResultsUnique","areUniqueResultsVisible","activeSegment","winnerKey","getAlternativeResultsInExperiment","getPageViews","getUniquePageViews","getTotalPageViews","resultsOfAlternatives","reduce","memo","alternative","visits","uniqueVisits","getAlternativePageViews","getConversions","gid","_c","_d","uniqueConversions","conversions","getTotalRevenue","uniqueValues","getDaysRunning","startDate","endDate","status","getExperimentResultsStatus","requiredConfidence","winner","_f","_e","confidence","getWinnerAlternative","getConversionRatesOfAlternativesInGoal","uniqueConversionRates","conversionRates","getRevenuesOfAlternativesInGoal","getResultsOfAlternatives","shouldShowUniqueResults","areUniqueResultsAvailable","some","addQueryArgs","keys","make","isDefined","getToday","getSiteLanguage","getActivePlugins","hasMenus","getMenu","getTemplateContexts","getTemplates","getThemes","filter","hasCapability","capability","includes","_getPluginSetting","getRestUrl","replace","getECommerceSetting","_getECommerceSetting","plugin","canLimitSiteQuota","isSubscribedTo","plan","mode","actualPlan","plans","expectedIndex","indexOf","actualIndex","getQuota","apiFetch","resolveSelect","decodeEntities","_x","sprintf","groupBy","mapValues","omit","toPairs","uniq","v4","uuid","getContentMetrics","getContentSummary","getLetter","getPostTypeExceptions","MAX_PAGES","MAX_ITEMS_PER_TYPE","MIN_RUN_TIME_FOR_ASYNC_CALLBACK","searchTestCandidates","validExperimentTypes","newAiSettings","previousAiSettings","Error","breathe","saveAiSettings","error","setState","reason","getErrorCode","currentAiSettings","abTesting","getAbTestingData","getCachedCandidates","aiAnalysis","base","candidates","expandFirstCandidate","siteAnalysis","stateId","testing","analyzeSite","baseCandidates","processSiteAnalysis","generateTestHypotheses","candidate","hypothesisState","updateCandidate","isVisible","loadTestHypotheses","metaInformation","createTestFromHypothesis","hypothesis","t","testType","baseExperiment","createExperiment","defaultGoal","supports","automaticGoalSetup","attributes","scope","controlUrl","saveExperiment","description","ai","version","basedOnNelioAIHypothesis","postId","control","postType","links","variants","alt","isReady","changes","analytics","getMostViewedItems","context","pages","getPages","customPosts","getCustomPosts","blogAnalysis","getBlogAnalysis","woocommerceAnalysis","getWooCommerceAnalysis","content","post","posts","product","blog","info","urlAnalytics","monthlyViews","what","method","itemsToLoad","i","p","settledPromises","Promise","allSettled","postIds","getItemsInType","validSettledPromises","postsByType","ps","flatMap","itemsByType","PENDING_HYPOTHESIS_STATE","finalCandidates","attrs","__rest","item","c","hypotheses","h","relatedTests","e","analysis","step","isSearchingCandidates","setTimeout","rationale","priority","hypothesisGeneration","firstCandidate","firstCandidateWithHypotheses","contentSummary","names","suggestedHypotheses","unsortedHypotheses","currentState","wpPost2aiPost","title","rendered","link","contentMetrics","publicationDate","date","lastUpdate","modified","seoTitle","yoast_head_json","trim","seoDescription","_h","_g","privacy","postTypes","getItemsUnsafe","experimentTypes","maxItems","wpApiSettings","window","response","fetch","root","getLastYear","headers","nonce","credentials","totalPostsInLastYear","Number","parseInt","averagePostsPerMonth","kinds","postTypeExceptions","isWooCommerceEnabled","k","startsWith","relevantIds","heatmaps","trackingMode","trackedPostType","trackedPostId","restType","relevantItems","join","excludedIds","pendingItemCount","Math","max","remainingItems","bestSellers","getBestSellers","latestOrders","getLatestOrders","randomProducts","missingProductIds","o","missingProducts","enabled","allExperiments","getLatestExperiments","getVariantLabel","getGoalLabel","ca","trackedUrl","aux","document","createElement","rows","r","innerHTML","display","querySelector","href","matches","match","quantity","includeOrders","includeWooCommerceOrderInfo","latestOrdersRaw","date_created","total","line_items","product_id","wpProduct2aiProduct","permalink","price","date_modified","toISOString","setFullYear","getFullYear","index","variantName","prefix","goalName","callback","start","now","elapsed","delay","ids","addTestedPostScopeRule","code","console","createErrorNotice","stopExperiment","stoppedExperiment","newAlternatives","newExperiment","updateLinksKeepingPreviewAndHeatmap","pauseExperiment","location","applyAlternative","setPublicResultStatus","changedStatus","oldAlternative","newAlternative","heatmap","preview","purchaseQuota","reload","warn","entity","record","message","__awaiter","source_url","processResult","subscribe","getDate","formatDate","getValue","prevValue","d1","d2","isNaN","getTime","diffTime","abs","ceil","winners","extractWinnersInfo","wasEnoughData","extractWhetherThereWasEnoughData","extractAlternativesInfo","processResultOfSegments","uniqueResults","winnersUnique","wasEnoughDataUnique","EMPTY_SEGMENT_RESULTS","segment","_j","_l","_k","numberOfGoals","enoughData","formattedEndDate","setAlternativeTrackingData","fixConversionValues","cv","fixConversionCounts","fixConversionRates","cr","improvementFactors","fixImprovementFactors","uv","ucv","uc","ucr","uniqueImprovementFactors","ui","timeline","fixTimelineData","round","factor","day","dayLabel","cloudDayResults","findDayResults","dayResults","fixDayResults","push","setDate","d","baseApiFetch","options","nabts","substring","isRestApiRequest","parse","doRegister","doResolveSelect","doSubscribe","doUseSelect","listener","mapSelect","dependencies"],"ignoreList":[],"sourceRoot":""}