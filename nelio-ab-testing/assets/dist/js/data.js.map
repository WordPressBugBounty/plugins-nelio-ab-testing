{"version":3,"file":"js/data.js","mappings":";;;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY,GAAG,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,MAAM;AACpD;AACA,IAAI;AACJ,eAAe;AACf,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;;;;;;;;;;;;;;;ACtDZ;AACA,iEAAe,EAAE,YAAY,EAAC;;;;;;;;;;;;;;;;ACD9B,iEAAe,cAAc,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAAE,UAAU,GAAG,8EAA8E,EAAC;;;;;;;;;;;;;;;;ACA1K;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACVqC;AACrC;AACA,gBAAgB,SAAS;AACzB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,wDAAQ;AACjB;AACA;AACA;AACA;AACA,iEAAe,SAAS,EAAC;;;;;;;;;;;;;;;;;;;AClCQ;AACN;AACsB;AACjD;AACA,QAAQ,kDAAM;AACd,eAAe,kDAAM;AACrB;AACA;AACA,sDAAsD,mDAAG;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,GAAG,aAAa;AAC3E;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,WAAW,8DAAe;AAC1B;AACA,iEAAe,EAAE,EAAC;;;;;;;;;;;;;;;;;AC1Ba;AAC/B;AACA,uCAAuC,iDAAK;AAC5C;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;;;;;;;;;;ACJxB;;;AAG8D;AACR;AAOtD;;;AAG4C;AAGt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","sources":["webpack://nab/./node_modules/ts-brand/lib/index.js","webpack://nab/./node_modules/uuid/dist/esm-browser/native.js","webpack://nab/./node_modules/uuid/dist/esm-browser/regex.js","webpack://nab/./node_modules/uuid/dist/esm-browser/rng.js","webpack://nab/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://nab/./node_modules/uuid/dist/esm-browser/v4.js","webpack://nab/./node_modules/uuid/dist/esm-browser/validate.js","webpack://nab/./packages/data/hooks.ts","webpack://nab/./packages/data/index.ts","webpack://nab/./packages/data/store/actions/entities.ts","webpack://nab/./packages/data/store/actions/experiment.ts","webpack://nab/./packages/data/store/actions/fastspring.ts","webpack://nab/./packages/data/store/actions/index.ts","webpack://nab/./packages/data/store/actions/media.ts","webpack://nab/./packages/data/store/actions/page.ts","webpack://nab/./packages/data/store/actions/results.ts","webpack://nab/./packages/data/store/actions/settings.ts","webpack://nab/./packages/data/store/actions/site-quota.ts","webpack://nab/./packages/data/store/config.ts","webpack://nab/./packages/data/store/index.ts","webpack://nab/./packages/data/store/reducer/entities.ts","webpack://nab/./packages/data/store/reducer/experiments.ts","webpack://nab/./packages/data/store/reducer/fastspring.ts","webpack://nab/./packages/data/store/reducer/index.ts","webpack://nab/./packages/data/store/reducer/media.ts","webpack://nab/./packages/data/store/reducer/page.ts","webpack://nab/./packages/data/store/reducer/results.ts","webpack://nab/./packages/data/store/reducer/settings.ts","webpack://nab/./packages/data/store/reducer/site-quota.ts","webpack://nab/./packages/data/store/selectors/entities.ts","webpack://nab/./packages/data/store/selectors/experiment.ts","webpack://nab/./packages/data/store/selectors/fastspring.ts","webpack://nab/./packages/data/store/selectors/index.ts","webpack://nab/./packages/data/store/selectors/media.ts","webpack://nab/./packages/data/store/selectors/page.ts","webpack://nab/./packages/data/store/selectors/results.ts","webpack://nab/./packages/data/store/selectors/settings.ts","webpack://nab/./packages/data/store/selectors/site-quota.ts","webpack://nab/./packages/data/store/side-effects/actions/ai/index.ts","webpack://nab/./packages/data/store/side-effects/actions/ai/test-generation.ts","webpack://nab/./packages/data/store/side-effects/actions/experiment.ts","webpack://nab/./packages/data/store/side-effects/actions/fastspring.ts","webpack://nab/./packages/data/store/side-effects/actions/index.ts","webpack://nab/./packages/data/store/side-effects/resolvers/entities.ts","webpack://nab/./packages/data/store/side-effects/resolvers/experiment.ts","webpack://nab/./packages/data/store/side-effects/resolvers/fastspring.ts","webpack://nab/./packages/data/store/side-effects/resolvers/index.ts","webpack://nab/./packages/data/store/side-effects/resolvers/media.ts","webpack://nab/./packages/data/store/side-effects/resolvers/results.ts","webpack://nab/./packages/data/store/side-effects/resolvers/settings.ts","webpack://nab/./packages/data/store/side-effects/resolvers/site-quota.ts","webpack://nab/./packages/data/store/types.ts","webpack://nab/./packages/data/store/utils.ts","webpack://nab/./packages/experiment-library/custom-post-type/get-post-type-exceptions.ts","webpack://nab/./packages/safe-wordpress/api-fetch.ts","webpack://nab/./packages/safe-wordpress/data.ts","webpack://nab/./packages/safe-wordpress/element.ts","webpack://nab/./packages/safe-wordpress/html-entities.ts","webpack://nab/./packages/safe-wordpress/i18n.ts","webpack://nab/./packages/safe-wordpress/url.ts","webpack://nab/external window [\"nab\",\"date\"]","webpack://nab/external window [\"nab\",\"utils\"]","webpack://nab/external window [\"wp\",\"apiFetch\"]","webpack://nab/external window [\"wp\",\"data\"]","webpack://nab/external window [\"wp\",\"date\"]","webpack://nab/external window [\"wp\",\"element\"]","webpack://nab/external window [\"wp\",\"htmlEntities\"]","webpack://nab/external window [\"wp\",\"i18n\"]","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/external window \"lodash\"","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./packages/data/export.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.make = exports.identity = void 0;\n/**\n * A generic function that, when given some branded type, can take a value with\n * the base type of the branded type, and cast that value to the branded type.\n * It fulfills the contract of a `Brander`.\n *\n * At runtime, this function simply returns the value as-is.\n *\n * @param underlying The value with a base type, to be casted\n * @return The same underlying value, but casted\n * @example\n * ```\n * type UserId = Brand<number, 'user'>;\n * const UserId: Brander<UserId> = identity;\n * ```\n */\nfunction identity(underlying) {\n    return underlying;\n}\nexports.identity = identity;\n/**\n * Produces a `Brander<B>`, given a brand type `B`. By default this returns\n * `identity` and relies on type inference to give the return type the correct\n * type. Optionally, `validator` can be used to assert on the value.\n *\n * @example\n * ```\n * type UserId = Brand<number, 'user'>;\n * const UserId = make<UserId>();\n * const myUserId = UserId(42);\n * ```\n * @example\n * ```\n * type UserId = Brand<number, 'user'>;\n * const UserId = make<UserId>((value) => {\n *   if (value <= 0) {\n *     throw new Error(`Non-positive value: ${value}`);\n *   }\n * });\n * UserId(42); // Ok\n * UserId(-1); // Error: Non-positive value: -1\n * ```\n */\nfunction make(validator) {\n    if (!validator) {\n        return identity;\n    }\n    return function (underlying) {\n        validator(underlying);\n        return underlying;\n    };\n}\nexports.make = make;\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@safe-wordpress/data';\nimport { useCallback } from '@safe-wordpress/element';\n\n/**\n * External dependencies\n */\nimport type { Experiment } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from './store';\nimport type { State } from './store/types';\n\nexport function useExperimentAttribute< K extends keyof Experiment >(\n\tattr: K,\n\tdefaultValue: Experiment[ K ]\n): Experiment[ K ] {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { getPageAttribute, getExperimentAttribute } =\n\t\t\t\tselect( NAB_DATA );\n\t\t\tconst exp = getPageAttribute( 'editor/activeExperiment' );\n\t\t\treturn exp\n\t\t\t\t? getExperimentAttribute( exp, attr ) ?? defaultValue\n\t\t\t\t: defaultValue;\n\t\t},\n\t\t[ attr, defaultValue ]\n\t);\n}\n\ntype PageAttributes = Required< State[ 'page' ] >;\nexport function usePageAttribute< A extends keyof PageAttributes >(\n\tattr: A,\n\tdefaultValue: PageAttributes[ A ]\n): [ PageAttributes[ A ], ( v: PageAttributes[ A ] ) => void ] {\n\tconst value: PageAttributes[ A ] =\n\t\tuseSelect(\n\t\t\t( select ) =>\n\t\t\t\tselect( NAB_DATA ).getPageAttribute(\n\t\t\t\t\tattr\n\t\t\t\t) as PageAttributes[ A ],\n\t\t\t[ attr ]\n\t\t) ?? defaultValue;\n\n\tconst { setPageAttribute } = useDispatch( NAB_DATA );\n\tconst setValue = useCallback(\n\t\t( v: PageAttributes[ A ] ) => setPageAttribute( attr, v ),\n\t\t[ attr, setPageAttribute ]\n\t);\n\n\treturn [ value, setValue ];\n} // ennd usePageAttribute()\n\ntype PluginSettings = State[ 'settings' ][ 'nelio' ];\nexport function usePluginSetting< A extends keyof PluginSettings >(\n\tattr: A\n): PluginSettings[ A ] {\n\treturn useSelect(\n\t\t( select ) => select( NAB_DATA ).getPluginSetting( attr ),\n\t\t[ attr ]\n\t);\n} // ennd usePageAttribute()\n\nexport const useAdminUrl = (\n\tpath: string,\n\targs: Record< string, string | boolean | number >\n): string =>\n\tuseSelect(\n\t\t( select ) => select( NAB_DATA ).getAdminUrl( path, args ),\n\t\t[ path, args ]\n\t);\n","export * from './store';\nexport * from './hooks';\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { EntityInstance, EntityKind, EntityKindName } from '@nab/types';\n\nexport type EntityAction = ReceiveKindEntitiesQuery | ReceiveEntityRecords;\n\nexport function receiveKindEntitiesQuery(\n\tkindEntities: EntityKind | ReadonlyArray< EntityKind >\n): ReceiveKindEntitiesQuery {\n\treturn {\n\t\ttype: 'RECEIVE_TYPE_QUERY',\n\t\tkindEntities: castArray( kindEntities ),\n\t};\n}\n\nexport function receiveEntityRecords(\n\tkind: EntityKindName,\n\trecords: EntityInstance | ReadonlyArray< EntityInstance >\n): ReceiveEntityRecords {\n\treturn {\n\t\ttype: 'RECEIVE_ITEMS',\n\t\titems: castArray( records ),\n\t\tkind,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveKindEntitiesQuery = {\n\treadonly type: 'RECEIVE_TYPE_QUERY';\n\treadonly kindEntities: ReadonlyArray< EntityKind >;\n};\n\ntype ReceiveEntityRecords = {\n\treadonly type: 'RECEIVE_ITEMS';\n\treadonly kind: EntityKindName;\n\treadonly items: ReadonlyArray< EntityInstance >;\n};\n","/**\n * External dependencies\n */\nimport type { AlternativeId, Experiment, ExperimentId } from '@nab/types';\n\nexport type ExperimentAction = ChangeLastAppliedAlternative | ReceiveExperiment;\n\nexport function changeLastAppliedAlternative(\n\texperimentId: ExperimentId,\n\talternativeId: AlternativeId\n): ChangeLastAppliedAlternative {\n\treturn {\n\t\ttype: 'CHANGE_LAST_APPLIED_ALTERNATIVE',\n\t\texperimentId,\n\t\talternativeId,\n\t};\n}\n\nexport function receiveExperiment(\n\tkey: ExperimentId,\n\texperiment: Experiment\n): ReceiveExperiment {\n\treturn {\n\t\ttype: 'RECEIVE_EXPERIMENT',\n\t\tkey,\n\t\texperiment,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ChangeLastAppliedAlternative = {\n\treadonly type: 'CHANGE_LAST_APPLIED_ALTERNATIVE';\n\treadonly experimentId: ExperimentId;\n\treadonly alternativeId: AlternativeId;\n};\n\ntype ReceiveExperiment = {\n\treadonly type: 'RECEIVE_EXPERIMENT';\n\treadonly key: ExperimentId;\n\treadonly experiment: Experiment;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type { FastSpringProduct } from '@nab/types';\n\nexport type FastSpringAction =\n\t| ReceiveFSCurrency\n\t| ReceiveFSProducts\n\t| ReceiveFSSubscriptionId;\n\nexport function receiveFSCurrency( currency: string ): ReceiveFSCurrency {\n\treturn {\n\t\ttype: 'RECEIVE_FS_CURRENCY',\n\t\tcurrency,\n\t};\n}\n\nexport function receiveFSProducts(\n\tproducts: FastSpringProduct | ReadonlyArray< FastSpringProduct >\n): ReceiveFSProducts {\n\treturn {\n\t\ttype: 'RECEIVE_FS_PRODUCTS',\n\t\tproducts: castArray( products ),\n\t};\n}\n\nexport function receiveFSSubscriptionId(\n\tsubscriptionId: string\n): ReceiveFSSubscriptionId {\n\treturn {\n\t\ttype: 'RECEIVE_FS_SUBSCRIPTION_ID',\n\t\tsubscriptionId,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveFSCurrency = {\n\treadonly type: 'RECEIVE_FS_CURRENCY';\n\treadonly currency: string;\n};\n\ntype ReceiveFSProducts = {\n\treadonly type: 'RECEIVE_FS_PRODUCTS';\n\treadonly products: ReadonlyArray< FastSpringProduct >;\n};\n\ntype ReceiveFSSubscriptionId = {\n\treadonly type: 'RECEIVE_FS_SUBSCRIPTION_ID';\n\treadonly subscriptionId: string;\n};\n","export * from './entities';\nexport * from './experiment';\nexport * from './fastspring';\nexport * from './media';\nexport * from './page';\nexport * from './results';\nexport * from './settings';\nexport * from './site-quota';\n","/**\n * External dependencies\n */\nimport type { MediaId, Url } from '@nab/types';\n\nexport type MediaAction = ReceiveMediaUrl;\n\nexport function receiveMediaUrl( id: MediaId, url: Url ): ReceiveMediaUrl {\n\treturn {\n\t\ttype: 'RECEIVE_MEDIA_URL',\n\t\tid,\n\t\turl,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveMediaUrl = {\n\treadonly type: 'RECEIVE_MEDIA_URL';\n\treadonly id: MediaId;\n\treadonly url: Url;\n};\n","/**\n * Internal dependencies\n */\nimport type { State } from '../types';\n\nexport type PageAction = SetPageAttributeAction | Lock | Unlock;\n\nexport function setPageAttribute< K extends keyof State[ 'page' ] >(\n\tname: K,\n\tvalue: State[ 'page' ][ K ]\n): SetPageAttributeAction< K > {\n\treturn {\n\t\ttype: 'SET_PAGE_ATTRIBUTE',\n\t\tname,\n\t\tvalue,\n\t};\n}\n\nexport function lock(): Lock {\n\treturn {\n\t\ttype: 'LOCK_UI',\n\t};\n}\n\nexport function unlock(): Unlock {\n\treturn {\n\t\ttype: 'UNLOCK_UI',\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype SetPageAttributeAction<\n\tK extends keyof State[ 'page' ] = keyof State[ 'page' ],\n> = {\n\treadonly type: 'SET_PAGE_ATTRIBUTE';\n\treadonly name: K;\n\treadonly value: State[ 'page' ][ K ];\n};\n\ntype Lock = {\n\treadonly type: 'LOCK_UI';\n};\n\ntype Unlock = {\n\treadonly type: 'UNLOCK_UI';\n};\n","/**\n * External dependencies\n */\nimport type { ExperimentId, Results } from '@nab/types';\n\nexport type ResultsAction = ReceiveExperimentResult;\n\nexport function receiveExperimentResult(\n\tkey: ExperimentId,\n\tresult: Results\n): ReceiveExperimentResult {\n\treturn {\n\t\ttype: 'RECEIVE_RESULT',\n\t\tkey,\n\t\tresult,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveExperimentResult = {\n\treadonly type: 'RECEIVE_RESULT';\n\treadonly key: ExperimentId;\n\treadonly result: Results;\n};\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\nimport type {\n\tAiSettings,\n\tECommercePlugin,\n\tEntityKindName,\n\tMenu,\n\tPluginSettings,\n\tTemplate,\n\tTemplateContextGroup,\n\tTemplateContextGroupName,\n\tTheme,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport type { ECommerceSettings } from '../types';\n\nexport type SettingsAction =\n\t| SetToday\n\t| SetSiteLanguage\n\t| ReceivePlugins\n\t| ReceiveMenus\n\t| ReceiveTemplateContexts\n\t| ReceiveTemplates\n\t| ReceiveThemes\n\t| ReceivePluginSettings\n\t| ReceiveECommerceSettings\n\t| UpdateAiSettings;\n\nexport function setToday( today: string ): SetToday {\n\treturn {\n\t\ttype: 'SET_TODAY',\n\t\ttoday,\n\t};\n}\n\nexport function setSiteLanguage( language: string ): SetSiteLanguage {\n\treturn {\n\t\ttype: 'SET_SITE_LANGUAGE',\n\t\tlanguage,\n\t};\n}\n\nexport function receivePlugins(\n\tplugins: string | ReadonlyArray< string >\n): ReceivePlugins {\n\treturn {\n\t\ttype: 'RECEIVE_PLUGINS',\n\t\tplugins: castArray( plugins ),\n\t};\n}\n\nexport function receiveMenus(\n\tmenus: Menu | ReadonlyArray< Menu >\n): ReceiveMenus {\n\treturn {\n\t\ttype: 'RECEIVE_MENUS',\n\t\tmenus: castArray( menus ),\n\t};\n}\n\nexport function receiveTemplateContexts(\n\ttemplateContexts: Record< TemplateContextGroupName, TemplateContextGroup >\n): ReceiveTemplateContexts {\n\treturn {\n\t\ttype: 'RECEIVE_TEMPLATE_CONTEXTS',\n\t\ttemplateContexts,\n\t};\n}\n\nexport function receiveTemplates(\n\ttemplates: Record< EntityKindName, ReadonlyArray< Template > >\n): ReceiveTemplates {\n\treturn {\n\t\ttype: 'RECEIVE_TEMPLATES',\n\t\ttemplates,\n\t};\n}\n\nexport function receiveThemes(\n\tthemes: Theme | ReadonlyArray< Theme >\n): ReceiveThemes {\n\treturn {\n\t\ttype: 'RECEIVE_THEMES',\n\t\tthemes: castArray( themes ),\n\t};\n}\n\nexport function receivePluginSettings(\n\tsettings: PluginSettings\n): ReceivePluginSettings {\n\treturn {\n\t\ttype: 'RECEIVE_PLUGIN_SETTINGS',\n\t\tsettings,\n\t};\n}\n\nexport function receiveECommerceSettings(\n\tecommerce: ECommercePlugin,\n\tsettings: ECommerceSettings\n): ReceiveECommerceSettings {\n\treturn {\n\t\ttype: 'RECEIVE_ECOMMERCE_SETTINGS',\n\t\tecommerce,\n\t\tsettings,\n\t};\n}\n\nexport function updateAiSettings( settings: AiSettings ): UpdateAiSettings {\n\treturn {\n\t\ttype: 'UPDATE_AI_SETTINGS',\n\t\tsettings,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype SetToday = {\n\treadonly type: 'SET_TODAY';\n\treadonly today: string;\n};\n\ntype SetSiteLanguage = {\n\treadonly type: 'SET_SITE_LANGUAGE';\n\treadonly language: string;\n};\n\ntype ReceivePlugins = {\n\treadonly type: 'RECEIVE_PLUGINS';\n\treadonly plugins: ReadonlyArray< string >;\n};\n\ntype ReceiveMenus = {\n\treadonly type: 'RECEIVE_MENUS';\n\treadonly menus: ReadonlyArray< Menu >;\n};\n\ntype ReceiveTemplateContexts = {\n\treadonly type: 'RECEIVE_TEMPLATE_CONTEXTS';\n\treadonly templateContexts: Record<\n\t\tTemplateContextGroupName,\n\t\tTemplateContextGroup\n\t>;\n};\n\ntype ReceiveTemplates = {\n\treadonly type: 'RECEIVE_TEMPLATES';\n\treadonly templates: Record< EntityKindName, ReadonlyArray< Template > >;\n};\n\ntype ReceiveThemes = {\n\treadonly type: 'RECEIVE_THEMES';\n\treadonly themes: ReadonlyArray< Theme >;\n};\n\ntype ReceivePluginSettings = {\n\treadonly type: 'RECEIVE_PLUGIN_SETTINGS';\n\treadonly settings: PluginSettings;\n};\n\ntype ReceiveECommerceSettings = {\n\treadonly type: 'RECEIVE_ECOMMERCE_SETTINGS';\n\treadonly ecommerce: ECommercePlugin;\n\treadonly settings: ECommerceSettings;\n};\n\ntype UpdateAiSettings = {\n\treadonly type: 'UPDATE_AI_SETTINGS';\n\treadonly settings: AiSettings;\n};\n","/**\n * External dependencies\n */\nimport type { Quota } from '@nab/types';\n\nexport type SiteAction = ReceiveSiteQuota;\n\nexport function receiveSiteQuota( quota: Quota ): ReceiveSiteQuota {\n\treturn {\n\t\ttype: 'RECEIVE_SITE_QUOTA',\n\t\tquota,\n\t};\n}\n\n// ============\n// HELPER TYPES\n// ============\n\ntype ReceiveSiteQuota = {\n\treadonly type: 'RECEIVE_SITE_QUOTA';\n\treadonly quota: Quota;\n};\n","/**\n * External dependencies\n */\nimport type { SiteId, Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport type { State } from './types';\n\nexport const INIT_STATE: State = {\n\tentities: {\n\t\tconfig: [],\n\t\tdata: {},\n\t},\n\n\texperiments: {},\n\n\tfastspring: {\n\t\tcurrency: 'USD',\n\t\tproducts: [],\n\t\tsubscriptionId: '',\n\t},\n\n\tmedia: {},\n\n\tpage: {\n\t\tisLocked: false,\n\t\tsidebarDimensions: {\n\t\t\ttop: 0,\n\t\t\theight: '100vh',\n\t\t\tapplyFix: true,\n\t\t},\n\t},\n\n\tresults: {},\n\n\tsettings: {\n\t\ttoday: '2013-01-01',\n\t\tlanguage: 'en_US',\n\t\tmenus: {},\n\t\tnelio: {\n\t\t\tadminUrl: '/wp-admin/' as Url,\n\t\t\tapiUrl: '' as Url,\n\t\t\tareAutoTutorialsEnabled: true,\n\t\t\tareSubscriptionControlsDisabled: false,\n\t\t\tcapabilities: [],\n\t\t\tgoalTracking: 'all-pages',\n\t\t\thomeUrl: '/' as Url,\n\t\t\tisCookieTestingEnabled: false,\n\t\t\tmaxCombinations: 24,\n\t\t\tminConfidence: 95,\n\t\t\tminSampleSize: 100,\n\t\t\trestUrl: '' as Url,\n\t\t\tsegmentEvaluation: 'site',\n\t\t\tsiteId: '' as SiteId,\n\t\t\tsubscription: false,\n\t\t\tthemeSupport: {\n\t\t\t\tmenus: false,\n\t\t\t\twidgets: false,\n\t\t\t},\n\t\t},\n\t\tplugins: [],\n\t\ttemplateContexts: {},\n\t\ttemplates: {},\n\t\tthemes: {},\n\t\tecommerce: {\n\t\t\twoocommerce: {\n\t\t\t\tcurrency: 'USD',\n\t\t\t\tcurrencyPosition: 'before',\n\t\t\t\tcurrencySymbol: '$',\n\t\t\t\tdecimalSeparator: '.',\n\t\t\t\tnumberOfDecimals: 2,\n\t\t\t\torderStatuses: [],\n\t\t\t\tthousandsSeparator: ',',\n\t\t\t},\n\t\t\tedd: {\n\t\t\t\tcurrency: 'USD',\n\t\t\t\tcurrencyPosition: 'before',\n\t\t\t\tcurrencySymbol: '$',\n\t\t\t\tdecimalSeparator: '.',\n\t\t\t\tnumberOfDecimals: 2,\n\t\t\t\torderStatuses: [],\n\t\t\t\tthousandsSeparator: ',',\n\t\t\t},\n\t\t},\n\t},\n\n\tsiteQuota: undefined,\n};\n","/**\n * WordPress dependencies\n */\nimport {\n\tcontrols,\n\tcreateReduxStore,\n\tdispatch,\n\tregister,\n\tselect,\n} from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { format } from '@nab/date';\nimport type { WithResolverDispatch, WithResolverSelect } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as realActions from './actions';\nimport * as sideEffects from './side-effects/actions';\nimport * as resolvers from './side-effects/resolvers';\nimport { syncPageAttributeWithLocalStore } from './utils';\n\nexport * from './types';\n\nconst actions = { ...realActions, ...sideEffects };\n\nexport const store = createReduxStore( 'nab/data', {\n\treducer,\n\tcontrols,\n\tactions: actions as WithResolverDispatch<\n\t\ttypeof actions,\n\t\ttypeof resolvers\n\t>,\n\tselectors: selectors as WithResolverSelect<\n\t\ttypeof selectors,\n\t\ttypeof resolvers\n\t>,\n\tresolvers,\n} );\nregister( store );\n\nselect( store ).getPluginSetting( 'siteId' );\nvoid dispatch( store ).setToday( format( 'Y-m-d', new Date() ) );\n\nsyncPageAttributeWithLocalStore( 'results/shouldShowUniqueResults', false );\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { EntityAction as Action } from '../actions/entities';\n\ntype State = FullState[ 'entities' ];\n\nexport function entities(\n\tstate = INIT_STATE.entities,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_TYPE_QUERY': {\n\t\t\tif ( isEqual( state.config, action.kindEntities ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tconfig: action.kindEntities,\n\t\t\t};\n\t\t}\n\n\t\tcase 'RECEIVE_ITEMS': {\n\t\t\tconst newItems = action.items.filter(\n\t\t\t\t( item ) =>\n\t\t\t\t\t! isEqual( state.data[ action.kind ]?.[ item.id ], item )\n\t\t\t);\n\t\t\tif ( ! newItems.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdata: {\n\t\t\t\t\t...state.data,\n\t\t\t\t\t[ action.kind ]: {\n\t\t\t\t\t\t...state.data[ action.kind ],\n\t\t\t\t\t\t...keyBy( newItems, 'id' ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual } from 'lodash';\nimport { createAlternative, createGoal, EMPTY_ARRAY } from '@nab/utils';\nimport type {\n\tAlternative,\n\tAlternativeId,\n\tAnyAction,\n\tExperiment,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { ExperimentAction as Action } from '../actions/experiment';\n\ntype State = FullState[ 'experiments' ];\n\nexport function experiments(\n\tstate = INIT_STATE.experiments,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_EXPERIMENT': {\n\t\t\tconst newExperiment = {\n\t\t\t\t...action.experiment,\n\t\t\t\talternatives: maybeAddDefaultAlternatives(\n\t\t\t\t\taction.experiment.alternatives\n\t\t\t\t),\n\t\t\t\tgoals: action.experiment.goals ?? [ createGoal() ],\n\t\t\t\tsegments: action.experiment.segments || EMPTY_ARRAY,\n\t\t\t};\n\t\t\tif ( isEqual( state[ action.key ], newExperiment ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.key ]: newExperiment,\n\t\t\t};\n\t\t}\n\n\t\tcase 'CHANGE_LAST_APPLIED_ALTERNATIVE':\n\t\t\tconst experiment: Maybe< Experiment > =\n\t\t\t\tstate[ action.experimentId ];\n\t\t\tif ( ! experiment ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst newExperiment = {\n\t\t\t\t...experiment,\n\t\t\t\talternatives: experiment.alternatives.map(\n\t\t\t\t\tisLastApplied( action.alternativeId )\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\t\t) as any as Experiment[ 'alternatives' ],\n\t\t\t};\n\n\t\t\tif ( isEqual( state[ action.experimentId ], newExperiment ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.experimentId ]: newExperiment,\n\t\t\t};\n\t}\n}\n\n// =======\n// HELPERS\n// =======\n\nconst isLastApplied = ( alternativeId: AlternativeId ) =>\n\tfunction < T extends Alternative >( alternative: T ): T {\n\t\tconst newAlternative = {\n\t\t\t...alternative,\n\t\t\tisLastApplied: alternative.id === alternativeId,\n\t\t};\n\t\treturn isEqual( alternative, newAlternative )\n\t\t\t? alternative\n\t\t\t: newAlternative;\n\t};\n\nfunction maybeAddDefaultAlternatives< T extends Experiment[ 'alternatives' ] >(\n\talternatives: T\n): T {\n\tconst defaultOriginal = createAlternative( 'control' );\n\tconst defaultFirstAlt = createAlternative();\n\n\tif ( ! alternatives?.length ) {\n\t\treturn [ defaultOriginal, defaultFirstAlt ] as unknown as T;\n\t}\n\n\tif ( alternatives[ 0 ].id !== 'control' ) {\n\t\treturn [ defaultOriginal, ...alternatives ] as unknown as T;\n\t}\n\n\tif ( 1 === alternatives.length ) {\n\t\treturn [ alternatives[ 0 ], defaultFirstAlt ] as unknown as T;\n\t}\n\n\treturn alternatives;\n}\n","/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { FastSpringAction as Action } from '../actions/fastspring';\n\ntype State = FullState[ 'fastspring' ];\n\nexport function fastspring(\n\tstate = INIT_STATE.fastspring,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_FS_CURRENCY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrency: action.currency,\n\t\t\t};\n\n\t\tcase 'RECEIVE_FS_PRODUCTS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tproducts: action.products,\n\t\t\t};\n\n\t\tcase 'RECEIVE_FS_SUBSCRIPTION_ID':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tsubscriptionId: action.subscriptionId,\n\t\t\t};\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@safe-wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { entities } from './entities';\nimport { experiments } from './experiments';\nimport { fastspring } from './fastspring';\nimport { media } from './media';\nimport { page } from './page';\nimport { results } from './results';\nimport { settings } from './settings';\nimport { siteQuota } from './site-quota';\n\nexport default combineReducers( {\n\tentities,\n\texperiments,\n\tfastspring,\n\tmedia,\n\tpage,\n\tresults,\n\tsettings,\n\tsiteQuota,\n} );\n","/**\n * External dependencies\n */\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { MediaAction as Action } from '../actions/media';\n\ntype State = FullState[ 'media' ];\n\nexport function media( state = INIT_STATE.media, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_MEDIA_URL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.id ]: action.url,\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { PageAction as Action } from '../actions/page';\n\ntype State = FullState[ 'page' ];\n\nexport function page( state = INIT_STATE.page, action: AnyAction ): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_PAGE_ATTRIBUTE': {\n\t\t\tconst { name, value } = action;\n\t\t\tif ( ! name ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tif ( isEqual( state[ name ], value ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ name ]: value,\n\t\t\t};\n\t\t}\n\n\t\tcase 'LOCK_UI':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLocked: true,\n\t\t\t};\n\n\t\tcase 'UNLOCK_UI':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLocked: false,\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { ResultsAction as Action } from '../actions/results';\n\ntype State = FullState[ 'results' ];\n\nexport function results(\n\tstate = INIT_STATE.results,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_RESULT': {\n\t\t\tif ( isEqual( state[ action.key ], action.result ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.key ]: action.result,\n\t\t\t};\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual, keyBy, sortBy } from 'lodash';\nimport { EMPTY_ARRAY } from '@nab/utils';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { SettingsAction as Action } from '../actions/settings';\n\ntype State = FullState[ 'settings' ];\n\nexport function settings(\n\tstate = INIT_STATE.settings,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'SET_TODAY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttoday: action.today,\n\t\t\t};\n\n\t\tcase 'SET_SITE_LANGUAGE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlanguage: action.language,\n\t\t\t};\n\n\t\tcase 'RECEIVE_MENUS': {\n\t\t\tconst newMenus = action.menus.filter(\n\t\t\t\t( menu ) => ! isEqual( state.menus[ menu.id ], menu )\n\t\t\t);\n\t\t\tif ( ! newMenus.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tmenus: {\n\t\t\t\t\t...state.menus,\n\t\t\t\t\t...keyBy( newMenus, 'id' ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tcase 'RECEIVE_PLUGINS':\n\t\t\tif ( isEqual( state.plugins, action.plugins ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tplugins: action.plugins || EMPTY_ARRAY,\n\t\t\t};\n\n\t\tcase 'RECEIVE_TEMPLATE_CONTEXTS':\n\t\t\tif ( isEqual( state.templateContexts, action.templateContexts ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttemplateContexts: action.templateContexts,\n\t\t\t};\n\n\t\tcase 'RECEIVE_TEMPLATES':\n\t\t\tif ( isEqual( state.templates, action.templates ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttemplates: action.templates,\n\t\t\t};\n\n\t\tcase 'RECEIVE_THEMES': {\n\t\t\tconst newThemes = keyBy( action.themes, 'id' );\n\t\t\tif ( isEqual( state.themes, newThemes ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tthemes: newThemes,\n\t\t\t};\n\t\t}\n\n\t\tcase 'RECEIVE_PLUGIN_SETTINGS':\n\t\t\tif ( isEqual( state.nelio, action.settings ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnelio: action.settings,\n\t\t\t};\n\n\t\tcase 'RECEIVE_ECOMMERCE_SETTINGS': {\n\t\t\tconst newEcommerceSettings = {\n\t\t\t\t...state.ecommerce,\n\t\t\t\t[ action.ecommerce ]: {\n\t\t\t\t\t...action.settings,\n\t\t\t\t\torderStatuses: sortBy(\n\t\t\t\t\t\taction.settings.orderStatuses,\n\t\t\t\t\t\t'label'\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t\t\tif ( isEqual( state.ecommerce, newEcommerceSettings ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tecommerce: newEcommerceSettings,\n\t\t\t};\n\t\t}\n\n\t\tcase 'UPDATE_AI_SETTINGS':\n\t\t\tif ( ! state.nelio.aiSettings ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnelio: {\n\t\t\t\t\t...state.nelio,\n\t\t\t\t\taiSettings: action.settings,\n\t\t\t\t},\n\t\t\t};\n\t}\n}\n","/**\n * External dependencies\n */\nimport { isEqual } from 'lodash';\nimport type { AnyAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { INIT_STATE } from '../config';\nimport type { State as FullState } from '../types';\nimport type { SiteAction as Action } from '../actions/site-quota';\n\ntype State = FullState[ 'siteQuota' ];\n\nexport function siteQuota(\n\tstate = INIT_STATE.siteQuota,\n\taction: AnyAction\n): State {\n\treturn actualReducer( state, action as Action ) ?? state;\n}\n\nfunction actualReducer( state: State, action: Action ): State {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_SITE_QUOTA':\n\t\t\treturn isEqual( state, action.quota ) ? state : action.quota;\n\t}\n}\n","/**\n * External dependencies\n */\nimport type {\n\tEntityId,\n\tEntityInstance,\n\tEntityKind,\n\tEntityKindName,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport type { State } from '../types';\n\nexport function getKindEntities( state: State ): ReadonlyArray< EntityKind > {\n\treturn state.entities.config;\n}\n\nexport function getEntityRecord(\n\tstate: State,\n\tkind: EntityKindName,\n\tkey: EntityId\n): Maybe< EntityInstance > {\n\treturn state.entities.data[ kind ]?.[ key ];\n}\n","/**\n * External dependencies\n */\nimport type {\n\tGoal,\n\tGoalId,\n\tECommercePlugin,\n\tExperiment,\n\tExperimentId,\n\tMaybe,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getExperiment(\n\tstate: State,\n\tkey?: ExperimentId\n): Maybe< Experiment > {\n\treturn key ? state.experiments[ key ] : undefined;\n}\n\nexport type GetExperimentAttributeFunction = < K extends keyof Experiment >(\n\tkey: ExperimentId,\n\tattribute: K\n) => Maybe< Experiment[ K ] >;\n\ntype GetExperimentAttribute = typeof _getExperimentAttribute & {\n\tCurriedSignature: < K extends keyof Experiment >(\n\t\tkey: ExperimentId,\n\t\tattribute: K\n\t) => Maybe< Experiment[ K ] >;\n};\nexport const getExperimentAttribute =\n\t_getExperimentAttribute as GetExperimentAttribute;\nfunction _getExperimentAttribute< K extends keyof Experiment >(\n\tstate: State,\n\tkey: ExperimentId,\n\tattribute: K\n): Maybe< Experiment[ K ] > {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn;\n\t}\n\treturn experiment[ attribute ];\n}\n\nexport function getDefaultGoal(\n\tstate: State,\n\tkey: ExperimentId\n): Maybe< Goal > {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn;\n\t}\n\treturn experiment.goals[ 0 ];\n}\n\nexport function getECommercePlugin(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< ECommercePlugin > {\n\tif ( isWooCommerceGoal( state, key, goalId ) ) {\n\t\treturn 'woocommerce';\n\t}\n\n\tif ( isEddGoal( state, key, goalId ) ) {\n\t\treturn 'edd';\n\t}\n\n\treturn undefined;\n}\n\n// ========\n// INTERNAL\n// ========\n\nfunction isWooCommerceGoal(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): boolean {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn false;\n\t}\n\n\tgoalId = goalId ?? getDefaultGoal( state, key )?.id;\n\tconst goal = experiment.goals.find( ( g ) => g.id === goalId );\n\tif ( ! goal ) {\n\t\treturn false;\n\t}\n\n\tconst actions = goal?.conversionActions ?? [];\n\treturn (\n\t\t0 < actions.length &&\n\t\tactions.every( ( { type } ) => type === 'nab/wc-order' )\n\t);\n}\n\nfunction isEddGoal(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): boolean {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment ) {\n\t\treturn false;\n\t}\n\n\tgoalId = goalId ?? getDefaultGoal( state, key )?.id;\n\tconst goal = experiment.goals.find( ( g ) => g.id === goalId );\n\tif ( ! goal ) {\n\t\treturn false;\n\t}\n\n\tconst actions = goal?.conversionActions ?? [];\n\treturn (\n\t\t0 < actions.length &&\n\t\tactions.every( ( { type } ) => type === 'nab/edd-order' )\n\t);\n}\n","/**\n * External dependencies\n */\nimport type { FastSpringProduct, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getCurrency( state: State ): string {\n\treturn state.fastspring.currency;\n}\n\nexport function getProducts(\n\tstate: State\n): ReadonlyArray< FastSpringProduct > {\n\treturn state.fastspring.products;\n}\n\nexport function getSubscriptionId( state: State ): Maybe< string > {\n\treturn state.fastspring.subscriptionId || undefined;\n}\n","export * from './entities';\nexport * from './experiment';\nexport * from './fastspring';\nexport * from './media';\nexport * from './page';\nexport * from './results';\nexport * from './settings';\nexport * from './site-quota';\n","/**\n * External dependencies\n */\nimport type { Maybe, MediaId, Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getMediaUrl( state: State, id: MediaId ): Maybe< Url > {\n\treturn state.media[ id ];\n}\n","/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\ntype GetPageAttribute = typeof _getPageAttribute & {\n\tCurriedSignature: < K extends keyof State[ 'page' ] >(\n\t\tname: K\n\t) => State[ 'page' ][ K ];\n};\nexport const getPageAttribute = _getPageAttribute as GetPageAttribute;\nfunction _getPageAttribute< K extends keyof State[ 'page' ] >(\n\tstate: State,\n\tname: K\n): State[ 'page' ][ K ] {\n\treturn state.page[ name ];\n}\n\nexport function isLocked( state: State ): boolean {\n\treturn getPageAttribute( state, 'isLocked' );\n}\n","/**\n * External dependencies\n */\nimport { values } from 'lodash';\nimport { createIndexedSelector } from '@nab/utils';\nimport type {\n\tAlternativeTrackingData,\n\tAlternativeId,\n\tGoalId,\n\tExperimentId,\n\tMaybe,\n\tResultStatus,\n\tResults,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { differenceInDays } from '../utils';\nimport { getDefaultGoal, getExperiment } from './experiment';\nimport { getPageAttribute } from './page';\nimport { getPluginSetting } from './settings';\nimport { State } from '../types';\n\nexport function getExperimentResults(\n\tstate: State,\n\tkey?: ExperimentId\n): Maybe< Results > {\n\treturn key ? state.results[ key ] : undefined;\n}\n\nexport const getWinnersInExperiment = createIndexedSelector(\n\t( state: State, key: ExperimentId ): Maybe< Results[ 'winners' ] > => {\n\t\tconst results = getExperimentResults( state, key );\n\t\tif ( ! results ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\t\tconst activeSegment =\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\t\tconst winnerKey = areResultsUnique ? 'winnersUnique' : 'winners';\n\t\treturn activeSegment === 'default'\n\t\t\t? results[ winnerKey ]\n\t\t\t: results.segments[ activeSegment ]?.[ winnerKey ];\n\t},\n\t( state: State, key: ExperimentId ) => ( {\n\t\tkey,\n\t\tdependants: [\n\t\t\tgetExperimentResults( state, key ),\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default',\n\t\t\tareUniqueResultsVisible( state, key ),\n\t\t],\n\t} )\n);\n\nexport const getAlternativeResultsInExperiment = createIndexedSelector(\n\t(\n\t\tstate: State,\n\t\tkey: ExperimentId\n\t): Maybe< ReadonlyArray< AlternativeTrackingData > > => {\n\t\tconst results = getExperimentResults( state, key );\n\t\tif ( ! results ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeSegment =\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\t\treturn activeSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\t},\n\t( state: State, key: ExperimentId ) => ( {\n\t\tkey,\n\t\tdependants: [\n\t\t\tgetExperimentResults( state, key ),\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default',\n\t\t],\n\t} )\n);\n\nexport function getPageViews( state: State, key: ExperimentId ): number {\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\treturn areResultsUnique\n\t\t? getUniquePageViews( state, key )\n\t\t: getTotalPageViews( state, key );\n}\n\nexport function getTotalPageViews( state: State, key: ExperimentId ): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results?.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\treturn resultsOfAlternatives.reduce(\n\t\t( memo, alternative ) => memo + alternative.visits,\n\t\t0\n\t);\n}\n\nexport function getUniquePageViews( state: State, key: ExperimentId ): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results?.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\treturn resultsOfAlternatives.reduce(\n\t\t( memo, alternative ) => memo + alternative.uniqueVisits,\n\t\t0\n\t);\n}\n\nexport function getAlternativePageViews(\n\tstate: State,\n\texperimentId: ExperimentId,\n\talternativeId: AlternativeId\n): number {\n\tconst results = getExperimentResults( state, experimentId );\n\tif ( ! results?.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\tconst alternative =\n\t\tactiveSegment === 'default'\n\t\t\t? results.alternatives[ alternativeId ]\n\t\t\t: results.segments[ activeSegment ]?.alternatives[ alternativeId ];\n\tif ( ! alternative ) {\n\t\treturn 0;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, experimentId );\n\treturn areResultsUnique ? alternative.uniqueVisits : alternative.visits;\n}\n\nexport function getConversions(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results || ! results.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn 0;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\treturn resultsOfAlternatives.reduce(\n\t\t( memo, alternative ) =>\n\t\t\tmemo +\n\t\t\t( ( areResultsUnique\n\t\t\t\t? alternative.uniqueConversions[ gid ]\n\t\t\t\t: alternative.conversions[ gid ] ) || 0 ),\n\t\t0\n\t);\n}\n\nexport function getTotalRevenue(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): number {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results || ! results.alternatives ) {\n\t\treturn 0;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn 0;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\tconst resultsOfAlternatives =\n\t\tactiveSegment === 'default'\n\t\t\t? values( results.alternatives )\n\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\treturn resultsOfAlternatives.reduce(\n\t\t( acc, alternative ) =>\n\t\t\tacc +\n\t\t\t( ( areResultsUnique\n\t\t\t\t? alternative.uniqueValues[ gid ]\n\t\t\t\t: alternative.values[ gid ] ) ?? 0 ),\n\t\t0\n\t);\n}\n\nexport function getDaysRunning( state: State, key: ExperimentId ): number {\n\tconst experiment = getExperiment( state, key );\n\tif ( ! experiment?.startDate ) {\n\t\treturn 0;\n\t}\n\n\tconst startDate = experiment.startDate;\n\tlet endDate = '';\n\tif ( 'finished' === experiment.status ) {\n\t\tendDate = experiment.endDate || '';\n\t}\n\n\treturn differenceInDays( startDate, endDate );\n}\n\nexport function getExperimentResultsStatus(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< ResultStatus > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn;\n\t}\n\n\tconst requiredConfidence = getPluginSetting( state, 'minConfidence' );\n\tif ( ! requiredConfidence ) {\n\t\treturn;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\tconst winnerKey = areResultsUnique ? 'winnersUnique' : 'winners';\n\n\tconst winner =\n\t\tactiveSegment === 'default'\n\t\t\t? results[ winnerKey ]?.[ gid ]\n\t\t\t: results.segments[ activeSegment ]?.[ winnerKey ]?.[ gid ];\n\tif ( ! winner ) {\n\t\treturn 'testing';\n\t} else if ( winner.confidence >= requiredConfidence ) {\n\t\treturn 'winner';\n\t}\n\treturn 'possible-winner';\n}\n\nexport function getWinnerAlternative(\n\tstate: State,\n\tkey: ExperimentId,\n\tgoalId?: GoalId\n): Maybe< number > {\n\tconst results = getExperimentResults( state, key );\n\tif ( ! results ) {\n\t\treturn;\n\t}\n\n\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\tif ( ! gid ) {\n\t\treturn;\n\t}\n\n\tconst requiredConfidence = getPluginSetting( state, 'minConfidence' );\n\tif ( ! requiredConfidence ) {\n\t\treturn;\n\t}\n\n\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\tconst activeSegment =\n\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\n\tconst winnerKey = areResultsUnique ? 'winnersUnique' : 'winners';\n\n\tconst winner =\n\t\tactiveSegment === 'default'\n\t\t\t? results[ winnerKey ]?.[ gid ]\n\t\t\t: results.segments[ activeSegment ]?.[ winnerKey ]?.[ gid ];\n\tif ( ! winner || winner.confidence < requiredConfidence ) {\n\t\treturn;\n\t}\n\n\treturn winner.alternative;\n}\n\nexport const getConversionRatesOfAlternativesInGoal = createIndexedSelector(\n\t(\n\t\tstate: State,\n\t\tkey: ExperimentId,\n\t\tgoalId?: GoalId\n\t): Maybe< ReadonlyArray< number > > => {\n\t\tconst results = getExperimentResults( state, key );\n\t\tif ( ! results ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst gid = goalId ?? getDefaultGoal( state, key )?.id;\n\t\tif ( ! gid ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\t\tconst activeSegment =\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\t\tconst resultsOfAlternatives =\n\t\t\tactiveSegment === 'default'\n\t\t\t\t? values( results.alternatives )\n\t\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\t\treturn resultsOfAlternatives.map( ( alternative ) =>\n\t\t\tareResultsUnique\n\t\t\t\t? alternative.uniqueConversionRates[ gid ] || 0\n\t\t\t\t: alternative.conversionRates[ gid ] || 0\n\t\t);\n\t},\n\n\t( state: State, key: ExperimentId, goalId?: GoalId ) => ( {\n\t\tkey: `${ key }-${ goalId }`,\n\t\tdependants: [\n\t\t\tgetExperimentResults( state, key ),\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default',\n\t\t\tareUniqueResultsVisible( state, key ),\n\t\t],\n\t} )\n);\n\nexport const getRevenuesOfAlternativesInGoal = createIndexedSelector(\n\t(\n\t\tstate: State,\n\t\tkey: ExperimentId,\n\t\tgoalId?: GoalId\n\t): Maybe< ReadonlyArray< number > > => {\n\t\tconst results = getExperimentResults( state, key );\n\t\tif ( ! results ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst gid = goalId ?? getDefaultGoal( state, key )?.id ?? '';\n\t\tif ( ! gid ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst areResultsUnique = areUniqueResultsVisible( state, key );\n\t\tconst activeSegment =\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\t\tconst resultsOfAlternatives =\n\t\t\tactiveSegment === 'default'\n\t\t\t\t? values( results.alternatives )\n\t\t\t\t: values( results.segments[ activeSegment ]?.alternatives );\n\n\t\treturn resultsOfAlternatives.map( ( alternative ) =>\n\t\t\tareResultsUnique\n\t\t\t\t? alternative.uniqueValues[ gid ] || 0\n\t\t\t\t: alternative.values[ gid ] || 0\n\t\t);\n\t},\n\t( state: State, key: ExperimentId, goalId?: GoalId ) => ( {\n\t\tkey: `${ key }-${ goalId }`,\n\t\tdependants: [\n\t\t\tgetExperimentResults( state, key ),\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default',\n\t\t\tareUniqueResultsVisible( state, key ),\n\t\t],\n\t} )\n);\n\nexport const getResultsOfAlternatives = createIndexedSelector(\n\t( state: State, key: ExperimentId ): Maybe< Results[ 'alternatives' ] > => {\n\t\tconst results = getExperimentResults( state, key );\n\t\tif ( ! results ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeSegment =\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default';\n\t\treturn activeSegment === 'default'\n\t\t\t? results.alternatives\n\t\t\t: results.segments[ activeSegment ]?.alternatives;\n\t},\n\t( state: State, key: ExperimentId ) => ( {\n\t\tkey,\n\t\tdependants: [\n\t\t\tgetExperimentResults( state, key ),\n\t\t\tgetPageAttribute( state, 'editor/activeSegment' ) ?? 'default',\n\t\t],\n\t} )\n);\n\nexport function areUniqueResultsVisible(\n\tstate: State,\n\tkey: ExperimentId\n): boolean {\n\tconst shouldShowUniqueResults =\n\t\tgetPageAttribute( state, 'results/shouldShowUniqueResults' ) ?? false;\n\treturn shouldShowUniqueResults && areUniqueResultsAvailable( state, key );\n}\n\nexport function areUniqueResultsAvailable(\n\tstate: State,\n\tkey: Maybe< ExperimentId >\n): boolean {\n\tconst results = getExperimentResults( state, key );\n\treturn values( results?.alternatives ).some( ( a ) => a.uniqueVisits > 0 );\n}\n","/**\n * WordPress dependencies\n */\nimport { createSelector } from '@safe-wordpress/data';\nimport { addQueryArgs } from '@safe-wordpress/url';\n\n/**\n * External dependencies\n */\nimport { keys, values } from 'lodash';\nimport { make } from 'ts-brand';\nimport type {\n\tECommercePlugin,\n\tMaybe,\n\tMenu,\n\tMenuId,\n\tNabCapability,\n\tSubscriptionPlan,\n\tTheme,\n\tUrl,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { ECommerceSettings, State } from '../types';\nimport { isDefined, isPlan } from '@nab/utils';\n\nexport function getToday( state: State ): string {\n\treturn state.settings.today;\n}\n\nexport function getSiteLanguage( state: State ): string {\n\treturn state.settings.language;\n}\n\nexport function getActivePlugins( state: State ): ReadonlyArray< string > {\n\treturn state.settings.plugins;\n}\n\nexport function hasMenus( state: State ): boolean {\n\treturn !! keys( state.settings.menus ).length;\n}\n\nexport function getMenu( state: State, id: MenuId ): Maybe< Menu > {\n\treturn state.settings.menus[ id ];\n}\n\nexport function getTemplateContexts(\n\tstate: State\n): State[ 'settings' ][ 'templateContexts' ] {\n\treturn state.settings.templateContexts;\n}\n\nexport function getTemplates(\n\tstate: State\n): State[ 'settings' ][ 'templates' ] {\n\treturn state.settings.templates;\n}\n\nexport const getThemes = createSelector(\n\t( state: State ): ReadonlyArray< Theme > =>\n\t\tvalues( state.settings.themes ).filter( isDefined ),\n\t( state: State ) => [ state.settings.themes ]\n);\n\nexport function getAdminUrl(\n\tstate: State,\n\tpath: string,\n\targs?: Record< string, string | boolean | number >\n): string {\n\tconst adminUrl = getPluginSetting( state, 'adminUrl' );\n\treturn addQueryArgs( `${ adminUrl }${ path }`, args );\n}\n\nexport function hasCapability(\n\tstate: State,\n\tcapability: NabCapability\n): boolean {\n\treturn state.settings.nelio.capabilities.includes( capability );\n}\n\ntype GetPluginSetting = typeof _getPluginSetting & {\n\tCurriedSignature: < K extends keyof State[ 'settings' ][ 'nelio' ] >(\n\t\tname: K\n\t) => State[ 'settings' ][ 'nelio' ][ K ];\n};\nexport const getPluginSetting = _getPluginSetting as GetPluginSetting;\nfunction _getPluginSetting< K extends keyof State[ 'settings' ][ 'nelio' ] >(\n\tstate: State,\n\tname: K\n): State[ 'settings' ][ 'nelio' ][ K ] {\n\treturn state.settings.nelio[ name ];\n}\n\nexport function getRestUrl( state: State, path = '/' ): Url {\n\tconst url = state.settings.nelio.restUrl;\n\treturn make< Url >()(\n\t\turl.includes( 'rest_route=' )\n\t\t\t? url.replace( 'rest_route=', `rest_route=${ path }` )\n\t\t\t: `${ url }${ path }`\n\t);\n}\n\ntype GetECommerceSetting = typeof _getECommerceSetting & {\n\tCurriedSignature: < K extends keyof ECommerceSettings >(\n\t\tplugin: ECommercePlugin,\n\t\tname: K\n\t) => ECommerceSettings[ K ];\n};\nexport const getECommerceSetting = _getECommerceSetting as GetECommerceSetting;\nfunction _getECommerceSetting< K extends keyof ECommerceSettings >(\n\tstate: State,\n\tplugin: ECommercePlugin,\n\tname: K\n): ECommerceSettings[ K ] {\n\treturn state.settings.ecommerce[ plugin ][ name ];\n}\n\nexport function canLimitSiteQuota( state: State ): boolean {\n\treturn isSubscribedTo( state, 'professional', 'or-above' );\n}\n\nexport function isSubscribedTo(\n\tstate: State,\n\texpectedPlan: SubscriptionPlan,\n\tmode: 'exactly' | 'or-above' = 'or-above'\n): boolean {\n\tconst actualPlan = getPluginSetting( state, 'subscription' );\n\treturn 'exactly' === mode\n\t\t? isPlan( actualPlan, 'exactly', expectedPlan )\n\t\t: isPlan( actualPlan, 'exactly-or-above', expectedPlan );\n}\n","/**\n * External dependencies\n */\nimport type { Maybe, Quota } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { State } from '../types';\n\nexport function getQuota( state: State ): Maybe< Quota > {\n\treturn state.siteQuota;\n}\n","export * from './test-generation';\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, select, resolveSelect } from '@safe-wordpress/data';\nimport { decodeEntities } from '@safe-wordpress/html-entities';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { groupBy, map, mapValues, omit, toPairs, uniq } from 'lodash';\nimport { Uuid, v4 as uuid } from 'uuid';\nimport {\n\tcreateAlternative,\n\tgetContentMetrics,\n\tgetContentSummary,\n\tgetLetter,\n\tisDefined,\n} from '@nab/utils';\nimport type {\n\tAiBestSeller,\n\tAiCloudTestCandidate,\n\tAiCloudTestHypothesis,\n\tAiExperiment,\n\tAiHeatmap,\n\tAiOrderSummary,\n\tAiPostSummary,\n\tAiProductSummary,\n\tAiSettings,\n\tAiSiteAnalysis,\n\tAiTestCandidate,\n\tAiTestHypothesis,\n\tAiTestHypothesisState,\n\tAlternative,\n\tDict,\n\tExperiment,\n\tExperimentType,\n\tGoal,\n\tHeatmap,\n\tMaybe,\n\tScopeRule,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../../store';\nimport type { State } from '../../../../store/types';\n\nimport { getPostTypeExceptions } from '../../../../../experiment-library/custom-post-type/get-post-type-exceptions';\n\nconst MAX_PAGES = 100;\nconst MAX_ITEMS_PER_TYPE = 50;\nconst MIN_RUN_TIME_FOR_ASYNC_CALLBACK = 1500;\n\ntype MostViewedItem =\n\t| {\n\t\t\treadonly type: 'post';\n\t\t\treadonly postType: string;\n\t\t\treadonly postId: number;\n\t\t\treadonly monthlyViews: number;\n\t  }\n\t| {\n\t\t\treadonly type: 'url';\n\t\t\treadonly url: string;\n\t\t\treadonly monthlyViews: number;\n\t  };\n\ntype AnalysisContext = {\n\treadonly analytics: ReadonlyArray< MostViewedItem >;\n\treadonly abTesting: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ];\n};\n\nexport async function searchTestCandidates(\n\tvalidExperimentTypes: ReadonlyArray< ExperimentType >,\n\tnewAiSettings?: AiSettings\n): Promise< void > {\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'intro' !== state.type ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tif ( newAiSettings ) {\n\t\t\tconst previousAiSettings =\n\t\t\t\tselect( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\t\t\tif ( previousAiSettings?.type === 'ready' ) {\n\t\t\t\tthrow new Error( 'cant-override-settings' );\n\t\t\t}\n\t\t\tawait breathe( () => saveAiSettings( newAiSettings, state.id ) );\n\t\t}\n\t} catch ( error ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( error ),\n\t\t} );\n\t\treturn;\n\t}\n\n\tconst currentAiSettings =\n\t\tselect( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( currentAiSettings?.type !== 'ready' ) {\n\t\tthrow new Error( 'invalid-ai-settings' );\n\t}\n\n\tconst abTesting = await breathe( () => getAbTestingData( state.id ) );\n\tif ( 'error' === abTesting.type ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( abTesting.error ),\n\t\t} );\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst result = await getCachedCandidates(\n\t\t\tabTesting.aiAnalysis,\n\t\t\tabTesting.base.experiments,\n\t\t\tstate.id\n\t\t);\n\t\tif ( result ) {\n\t\t\tconst candidates = await expandFirstCandidate( {\n\t\t\t\tcandidates: result.candidates,\n\t\t\t\texperiments: abTesting.base.experiments,\n\t\t\t\tsiteAnalysis: result.siteAnalysis,\n\t\t\t\tstateId: state.id,\n\t\t\t\tvalidExperimentTypes,\n\t\t\t} );\n\t\t\tawait setState( {\n\t\t\t\tid: state.id,\n\t\t\t\ttype: 'hypothesis-selection',\n\t\t\t\tsiteAnalysis: result.siteAnalysis,\n\t\t\t\tcandidates,\n\t\t\t\ttesting: abTesting.base,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\t} catch ( _ ) {}\n\n\ttry {\n\t\tconst siteAnalysis = await analyzeSite(\n\t\t\tabTesting.aiAnalysis,\n\t\t\tstate.id\n\t\t);\n\t\tconst baseCandidates = await processSiteAnalysis(\n\t\t\tsiteAnalysis,\n\t\t\tabTesting.base.experiments,\n\t\t\tstate.id\n\t\t);\n\t\tconst candidates = await expandFirstCandidate( {\n\t\t\tcandidates: baseCandidates,\n\t\t\texperiments: abTesting.base.experiments,\n\t\t\tsiteAnalysis,\n\t\t\tstateId: state.id,\n\t\t\tvalidExperimentTypes,\n\t\t} );\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'hypothesis-selection',\n\t\t\tsiteAnalysis,\n\t\t\tcandidates,\n\t\t\ttesting: abTesting.base,\n\t\t} );\n\t} catch ( error ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( error ),\n\t\t} );\n\t}\n}\n\nexport async function generateTestHypotheses(\n\tcandidate: AiTestCandidate,\n\tvalidExperimentTypes: ReadonlyArray< ExperimentType >\n): Promise< void > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn;\n\t}\n\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'hypothesis-selection' !== state.type ) {\n\t\treturn;\n\t}\n\n\tif ( 'ready' === candidate.hypothesisState.status ) {\n\t\tawait updateCandidate( {\n\t\t\t...candidate,\n\t\t\thypothesisState: {\n\t\t\t\t...candidate.hypothesisState,\n\t\t\t\tisVisible: true,\n\t\t\t},\n\t\t} );\n\t\treturn;\n\t}\n\n\tif ( 'pending' !== candidate.hypothesisState.status ) {\n\t\treturn;\n\t}\n\n\tcandidate = await updateCandidate( {\n\t\t...candidate,\n\t\thypothesisState: { status: 'generating' },\n\t} );\n\n\tawait loadTestHypotheses( {\n\t\tcandidate,\n\t\texperiments: state.testing.experiments,\n\t\tlanguage: state.siteAnalysis.metaInformation.language,\n\t\tvalidExperimentTypes,\n\t} );\n}\n\nexport async function createTestFromHypothesis(\n\thypothesis: AiTestHypothesis,\n\tvalidExperimentTypes: ReadonlyArray< ExperimentType >\n): Promise< void > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn;\n\t}\n\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'hypothesis-selection' !== state.type ) {\n\t\treturn;\n\t}\n\n\tawait setState( { ...state, type: 'creating-test' } );\n\ttry {\n\t\tconst type = validExperimentTypes.find(\n\t\t\t( t ) => t.name === hypothesis.testType\n\t\t);\n\t\tif ( ! type ) {\n\t\t\tthrow new Error( 'invalid-experiment-type' );\n\t\t}\n\n\t\tconst baseExperiment = await createExperiment( type );\n\n\t\tconst defaultGoal: Maybe< Goal > = type.supports.automaticGoalSetup\n\t\t\t? {\n\t\t\t\t\tid: uuid(),\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tname: _x( 'Default Goal', 'text', 'nelio-ab-testing' ),\n\t\t\t\t\t},\n\t\t\t\t\tconversionActions:\n\t\t\t\t\t\ttype.supports.automaticGoalSetup(\n\t\t\t\t\t\t\tbaseExperiment.alternatives[ 0 ]\n\t\t\t\t\t\t) ?? [],\n\t\t\t  }\n\t\t\t: undefined;\n\n\t\tconst scope: Maybe< ReadonlyArray< ScopeRule > > =\n\t\t\ttype.supports.scope === 'urls' ||\n\t\t\ttype.supports.scope === 'urls-or-php'\n\t\t\t\t? [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: uuid(),\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\ttype: 'exact',\n\t\t\t\t\t\t\t\tvalue: hypothesis.controlUrl,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t  ]\n\t\t\t\t: undefined;\n\n\t\tconst experiment = await saveExperiment( {\n\t\t\t...baseExperiment,\n\t\t\tscope: scope ?? baseExperiment.scope,\n\t\t\tname: hypothesis.name,\n\t\t\tdescription: hypothesis.description,\n\t\t\tai: {\n\t\t\t\tversion: 1,\n\t\t\t\tbasedOnNelioAIHypothesis: hypothesis.id,\n\t\t\t},\n\t\t\talternatives: [\n\t\t\t\t{\n\t\t\t\t\tid: 'control' as const,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tpostId: hypothesis.control.id,\n\t\t\t\t\t\tpostType: hypothesis.control.type,\n\t\t\t\t\t},\n\t\t\t\t\tlinks: createAlternative().links,\n\t\t\t\t},\n\t\t\t\t...hypothesis.variants.map( ( v ): Alternative => {\n\t\t\t\t\tconst alt = createAlternative();\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...alt,\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...alt.attributes,\n\t\t\t\t\t\t\tname: v.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai: {\n\t\t\t\t\t\t\tisReady: false,\n\t\t\t\t\t\t\tname: v.name,\n\t\t\t\t\t\t\tchanges: v.changes,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t],\n\t\t\tgoals: [\n\t\t\t\tdefaultGoal,\n\t\t\t\t...hypothesis.goals.map(\n\t\t\t\t\t( g ): Goal => ( {\n\t\t\t\t\t\tid: uuid(),\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\tname: g.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai: {\n\t\t\t\t\t\t\tname: g.name,\n\t\t\t\t\t\t\tdescription: g.description,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tconversionActions: [],\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t].filter( isDefined ),\n\t\t} );\n\n\t\tawait setState( { ...state, experiment, type: 'done' } );\n\t} catch ( error ) {\n\t\tawait setState( {\n\t\t\tid: state.id,\n\t\t\ttype: 'error',\n\t\t\treason: getErrorCode( error ),\n\t\t} );\n\t}\n}\n\n// =======\n// HELPERS\n// =======\n\nasync function analyzeSite(\n\tabTesting: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ],\n\tstateId: Uuid\n): Promise< AiSiteAnalysis > {\n\tconst analytics = await breathe( () => getMostViewedItems( stateId ) );\n\tconst context: AnalysisContext = {\n\t\tanalytics,\n\t\tabTesting,\n\t};\n\n\tconst pages = await breathe( () => getPages( context, stateId ) );\n\tconst customPosts = await breathe( () =>\n\t\tgetCustomPosts( context, stateId )\n\t);\n\tconst blogAnalysis = await breathe( () =>\n\t\tgetBlogAnalysis( context, stateId )\n\t);\n\tconst woocommerceAnalysis = await breathe( () =>\n\t\tgetWooCommerceAnalysis( stateId )\n\t);\n\n\treturn {\n\t\tcontent: {\n\t\t\t...mapValues( customPosts, ( items ) =>\n\t\t\t\titems?.length ? items : undefined\n\t\t\t),\n\t\t\tpage: pages.length ? pages : undefined,\n\t\t\tpost: blogAnalysis?.posts,\n\t\t\tproduct: woocommerceAnalysis?.products,\n\t\t},\n\t\tmetaInformation: {\n\t\t\tlanguage: select( NAB_DATA ).getSiteLanguage(),\n\t\t\tblog: blogAnalysis?.info,\n\t\t\twoocommerce: woocommerceAnalysis?.info,\n\t\t\tabTesting,\n\t\t\turlAnalytics: analytics\n\t\t\t\t.filter( ( a ) => a.type === 'url' )\n\t\t\t\t.map( ( a ) => ( {\n\t\t\t\t\turl: a.url,\n\t\t\t\t\tmonthlyViews: a.monthlyViews,\n\t\t\t\t} ) ),\n\t\t},\n\t};\n}\n\nasync function getCachedCandidates(\n\tabTesting: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ],\n\texperiments: ReadonlyArray< Experiment >,\n\tstateId: Uuid\n): Promise<\n\tMaybe< {\n\t\treadonly siteAnalysis: AiSiteAnalysis;\n\t\treadonly candidates: ReadonlyArray< AiTestCandidate >;\n\t} >\n> {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'previous-candidates',\n\t} );\n\tconst candidates = await apiFetch< ReadonlyArray< AiCloudTestCandidate > >(\n\t\t{\n\t\t\tpath: '/nab/v1/ai/test-candidates',\n\t\t\tmethod: 'GET',\n\t\t}\n\t);\n\n\tif ( ! candidates.length ) {\n\t\treturn undefined;\n\t}\n\n\tconst itemsToLoad = toPairs(\n\t\tmapValues( groupBy( candidates, 'type' ), ( items ) =>\n\t\t\titems.map( ( i ) => i.id )\n\t\t)\n\t).filter( ( p ): p is [ string, number[] ] => 'string' === typeof p[ 0 ] );\n\n\tconst settledPromises = await Promise.allSettled(\n\t\titemsToLoad.map( ( [ postType, postIds ] ) =>\n\t\t\tgetItemsInType( postType, postIds )\n\t\t)\n\t);\n\n\tconst validSettledPromises = settledPromises\n\t\t.filter( ( p ) => p.status === 'fulfilled' )\n\t\t.map( ( p ) => p.value );\n\tconst postsByType = groupBy(\n\t\tvalidSettledPromises\n\t\t\t.filter(\n\t\t\t\t( ps ): ps is ReadonlyArray< AiPostSummary > =>\n\t\t\t\t\tps[ 0 ]?.type !== 'product'\n\t\t\t)\n\t\t\t.flatMap( ( ps ) => ps ),\n\t\t'type'\n\t);\n\tconst itemsByType: Record<\n\t\tstring,\n\t\tReadonlyArray< AiPostSummary > | ReadonlyArray< AiProductSummary >\n\t> = {\n\t\tproduct:\n\t\t\tvalidSettledPromises.find(\n\t\t\t\t( ps ): ps is ReadonlyArray< AiProductSummary > =>\n\t\t\t\t\tps[ 0 ]?.type === 'product'\n\t\t\t) ?? [],\n\t\t...postsByType,\n\t};\n\n\tconst PENDING_HYPOTHESIS_STATE = { status: 'pending' as const };\n\tconst finalCandidates = candidates\n\t\t.map( ( { type, id, ...attrs } ): Maybe< AiTestCandidate > => {\n\t\t\tconst item = itemsByType[ type ]?.find( ( c ) => c.id === id );\n\t\t\tconst hypothesisState: AiTestHypothesisState =\n\t\t\t\titem && attrs.hypotheses\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tstatus: 'ready',\n\t\t\t\t\t\t\thypotheses: attrs.hypotheses.map(\n\t\t\t\t\t\t\t\t( h ): AiTestHypothesis => ( {\n\t\t\t\t\t\t\t\t\t...h,\n\t\t\t\t\t\t\t\t\tcontrolUrl: item.url,\n\t\t\t\t\t\t\t\t\trelatedTests: experiments\n\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t( e ) =>\n\t\t\t\t\t\t\t\t\t\t\t\te.ai\n\t\t\t\t\t\t\t\t\t\t\t\t\t?.basedOnNelioAIHypothesis ===\n\t\t\t\t\t\t\t\t\t\t\t\th.id\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.map( ( e ) => e.id ),\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tisVisible: false,\n\t\t\t\t\t  }\n\t\t\t\t\t: PENDING_HYPOTHESIS_STATE;\n\t\t\treturn item ? { ...item, ...attrs, hypothesisState } : undefined;\n\t\t} )\n\t\t.filter( isDefined );\n\tif ( ! finalCandidates.length ) {\n\t\treturn undefined;\n\t}\n\n\treturn {\n\t\tsiteAnalysis: {\n\t\t\tcontent: itemsByType,\n\t\t\tmetaInformation: {\n\t\t\t\tlanguage: select( NAB_DATA ).getSiteLanguage(),\n\t\t\t\tblog: undefined,\n\t\t\t\twoocommerce: undefined,\n\t\t\t\tabTesting,\n\t\t\t\turlAnalytics: [],\n\t\t\t},\n\t\t},\n\t\tcandidates: finalCandidates,\n\t};\n}\n\nasync function processSiteAnalysis(\n\tanalysis: AiSiteAnalysis,\n\texperiments: ReadonlyArray< Experiment >,\n\tstateId: Uuid\n): Promise< ReadonlyArray< AiTestCandidate > > {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'searching-candidates',\n\t\tstep: 'just-started',\n\t} );\n\n\tconst isSearchingCandidates = () => {\n\t\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t\t'ai/testGenerationState'\n\t\t);\n\t\treturn !! state && 'searching-candidates' === state.type;\n\t};\n\n\tsetTimeout(\n\t\t() =>\n\t\t\tisSearchingCandidates() &&\n\t\t\tsetState( {\n\t\t\t\tid: stateId,\n\t\t\t\ttype: 'searching-candidates',\n\t\t\t\tstep: 'keep-waiting',\n\t\t\t} ),\n\t\t12_000\n\t);\n\n\tsetTimeout(\n\t\t() =>\n\t\t\tisSearchingCandidates() &&\n\t\t\tsetState( {\n\t\t\t\tid: stateId,\n\t\t\t\ttype: 'searching-candidates',\n\t\t\t\tstep: 'quite-slow',\n\t\t\t} ),\n\t\t24_000\n\t);\n\n\tconst candidates = await apiFetch< ReadonlyArray< AiCloudTestCandidate > >(\n\t\t{\n\t\t\tpath: '/nab/v1/ai/test-candidates',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tanalysis: {\n\t\t\t\t\t...analysis,\n\t\t\t\t\tcontent: mapValues(\n\t\t\t\t\t\tanalysis.content,\n\t\t\t\t\t\t( ps ) =>\n\t\t\t\t\t\t\tps?.map( ( p ) => omit( p, 'contentSummary' ) )\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t},\n\t\t}\n\t);\n\n\tconst PENDING_HYPOTHESIS_STATE = { status: 'pending' as const };\n\treturn candidates\n\t\t.map(\n\t\t\t( {\n\t\t\t\ttype,\n\t\t\t\tid,\n\t\t\t\trationale,\n\t\t\t\tpriority,\n\t\t\t\thypotheses,\n\t\t\t\thypothesisGeneration,\n\t\t\t} ): Maybe< AiTestCandidate > => {\n\t\t\t\tconst item = analysis.content[ type ]?.find(\n\t\t\t\t\t( c ) => c.id === id\n\t\t\t\t);\n\t\t\t\tconst hypothesisState: AiTestHypothesisState =\n\t\t\t\t\titem && hypotheses\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tstatus: 'ready',\n\t\t\t\t\t\t\t\thypotheses: hypotheses.map(\n\t\t\t\t\t\t\t\t\t( h ): AiTestHypothesis => ( {\n\t\t\t\t\t\t\t\t\t\t...h,\n\t\t\t\t\t\t\t\t\t\tcontrolUrl: item.url,\n\t\t\t\t\t\t\t\t\t\trelatedTests: experiments\n\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t( e ) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\te.ai\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.basedOnNelioAIHypothesis ===\n\t\t\t\t\t\t\t\t\t\t\t\t\th.id\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.map( ( e ) => e.id ),\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tisVisible: false,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: PENDING_HYPOTHESIS_STATE;\n\t\t\t\treturn item\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\trationale,\n\t\t\t\t\t\t\tpriority,\n\t\t\t\t\t\t\thypothesisState,\n\t\t\t\t\t\t\thypothesisGeneration,\n\t\t\t\t\t  }\n\t\t\t\t\t: undefined;\n\t\t\t}\n\t\t)\n\t\t.filter( isDefined );\n}\n\nasync function expandFirstCandidate( attrs: {\n\treadonly candidates: ReadonlyArray< AiTestCandidate >;\n\treadonly experiments: ReadonlyArray< Experiment >;\n\treadonly siteAnalysis: AiSiteAnalysis;\n\treadonly stateId: Uuid;\n\treadonly validExperimentTypes: ReadonlyArray< ExperimentType >;\n} ): Promise< ReadonlyArray< AiTestCandidate > > {\n\tconst firstCandidate = attrs.candidates.find(\n\t\t( c ) => 'available' === c.hypothesisGeneration\n\t);\n\tif ( ! firstCandidate ) {\n\t\treturn attrs.candidates;\n\t}\n\n\tif ( 'ready' === firstCandidate.hypothesisState.status ) {\n\t\tconst firstCandidateWithHypotheses = await updateCandidate( {\n\t\t\t...firstCandidate,\n\t\t\thypothesisState: {\n\t\t\t\t...firstCandidate.hypothesisState,\n\t\t\t\tisVisible: true,\n\t\t\t},\n\t\t} );\n\t\treturn attrs.candidates.map( ( c ) =>\n\t\t\tc === firstCandidate ? firstCandidateWithHypotheses : c\n\t\t);\n\t}\n\n\tawait setState( {\n\t\tid: attrs.stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'first-hypotheses',\n\t} );\n\tconst firstCandidateWithHypotheses = await loadTestHypotheses( {\n\t\tcandidate: firstCandidate,\n\t\tlanguage: attrs.siteAnalysis.metaInformation.language,\n\t\tvalidExperimentTypes: attrs.validExperimentTypes,\n\t\texperiments: attrs.experiments,\n\t} );\n\treturn attrs.candidates.map( ( c ) =>\n\t\tc === firstCandidate ? firstCandidateWithHypotheses : c\n\t);\n}\n\nasync function loadTestHypotheses( {\n\tcandidate,\n\texperiments,\n\tlanguage,\n\tvalidExperimentTypes,\n}: {\n\treadonly candidate: AiTestCandidate;\n\treadonly experiments: ReadonlyArray< Experiment >;\n\treadonly language: string;\n\treadonly validExperimentTypes: ReadonlyArray< ExperimentType >;\n} ): Promise< AiTestCandidate > {\n\tcandidate = await updateCandidate( {\n\t\t...candidate,\n\t\tcontentSummary: !! candidate.contentSummary?.length\n\t\t\t? candidate.contentSummary\n\t\t\t: await getContentSummary( candidate.url ),\n\t} );\n\n\tconst names = validExperimentTypes.map( ( t ) => t.name );\n\ttry {\n\t\tconst suggestedHypotheses = await apiFetch<\n\t\t\tReadonlyArray< AiCloudTestHypothesis >\n\t\t>( {\n\t\t\tpath: '/nab/v1/ai/test-hypotheses',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tlanguage,\n\t\t\t\tid: candidate.id,\n\t\t\t\ttype: candidate.type,\n\t\t\t\turl: candidate.url,\n\t\t\t\tcontent: candidate.contentSummary || [],\n\t\t\t},\n\t\t} );\n\n\t\tconst unsortedHypotheses = suggestedHypotheses\n\t\t\t.filter( ( h ) => names.includes( h.testType ) )\n\t\t\t.map(\n\t\t\t\t( h ): AiTestHypothesis => ( {\n\t\t\t\t\t...h,\n\t\t\t\t\tcontrolUrl: candidate.url,\n\t\t\t\t\trelatedTests: experiments\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t( e ) => e.ai?.basedOnNelioAIHypothesis === h.id\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.map( ( e ) => e.id ),\n\t\t\t\t} )\n\t\t\t);\n\t\tconst hypotheses = [\n\t\t\t...unsortedHypotheses.filter( ( h ) => ! h.relatedTests.length ),\n\t\t\t...unsortedHypotheses.filter( ( h ) => !! h.relatedTests.length ),\n\t\t];\n\t\tif ( ! hypotheses.length ) {\n\t\t\tthrow new Error( 'no-hypotheses-available' );\n\t\t}\n\n\t\treturn updateCandidate( {\n\t\t\t...candidate,\n\t\t\thypothesisState: {\n\t\t\t\tstatus: 'ready',\n\t\t\t\thypotheses,\n\t\t\t\tisVisible: true,\n\t\t\t},\n\t\t} );\n\t} catch ( error ) {\n\t\treturn updateCandidate( {\n\t\t\t...candidate,\n\t\t\thypothesisState: {\n\t\t\t\tstatus: 'error',\n\t\t\t\treason: getErrorCode( error ) || 'nelio-ai-unknown-error-901',\n\t\t\t},\n\t\t} );\n\t}\n}\n\nasync function setState(\n\tstate: Exclude<\n\t\tRequired< State[ 'page' ] >[ 'ai/testGenerationState' ],\n\t\tfalse\n\t>\n): Promise< void > {\n\tconst currentState = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! currentState || currentState.id !== state.id ) {\n\t\treturn;\n\t}\n\n\tconst { setPageAttribute } = dispatch( NAB_DATA );\n\tawait setPageAttribute( 'ai/testGenerationState', state );\n}\n\ntype WpPost = {\n\tid: number;\n\ttype: string;\n\tlink?: string;\n\ttitle?: { rendered?: string };\n\tcontent?: { rendered?: string };\n\tdate?: string;\n\tmodified?: string;\n\tyoast_head_json?: {\n\t\ttitle?: string;\n\t\tdescription?: string;\n\t};\n};\n\nconst wpPost2aiPost =\n\t( { analytics }: Pick< AnalysisContext, 'analytics' > ) =>\n\t( p: WpPost ): AiPostSummary => ( {\n\t\tid: p.id,\n\t\ttype: p.type,\n\t\ttitle: decodeEntities( p.title?.rendered ?? '' ),\n\t\turl: p.link || '',\n\t\tcontentMetrics: getContentMetrics(\n\t\t\tselect( NAB_DATA ).getPluginSetting( 'homeUrl' ),\n\t\t\tp.content?.rendered\n\t\t),\n\t\tpublicationDate: p.date || '',\n\t\tlastUpdate: p.modified || '',\n\t\tmonthlyViews: analytics.find(\n\t\t\t( a ) =>\n\t\t\t\ta.type === 'post' && a.postType === p.type && a.postId === p.id\n\t\t)?.monthlyViews,\n\t\tseoTitle: p.yoast_head_json?.title?.trim() || undefined,\n\t\tseoDescription: p.yoast_head_json?.description?.trim() || undefined,\n\t} );\n\nasync function getPages(\n\tcontext: AnalysisContext,\n\tstateId: Uuid\n): Promise< ReadonlyArray< AiPostSummary > > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn [];\n\t}\n\n\tif ( ! aiSettings.privacy.postTypes.includes( 'page' ) ) {\n\t\treturn [];\n\t}\n\n\ttry {\n\t\tawait setState( {\n\t\t\tid: stateId,\n\t\t\ttype: 'analyzing-site',\n\t\t\twhat: 'pages',\n\t\t} );\n\t\treturn getItemsUnsafe( {\n\t\t\tcontext,\n\t\t\tpostType: 'page',\n\t\t\texperimentTypes: [ 'nab/page' ],\n\t\t\tmaxItems: MAX_PAGES,\n\t\t} );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getBlogAnalysis(\n\tcontext: AnalysisContext,\n\tstateId: Uuid\n): Promise<\n\tMaybe< {\n\t\tposts: ReadonlyArray< AiPostSummary >;\n\t\tinfo: Required< AiSiteAnalysis[ 'metaInformation' ] >[ 'blog' ];\n\t} >\n> {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn undefined;\n\t}\n\n\tif ( ! aiSettings.privacy.postTypes.includes( 'post' ) ) {\n\t\treturn undefined;\n\t}\n\n\tawait setState( { id: stateId, type: 'analyzing-site', what: 'blog' } );\n\ttry {\n\t\t// @ts-expect-error This variable exists in the global scope.\n\t\tconst wpApiSettings = window.wpApiSettings as {\n\t\t\troot: string;\n\t\t\tnonce: string;\n\t\t};\n\t\tconst response = await fetch(\n\t\t\t`${ wpApiSettings.root.replace(\n\t\t\t\t/\\/$/,\n\t\t\t\t''\n\t\t\t) }/wp/v2/posts?status=publish&per_page=1&after=${ getLastYear() }`,\n\t\t\t{\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'X-WP-Nonce': wpApiSettings.nonce,\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tcredentials: 'same-origin', // ensures cookies (if needed) are sent\n\t\t\t}\n\t\t);\n\n\t\tconst totalPostsInLastYear =\n\t\t\tNumber.parseInt( response.headers.get( 'X-WP-Total' ) || '' ) || 0;\n\n\t\tconst posts = await getItemsUnsafe( {\n\t\t\tcontext,\n\t\t\tpostType: 'post',\n\t\t\texperimentTypes: [ 'nab/post', 'nab/headline' ],\n\t\t\tmaxItems: MAX_ITEMS_PER_TYPE,\n\t\t} );\n\n\t\treturn {\n\t\t\tposts,\n\t\t\tinfo: {\n\t\t\t\ttotalPostsInLastYear,\n\t\t\t\taveragePostsPerMonth: totalPostsInLastYear / 12,\n\t\t\t},\n\t\t};\n\t} catch ( _ ) {\n\t\treturn undefined;\n\t}\n}\n\nasync function getCustomPosts(\n\tcontext: AnalysisContext,\n\tstateId: Uuid\n): Promise< AiSiteAnalysis[ 'content' ] > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn {};\n\t}\n\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'custom-posts',\n\t} );\n\n\ttry {\n\t\tconst kinds = await resolveSelect( NAB_DATA ).getKindEntities();\n\t\tconst postTypeExceptions = getPostTypeExceptions( {\n\t\t\tisWooCommerceEnabled: await isWooCommerceEnabled(),\n\t\t} );\n\t\tconst postTypes = kinds\n\t\t\t.filter( ( k ) => k.kind === 'entity' )\n\t\t\t.map( ( k ) => k.name )\n\t\t\t.filter( ( t ) => ! t.startsWith( 'nab_' ) )\n\t\t\t.filter( ( t ) => ! postTypeExceptions.includes( t ) )\n\t\t\t.filter( ( t ) => aiSettings.privacy.postTypes.includes( t ) );\n\t\tif ( ! postTypes.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst settledPromises = await Promise.allSettled(\n\t\t\tpostTypes.map( ( type ) =>\n\t\t\t\tgetItemsUnsafe( {\n\t\t\t\t\tpostType: type,\n\t\t\t\t\texperimentTypes: [ 'nab/custom-post-type' ],\n\t\t\t\t\tcontext,\n\t\t\t\t\tmaxItems: MAX_ITEMS_PER_TYPE,\n\t\t\t\t} )\n\t\t\t)\n\t\t);\n\t\treturn groupBy(\n\t\t\tsettledPromises\n\t\t\t\t.filter( ( p ) => p.status === 'fulfilled' )\n\t\t\t\t.flatMap( ( p ) => p.value ),\n\t\t\t'type'\n\t\t);\n\t} catch ( _ ) {\n\t\treturn {};\n\t}\n}\n\nasync function getItemsUnsafe( {\n\tcontext,\n\tpostType,\n\texperimentTypes,\n\tmaxItems,\n}: {\n\treadonly context: AnalysisContext;\n\treadonly postType: string;\n\treadonly experimentTypes: ReadonlyArray< string >;\n\treadonly maxItems: number;\n} ): Promise< ReadonlyArray< AiPostSummary > > {\n\tconst relevantIds = uniq( [\n\t\t...context.analytics\n\t\t\t.map( ( a ) =>\n\t\t\t\ta.type === 'post' && a.postType === postType ? a.postId : 0\n\t\t\t)\n\t\t\t.filter( ( id ) => !! id ),\n\n\t\t...context.abTesting.experiments\n\t\t\t.filter( ( e ) => experimentTypes.includes( e.type ) )\n\t\t\t.map(\n\t\t\t\t( e ) =>\n\t\t\t\t\te.alternatives[ 0 ]?.attributes as Maybe<\n\t\t\t\t\t\tDict< number | string >\n\t\t\t\t\t>\n\t\t\t)\n\t\t\t.filter(\n\t\t\t\t( attrs ) => ! attrs?.postType || attrs?.postType === postType\n\t\t\t)\n\t\t\t.map( ( attrs ) => attrs?.postId ?? 0 )\n\t\t\t.filter( ( id ) => !! id ),\n\n\t\t...context.abTesting.heatmaps\n\t\t\t.filter(\n\t\t\t\t( h ) =>\n\t\t\t\t\th.trackingMode === 'post' && h.trackedPostType === postType\n\t\t\t)\n\t\t\t.map( ( h ) => h.trackedPostId )\n\t\t\t.filter( ( id ) => 'number' === typeof id )\n\t\t\t.filter( ( id ) => !! id ),\n\t] );\n\n\tconst restType =\n\t\t'page' === postType || 'post' === postType\n\t\t\t? `${ postType }s`\n\t\t\t: postType;\n\n\tconst relevantItems = ! relevantIds.length\n\t\t? []\n\t\t: await apiFetch< ReadonlyArray< WpPost > >( {\n\t\t\t\tpath: `/wp/v2/${ restType }?include=${ relevantIds.join(\n\t\t\t\t\t','\n\t\t\t\t) }`,\n\t\t  } );\n\n\tconst excludedIds = relevantItems.map( ( p ) => p.id ).join( ',' );\n\tconst pendingItemCount = Math.max( 0, maxItems - relevantItems.length );\n\tconst remainingItems = ! pendingItemCount\n\t\t? []\n\t\t: await apiFetch< ReadonlyArray< WpPost > >( {\n\t\t\t\tpath: ! excludedIds\n\t\t\t\t\t? `/wp/v2/${ restType }?per_page=${ pendingItemCount }&status=publish&orderby=rand`\n\t\t\t\t\t: `/wp/v2/${ restType }?per_page=${ pendingItemCount }&exclude=${ excludedIds }&status=publish&orderby=rand`,\n\t\t  } );\n\n\treturn [ ...relevantItems, ...remainingItems ].map(\n\t\twpPost2aiPost( context )\n\t);\n}\n\nasync function getWooCommerceAnalysis( stateId: Uuid ): Promise<\n\tMaybe< {\n\t\tproducts: ReadonlyArray< AiProductSummary >;\n\t\tinfo: Required< AiSiteAnalysis[ 'metaInformation' ] >[ 'woocommerce' ];\n\t} >\n> {\n\tif ( ! ( await isWooCommerceEnabled() ) ) {\n\t\treturn undefined;\n\t}\n\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn undefined;\n\t}\n\n\tif ( ! aiSettings.privacy.isWooCommerceEnabled ) {\n\t\treturn undefined;\n\t}\n\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'ecommerce',\n\t} );\n\n\tconst bestSellers = await getBestSellers();\n\tconst latestOrders = await getLatestOrders();\n\n\tconst randomProducts = await getProducts( 'random' );\n\tconst missingProductIds = uniq(\n\t\tlatestOrders.flatMap( ( o ) => o.products )\n\t).filter( ( id ) => ! randomProducts.some( ( p ) => p.id === id ) );\n\tconst missingProducts = await getProducts( missingProductIds );\n\tconst products = [ ...randomProducts, ...missingProducts ];\n\n\treturn {\n\t\tproducts,\n\t\tinfo: {\n\t\t\tbestSellers,\n\t\t\tlatestOrders,\n\t\t},\n\t};\n}\n\nasync function getMostViewedItems(\n\tstateId: Uuid\n): Promise< ReadonlyArray< MostViewedItem > > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn [];\n\t}\n\n\tif ( ! aiSettings.analytics.enabled ) {\n\t\treturn [];\n\t}\n\n\ttry {\n\t\tawait setState( {\n\t\t\tid: stateId,\n\t\t\ttype: 'analyzing-site',\n\t\t\twhat: 'google-analytics',\n\t\t} );\n\t\tconst analytics = await apiFetch< ReadonlyArray< MostViewedItem > >( {\n\t\t\tpath: '/nab/v1/ai/top-viewed-items',\n\t\t} );\n\t\t// NOTE. Keep URL analytics when cloud supports them.\n\t\treturn analytics.filter( ( i ) => i.type !== 'url' );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getAbTestingData( stateId: Uuid ): Promise<\n\t| { readonly type: 'error'; readonly error: unknown }\n\t| {\n\t\t\treadonly type: 'data';\n\t\t\treadonly base: {\n\t\t\t\treadonly experiments: ReadonlyArray< Experiment >;\n\t\t\t\treadonly heatmaps: ReadonlyArray< Heatmap >;\n\t\t\t};\n\t\t\treadonly aiAnalysis: AiSiteAnalysis[ 'metaInformation' ][ 'abTesting' ];\n\t  }\n> {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'ab-testing',\n\t} );\n\n\ttry {\n\t\tconst allExperiments = await getLatestExperiments();\n\t\treturn {\n\t\t\ttype: 'data',\n\t\t\tbase: {\n\t\t\t\texperiments: allExperiments.filter(\n\t\t\t\t\t( e ): e is Experiment => 'nab/heatmap' !== e.type\n\t\t\t\t),\n\t\t\t\theatmaps: allExperiments.filter(\n\t\t\t\t\t( e ): e is Heatmap => 'nab/heatmap' === e.type\n\t\t\t\t),\n\t\t\t},\n\t\t\taiAnalysis: {\n\t\t\t\texperiments: allExperiments\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t( e ): e is Experiment => 'nab/heatmap' !== e.type\n\t\t\t\t\t)\n\t\t\t\t\t.map(\n\t\t\t\t\t\t( e ): AiExperiment => ( {\n\t\t\t\t\t\t\tid: e.id,\n\t\t\t\t\t\t\ttype: e.type,\n\t\t\t\t\t\t\tstatus: e.status,\n\t\t\t\t\t\t\tname: e.name,\n\t\t\t\t\t\t\tdescription: e.description,\n\t\t\t\t\t\t\tstartDate: e.startDate || undefined,\n\t\t\t\t\t\t\tendDate: e.endDate || undefined,\n\t\t\t\t\t\t\talternatives: map( e.alternatives, ( a, i ) => ( {\n\t\t\t\t\t\t\t\tname: getVariantLabel( i, a.attributes.name ),\n\t\t\t\t\t\t\t\tattributes: omit( a.attributes, 'name' ),\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t\tgoals: map( e.goals, ( g, i ) => ( {\n\t\t\t\t\t\t\t\tname: getGoalLabel( i, g.attributes.name ),\n\t\t\t\t\t\t\t\tactions: g.conversionActions.map( ( ca ) => ( {\n\t\t\t\t\t\t\t\t\ttype: ca.type,\n\t\t\t\t\t\t\t\t\tattributes: ca.attributes,\n\t\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t\theatmaps: allExperiments\n\t\t\t\t\t.filter( ( e ): e is Heatmap => 'nab/heatmap' === e.type )\n\t\t\t\t\t.map(\n\t\t\t\t\t\t( h ): AiHeatmap => ( {\n\t\t\t\t\t\t\tid: h.id,\n\t\t\t\t\t\t\ttype: h.type,\n\t\t\t\t\t\t\tstatus: h.status,\n\t\t\t\t\t\t\tname: h.name,\n\t\t\t\t\t\t\tdescription: h.description,\n\t\t\t\t\t\t\tstartDate: h.startDate || undefined,\n\t\t\t\t\t\t\tendDate: h.endDate || undefined,\n\t\t\t\t\t\t\ttrackingMode: h.trackingMode,\n\t\t\t\t\t\t\ttrackedPostId: h.trackedPostId,\n\t\t\t\t\t\t\ttrackedPostType: h.trackedPostType,\n\t\t\t\t\t\t\ttrackedUrl: h.trackedUrl,\n\t\t\t\t\t\t} )\n\t\t\t\t\t),\n\t\t\t},\n\t\t};\n\t} catch ( error ) {\n\t\treturn { type: 'error', error };\n\t}\n}\n\nasync function isWooCommerceEnabled() {\n\tconst plugins = await resolveSelect( NAB_DATA ).getActivePlugins();\n\treturn plugins.includes( 'woocommerce/woocommerce.php' );\n}\n\nasync function getBestSellers(): Promise< ReadonlyArray< AiBestSeller > > {\n\ttry {\n\t\ttype Response = ReadonlyArray< {\n\t\t\treadonly rows: ReadonlyArray<\n\t\t\t\t[\n\t\t\t\t\tPartial< { display: string } > | undefined,\n\t\t\t\t\tPartial< { value: number } > | undefined,\n\t\t\t\t]\n\t\t\t>;\n\t\t} >;\n\t\tconst response = await apiFetch< Response >( {\n\t\t\tpath: `/wc-analytics/leaderboards?leaderboard=products&after=${ getLastYear() }&before=${ getToday() }&per_page=10`,\n\t\t} );\n\n\t\tconst aux = document.createElement( 'div' );\n\t\treturn ( response[ 0 ]?.rows ?? [] )\n\t\t\t.map( ( r ): AiBestSeller => {\n\t\t\t\taux.innerHTML = r[ 0 ]?.display || '';\n\t\t\t\tconst url = aux.querySelector( 'a' )?.href ?? '';\n\t\t\t\tconst matches = url.match( /\\bproducts=([0-9]+)\\b/ ) || [];\n\t\t\t\tconst id = Number.parseInt( matches[ 1 ] || '0' ) || 0;\n\t\t\t\treturn { id, quantity: r[ 1 ]?.value || 0 };\n\t\t\t} )\n\t\t\t.filter( ( r ) => !! r.id && !! r.quantity );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getLatestOrders(): Promise< ReadonlyArray< AiOrderSummary > > {\n\tconst aiSettings = select( NAB_DATA ).getPluginSetting( 'aiSettings' );\n\tif ( aiSettings?.type !== 'ready' ) {\n\t\treturn [];\n\t}\n\n\tconst includeOrders =\n\t\taiSettings.privacy.isWooCommerceEnabled &&\n\t\taiSettings.privacy.includeWooCommerceOrderInfo;\n\tif ( includeOrders ) {\n\t\treturn [];\n\t}\n\n\ttry {\n\t\ttype Order = {\n\t\t\treadonly date_created: string;\n\t\t\treadonly total: string;\n\t\t\treadonly status: string;\n\t\t\treadonly line_items: ReadonlyArray< { product_id: number } >;\n\t\t};\n\t\tconst latestOrdersRaw = await apiFetch< ReadonlyArray< Order > >( {\n\t\t\tpath: '/wc/v3/orders?per_page=50',\n\t\t} );\n\t\treturn latestOrdersRaw.map(\n\t\t\t( o ): AiOrderSummary => ( {\n\t\t\t\tdate: o.date_created,\n\t\t\t\ttotal: o.total,\n\t\t\t\tstatus: o.status,\n\t\t\t\tproducts: o.line_items.map( ( i ) => i.product_id ),\n\t\t\t} )\n\t\t);\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\ntype WpProduct = {\n\treadonly id: number;\n\treadonly date_created?: string;\n\treadonly date_modified?: string;\n\treadonly name?: string;\n\treadonly price?: string;\n\treadonly permalink?: string;\n};\n\nconst wpProduct2aiProduct = ( p: WpProduct ): AiProductSummary => ( {\n\tid: p.id,\n\ttype: 'product',\n\turl: p.permalink || '',\n\tname: p.name || '',\n\tprice: p.price ? `${ p.price }` : '',\n\tpublicationDate: p.date_created || '',\n\tlastUpdate: p.date_modified || '',\n} );\n\nasync function getProducts(\n\twhat: 'random' | ReadonlyArray< number >\n): Promise< ReadonlyArray< AiProductSummary > > {\n\ttry {\n\t\tconst products = await apiFetch< ReadonlyArray< WpProduct > >( {\n\t\t\tpath:\n\t\t\t\t'random' === what\n\t\t\t\t\t? '/wc/v3/products?per_page=50&status=publish&orderby=rand'\n\t\t\t\t\t: `/wc/v3/products?include=${ what.join( ',' ) }`,\n\t\t} );\n\n\t\treturn products.map( wpProduct2aiProduct );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nasync function getLatestExperiments(): Promise<\n\tReadonlyArray< Experiment | Heatmap >\n> {\n\ttry {\n\t\treturn apiFetch< ReadonlyArray< Experiment | Heatmap > >( {\n\t\t\tpath: '/nab/v1/ai/latest-experiments',\n\t\t} );\n\t} catch ( _ ) {\n\t\treturn [];\n\t}\n}\n\nfunction getToday() {\n\tconst date = new Date();\n\treturn date.toISOString();\n}\n\nfunction getLastYear() {\n\tconst date = new Date();\n\tdate.setFullYear( date.getFullYear() - 1 );\n\treturn date.toISOString();\n}\n\nfunction getVariantLabel( index: number, variantName = '' ): string {\n\tconst prefix = sprintf(\n\t\t/* translators: %s: Letter, such as A, B, or C. */\n\t\t_x( 'Variant %s', 'text', 'nelio-ab-testing' ),\n\t\tgetLetter( index )\n\t);\n\tvariantName = variantName.trim();\n\treturn variantName ? `${ prefix }  ${ variantName }` : prefix;\n}\n\nfunction getGoalLabel( index: number, goalName = '' ): string {\n\tconst prefix =\n\t\t0 === index\n\t\t\t? _x( 'Default Goal', 'text', 'nelio-ab-testing' )\n\t\t\t: sprintf(\n\t\t\t\t\t/* translators: %d: Number. */\n\t\t\t\t\t_x( 'Goal %d', 'text', 'nelio-ab-testing' ),\n\t\t\t\t\tindex\n\t\t\t  );\n\tgoalName = goalName.trim();\n\treturn goalName ? `${ prefix }  ${ goalName }` : prefix;\n}\n\nasync function breathe< T >( callback: () => Promise< T > ): Promise< T > {\n\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\tconst start = Date.now();\n\tconst result = await callback();\n\tif ( undefined === result ) {\n\t\treturn result;\n\t}\n\n\tconst elapsed = Date.now() - start;\n\tconst delay = Math.max( 0, MIN_RUN_TIME_FOR_ASYNC_CALLBACK - elapsed );\n\tawait new Promise( ( r ) => setTimeout( r, delay ) );\n\n\treturn result;\n}\n\nasync function updateCandidate< T extends AiTestCandidate >(\n\tcandidate: T\n): Promise< T > {\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'ai/testGenerationState'\n\t);\n\tif ( ! state || 'hypothesis-selection' !== state.type ) {\n\t\treturn candidate;\n\t}\n\n\tawait setState( {\n\t\t...state,\n\t\tcandidates: state.candidates.map( ( c ) =>\n\t\t\tc.type === candidate.type && c.id === candidate.id ? candidate : c\n\t\t),\n\t} );\n\treturn candidate;\n}\n\nasync function getItemsInType(\n\tpostType: string,\n\tpostIds: ReadonlyArray< number >\n): Promise<\n\tReadonlyArray< AiPostSummary > | ReadonlyArray< AiProductSummary >\n> {\n\tconst ids = postIds.join( ',' );\n\tif ( 'product' === postType && ( await isWooCommerceEnabled() ) ) {\n\t\tconst products = await apiFetch< ReadonlyArray< WpProduct > >( {\n\t\t\tpath: `/wc/v3/products?include=${ ids }`,\n\t\t} );\n\t\treturn products.map( wpProduct2aiProduct );\n\t}\n\n\tconst restType =\n\t\t'page' === postType || 'post' === postType\n\t\t\t? `${ postType }s`\n\t\t\t: postType;\n\n\tconst posts = await apiFetch< ReadonlyArray< WpPost > >( {\n\t\tpath: `/wp/v2/${ restType }?include=${ ids }`,\n\t} );\n\treturn posts.map( wpPost2aiPost( { analytics: [] } ) );\n}\n\nasync function createExperiment( type: ExperimentType ): Promise< Experiment > {\n\tconst addTestedPostScopeRule =\n\t\t'tested-post-with-consistency' === type.supports?.scope ||\n\t\t'tested-product-with-consistency' === type.supports?.scope;\n\treturn apiFetch< Experiment >( {\n\t\tpath: '/nab/v1/experiment',\n\t\tmethod: 'post',\n\t\tdata: {\n\t\t\ttype: type.name,\n\t\t\taddTestedPostScopeRule,\n\t\t},\n\t} );\n}\n\nasync function saveExperiment( experiment: Experiment ): Promise< Experiment > {\n\treturn apiFetch< Experiment >( {\n\t\tpath: `/nab/v1/experiment/${ experiment.id }`,\n\t\tmethod: 'PUT',\n\t\tdata: experiment,\n\t} );\n}\n\nasync function saveAiSettings(\n\tsettings: AiSettings,\n\tstateId: Uuid\n): Promise< void > {\n\tawait setState( {\n\t\tid: stateId,\n\t\ttype: 'analyzing-site',\n\t\twhat: 'saving-ai-settings',\n\t} );\n\tconst result = await apiFetch< AiSettings >( {\n\t\tpath: '/nab/v1/ai/settings',\n\t\tmethod: 'PUT',\n\t\tdata: { settings },\n\t} );\n\tawait dispatch( NAB_DATA ).updateAiSettings( result );\n}\n\nfunction getErrorCode( error: unknown ): Maybe< string > {\n\tif ( ! error ) {\n\t\treturn undefined;\n\t}\n\n\tif ( 'string' === typeof error ) {\n\t\treturn error ? error : undefined;\n\t}\n\n\tconst code =\n\t\t'object' === typeof error &&\n\t\t'code' in error &&\n\t\t'string' === typeof error.code &&\n\t\t!! error.code\n\t\t\t? error.code\n\t\t\t: undefined;\n\n\tif ( ! code ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( error );\n\t}\n\n\treturn code;\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect, select } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { keyBy } from 'lodash';\nimport { createErrorNotice } from '@nab/utils';\nimport type { Alternative, AlternativeId, Experiment, Maybe } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\n/**\n * Stops the experiment in the database.\n */\nexport async function stopExperiment(): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/isExperimentBeingStopped',\n\t\ttrue\n\t);\n\n\tlet experiment: Maybe< Experiment >;\n\ttry {\n\t\texperiment =\n\t\t\tawait resolveSelect( NAB_DATA ).getExperiment( experimentId );\n\t\tif ( ! experiment ) {\n\t\t\treturn;\n\t\t}\n\t} catch ( e ) {\n\t\tawait createErrorNotice( e );\n\t\treturn;\n\t}\n\n\tlet stoppedExperiment: Experiment;\n\ttry {\n\t\tstoppedExperiment = await apiFetch< Experiment >( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/stop`,\n\t\t\tmethod: 'PUT',\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x( 'Test cant be stopped', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t\t'editor/isExperimentBeingStopped',\n\t\t\tfalse\n\t\t);\n\t\treturn;\n\t}\n\n\tconst newAlternatives = keyBy( stoppedExperiment.alternatives || [], 'id' );\n\n\tconst newExperiment: Experiment = {\n\t\t...stoppedExperiment,\n\t\tlinks: {\n\t\t\t...stoppedExperiment.links,\n\t\t\t...experiment.links,\n\t\t},\n\t\talternatives: ( experiment.alternatives || [] ).map(\n\t\t\t( alternative ) => ( {\n\t\t\t\t...alternative,\n\t\t\t\tlinks: updateLinksKeepingPreviewAndHeatmap(\n\t\t\t\t\talternative,\n\t\t\t\t\tnewAlternatives[ alternative.id ]\n\t\t\t\t),\n\t\t\t} )\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t) as any as Experiment[ 'alternatives' ],\n\t};\n\n\tawait dispatch( NAB_DATA ).receiveExperiment(\n\t\texperiment.id,\n\t\tnewExperiment\n\t);\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/isExperimentBeingStopped',\n\t\tfalse\n\t);\n}\n\n/**\n * Pauses the experiment in the database.\n */\nexport async function pauseExperiment(): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/isExperimentBeingPaused',\n\t\ttrue\n\t);\n\n\ttry {\n\t\tawait apiFetch( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/pause`,\n\t\t\tmethod: 'PUT',\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x( 'Test cant be paused', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t\t'editor/isExperimentBeingPaused',\n\t\t\tfalse\n\t\t);\n\t\treturn;\n\t}\n\n\twindow.location.href = select( NAB_DATA ).getAdminUrl( 'admin.php', {\n\t\tpage: 'nelio-ab-testing-experiment-edit',\n\t\texperiment: experimentId,\n\t} );\n}\n\n/**\n * Applies the given alternative.\n *\n * @param {string} alternativeId the alternative to apply.\n */\nexport async function applyAlternative(\n\talternativeId: AlternativeId\n): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/alternativeBeingApplied',\n\t\talternativeId\n\t);\n\n\tlet experiment: Experiment;\n\ttry {\n\t\texperiment = await apiFetch( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/apply/${ alternativeId }`,\n\t\t\tmethod: 'PUT',\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x( 'Alternative cant be applied', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t\t'editor/alternativeBeingApplied',\n\t\t\tfalse\n\t\t);\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).changeLastAppliedAlternative(\n\t\texperiment.id,\n\t\talternativeId\n\t);\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'editor/alternativeBeingApplied',\n\t\tfalse\n\t);\n}\n\n/**\n * Changes the public result status of the experiment in the database.\n * @param status\n */\nexport async function setPublicResultStatus(\n\tstatus: boolean\n): Promise< void > {\n\tconst experimentId = select( NAB_DATA ).getPageAttribute(\n\t\t'editor/activeExperiment'\n\t);\n\tif ( ! experimentId ) {\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute( 'isLocked', true );\n\n\tlet changedStatus = status;\n\ttry {\n\t\tchangedStatus = await apiFetch< boolean >( {\n\t\t\tpath: `/nab/v1/experiment/${ experimentId }/public-result-status`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: { status },\n\t\t} );\n\t} catch ( e ) {\n\t\tawait createErrorNotice(\n\t\t\te,\n\t\t\t_x(\n\t\t\t\t'Public results status cant be changed',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t)\n\t\t);\n\t\tawait dispatch( NAB_DATA ).setPageAttribute( 'isLocked', false );\n\t\treturn;\n\t}\n\n\tawait dispatch( NAB_DATA ).setPageAttribute( 'isLocked', false );\n\tawait dispatch( NAB_DATA ).setPageAttribute(\n\t\t'results/isReadOnlyActive',\n\t\tchangedStatus\n\t);\n}\n\n// =======\n// HELPERS\n// =======\n\nfunction updateLinksKeepingPreviewAndHeatmap(\n\toldAlternative?: Alternative,\n\tnewAlternative?: Alternative\n): Maybe< Alternative[ 'links' ] > {\n\tif ( ! oldAlternative?.links ) {\n\t\treturn;\n\t}\n\n\tif ( ! newAlternative?.links ) {\n\t\treturn oldAlternative.links;\n\t}\n\n\treturn {\n\t\t...newAlternative.links,\n\t\theatmap: oldAlternative.links.heatmap,\n\t\tpreview: oldAlternative.links.preview,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, select } from '@safe-wordpress/data';\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function purchaseQuota(\n\tquantity: number,\n\tcurrency: string\n): Promise< void > {\n\tconst subscriptionId = select( NAB_DATA ).getSubscriptionId();\n\tif ( ! subscriptionId ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tawait dispatch( NAB_DATA ).lock();\n\n\t\tawait apiFetch( {\n\t\t\tpath: `/nab/v1/subscription/${ subscriptionId }/quota`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tquantity,\n\t\t\t\tcurrency,\n\t\t\t},\n\t\t} );\n\n\t\twindow.location.reload();\n\t} catch ( error ) {\n\t\tawait dispatch( NAB_DATA ).unlock();\n\t\tawait createErrorNotice( error );\n\t}\n}\n","export * from './ai';\nexport * from './experiment';\nexport * from './fastspring';\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { find, values } from 'lodash';\nimport type {\n\tEntityKind,\n\tEntityKindName,\n\tEntityId,\n\tEntityInstance,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getKindEntities(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch< Record< EntityKindName, EntityKind > >(\n\t\t\t{ path: '/nab/v1/types' }\n\t\t);\n\t\tawait dispatch( NAB_DATA ).receiveKindEntitiesQuery(\n\t\t\tvalues( response )\n\t\t);\n\t} catch ( e ) {\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( e );\n\t}\n}\n\nexport async function getEntityRecord(\n\tkind?: EntityKindName,\n\tkey?: EntityId\n): Promise< void > {\n\tif ( ! kind || ! key ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst entities = await resolveSelect( NAB_DATA ).getKindEntities();\n\t\tconst entity = find( entities, { name: kind } );\n\t\tif ( ! entity ) {\n\t\t\t// eslint-disable-next-line\n\t\t\tconsole.warn( `Entity ${ kind } not found in`, entities );\n\t\t\treturn;\n\t\t}\n\n\t\tconst record = await apiFetch< EntityInstance >( {\n\t\t\tpath: `/nab/v1/post/?id=${ key }&type=${ kind }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveEntityRecords( kind, record );\n\t} catch ( e ) {\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( e );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport type { Experiment, ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getExperiment( id: ExperimentId ): Promise< void > {\n\tif ( ! id ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst experiment = await apiFetch< Experiment >( {\n\t\t\tpath: `/nab/v1/experiment/${ id }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveExperiment( id, experiment );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to retrieve experiment ${ id }. Error: ${ message }.`\n\t\t);\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\nimport type { State } from '../../types';\n\nexport async function getProducts(): Promise< void > {\n\ttry {\n\t\tconst { currency, products, subscriptionId } = await apiFetch<\n\t\t\tState[ 'fastspring' ]\n\t\t>( {\n\t\t\tpath: '/nab/v1/fastspring',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveFSCurrency( currency );\n\t\tawait dispatch( NAB_DATA ).receiveFSProducts( products );\n\t\tawait dispatch( NAB_DATA ).receiveFSSubscriptionId( subscriptionId );\n\t} catch ( error ) {\n\t\tawait createErrorNotice(\n\t\t\terror,\n\t\t\t_x(\n\t\t\t\t'Error while retrieving NC products.',\n\t\t\t\t'text',\n\t\t\t\t'nelio-ab-testing'\n\t\t\t)\n\t\t);\n\t\tthrow error;\n\t}\n}\n\nexport const getCurrency = async (): Promise< void > =>\n\tvoid ( await resolveSelect( NAB_DATA ).getProducts() );\n\nexport const getSubscriptionId = async (): Promise< void > =>\n\tvoid ( await resolveSelect( NAB_DATA ).getProducts() );\n","export * from './entities';\nexport * from './experiment';\nexport * from './fastspring';\nexport * from './media';\nexport * from './results';\nexport * from './settings';\nexport * from './site-quota';\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport type { MediaId, Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getMediaUrl( id: MediaId ): Promise< void > {\n\tif ( ! id ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\ttype Media = { readonly source_url: Url };\n\t\tconst media = await apiFetch< Media >( {\n\t\t\tpath: `/wp/v2/media/${ id }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveMediaUrl( id, media.source_url );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Error while retrieving media. Error: ${ message }` );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch, resolveSelect } from '@safe-wordpress/data';\nimport { _x, sprintf } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\nimport type { CloudResults, ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\nimport { processResult } from '../../utils';\n\nexport async function getExperimentResults(\n\tid: ExperimentId\n): Promise< void > {\n\ttry {\n\t\tconst experiment = await resolveSelect( NAB_DATA ).getExperiment( id );\n\t\tif ( ! experiment ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = await apiFetch< CloudResults >( {\n\t\t\tpath: `/nab/v1/experiment/${ id }/result`,\n\t\t} );\n\n\t\tconst result = processResult( data, experiment );\n\t\tawait dispatch( NAB_DATA ).receiveExperimentResult( id, result );\n\t} catch ( error ) {\n\t\tawait createErrorNotice(\n\t\t\terror,\n\t\t\tsprintf(\n\t\t\t\t/* translators: %d: Test id. */\n\t\t\t\t_x(\n\t\t\t\t\t'Unable to retrieve results in test %d.',\n\t\t\t\t\t'text',\n\t\t\t\t\t'nelio-ab-testing'\n\t\t\t\t),\n\t\t\t\tid\n\t\t\t)\n\t\t);\n\t}\n}\n\nexport async function getPageViews( id: ExperimentId ): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getAlternativePageViews(\n\tid: ExperimentId\n): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getDaysRunning( id: ExperimentId ): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getExperimentResultsStatus(\n\tid: ExperimentId\n): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n\nexport async function getConversionRatesOfAlternativesInGoal(\n\tid: ExperimentId\n): Promise< void > {\n\tawait resolveSelect( NAB_DATA ).getExperimentResults( id );\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\nimport { addQueryArgs } from '@safe-wordpress/url';\n\n/**\n * External dependencies\n */\nimport type {\n\tEntityKindName,\n\tMenuId,\n\tMenu,\n\tPaginatedResults,\n\tTheme,\n\tTemplate,\n\tTemplateContextGroup,\n\tTemplateContextGroupName,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getActivePlugins(): Promise< void > {\n\ttry {\n\t\tconst plugins = await apiFetch< ReadonlyArray< string > >( {\n\t\t\tpath: '/nab/v1/plugins',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receivePlugins( plugins );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to retrieve active plugins. Error: ${ message }`\n\t\t);\n\t}\n}\n\nexport async function hasMenus(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch< PaginatedResults< Menu > >( {\n\t\t\tpath: '/nab/v1/menu/search?query',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveMenus( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to check if site has menus. Error: ${ message }`\n\t\t);\n\t}\n}\n\nexport async function getMenu( id: MenuId ): Promise< void > {\n\ttry {\n\t\tconst record = await apiFetch< Menu >( {\n\t\t\tpath: `/nab/v1/menu/${ id }`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveMenus( record );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Unable to retrieve menu ${ id }. Error: ${ message }` );\n\t}\n}\n\nexport async function getTemplateContexts(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch<\n\t\t\tPaginatedResults<\n\t\t\t\tRecord< TemplateContextGroupName, TemplateContextGroup >\n\t\t\t>\n\t\t>( {\n\t\t\tpath: addQueryArgs( `/nab/v1/template-contexts` ),\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveTemplateContexts( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn(\n\t\t\t`Unable to retrieve template contexts. Error: ${ message }`\n\t\t);\n\t}\n}\n\nexport async function getTemplates(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch<\n\t\t\tPaginatedResults<\n\t\t\t\tRecord< EntityKindName, ReadonlyArray< Template > >\n\t\t\t>\n\t\t>( {\n\t\t\tpath: addQueryArgs( `/nab/v1/templates` ),\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveTemplates( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Unable to retrieve templates. Error: ${ message }` );\n\t}\n}\n\nexport async function getThemes(): Promise< void > {\n\ttry {\n\t\tconst response = await apiFetch<\n\t\t\tPaginatedResults< ReadonlyArray< Theme > >\n\t\t>( {\n\t\t\tpath: `/nab/v1/themes`,\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveThemes( response.results );\n\t} catch ( error ) {\n\t\tconst message = error instanceof Error ? error.message : 'unknown';\n\t\t// eslint-disable-next-line\n\t\tconsole.warn( `Unable to retrieve themes. Error: ${ message }` );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@safe-wordpress/api-fetch';\nimport { dispatch } from '@safe-wordpress/data';\nimport { _x } from '@safe-wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { createErrorNotice } from '@nab/utils';\nimport type { Quota } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store as NAB_DATA } from '../../../store';\n\nexport async function getQuota(): Promise< void > {\n\ttry {\n\t\tconst quota = await apiFetch< Quota >( {\n\t\t\tpath: '/nab/v1/site/quota',\n\t\t} );\n\t\tawait dispatch( NAB_DATA ).receiveSiteQuota( quota );\n\t} catch ( error ) {\n\t\tawait createErrorNotice(\n\t\t\t_x( 'Unable to retrieve quota.', 'text', 'nelio-ab-testing' )\n\t\t);\n\t\tthrow error;\n\t}\n}\n","/**\n * External dependencies\n */\nimport type {\n\tAiTestGenerationState,\n\tAlternativeId,\n\tCssEditorState,\n\tCssSelectorFinderState,\n\tECommercePlugin,\n\tEntityId,\n\tEntityInstance,\n\tEntityKind,\n\tEntityKindName,\n\tExperiment,\n\tExperimentId,\n\tExperimentTypeName,\n\tExportSettings,\n\tFastSpringProduct,\n\tGoalId,\n\tJavaScriptEditorState,\n\tMaybe,\n\tMediaId,\n\tMenu,\n\tMenuId,\n\tOrderStatus,\n\tPluginSettings,\n\tQuota,\n\tResults,\n\tSegmentId,\n\tTemplate,\n\tTemplateContextGroup,\n\tTemplateContextGroupName,\n\tTheme,\n\tThemeId,\n\tUrl,\n} from '@nab/types';\n\nexport type State = {\n\treadonly entities: {\n\t\treadonly config: ReadonlyArray< EntityKind >;\n\t\treadonly data: Record<\n\t\t\tEntityKindName,\n\t\t\tPartial< Record< EntityId, EntityInstance > >\n\t\t>;\n\t};\n\n\treadonly experiments: Partial< Record< ExperimentId, Experiment > >;\n\n\treadonly fastspring: {\n\t\treadonly currency: string;\n\t\treadonly products: ReadonlyArray< FastSpringProduct >;\n\t\treadonly subscriptionId: string;\n\t};\n\n\treadonly media: Partial< Record< MediaId, Url > >;\n\n\treadonly page: PageAttributes;\n\n\treadonly results: Partial< Record< ExperimentId, Results > >;\n\n\treadonly settings: {\n\t\treadonly today: string;\n\t\treadonly language: string;\n\t\treadonly menus: Partial< Record< MenuId, Menu > >;\n\t\treadonly nelio: PluginSettings;\n\t\treadonly plugins: ReadonlyArray< string >;\n\t\treadonly templateContexts: Record<\n\t\t\tTemplateContextGroupName,\n\t\t\tTemplateContextGroup\n\t\t>;\n\t\treadonly templates: Record< EntityKindName, ReadonlyArray< Template > >;\n\t\treadonly themes: Partial< Record< ThemeId, Theme > >;\n\t\treadonly ecommerce: Record< ECommercePlugin, ECommerceSettings >;\n\t};\n\n\treadonly siteQuota: Maybe< Quota >;\n};\n\nexport type ECommerceSettings = {\n\treadonly currency: string;\n\treadonly currencyPosition: 'before' | 'after';\n\treadonly currencySymbol: string;\n\treadonly decimalSeparator: string;\n\treadonly numberOfDecimals: number;\n\treadonly orderStatuses: ReadonlyArray< OrderStatus >;\n\treadonly thousandsSeparator: string;\n};\n\n// ============\n// HELPER TYPES\n// ============\n\ntype PageAttributes = {\n\treadonly isLocked: boolean;\n\treadonly sidebarDimensions: {\n\t\treadonly top: number;\n\t\treadonly height: string;\n\t\treadonly applyFix: boolean;\n\t};\n\n\treadonly 'ai/testGenerationState'?: false | AiTestGenerationState;\n\n\treadonly 'account/usesFullViewAgency'?: boolean;\n\n\treadonly 'css-preview/areControlsVisible'?: boolean;\n\treadonly 'css-preview/activeResolution'?: 'desktop' | 'tablet' | 'mobile';\n\treadonly 'css-selector/cssSelectorFinderState'?: CssSelectorFinderState;\n\treadonly 'css-selector/openedCssSelectorFinderId'?: number | string;\n\treadonly 'css-editor/cssEditorState'?: CssEditorState;\n\n\treadonly 'components/javascriptGlobals'?: ReadonlyArray< string >;\n\n\treadonly 'php-preview/areControlsVisible'?: boolean;\n\treadonly 'php-preview/activeResolution'?: 'desktop' | 'tablet' | 'mobile';\n\n\treadonly 'editor/activeExperiment'?: ExperimentId;\n\treadonly 'editor/activeExperimentType'?: ExperimentTypeName;\n\treadonly 'editor/activeGoal'?: GoalId;\n\treadonly 'editor/activeSegment'?: SegmentId;\n\treadonly 'editor/alternativeBeingApplied'?: AlternativeId | false;\n\treadonly 'editor/alternativeInPreviewDialog'?: AlternativeId | false;\n\treadonly 'editor/isExperimentBeingPaused'?: boolean;\n\treadonly 'editor/isExperimentBeingStopped'?: boolean;\n\n\treadonly 'results/isPublicView'?: boolean;\n\treadonly 'results/isReadOnlyActive'?: boolean;\n\treadonly 'results/shouldShowUniqueResults'?: boolean;\n\treadonly 'results/isExportModalOpen'?: boolean;\n\treadonly 'results/isExporting'?: boolean;\n\treadonly 'results/exportSettings'?: ExportSettings;\n\n\treadonly 'javascript-editor/javascriptEditorState'?: JavaScriptEditorState;\n\n\treadonly 'menus/isConfirmationDialogForMenuDuplicationVisible'?: boolean;\n\treadonly 'menus/isDuplicatingMenu'?: boolean;\n\n\treadonly 'welcome/isPluginBeingInitialized'?: boolean;\n\treadonly 'welcome/isPolicyAccepted'?: boolean;\n\n\treadonly 'widgets/isConfirmationDialogForWidgetDuplicationVisible'?: boolean;\n\treadonly 'widgets/isDuplicatingWidgets'?: boolean;\n};\n","/**\n * WordPress dependencies\n */\nimport { dispatch, select, subscribe } from '@safe-wordpress/data';\n\n/**\n * External dependencies\n */\nimport { keyBy, find } from 'lodash';\nimport { getDate, format, date as formatDate } from '@nab/date';\nimport { getValue, setValue } from '@nab/utils';\nimport type {\n\tAlternativeId,\n\tAlternativeTrackingData,\n\tCloudAlternativeResults,\n\tCloudDayResults,\n\tCloudResults,\n\tCloudSegmentResults,\n\tDayResults,\n\tGoal,\n\tExperiment,\n\tResults,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { store } from './index';\nimport type { State } from './types';\n\nexport function syncPageAttributeWithLocalStore<\n\tAttr extends keyof State[ 'page' ],\n>( attr: Attr, defaultValue: State[ 'page' ][ Attr ] ): void {\n\tvoid dispatch( store ).setPageAttribute(\n\t\tattr,\n\t\tgetValue( attr, defaultValue )\n\t);\n\tlet prevValue = select( store ).getPageAttribute( attr ) ?? defaultValue;\n\tsubscribe( () => {\n\t\tconst value = select( store ).getPageAttribute( attr ) ?? defaultValue;\n\t\tif ( value === prevValue ) {\n\t\t\treturn;\n\t\t}\n\t\tprevValue = value;\n\t\tsetValue( attr, value );\n\t}, store );\n}\n\nexport function differenceInDays(\n\td1: string | Date,\n\td2: string | Date\n): number {\n\tif ( 'string' === typeof d1 ) {\n\t\td1 = new Date( d1 );\n\t}\n\n\tif ( 'string' === typeof d2 ) {\n\t\td2 = new Date( d2 );\n\t}\n\n\tconst now = new Date();\n\tif ( ! d1 || isNaN( d1.getTime() ) ) {\n\t\td1 = now;\n\t}\n\n\tif ( ! d2 || isNaN( d2.getTime() ) ) {\n\t\td2 = now;\n\t}\n\n\tconst diffTime = Math.abs( d2.getTime() - d1.getTime() );\n\treturn Math.ceil( diffTime / ( 1000 * 60 * 60 * 24 ) );\n}\n\nexport function processResult(\n\tdata: CloudResults,\n\texperiment: Experiment\n): Results {\n\treturn {\n\t\twinners: extractWinnersInfo( data.results || {}, experiment.goals ),\n\t\twasEnoughData: extractWhetherThereWasEnoughData(\n\t\t\tdata.results || {},\n\t\t\texperiment.goals\n\t\t),\n\t\talternatives: extractAlternativesInfo( data, experiment ),\n\t\tsegments: processResultOfSegments( data, experiment ),\n\t\t...( data.uniqueResults && {\n\t\t\twinnersUnique: extractWinnersInfo(\n\t\t\t\tdata.uniqueResults || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t\twasEnoughDataUnique: extractWhetherThereWasEnoughData(\n\t\t\t\tdata.uniqueResults || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t} ),\n\t};\n}\n\nfunction processResultOfSegments(\n\tdata: CloudResults,\n\texperiment: Experiment\n): Results[ 'segments' ] {\n\tconst { segments } = experiment;\n\tconst EMPTY_SEGMENT_RESULTS = { results: {} };\n\n\treturn keyBy(\n\t\tsegments.map( ( segment, index ) => ( {\n\t\t\twinners: extractWinnersInfo(\n\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.results || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t\twasEnoughData: extractWhetherThereWasEnoughData(\n\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.results || {},\n\t\t\t\texperiment.goals\n\t\t\t),\n\t\t\talternatives: extractAlternativesInfo(\n\t\t\t\tdata.segments?.[ `s${ index + 1 }` ] || EMPTY_SEGMENT_RESULTS,\n\t\t\t\texperiment\n\t\t\t),\n\t\t\t...( data.segments?.[ `s${ index + 1 }` ]?.uniqueResults && {\n\t\t\t\twinnersUnique: extractWinnersInfo(\n\t\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.uniqueResults || {},\n\t\t\t\t\texperiment.goals\n\t\t\t\t),\n\t\t\t\twasEnoughDataUnique: extractWhetherThereWasEnoughData(\n\t\t\t\t\tdata.segments?.[ `s${ index + 1 }` ]?.uniqueResults || {},\n\t\t\t\t\texperiment.goals\n\t\t\t\t),\n\t\t\t} ),\n\t\t\tid: segment.id,\n\t\t} ) ),\n\t\t'id'\n\t);\n}\n\nfunction extractWinnersInfo(\n\tresults: CloudSegmentResults[ 'results' ],\n\tgoals: ReadonlyArray< Goal >\n): Results[ 'winners' ] {\n\tconst winners: Results[ 'winners' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst data = results[ `g${ i }` ] || false;\n\n\t\tif ( data && 'win' === data.status ) {\n\t\t\twinners[ goalId ] = {\n\t\t\t\talternative: data.winner,\n\t\t\t\tconfidence: data.confidence,\n\t\t\t};\n\t\t}\n\t}\n\n\treturn winners;\n}\n\nfunction extractWhetherThereWasEnoughData(\n\tresults: CloudSegmentResults[ 'results' ],\n\tgoals: ReadonlyArray< Goal >\n): Results[ 'wasEnoughData' ] {\n\tconst enoughData: Results[ 'wasEnoughData' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst data = results[ `g${ i }` ];\n\t\tenoughData[ goalId ] = 'low-data' !== data?.status;\n\t}\n\n\treturn enoughData;\n}\n\nfunction extractAlternativesInfo(\n\tdata: CloudSegmentResults,\n\texperiment: Experiment\n): Results[ 'alternatives' ] {\n\tconst { alternatives } = experiment;\n\tconst endDate =\n\t\t'finished' === experiment.status\n\t\t\t? getDate( experiment.endDate || '' )\n\t\t\t: new Date();\n\tconst formattedEndDate = formatDate( 'Y-m-d', endDate );\n\n\treturn {\n\t\tcontrol: setAlternativeTrackingData( {}, 'control', '', '', [] ),\n\t\t...keyBy(\n\t\t\talternatives.map( ( alternative, index ) =>\n\t\t\t\tsetAlternativeTrackingData(\n\t\t\t\t\tdata[ `a${ index }` ] || {},\n\t\t\t\t\talternative.id,\n\t\t\t\t\texperiment.startDate || '',\n\t\t\t\t\tformattedEndDate,\n\t\t\t\t\texperiment.goals\n\t\t\t\t)\n\t\t\t),\n\t\t\t'id'\n\t\t),\n\t};\n}\n\nfunction setAlternativeTrackingData(\n\tdata: CloudAlternativeResults,\n\tid: AlternativeId,\n\tstartDate: string,\n\tendDate: string,\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData {\n\treturn {\n\t\tid,\n\t\tvisits: data.v || 0,\n\t\tvalues: fixConversionValues( data.cv, goals ),\n\t\tconversions: fixConversionCounts( data.c, goals ),\n\t\tconversionRates: fixConversionRates( data.cr, goals ),\n\t\timprovementFactors: fixImprovementFactors( data.i, goals ),\n\n\t\tuniqueVisits: data.uv || 0,\n\t\tuniqueValues: fixConversionValues( data.ucv, goals ),\n\t\tuniqueConversions: fixConversionCounts( data.uc, goals ),\n\t\tuniqueConversionRates: fixConversionRates( data.ucr, goals ),\n\t\tuniqueImprovementFactors: fixImprovementFactors( data.ui, goals ),\n\n\t\ttimeline: fixTimelineData( data.t, startDate, endDate, goals ),\n\t};\n}\n\nfunction fixConversionValues(\n\tvalues: CloudAlternativeResults[ 'cv' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'conversions' ] {\n\tconst result: AlternativeTrackingData[ 'conversions' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tresult[ goalId ] = values?.[ `g${ i }` ] || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixConversionCounts(\n\tconversions: CloudAlternativeResults[ 'c' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'conversions' ] {\n\tconst result: AlternativeTrackingData[ 'conversions' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tresult[ goalId ] = conversions?.[ `g${ i }` ] || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixConversionRates(\n\tconversionRates: CloudAlternativeResults[ 'cr' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'conversionRates' ] {\n\tconst result: AlternativeTrackingData[ 'conversionRates' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst cr = conversionRates?.[ `g${ i }` ] || 0;\n\t\tresult[ goalId ] = Math.round( cr * 100 ) / 100 || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixImprovementFactors(\n\timprovementFactors: CloudAlternativeResults[ 'i' ],\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'improvementFactors' ] {\n\tconst result: AlternativeTrackingData[ 'improvementFactors' ] = {};\n\tconst numberOfGoals = goals.length;\n\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tconst factor = improvementFactors?.[ `g${ i }` ] || 0;\n\t\tresult[ goalId ] = Math.round( factor * 100 ) / 100 || 0;\n\t}\n\n\treturn result;\n}\n\nfunction fixTimelineData(\n\ttimeline: CloudAlternativeResults[ 't' ],\n\tstartDate: string,\n\tendDate: string,\n\tgoals: ReadonlyArray< Goal >\n): AlternativeTrackingData[ 'timeline' ] {\n\tconst result: DayResults[] = [];\n\tconst day = getDate( startDate );\n\tlet dayLabel;\n\n\tdo {\n\t\tdayLabel = format( 'Y-m-d', day );\n\t\tconst cloudDayResults = findDayResults( timeline, dayLabel );\n\t\tconst dayResults = fixDayResults( cloudDayResults, goals );\n\t\tresult.push( dayResults );\n\t\tday.setDate( day.getDate() + 1 );\n\t} while ( endDate > dayLabel );\n\n\treturn result;\n}\n\nfunction findDayResults(\n\ttimeline: CloudAlternativeResults[ 't' ],\n\tdate: string\n): CloudDayResults {\n\tconst result = find( timeline, { d: date } ) || {};\n\t// NOTE. We need the explicit cast because TypeScript doesn't understand that d is and can be a string.\n\treturn { v: 0, ...result, d: date } as CloudDayResults;\n}\n\nfunction fixDayResults(\n\tdata: CloudDayResults,\n\tgoals: ReadonlyArray< Goal >\n): DayResults {\n\tconst result: DayResults = {\n\t\tvisits: data.v || 0,\n\t\tdate: data.d,\n\t\tconversions: {},\n\t\tvalues: {},\n\t\tuniqueVisits: data.uv || 0,\n\t\tuniqueConversions: {},\n\t\tuniqueValues: {},\n\t};\n\n\tconst numberOfGoals = goals.length;\n\tfor ( let i = 0; i < numberOfGoals; ++i ) {\n\t\tconst goal = goals[ i ];\n\t\tif ( ! goal ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst goalId = goal.id;\n\t\tresult.conversions[ goalId ] = data[ `g${ i }` ] || 0;\n\t\tresult.values[ goalId ] = data[ `val${ i }` ] || 0;\n\t\tresult.uniqueConversions[ goalId ] = data[ `ug${ i }` ] || 0;\n\t\tresult.uniqueValues[ goalId ] = data[ `uval${ i }` ] || 0;\n\t}\n\n\treturn result;\n}\n","export const getPostTypeExceptions = ( {\n\tisWooCommerceEnabled,\n}: {\n\tisWooCommerceEnabled: boolean;\n} ): ReadonlyArray< string > => [\n\t'page',\n\t'post',\n\t'attachment',\n\t'nelio_popup',\n\t'nelio_form',\n\t'elementor_library',\n\t'e-floating-buttons',\n\t'nab_elementor_popup',\n\t'sc_product',\n\t'wp_block',\n\t...( isWooCommerceEnabled ? [ 'product', 'product_variation' ] : [] ),\n];\n","/**\n * WordPress dependencies\n */\nimport baseApiFetch from '@wordpress/api-fetch';\nimport { format } from '@wordpress/date';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport type { APIFetchOptions } from '@wordpress/api-fetch';\n\nconst apiFetch = < T >( options: APIFetchOptions ): Promise< T > => {\n\tconst { url, path } = options;\n\tconst nabts = format( 'YmjHi' ).substring( 0, 11 ) + '0';\n\treturn baseApiFetch( {\n\t\t...options,\n\t\t...( url && {\n\t\t\turl: isRestApiRequest( options )\n\t\t\t\t? addQueryArgs( url, { nabts } )\n\t\t\t\t: url,\n\t\t} ),\n\t\t...( path && { path: addQueryArgs( path, { nabts } ) } ),\n\t\tparse: true,\n\t} );\n};\n\nexport * from '@wordpress/api-fetch';\nexport default apiFetch;\n\n// =======\n// HELPERS\n// =======\nconst isRestApiRequest = ( options: APIFetchOptions ): boolean =>\n\t!! options.url?.includes( '/wp-json/' ) ||\n\t!! options.url?.includes( 'rest_route' ) ||\n\t!! Object.keys( options ).includes( 'rest_route' );\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * WordPress dependencies\n */\nexport * from '@wordpress/data';\nimport {\n\tregister as doRegister,\n\tresolveSelect as doResolveSelect,\n\tsubscribe as doSubscribe,\n\tuseSelect as doUseSelect,\n} from '@wordpress/data';\nimport type {\n\tMapSelect,\n\tReduxStoreConfig,\n\tStoreDescriptor,\n\tUseSelectReturn,\n} from '@wordpress/data/build-types/types';\n\n// ==========\n// TYPESCRIPT\n// ==========\n\n// register should exist.\nexport function register(\n\tstore: StoreDescriptor< ReduxStoreConfig< any, any, any > >\n): void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call\n\tdoRegister( store );\n}\n\n// subscribe should exist.\nexport function subscribe(\n\tlistener: () => void,\n\tstore?: StoreDescriptor< any > | string\n): () => void {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doSubscribe( listener, store );\n}\n\n// useSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function useSelect< T extends MapSelect | StoreDescriptor< any > >(\n\tmapSelect: T,\n\tdependencies?: unknown[]\n): UseSelectReturn< T > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\treturn doUseSelect< T >( mapSelect, dependencies );\n}\n\n// resolveSelect should properly infer types, but it doesnt, so we manually fix it.\nexport function resolveSelect< T extends StoreDescriptor< any > >(\n\tkey: T\n): ResolvableSelectors< UseSelectReturn< T > > {\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-return\n\treturn doResolveSelect( key );\n}\n\ntype ResolvableSelectors<\n\tS extends Record< string, ( ...args: any[] ) => any >,\n> = {\n\treadonly [ K in keyof S ]: S[ K ] extends {\n\t\tPromisedSignature: ( ...args: any[] ) => any;\n\t}\n\t\t? S[ K ][ 'PromisedSignature' ]\n\t\t: S[ K ] extends ( ...args: infer A ) => infer R\n\t\t? ( ...args: A ) => Promise< R >\n\t\t: never;\n};\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/element';\nimport { createRoot, render as legacyRender } from '@wordpress/element';\n\nexport function render(\n\telement: JSX.Element,\n\tcontainer: Element | null\n): void {\n\tif ( ! container ) {\n\t\treturn;\n\t}\n\n\tif ( createRoot ) {\n\t\tconst root = createRoot( container );\n\t\troot.render( element );\n\t} else {\n\t\tlegacyRender( element, container );\n\t}\n}\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/html-entities';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/i18n';\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/url';\n","module.exports = window[\"nab\"][\"date\"];","module.exports = window[\"nab\"][\"utils\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"lodash\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * as data from './index';\n"],"names":["useDispatch","useSelect","useCallback","store","NAB_DATA","useExperimentAttribute","attr","defaultValue","select","getPageAttribute","getExperimentAttribute","exp","_a","usePageAttribute","value","setPageAttribute","setValue","v","usePluginSetting","getPluginSetting","useAdminUrl","path","args","getAdminUrl","castArray","receiveKindEntitiesQuery","kindEntities","type","receiveEntityRecords","kind","records","items","changeLastAppliedAlternative","experimentId","alternativeId","receiveExperiment","key","experiment","receiveFSCurrency","currency","receiveFSProducts","products","receiveFSSubscriptionId","subscriptionId","receiveMediaUrl","id","url","name","lock","unlock","receiveExperimentResult","result","setToday","today","setSiteLanguage","language","receivePlugins","plugins","receiveMenus","menus","receiveTemplateContexts","templateContexts","receiveTemplates","templates","receiveThemes","themes","receivePluginSettings","settings","receiveECommerceSettings","ecommerce","updateAiSettings","receiveSiteQuota","quota","INIT_STATE","entities","config","data","experiments","fastspring","media","page","isLocked","sidebarDimensions","top","height","applyFix","results","nelio","adminUrl","apiUrl","areAutoTutorialsEnabled","areSubscriptionControlsDisabled","capabilities","goalTracking","homeUrl","isCookieTestingEnabled","maxCombinations","minConfidence","minSampleSize","restUrl","segmentEvaluation","siteId","subscription","themeSupport","widgets","woocommerce","currencyPosition","currencySymbol","decimalSeparator","numberOfDecimals","orderStatuses","thousandsSeparator","edd","siteQuota","undefined","controls","createReduxStore","dispatch","register","format","reducer","selectors","realActions","sideEffects","resolvers","syncPageAttributeWithLocalStore","actions","Object","assign","Date","isEqual","keyBy","state","action","actualReducer","newItems","filter","item","length","createAlternative","createGoal","EMPTY_ARRAY","newExperiment","alternatives","maybeAddDefaultAlternatives","goals","segments","map","isLastApplied","alternative","newAlternative","defaultOriginal","defaultFirstAlt","combineReducers","sortBy","newMenus","menu","newThemes","newEcommerceSettings","aiSettings","getKindEntities","getEntityRecord","getExperiment","_getExperimentAttribute","attribute","getDefaultGoal","getECommercePlugin","goalId","isWooCommerceGoal","isEddGoal","goal","find","g","_b","conversionActions","every","getCurrency","getProducts","getSubscriptionId","getMediaUrl","_getPageAttribute","values","createIndexedSelector","differenceInDays","getExperimentResults","getWinnersInExperiment","areResultsUnique","areUniqueResultsVisible","activeSegment","winnerKey","dependants","getAlternativeResultsInExperiment","getPageViews","getUniquePageViews","getTotalPageViews","resultsOfAlternatives","reduce","memo","visits","uniqueVisits","getAlternativePageViews","getConversions","gid","_c","_d","uniqueConversions","conversions","getTotalRevenue","acc","uniqueValues","getDaysRunning","startDate","endDate","status","getExperimentResultsStatus","requiredConfidence","winner","_f","_e","confidence","getWinnerAlternative","getConversionRatesOfAlternativesInGoal","uniqueConversionRates","conversionRates","getRevenuesOfAlternativesInGoal","getResultsOfAlternatives","shouldShowUniqueResults","areUniqueResultsAvailable","some","a","createSelector","addQueryArgs","keys","make","isDefined","isPlan","getToday","getSiteLanguage","getActivePlugins","hasMenus","getMenu","getTemplateContexts","getTemplates","getThemes","hasCapability","capability","includes","_getPluginSetting","getRestUrl","replace","getECommerceSetting","_getECommerceSetting","plugin","canLimitSiteQuota","isSubscribedTo","expectedPlan","mode","actualPlan","getQuota","apiFetch","resolveSelect","decodeEntities","_x","sprintf","groupBy","mapValues","omit","toPairs","uniq","v4","uuid","getContentMetrics","getContentSummary","getLetter","getPostTypeExceptions","MAX_PAGES","MAX_ITEMS_PER_TYPE","MIN_RUN_TIME_FOR_ASYNC_CALLBACK","searchTestCandidates","validExperimentTypes","newAiSettings","previousAiSettings","Error","breathe","saveAiSettings","error","setState","reason","getErrorCode","currentAiSettings","abTesting","getAbTestingData","getCachedCandidates","aiAnalysis","base","candidates","expandFirstCandidate","siteAnalysis","stateId","testing","_","analyzeSite","baseCandidates","processSiteAnalysis","generateTestHypotheses","candidate","hypothesisState","updateCandidate","isVisible","loadTestHypotheses","metaInformation","createTestFromHypothesis","hypothesis","t","testType","baseExperiment","createExperiment","defaultGoal","supports","automaticGoalSetup","attributes","scope","controlUrl","saveExperiment","description","ai","version","basedOnNelioAIHypothesis","postId","control","postType","links","variants","alt","isReady","changes","analytics","getMostViewedItems","context","pages","getPages","customPosts","getCustomPosts","blogAnalysis","getBlogAnalysis","woocommerceAnalysis","getWooCommerceAnalysis","content","post","posts","product","blog","info","urlAnalytics","monthlyViews","what","method","itemsToLoad","i","p","settledPromises","Promise","allSettled","postIds","getItemsInType","validSettledPromises","postsByType","ps","flatMap","itemsByType","PENDING_HYPOTHESIS_STATE","finalCandidates","attrs","__rest","c","hypotheses","h","relatedTests","e","analysis","step","isSearchingCandidates","setTimeout","rationale","priority","hypothesisGeneration","firstCandidate","firstCandidateWithHypotheses","contentSummary","names","suggestedHypotheses","unsortedHypotheses","currentState","wpPost2aiPost","title","rendered","link","contentMetrics","publicationDate","date","lastUpdate","modified","seoTitle","yoast_head_json","trim","seoDescription","_h","_g","privacy","postTypes","getItemsUnsafe","experimentTypes","maxItems","wpApiSettings","window","response","fetch","root","getLastYear","headers","nonce","credentials","totalPostsInLastYear","Number","parseInt","get","averagePostsPerMonth","kinds","postTypeExceptions","isWooCommerceEnabled","k","startsWith","relevantIds","heatmaps","trackingMode","trackedPostType","trackedPostId","restType","relevantItems","join","excludedIds","pendingItemCount","Math","max","remainingItems","bestSellers","getBestSellers","latestOrders","getLatestOrders","randomProducts","missingProductIds","o","missingProducts","enabled","allExperiments","getLatestExperiments","getVariantLabel","getGoalLabel","ca","trackedUrl","aux","document","createElement","rows","r","innerHTML","display","querySelector","href","matches","match","quantity","includeOrders","includeWooCommerceOrderInfo","latestOrdersRaw","date_created","total","line_items","product_id","wpProduct2aiProduct","permalink","price","date_modified","toISOString","setFullYear","getFullYear","index","variantName","prefix","goalName","callback","start","now","elapsed","delay","ids","addTestedPostScopeRule","code","console","createErrorNotice","stopExperiment","stoppedExperiment","newAlternatives","updateLinksKeepingPreviewAndHeatmap","pauseExperiment","location","applyAlternative","setPublicResultStatus","changedStatus","oldAlternative","heatmap","preview","purchaseQuota","reload","warn","entity","record","message","__awaiter","source_url","processResult","subscribe","getDate","formatDate","getValue","prevValue","d1","d2","isNaN","getTime","diffTime","abs","ceil","winners","extractWinnersInfo","wasEnoughData","extractWhetherThereWasEnoughData","extractAlternativesInfo","processResultOfSegments","uniqueResults","winnersUnique","wasEnoughDataUnique","EMPTY_SEGMENT_RESULTS","segment","_j","_l","_k","numberOfGoals","enoughData","formattedEndDate","setAlternativeTrackingData","fixConversionValues","cv","fixConversionCounts","fixConversionRates","cr","improvementFactors","fixImprovementFactors","uv","ucv","uc","ucr","uniqueImprovementFactors","ui","timeline","fixTimelineData","round","factor","day","dayLabel","cloudDayResults","findDayResults","dayResults","fixDayResults","push","setDate","d","baseApiFetch","options","nabts","substring","isRestApiRequest","parse","doRegister","doResolveSelect","doSubscribe","doUseSelect","listener","mapSelect","dependencies","createRoot","render","legacyRender","element","container"],"ignoreList":[],"sourceRoot":""}