(()=>{var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{conversionActionLibrary:()=>m});var n={};e.r(n),e.d(n,{name:()=>ee,settings:()=>te});var s={};e.r(s),e.d(s,{name:()=>ue,settings:()=>pe});var o={};e.r(o),e.d(o,{name:()=>we,settings:()=>je});var a={};e.r(a),e.d(a,{name:()=>tt,settings:()=>nt});var i={};e.r(i),e.d(i,{name:()=>lt,settings:()=>dt});var r={};e.r(r),e.d(r,{name:()=>xt,settings:()=>vt});var c={};e.r(c),e.d(c,{name:()=>kt,settings:()=>Ct});var l={};e.r(l),e.d(l,{name:()=>Yt,settings:()=>Wt});var d={};e.r(d),e.d(d,{name:()=>yn,settings:()=>wn});var u={};e.r(u),e.d(u,{name:()=>$n,settings:()=>Fn});var p={};e.r(p),e.d(p,{name:()=>Ln,settings:()=>zn});var g={};e.r(g),e.d(g,{name:()=>ts,settings:()=>ns});var x={};e.r(x),e.d(x,{name:()=>rs,settings:()=>cs});var v={};e.r(v),e.d(v,{name:()=>gs,settings:()=>xs});var m={};e.r(m),e.d(m,{registerCoreConversionActions:()=>vs});const b=window.nab.conversionActions,h=window.wp.i18n,f=window.React;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_.apply(null,arguments)}const y=window.ReactJSXRuntime,w=window.wp.components,j=Object.assign(e=>(0,y.jsx)(w.BaseControl,Object.assign({__nextHasNoMarginBottom:!0},e)),w.BaseControl),A=(Object.assign(e=>(0,y.jsx)(w.CheckboxControl,Object.assign({__nextHasNoMarginBottom:!0},e)),w.CheckboxControl),Object.assign(e=>(0,y.jsx)(w.FormTokenField,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),w.FormTokenField),Object.assign(e=>(0,y.jsx)(w.RangeControl,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),w.RangeControl)),E=e=>(0,y.jsx)(w.SelectControl,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),I=Object.assign(e=>(0,y.jsx)(w.TextControl,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),w.TextControl),k=(Object.assign(e=>(0,y.jsx)(w.TextareaControl,Object.assign({__nextHasNoMarginBottom:!0},e)),w.TextareaControl),Object.assign(e=>(0,y.jsx)(w.ToggleControl,Object.assign({__nextHasNoMarginBottom:!0},e)),w.ToggleControl)),C=(Object.assign(e=>(0,y.jsx)(w.__experimentalToggleGroupControl,Object.assign({__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0},e)),w.__experimentalToggleGroupControl),window.wp.compose),O=window.wp.element,S=window.wp.data;function T(e,t){return(0,S.useSelect)(e,t)}function $(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=$(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}const F=function(){for(var e,t,n=0,s="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=$(e))&&(s&&(s+=" "),s+=t);return s},P=window.nab.components,M=window.nab.data,N="nab/editor",R=({attributes:{mode:e,value:t},scope:n,errors:s,experimentId:o,setAttributes:a,setScope:i})=>{const r=(0,C.useInstanceId)(R),c=L(),[l,d]=z(r),u=H(),{saveExperiment:p}=(0,S.useDispatch)(N),g=`nab-click-action__value-${r}`;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(E,{label:(0,h._x)("Matching Mode","text","nelio-ab-testing"),options:B,value:e,onChange:e=>a({mode:e})}),(0,y.jsx)(j,{id:g,className:F({"nab-conversion-action__field--has-errors":s.value}),label:V[e],help:(0,y.jsx)(P.ErrorText,{value:s.value}),children:(0,y.jsxs)("div",{className:"nab-click-conversion-action",children:[(0,y.jsx)(I,{id:g,className:"nab-click-conversion-action__value",value:t,onChange:e=>a({value:e})}),(0,y.jsx)(w.Button,{variant:"secondary",className:"nab-click-conversion-action__button",onClick:()=>{p().then(()=>d(!0))},children:"css"===e?(0,h._x)("Explore","command","nelio-ab-testing"):(0,h._x)("View","command","nelio-ab-testing")}),l&&(0,y.jsx)(P.CssSelectorFinder,{initialUrl:u,experimentId:o,alternatives:c,initialValue:t,initialMode:e,onAccept:(e,t)=>a({mode:e,value:t}),onClose:()=>d(!1)})]})}),(0,y.jsx)(P.ConversionActionScope,{scope:n,setScope:i,error:s._scope})]})},L=()=>T(e=>{var t;return(null===(t=e(N))||void 0===t?void 0:t.getAlternatives())||[]},[]),z=e=>{e=`${e}`;const[t,n]=(0,M.usePageAttribute)("css-selector/openedCssSelectorFinderId","");return[t===e,t=>n(t?e:"")]},H=()=>T(e=>{const{getPluginSetting:t}=e(M.store),n=t("homeUrl");if(!e(N))return n;const{getAlternative:s}=e(N),o=s("control"),a=o.links.preview||n;if(!D(o))return a;const{postType:i,postId:r}=o.attributes;if(!i||!r)return a;const{getEntityRecord:c}=e(M.store),l=c(i,r);return(null==l?void 0:l.link)||a},[]),V={id:(0,h._x)("Element ID","text","nelio-ab-testing"),class:(0,h._x)("CSS Class","text","nelio-ab-testing"),css:(0,h._x)("CSS Selector","text","nelio-ab-testing")},B=Object.keys(V).map(e=>e).map(e=>({value:e,label:V[e]})),D=e=>{var t,n;return!!(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.postType)&&!!(null===(n=null==e?void 0:e.attributes)||void 0===n?void 0:n.postId)},U=({attributes:{mode:e,value:t},scope:n})=>{if(!t)return(0,y.jsx)(y.Fragment,{children:Y(n)});switch(e){case"css":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(W(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"id":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(q(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"class":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(Z(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})})}};function Y(e){switch(e.type){case"all-pages":return(0,h._x)("A visitor clicks on an HTML element on any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor clicks on an HTML element on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor clicks on an HTML element on certain pages.","text","nelio-ab-testing")}}function W(e){switch(e.type){case"all-pages":
/* translators: %s: CSS selector, such as "a.button". */
return(0,h._x)("A visitor clicks on an element matching the CSS selector %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: CSS selector, such as "a.button". */
return(0,h._x)("A visitor clicks on an element matching the CSS selector %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: CSS selector, such as "a.button". */
return(0,h._x)("A visitor clicks on an element matching the CSS selector %s on certain pages.","text","nelio-ab-testing")}}function q(e){switch(e.type){case"all-pages":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor clicks on the %s element on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor clicks on the %s element on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor clicks on the %s element on certain pages.","text","nelio-ab-testing")}}function Z(e){switch(e.type){case"all-pages":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor clicks on an element with class %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor clicks on an element with class %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor clicks on an element with class %s on certain pages.","text","nelio-ab-testing")}}function J(e){const{mode:t,value:n}=e;if(!n)switch(t){case"css":return{value:(0,h._x)("Please write a CSS selector that matches the elements you want to track","user","nelio-ab-testing")};case"id":return{value:(0,h._x)("Please write the ID of the element you want to track","user","nelio-ab-testing")};case"class":return{value:(0,h._x)("Please write a class name of the element you want to track","user","nelio-ab-testing")}}switch(t){case"css":return Q(n);case"id":return G(n);case"class":return X(n)}}const K=document.createElement("br"),Q=e=>{try{K.querySelector(e)}catch(e){return{value:(0,h._x)("Please use a valid CSS selector. For instance, you can use a tag name such as “a” or “div,” a class selector such as “.some-class,” or more complex rules such as “section.content button.subscribe”","user","nelio-ab-testing")}}return{}},G=e=>/^#[a-zA-Z0-9-_]+$/.test(e)?{value:(0,h._x)("The ID of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")}:/^[a-zA-Z0-9-_]+$/.test(e)?{}:{value:(0,h._x)("The ID of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")},X=e=>/^\.[a-zA-Z0-9-_]+$/.test(e)?{value:(0,h._x)("A class name of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")}:/^[a-zA-Z0-9-_]+$/.test(e)?{}:{value:(0,h._x)("A class name of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")},ee="nab/click",te={name:ee,category:"interaction",title:(0,h._x)("Click","text","nelio-ab-testing"),description:(0,h._x)("Counts a click as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M102.577 53.793 26.484 24.539a1.54 1.54 0 0 0-1.635.35l-.034.034a1.55 1.55 0 0 0-.35 1.635L53.72 102.65c.222.587.784.97 1.405.98a1.53 1.53 0 0 0 1.431-.946l9.291-22.33L79.362 93.87a2.23 2.23 0 0 0 3.15 0c3.11-3.108 8.168-8.167 11.276-11.275a2.23 2.23 0 0 0 0-3.151L80.29 65.929l22.33-9.292c.579-.238.953-.809.945-1.43a1.56 1.56 0 0 0-.988-1.414",className:"icon_svg__black",style:{fill:"#34a3d3"}}))},validate:J,attributes:{mode:"css",value:""},scope:{type:"test-scope"},edit:R,view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(U,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ne.apply(null,arguments)}const se=({attributes:{mode:e,value:t},scope:n})=>{if(!t)return(0,y.jsx)(y.Fragment,{children:oe(n)});switch(e){case"partial":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(ae(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"start":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(ie(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"end":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(re(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"regex":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(ce(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"exact":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(le(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})})}};function oe(e){switch(e.type){case"all-pages":return(0,h._x)("A visitor clicks on a link on any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor clicks on a link on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor clicks on a link on certain pages.","text","nelio-ab-testing")}}function ae(e){switch(e.type){case"all-pages":
/* translators: %s: Some text that might appear in a URL, such as "wordpress", or "amazon", or "nelio". */
return(0,h._x)("A visitor clicks on a link containing %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: Some text that might appear in a URL, such as "wordpress", or "amazon", or "nelio". */
return(0,h._x)("A visitor clicks on a link containing %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: Some text that might appear in a URL, such as "wordpress", or "amazon", or "nelio". */
return(0,h._x)("A visitor clicks on a link containing %s on certain pages.","text","nelio-ab-testing")}}function ie(e){switch(e.type){case"all-pages":
/* translators: %s: URL fragment, such as "https://nelio". */
return(0,h._x)("A visitor clicks on a link starting with %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: URL fragment, such as "https://nelio". */
return(0,h._x)("A visitor clicks on a link starting with %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: URL fragment, such as "https://nelio". */
return(0,h._x)("A visitor clicks on a link starting with %s on certain pages.","text","nelio-ab-testing")}}function re(e){switch(e.type){case"all-pages":
/* translators: %s: URL fragment, such as "/blog/". */
return(0,h._x)("A visitor clicks on a link ending with %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: URL fragment, such as "/blog/". */
return(0,h._x)("A visitor clicks on a link ending with %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: URL fragment, such as "/blog/". */
return(0,h._x)("A visitor clicks on a link ending with %s on certain pages.","text","nelio-ab-testing")}}function ce(e){switch(e.type){case"all-pages":
/* translators: %s: JavaScript regular expression. */
return(0,h._x)("A visitor clicks on a link matching regex %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: JavaScript regular expression. */
return(0,h._x)("A visitor clicks on a link matching regex %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: JavaScript regular expression. */
return(0,h._x)("A visitor clicks on a link matching regex %s on certain pages.","text","nelio-ab-testing")}}function le(e){switch(e.type){case"all-pages":
/* translators: %s: URL such as "https://wordpress.org/plugins/nelio-ab-testing/". */
return(0,h._x)("A visitor clicks on a link to %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: URL such as "https://wordpress.org/plugins/nelio-ab-testing/". */
return(0,h._x)("A visitor clicks on a link to %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: URL such as "https://wordpress.org/plugins/nelio-ab-testing/". */
return(0,h._x)("A visitor clicks on a link to %s on certain pages.","text","nelio-ab-testing")}}const de=window.nab.utils,ue="nab/click-external-link",pe={name:ue,category:"interaction",title:(0,h._x)("Click external link","text","nelio-ab-testing"),description:(0,h._x)("Counts a click to an external link as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"m68.339 14.883 44.778 44.778a6.123 6.123 0 0 1 0 8.678L68.34 113.117a6.123 6.123 0 0 1-8.678 0L14.883 68.34a6.123 6.123 0 0 1 0-8.678L59.66 14.883a6.123 6.123 0 0 1 8.678 0",className:"icon_svg__black",style:{opacity:1,strokeOpacity:1,fillOpacity:1,stroke:"none",strokeDasharray:"none",strokeMiterlimit:4,strokeWidth:32.581790506,fill:"#ffc304"}}),f.createElement("path",{d:"M49.179 54.37V89.93h9.46v-26.1h18.27V54.37h-27.73",className:"icon_svg__white",style:{fill:"#fff"}}),f.createElement("path",{d:"M73.553 71.129V47.072l20.833 12.029z",className:"icon_svg__white",style:{fill:"#fff"}}))},validate:function(e){const{mode:t,value:n}=e;if(!n)return{value:(0,h._x)("Please write the expected value","user","nelio-ab-testing")};if("regex"===t){const e=(0,de.isRegExpInvalid)(n);return e?{value:e}:{}}const s=(0,de.isUrlFragmentInvalid)(n);return s?{value:s}:{}},attributes:{mode:"exact",value:""},scope:{type:"test-scope"},edit:({attributes:{mode:e,value:t},scope:n,errors:s,setAttributes:o,setScope:a})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(E,{label:(0,h._x)("URL Matching Mode","text","nelio-ab-testing"),options:[{value:"exact",label:(0,h._x)("URL exactly matches the expected value","text","nelio-ab-testing")},{value:"partial",label:(0,h._x)("URL contains the expected value","text","nelio-ab-testing")},{value:"start",label:(0,h._x)("URL starts with the expected value","text","nelio-ab-testing")},{value:"end",label:(0,h._x)("URL ends with the expected value","text","nelio-ab-testing")},{value:"regex",label:(0,h._x)("JavaScript Regular Expression","text","nelio-ab-testing")}],value:e,onChange:e=>o({mode:e})}),(0,y.jsx)(I,{className:F({"nab-conversion-action__field--has-errors":s.value}),label:(0,h._x)("Expected Value","text","nelio-ab-testing"),value:t,help:(0,y.jsx)(P.ErrorText,{value:s.value}),placeholder:(0,h._x)("URL","text","nelio-ab-testing"),onChange:e=>o({value:e})}),(0,y.jsx)(P.ConversionActionScope,{scope:n,setScope:a,error:s._scope})]}),view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(se,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ge.apply(null,arguments)}const xe={meta:{type:"problem",docs:{description:(0,h._x)("Ensure convert() is called","user","nelio-ab-testing")},messages:{missingConvert:(0,h._x)("The function convert() must be called at least once.","text","nelio-ab-testing")},schema:[]},defaultOptions:[],create(e){let t=!1;return{CallExpression(e){"Identifier"===e.callee.type&&"convert"===e.callee.name&&(t=!0)},"Program:exit"(){t||e.report({loc:{line:1,column:0},messageId:"missingConvert"})}}}};function ve(e){const t=e.matchBefore(/utils\.\w*/);if(t)return{from:t.text.replace(/\w*$/,"").length+t.from,options:[{label:"onVariantReady",type:"function",apply:"onVariantReady(() => {\n});",detail:"(callback:Function) => void",info:(0,h._x)("Runs callback when variant is ready.","text","nelio-ab-testing")}]};const n=e.matchBefore(/\w*/);return n&&(n.from!==n.to||e.explicit)?{from:n.from,options:[{label:"convert",type:"function",apply:"convert()",detail:"() => void",info:(0,h._x)("Triggers a conversion using the appropriate variant and goal settings.","text","nelio-ab-testing")},{label:"utils",type:"variable",apply:"utils",detail:"Object",info:(0,h._x)("Contains several helper functions.","text","nelio-ab-testing")}]}:null}const me=(0,h._x)("Write the logic for your conversion here and call “convert()” to actually trigger the conversion when necessary.","user","nelio-ab-testing")+" "+(0,h._x)("Please keep in mind the code will not run until the DOM’s ready.","user","nelio-ab-testing"),be=window.lodash;var he=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n};const fe=e=>{var t=e.attributes,{snippet:n}=t,s=he(t,["snippet"]),o=he(e,["attributes"]);const[a,i]=(0,O.useState)(!1),r=T(e=>{const t=e(M.store).getPageAttribute("editor/activeExperiment");return t?e(M.store).getExperimentAttribute(t,"status"):void 0},[]),{eventName:c}=s;if(c||void 0===n)return(0,y.jsx)(_e,Object.assign({attributes:s},o));const{scope:l}=o;return"running"!==r&&"finished"!==r?(0,y.jsx)(y.Fragment,{children:ye(l)}):(0,y.jsxs)(y.Fragment,{children:[ye(l)+" ",(0,y.jsx)(w.Button,{variant:"link",onClick:()=>i(!0),children:(0,h._x)("View Code","command","nelio-ab-testing")}),a&&(0,y.jsx)(w.Modal,{title:(0,h._x)("Custom Tracking Code","text","nelio-ab-testing"),onRequestClose:()=>i(!1),children:(0,y.jsx)(P.CodeEditor,{language:"javascript",value:n,readOnly:!0})})]})},_e=({attributes:{eventName:e},experimentId:t,goalIndex:n})=>{if(!t||void 0===n)return(0,y.jsx)(y.Fragment,{children:(0,h._x)("A conversion is programmatically sent to Nelio’s cloud via JavaScript.","text","nelio-ab-testing")});const s=(0,be.trim)(e)?`nab.<wbr />trigger(<wbr />'${(0,be.trim)(e)}')`:`nab.<wbr />convert(<wbr />${t},<wbr />${n})`;let o;
/* translators: %s: Javascript snippet. */
return o=(0,be.trim)(e)?(0,h._x)("A custom JavaScript event is triggered using %s.","text","nelio-ab-testing"):(0,h._x)("A conversion is programmatically generated in JavaScript using %s.","text","nelio-ab-testing"),(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(o,`<code>${s}</code>`),{code:(0,y.jsx)("code",{}),wbr:(0,y.jsx)("wbr",{})})})};function ye(e){switch(e.type){case"all-pages":return(0,h._x)("A script that runs on any page triggers a conversion.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A script that runs only on a tested page triggers a conversion.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A script that runs only on certain pages triggers a conversion.","text","nelio-ab-testing")}}const we="nab/custom-event",je={name:we,category:"other",title:(0,h._x)("JavaScript Snippet","text","nelio-ab-testing"),description:(0,h._x)("Triggers a conversion programmatically using a script.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"m68.856 26.466-20.602 71.95 10.89 3.118 20.602-71.95ZM42.004 41.665 27.683 55.986 19.67 64l8.01 8.012 14.324 14.321 8.013-8.01L35.692 64l14.322-14.325Zm43.992 0-8.01 8.01 14.322 14.324-14.325 14.324 8.013 8.01L100.32 72.01l8.01-8.012-8.013-8.013z",className:"icon_svg__black",style:{fill:"#70ad54"}}))},attributes:{snippet:(0,h.sprintf)('// %1$s\nwindow.addEventListener( "event-name", () => {\n  // %2$s\n  convert();\n} );',(0,h.sprintf)(/* translators: %s: Event name. */ /* translators: %s: Event name. */
(0,h._x)('Use the appropriate "%s" or create your own snippet.',"user","nelio-ab-testing"),"event-name"),(0,h._x)("Add any additional logic required.","user","nelio-ab-testing"))},scope:{type:"test-scope"},validate:({snippet:e=""})=>/\bconvert\s*()\b/.test(e)?{}:{snippet:(0,h._x)("Call function convert() at least once","user","nelio-ab-testing")},edit:({attributes:{snippet:e},scope:t,errors:n,setAttributes:s,setScope:o})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(j,{help:(0,y.jsx)(P.ErrorText,{value:n.snippet}),children:(0,y.jsx)(P.CodeEditor,{language:"javascript",withBorder:!0,value:e,onChange:e=>s({snippet:e}),placeholder:me,config:{completions:[ve],globals:["convert","utils"],rules:{"detect-convert":{level:"error",module:xe}}}})}),(0,y.jsx)(P.ConversionActionScope,{scope:t,setScope:o,error:n._scope})]}),view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(fe,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};var Ae,Ee,Ie;function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ke.apply(null,arguments)}const Ce=({attributes:e,setAttributes:t,errors:n})=>{const s=(0,C.useInstanceId)(Ce),{value:o}=e,a="some-downloads"===o.type&&"download-ids"===o.value.type&&o.value.downloadIds[0]||0,i=(0,O.useCallback)(e=>t({type:"download-selection",value:e}),[t]);return(0,O.useEffect)(()=>{"download-selection"!==e.type&&i(o)},[e.type,o,i]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k,{label:(0,h._x)("Track conversion if the order contains a specific download.","command","nelio-ab-testing"),checked:"some-downloads"===o.type,onChange:e=>i(e?Te:Se)}),"some-downloads"===o.type&&"download-ids"===o.value.type&&(0,y.jsx)(j,{id:`nab-conversion-action__edd-add-to-cart-${s}`,className:F({"nab-conversion-action__field--has-errors":n.type}),label:(0,y.jsx)(Oe,{downloadId:a}),help:(0,y.jsx)(P.ErrorText,{value:n.type}),children:(0,y.jsx)(P.PostSearcher,{id:`nab-conversion-action__edd-add-to-cart-${s}`,type:"download",perPage:10,value:a,onChange:e=>i({type:"some-downloads",value:{type:"download-ids",mode:"and",downloadIds:e?[e]:[]}})})})]})},Oe=({downloadId:e})=>{const t=$e(e);return t?(0,y.jsx)("span",{children:(0,O.createInterpolateElement)((0,h._x)("Download (<a>View</a>)","text","nelio-ab-testing"),{a:(0,y.jsx)(w.ExternalLink,{href:t})})}):(0,y.jsx)("span",{children:(0,h._x)("Download","text","nelio-ab-testing")})},Se={type:"all-downloads"},Te={type:"some-downloads",value:{type:"download-ids",mode:"and",downloadIds:[]}},$e=e=>T(t=>{var n;return null===(n=t(M.store).getEntityRecord("download",e))||void 0===n?void 0:n.link},[e]),Fe=window.wp.coreData,Pe=window.wp.htmlEntities;const Me=({status:e})=>{const t=De(e);return"complete"===e?(0,y.jsx)(y.Fragment,{children:(0,h._x)("An order is completed.","text","nelio-ab-testing")}):He((0,h.sprintf)(/* translators: %s: Woocommerce order status. */ /* translators: %s: Woocommerce order status. */
(0,h._x)("The status of an order is set to %s.","text","nelio-ab-testing"),Ve(t)))},Ne=({selection:e,status:t})=>{switch(e.type){case"download-ids":return(0,y.jsx)(Re,{selection:e,status:t});case"download-taxonomies":return(0,y.jsx)(Le,{selection:e,status:t})}},Re=({selection:e,status:t})=>{const{downloadIds:n,mode:s,excluded:o=!1}=e,a=Ve(De(t)),i=(0,be.map)(Ue(n),Be);switch(i.length){case 0:return He((0,h.sprintf)(Ze,a));case 1:return He((0,h.sprintf)(o?Je.singleExcluded:Je.singleIncluded,a,i[0]));default:return He((0,h.sprintf)(o?Je.multipleExcluded:Je.multipleIncluded,a,(0,de.listify)(s,i)))}},Le=({selection:e,status:t})=>{const n=Ve(De(t)),s=e.value.filter(e=>!!e.termIds.length),o=(0,be.find)(s,{taxonomy:"download_category"}),a=(0,be.map)(We(null==o?void 0:o.taxonomy,null==o?void 0:o.termIds),Be),i=(0,be.find)(s,{taxonomy:"download_tag"}),r=(0,be.map)(We(null==i?void 0:i.taxonomy,null==i?void 0:i.termIds),Be);if(!(0,de.hasHead)(s))return He((0,h.sprintf)(Ze,n));if((0,de.isSingleton)(s)&&(o||i)){const e=a||r||[],t=(null==o?void 0:o.mode)||(null==i?void 0:i.mode)||"or",s=!!(null==o?void 0:o.excluded)||!!(null==i?void 0:i.excluded)||!1,c=o?Ke:Ge;return(0,de.isSingleton)(e)?He((0,h.sprintf)(s?c.singleExcluded:c.singleIncluded,n,e[0])):He((0,h.sprintf)(s?c.multipleExcluded:c.multipleIncluded,n,(0,de.listify)(t,e)))}if(2===s.length&&o&&i)return He((0,h.sprintf)(/* translators: %1$s: Woocommerce order status. %2$s: List of category names. %3$s: List of tag names. */ /* translators: %1$s: Woocommerce order status. %2$s: List of category names. %3$s: List of tag names. */
(0,h._x)("The status of an order is set to %1$s and said order has at least one download in category %2$s and is tagged as %3$s.","text","nelio-ab-testing"),n,(0,de.listify)(o.mode,a),(0,de.listify)(i.mode,r)));const[c,...l]=(0,be.reverse)(s),d=(0,be.reverse)(l);return(0,y.jsxs)(y.Fragment,{children:[He((0,h.sprintf)(/* translators: %s: Woocommerce order status. */ /* translators: %s: Woocommerce order status. */
(0,h._x)("The status of an order is set to %s and said order has at least one download that","text","nelio-ab-testing"),n)),d.map(e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ze,{selection:e,status:t},e.taxonomy),1===d.length?"":"; "]})),(0,de.isSingleton)(s)?"":et,(0,y.jsx)(ze,{selection:c,status:t}),"."]})},ze=({selection:e})=>{const{taxonomy:t,mode:n,termIds:s,excluded:o}=e,a=Ve(Ye(t)),i=(0,be.map)(We(t,s),Be);return He((0,h.sprintf)(o?Xe.excluded:Xe.included,a,(0,de.listify)(n,i)))},He=e=>(0,O.createInterpolateElement)(e,{em:(0,y.jsx)("em",{}),strong:(0,y.jsx)("strong",{})}),Ve=e=>`<em>${e}</em>`,Be=e=>`<strong>${e}</strong>`,De=e=>T(t=>{var n,s;return null!==(s=null===(n=(0,be.find)(t(M.store).getECommerceSetting("edd","orderStatuses"),{value:e}))||void 0===n?void 0:n.label)&&void 0!==s?s:e},[e]),Ue=e=>T(t=>e.map(e=>{var n;return(0,be.trim)(null===(n=t(M.store).getEntityRecord("download",e))||void 0===n?void 0:n.title)||(0,h.sprintf)(/* translators: %d: Product id. */ /* translators: %d: Product id. */
(0,h._x)("Download #%d","text","nelio-ab-testing"),e)}),[e]),Ye=e=>T(t=>{var n;const s=t(Fe.store).getEntityRecord("root","taxonomy",e);return null!==(n=null==s?void 0:s.labels.singular_name)&&void 0!==n?n:e},[e]),We=(e,t=[])=>T(n=>(n(Fe.store),e&&t?t.map(t=>{const s=n(Fe.store).getEntityRecord("taxonomy",e,t),o=qe(s)?s.name:`#${t}`;return(0,Pe.decodeEntities)(o)}):[]),[e,t]),qe=e=>!!e&&"object"==typeof e&&"name"in e&&!!e.name&&"string"==typeof e.name,Ze=(0,h._x)("The status of an order is set to %s.","text","nelio-ab-testing"),Je={
/* translators: %1$s: Woocomerce status. %2$s: Download name. */
singleExcluded:(0,h._x)("The status of an order not containing download %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: Download name. */
singleIncluded:(0,h._x)("The status of an order containing the download %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of download names. */
multipleExcluded:(0,h._x)("The status of an order not containing any of the downloads %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of download names. */
multipleIncluded:(0,h._x)("The status of an order containing downloads %2$s is set to %1$s.","text","nelio-ab-testing")},Ke={
/* translators: %1$s: Woocomerce status. %2$s: Woocommerce category name. */
singleExcluded:(0,h._x)("The status of an order not containing any download in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: Woocommerce category name. */
singleIncluded:(0,h._x)("The status of an order containing at least one download in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of woocommerce category names. */
multipleExcluded:(0,h._x)("The status of an order not containing any downloads in categories %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of woocommerce category names. */
multipleIncluded:(0,h._x)("The status of an order containing at least one download in categories %2$s is set to %1$s.","text","nelio-ab-testing")},Qe={
/* translators: %1$s: Woocommerce order status. %2$s: Woocomerce tag name. */
singleExcluded:(0,h._x)("The status of an order not containing any download tagged as %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocommerce order status. %2$s: Woocomerce tag name. */
singleIncluded:(0,h._x)("The status of an order containing at least one download tagged as %2$s is set to %1$s.","text","nelio-ab-testing")},Ge=Object.assign(Object.assign({},Qe),{multipleExcluded:Qe.singleExcluded,multipleIncluded:Qe.singleIncluded}),Xe={empty:"",
/* translators: %1$s: Woocomerce taxonomy name. %2$s: List of woocommerce term names. */
excluded:(0,h._x)("doesn’t have %2$s in taxonomy %1$s","text (implicit subject: download)","nelio-ab-testing"),
/* translators: %1$s: Woocomerce taxonomy name. %2$s: List of woocommerce term names. */
included:(0,h._x)("has %2$s in taxonomy %1$s","text (implicit subject: download)","nelio-ab-testing")},et=(0,h._x)(", and ","text (2+ item list)","nelio-ab-testing"),tt="nab/edd-order",nt={name:tt,category:"ecommerce",title:(0,h._x)("Easy Digital Downloads Purchase","text","nelio-ab-testing"),description:(0,h._x)("Counts an Easy Digital Downloads purchase as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),Ae||(Ae=f.createElement("path",{fill:"#2a508d",d:"M11.8 19.2a3.2 3.2 0 0 0-3.2 3.1c0 1.8 1.5 3.2 3.2 3.2h5.7c2.6 0 2.9 2.2 3 2.4l3 16 .2.6 7.6 39.4c0 .2.6 7.5 9.1 7.5h58.4c8.6 0 8.9-6.3 9.1-7.5l7.5-38v-.7s0-4-1.3-5.6-5.2-2.4-5.2-2.4H29.4l-.6-.4a.9.9 0 0 1-.3-.4l-1.9-9.7c0-.2-1-7.5-9.1-7.5h-4.7zm40.3 76a7.4 7.4 0 1 0 0 14.9 7.4 7.4 0 0 0 0-15zm35.1 0a7.4 7.4 0 1 0 0 14.9 7.4 7.4 0 0 0 0-15z",className:"icon_svg__black"})),Ee||(Ee=f.createElement("path",{fill:"#fff",d:"M60.4 59.3 53 66.6l9.9 10 7.3 7.3 7.4-7.4 9.9-9.9-7.4-7.3-9.9 9.8Z",className:"icon_svg__white"})),Ie||(Ie=f.createElement("path",{fill:"#fff",d:"M65.7 45.3h9.1v25.6h-9.1z",className:"icon_svg__white"})))},requiresUniformity:!0,validate:function(e){const{value:t}=e;if("all-downloads"===t.type)return{};const n=t.value;switch(n.type){case"download-ids":return n.downloadIds.length?{}:{type:(0,h._x)("Please select a download","user","nelio-ab-testing")};case"download-taxonomies":{const e=n.value;return e.length?e.every(e=>!!e.termIds.length)?{}:{type:(0,h._x)("Please select one or more terms in all your taxonomies","user","nelio-ab-testing")}:{type:(0,h._x)("Please select one or more taxonomies","user","nelio-ab-testing")}}}},isActive:e=>e(M.store).getActivePlugins().includes("easy-digital-downloads/easy-digital-downloads.php"),attributes:{type:"download-selection",value:{type:"all-downloads"}},scope:{type:"php-function"},edit:Ce,view:e=>{var{attributes:t}=e,n=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n}(e,["attributes"]);const{value:s}=t,{orderStatusForConversion:o="complete"}=n.goal;switch(s.type){case"all-downloads":return(0,y.jsx)(Me,{status:o});case"some-downloads":return(0,y.jsx)(Ne,{selection:s.value,status:o})}}};function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},st.apply(null,arguments)}const ot=({attributes:{mode:e,value:t},scope:n})=>{if(!t)return(0,y.jsx)(y.Fragment,{children:at(n)});switch(e){case"css":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(it(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"id":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(rt(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})});case"class":return(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(ct(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})})})}};function at(e){switch(e.type){case"all-pages":return(0,h._x)("A visitor views an HTML element on any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor views an HTML element on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor views an HTML element on certain pages.","text","nelio-ab-testing")}}function it(e){switch(e.type){case"all-pages":
/* translators: %s: CSS selector, such as "a.button". */
return(0,h._x)("A visitor views an element matching the CSS selector %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: CSS selector, such as "a.button". */
return(0,h._x)("A visitor views an element matching the CSS selector %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: CSS selector, such as "a.button". */
return(0,h._x)("A visitor views an element matching the CSS selector %s on certain pages.","text","nelio-ab-testing")}}function rt(e){switch(e.type){case"all-pages":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor views the %s element on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor views the %s element on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor views the %s element on certain pages.","text","nelio-ab-testing")}}function ct(e){switch(e.type){case"all-pages":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor views an element with class %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor views an element with class %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: HTML id, such as "content". */
return(0,h._x)("A visitor views an element with class %s on certain pages.","text","nelio-ab-testing")}}const lt="nab/element-view",dt={name:lt,category:"view",title:(0,h._x)("Element view","text","nelio-ab-testing"),description:(0,h._x)("Triggers a conversion when an element is visible on page.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",st({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M62.82 95.55a45.3 45.3 0 0 1-7.991-.933c-7.802-1.639-15.094-5.296-21.66-10.863-2.38-2.018-4.854-4.523-6.947-7.034a61 61 0 0 1-7.716-11.783l-.473-.94.23-.462c2.41-4.845 5.733-9.711 9.43-13.806a62 62 0 0 1 5.191-5.099c4.302-3.73 9.02-6.688 13.942-8.739 4.501-1.875 9.113-2.99 13.88-3.354 1.15-.088 1.553-.1 3.294-.1 1.737 0 2.093.01 3.27.1 9.42.707 18.551 4.519 26.575 11.093a60.6 60.6 0 0 1 6.276 5.97c3.731 4.092 7.071 8.923 9.555 13.819l.291.573-.217.438a63.4 63.4 0 0 1-8.448 12.843 60 60 0 0 1-5.925 6.02c-8.41 7.366-18.253 11.558-28.61 12.186-1.22.074-2.87.104-3.947.07m2.889-10.541a21.5 21.5 0 0 0 3.368-.554 21 21 0 0 0 8.11-4.042 22.7 22.7 0 0 0 3.132-3.132 20.9 20.9 0 0 0 4.554-11.073c.076-.771.1-1.28.1-2.114 0-.835-.024-1.344-.1-2.115a20.9 20.9 0 0 0-4.554-11.072c-.643-.795-1.728-1.929-2.451-2.56-2.58-2.254-5.545-3.81-8.79-4.614-1.651-.41-3-.58-4.783-.605a19 19 0 0 0-2.643.116 20.94 20.94 0 0 0-10.839 4.53 22.7 22.7 0 0 0-3.132 3.133 20.9 20.9 0 0 0-4.554 11.072c-.076.771-.1 1.28-.1 2.115s.024 1.343.1 2.114c.4 4.041 1.985 7.898 4.554 11.073a22.7 22.7 0 0 0 3.132 3.132A21.1 21.1 0 0 0 57.355 84c1.697.564 3.406.9 5.253 1.031.622.045 2.51.032 3.1-.021m-2.36-8.341a14 14 0 0 1-2.064-.283c-3.078-.671-5.837-2.529-7.647-5.146-1.216-1.76-1.928-3.705-2.169-5.928-.06-.547-.06-1.88 0-2.434.285-2.676 1.292-5.021 3.015-7.02.248-.288.917-.964 1.206-1.218a12.67 12.67 0 0 1 5.766-2.873c.919-.186 1.524-.245 2.52-.247.81-.001 1.106.017 1.79.112 3.378.464 6.468 2.34 8.474 5.146a12.5 12.5 0 0 1 2.2 5.399c.108.68.134 1.062.134 1.918 0 1.203-.098 2.008-.383 3.135-.746 2.959-2.63 5.614-5.195 7.326a12.45 12.45 0 0 1-5.766 2.067c-.366.037-1.522.065-1.881.046z",className:"icon_svg__black",style:{fill:"#951c6f"}}))},validate:J,attributes:{mode:"css",value:""},scope:{type:"test-scope"},edit:R,view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(ot,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ut.apply(null,arguments)}const pt=({scope:e})=>{const t=gt(e);return(0,y.jsx)(y.Fragment,{children:t})},gt=e=>{switch(e.type){case"all-pages":return(0,h._x)("A visitor engages with any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor engages with a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor engages with certain pages.","text","nelio-ab-testing")}},xt="nab/engagement",vt={name:xt,category:"interaction",title:(0,h._x)("Engagement","text","nelio-ab-testing"),description:(0,h._x)("Triggers a conversion when a visitor engages with a page.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",ut({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M79.537 18.986a29.55 29.55 0 0 0-20.903 8.655L45.284 40.99a.82.82 0 0 0 0 1.16l12.77 12.768a.82.82 0 0 0 1.16 0L72.553 41.57a9.85 9.85 0 0 1 14.048.12c3.755 3.882 3.584 10.104-.234 13.923L73.144 68.84a.82.82 0 0 0 0 1.16l12.767 12.77a.82.82 0 0 0 1.16 0l13.15-13.148c11.567-11.56 11.772-30.395.213-41.968a29.55 29.55 0 0 0-20.897-8.667zM40.062 46.551a.82.82 0 0 0-.582.24l-6.383 6.387a3.283 3.283 0 0 0 0 4.64l9.285 9.287a3.283 3.283 0 0 0 4.644 0l6.383-6.383a.82.82 0 0 0 0-1.16l-12.767-12.77a.82.82 0 0 0-.58-.241zM22.283 72.9A3.283 3.283 0 0 0 19 76.183a3.283 3.283 0 0 0 3.283 3.283h9.85a3.283 3.283 0 0 0 3.282-3.283 3.283 3.283 0 0 0-3.283-3.283zm45.637 1.51a.82.82 0 0 0-.58.24l-6.384 6.384a3.283 3.283 0 0 0 0 4.644l9.287 9.285a3.283 3.283 0 0 0 4.64 0l6.387-6.383a.82.82 0 0 0 0-1.163L68.5 74.65a.82.82 0 0 0-.58-.24zM38.188 86.84a3.3 3.3 0 0 0-1.135.1 3.3 3.3 0 0 0-1.472.85l-6.965 6.965a3.283 3.283 0 0 0 0 4.642 3.283 3.283 0 0 0 4.644 0l6.964-6.964a3.283 3.283 0 0 0 0-4.642 3.28 3.28 0 0 0-2.036-.95zm13.644 5.758a3.283 3.283 0 0 0-3.283 3.283v9.85a3.283 3.283 0 0 0 3.283 3.283 3.283 3.283 0 0 0 3.283-3.283v-9.85a3.283 3.283 0 0 0-3.283-3.283",className:"icon_svg__black",style:{fill:"#ef5848"}}))},requiresSingleness:!0,attributes:{},scope:{type:"test-scope"},edit:({scope:e,errors:t,setScope:n})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:(0,h._x)("A visitor is considered engaged if they stay on the targeted page for 10 seconds or more, scroll halfway down, or click on something (like a link or button).","text","nelio-ab-testing")}),(0,y.jsx)(P.ConversionActionScope,{scope:e,setScope:n,error:t._scope})]}),view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(pt,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mt.apply(null,arguments)}function bt(e){return"nab_elementor_form"===e.formType||"nab_hubspot_form"===e.formType}function ht(e){return"nab_hubspot_form"===e.formType?(0,h._x)("Form ID","text","nelio-ab-testing"):(0,h._x)("Form Name","text","nelio-ab-testing")}const ft=({attributes:e,scope:t,errors:n,setAttributes:s,setScope:o})=>{const{formId:a,formType:i,formName:r=""}=e,c=(0,C.useInstanceId)(ft),l=_t();return(0,O.useEffect)(()=>{var e;!i&&(null===(e=l[0])||void 0===e?void 0:e.value)&&s({formType:l[0].value,formId:void 0,formName:void 0})},[i,l,s]),(0,y.jsxs)(y.Fragment,{children:[l.length>1&&(0,y.jsx)(E,{label:(0,h._x)("Form Type","text","nelio-ab-testing"),options:l,value:i,onChange:e=>s({formType:e,formId:void 0,formName:void 0})}),bt(e)?(0,y.jsx)(I,{id:`nab-conversion-action__form-submission-${c}`,label:ht(e),help:(0,y.jsx)(P.ErrorText,{value:n.formName}),value:r,onChange:e=>s({formType:i,formId:0,formName:e})}):(0,y.jsx)(j,{id:`nab-conversion-action__form-submission-${c}`,className:F({"nab-conversion-action__field--has-errors":n.formId}),label:(0,h._x)("Actual Form","text","nelio-ab-testing"),help:(0,y.jsx)(P.ErrorText,{value:n.formId}),children:(0,y.jsx)(P.PostSearcher,{id:`nab-conversion-action__form-submission-${c}`,type:i,perPage:10,value:a,onChange:e=>s({formType:i,formId:e,formName:void 0})})}),(0,y.jsx)(P.ConversionActionScope,{scope:t,setScope:o,error:n._scope})]})},_t=()=>{const e=T(e=>e(M.store).getKindEntities()||de.EMPTY_ARRAY,[]);return(0,O.useMemo)(()=>{const t=e.filter(e=>"form"===e.kind).map(e=>({value:e.name,label:e.labels.singular_name}));return(0,be.sortBy)(t,"label")},[e])},yt=({attributes:e,scope:t})=>{const n=wt(e),s=At(e);return n?(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(Et(t,s),`<strong>${n}</strong>`),{strong:(0,y.jsx)("strong",{})})}):(0,y.jsx)(y.Fragment,{children:It(t,s)})},wt=e=>T(t=>{var n;return t(M.store),(bt(e)?e.formName:null===(n=t(M.store).getEntityRecord(e.formType,e.formId))||void 0===n?void 0:n.title)||""},[e]),jt={nelio_form:"Nelio Forms",wpcf7_contact_form:"Contact Forms 7",nab_elementor_form:"Elementor",nab_hubspot_form:"HubSpot",nab_gravity_form:"Gravity Forms",nab_ninja_form:"Ninja Forms",nab_formidable_form:"Formidable Forms",sureforms_form:"SureForms",wpforms:"WPForms","jet-form-builder":"JetFormBuilder","metform-form":"MetForm","mw-wp-form":"MW WP Form",nab_forminator_form:"Forminator Forms",nab_fluent_form:"Fluent Forms",nab_formcraft_form:"FormCraft"},At=({formType:e})=>T(t=>{var n;return t(M.store).getKindEntities().filter(e=>"form"===e.kind).length>1&&null!==(n=jt[e])&&void 0!==n?n:""},[e]);function Et(e,t){switch(e.type){case"all-pages":return t?(0,h.sprintf)(/* translators: %1$s: Form name. %2$s: Form plugin name. */ /* translators: %1$s: Form name. %2$s: Form plugin name. */
(0,h._x)("A visitor successfully submits the %1$s form (%2$s) on any page.","text","nelio-ab-testing"),"%s",t):/* translators: %s: Form name. */ /* translators: %s: Form name. */
(0,h._x)("A visitor successfully submits the %s form on any page.","text","nelio-ab-testing");case"test-scope":return t?(0,h.sprintf)(/* translators: %1$s: Form name. %2$s: Form plugin name. */ /* translators: %1$s: Form name. %2$s: Form plugin name. */
(0,h._x)("A visitor successfully submits the %1$s form (%2$s) on a tested page.","text","nelio-ab-testing"),"%s",t):/* translators: %s: Form name. */ /* translators: %s: Form name. */
(0,h._x)("A visitor successfully submits the %s form on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return t?(0,h.sprintf)(/* translators: %1$s: Form name. %2$s: Form plugin name. */ /* translators: %1$s: Form name. %2$s: Form plugin name. */
(0,h._x)("A visitor successfully submits the %1$s form (%2$s) on certain pages.","text","nelio-ab-testing"),"%s",t):/* translators: %s: Form name. */ /* translators: %s: Form name. */
(0,h._x)("A visitor successfully submits the %s form on certain pages.","text","nelio-ab-testing")}}function It(e,t){switch(e.type){case"all-pages":return t?(0,h.sprintf)(/* translators: %s: Form plugin name. */ /* translators: %s: Form plugin name. */
(0,h._x)("A visitor successfully submits a specific form (%s) on any page.","text","nelio-ab-testing"),t):(0,h._x)("A visitor successfully submits a specific form on any page.","text","nelio-ab-testing");case"test-scope":return t?(0,h.sprintf)(/* translators: %s: Form plugin name. */ /* translators: %s: Form plugin name. */
(0,h._x)("A visitor successfully submits a specific form (%s) on a tested page.","text","nelio-ab-testing"),t):(0,h._x)("A visitor successfully submits a specific form on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return t?(0,h.sprintf)(/* translators: %s: Form plugin name. */ /* translators: %s: Form plugin name. */
(0,h._x)("A visitor successfully submits a specific form (%s) on certain pages.","text","nelio-ab-testing"),t):(0,h._x)("A visitor successfully submits a specific form on certain pages.","text","nelio-ab-testing")}}const kt="nab/form-submission",Ct={name:kt,category:"interaction",title:(0,h._x)("Form submission","text","nelio-ab-testing"),description:(0,h._x)("Counts a form submission as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",mt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M45.043 27.755h64.944V45.12H45.043zM45.043 55.352h64.944v17.365H45.043zM45.043 82.948h64.944v17.365H45.043zM17.944 27.755H35.31V45.12H17.944zM17.944 55.352H35.31v17.365H17.944zM17.944 82.948H35.31v17.365H17.944z",className:"icon_svg__black",style:{fill:"#598b0e"}}))},validate:function(e){return bt(e)||e.formId?bt(e)&&!e.formName?{formName:(0,h._x)("Please specify the form whose submissions you want to track","user","nelio-ab-testing")}:{}:{formId:(0,h._x)("Please select a form to track its submissions","user","nelio-ab-testing")}},isActive:e=>e(M.store).getKindEntities().some(e=>"form"===e.kind),attributes:{formType:"",formId:0},scope:{type:"test-scope"},edit:ft,view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(yt,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ot.apply(null,arguments)}const St=e=>(0,y.jsxs)(y.Fragment,{children:["id"===e.attributes.mode?(0,y.jsx)(Tt,Object.assign({},e)):(0,y.jsx)($t,Object.assign({},e)),(0,y.jsx)(k,{label:(0,h._x)("Select page by URL","command","nelio-ab-testing"),checked:"url"===e.attributes.mode,onChange:t=>{e.setAttributes({mode:t?"url":"id"}),e.setScope(t?{type:"urls",regexes:[e.attributes.url]}:{type:"post-ids",ids:[e.attributes.postId]})}})]}),Tt=({attributes:{postId:e,postType:t},setAttributes:n,setScope:s,errors:o})=>{var a;const i=(0,C.useInstanceId)(St),{value:r,isLoading:c}=Mt(),l=t||(null===(a=r[0])||void 0===a?void 0:a.value),d=(0,O.useCallback)(e=>{n(e),s({type:"post-ids",ids:e.postType&&e.postId?[e.postId]:[]})},[n,s]),u=r.map(e=>e.value).includes(t);return(0,O.useEffect)(()=>{c||u||d({postType:"page",postId:0})},[t,u,c,d]),c?null:(0,y.jsxs)(y.Fragment,{children:[r.length>1&&(0,y.jsx)(E,{label:(0,h._x)("Content Type","text","nelio-ab-testing"),options:r,value:l,onChange:e=>d({postType:e,postId:void 0})}),(0,y.jsx)(j,{id:`nab-conversion-action__page-view-${i}`,className:F({"nab-conversion-action__field--has-errors":!!o.postId}),label:(0,y.jsx)(Ft,{postType:t,postId:e}),help:(0,y.jsx)(P.ErrorText,{value:o.postId}),children:(0,y.jsx)(P.PostSearcher,{id:`nab-conversion-action__page-view-${i}`,type:l,perPage:10,value:e,onChange:e=>d({postId:e,postType:l})})})]})},$t=({attributes:{url:e},setAttributes:t,setScope:n,errors:s})=>(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(I,{label:(0,h._x)("URL","text","nelio-ab-testing"),value:e,onChange:e=>{t({url:(0,be.trim)(e)}),n({type:"urls",regexes:(0,be.trim)(e)?[(0,be.trim)(e)]:[]})},help:(0,y.jsx)(P.ErrorText,{value:s.url})})}),Ft=({postType:e,postId:t})=>{const n=Nt(e,t);return n?(0,y.jsx)("span",{children:(0,O.createInterpolateElement)((0,h._x)("Actual Content (<a>View</a>)","text","nelio-ab-testing"),{a:n?(0,y.jsx)(w.ExternalLink,{href:n}):(0,y.jsx)("span",{})})}):(0,y.jsx)("span",{children:(0,h._x)("Actual Content","text","nelio-ab-testing")})},Pt=["attachment","product_variation"],Mt=()=>{const{entities:e,isLoading:t}=T(e=>({entities:e(M.store).getKindEntities()||de.EMPTY_ARRAY,isLoading:!e(M.store).hasFinishedResolution("getKindEntities")&&!e(M.store).hasResolutionFailed("getKindEntities")}),[]),n=e.filter(e=>"entity"===e.kind&&!Pt.includes(e.name)).map(e=>({value:e.name,label:e.labels.singular_name}));return{value:(0,be.sortBy)(n,"label"),isLoading:t}},Nt=(e,t)=>T(n=>{var s;return null===(s=n(M.store).getEntityRecord(e,t))||void 0===s?void 0:s.link},[e,t]),Rt=({attributes:{postType:e,postId:t}})=>{const n=zt(e),s=Ht(e,t),o=Vt(e,t);if("page"===e||"post"===e){const t="page"===e?/* translators: %s: The title of a page. */ /* translators: %s: The title of a page. */
(0,h._x)("A visitor views the %s page.","text","nelio-ab-testing"):/* translators: %s: The title of a post. */ /* translators: %s: The title of a post. */
(0,h._x)("A visitor views the %s post.","text","nelio-ab-testing"),n="page"===e?(0,h._x)("A visitor views a page in your website.","text","nelio-ab-testing"):(0,h._x)("A visitor views a post in your website.","text","nelio-ab-testing");return s?(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(t,(0,h.sprintf)("<a>%s</a>",s)),{a:o?(0,y.jsx)(w.ExternalLink,{href:o}):(0,y.jsx)("strong",{})})}):(0,y.jsx)(y.Fragment,{children:n})}return s?(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(/* translators: %1$s: The title of a custom post type. %2$s: Post type name. */ /* translators: %1$s: The title of a custom post type. %2$s: Post type name. */
(0,h._x)("A visitor views %1$s (%2$s).","text","nelio-ab-testing"),(0,h.sprintf)("<a>%s</a>",s),n),{a:o?(0,y.jsx)(w.ExternalLink,{href:o}):(0,y.jsx)("strong",{})})}):(0,y.jsx)(y.Fragment,{children:(0,h.sprintf)(/* translators: %s: Custom post type. */ /* translators: %s: Custom post type. */
(0,h._x)("A visitor views some content in your website with the type %s.","text","nelio-ab-testing"),n)})},Lt=({attributes:{url:e}})=>e?(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(/* translators: %s: Page URL. */ /* translators: %s: Page URL. */
(0,h._x)("A visitor views a page with URL %s.","text","nelio-ab-testing"),(0,h.sprintf)("<code>%s</code>",e)),{code:(0,y.jsx)("code",{})})}):(0,y.jsx)(y.Fragment,{children:(0,h._x)("A visitor views a page in your website.","text","nelio-ab-testing")}),zt=e=>{var t;const n=T(e=>e(M.store).getKindEntities()||[],[]),s=(0,be.find)(n,{name:e||""});return(null===(t=null==s?void 0:s.labels)||void 0===t?void 0:t.singular_name)||(0,h._x)("Unknown","text (post type)","nelio-ab-testing")},Ht=(e,t)=>T(n=>{var s;return null===(s=n(M.store).getEntityRecord(e,t))||void 0===s?void 0:s.title},[e,t]),Vt=(e,t)=>T(n=>{var s;return Bt()&&(null===(s=n(M.store).getEntityRecord(e,t))||void 0===s?void 0:s.link)},[e,t]),Bt=()=>!!document.querySelector(".nab-results-experiment-layout"),Dt=e=>0<=e.indexOf("?")&&(0,h._x)("Please write a URL with no query args","user","nelio-ab-testing"),Ut=e=>!/^https:\/\//.test(e)&&(0,h._x)("Please write a full URL starting with “https://”","user","nelio-ab-testing"),Yt="nab/page-view",Wt={name:Yt,category:"view",title:(0,h._x)("Page view","text","nelio-ab-testing"),description:(0,h._x)("Counts a visit to a page as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",Ot({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M70.904 45.533v-25.44l25.44 25.44z",className:"icon_svg__grey",style:{fill:"#f6a097"}}),f.createElement("path",{d:"M31.588 20.093h39.516v25.24h25.24v62.643H31.588z",className:"icon_svg__black",style:{fill:"#ef5848"}}))},validate:function(e){const{mode:t,url:n,postId:s}=e;if("id"===t&&!s)return{postId:(0,h._x)("Please select a content to track its visits as conversions","user","nelio-ab-testing")};const o="url"===t&&(e=>(0,de.getLocalUrlError)(e,(0,S.select)(M.store).getPluginSetting("homeUrl"))||(0,de.isUrlInvalid)(e)||Dt(e)||Ut(e))(n);return o?{url:o}:{}},attributes:{mode:"id",postType:"page",postId:0,url:""},scope:{type:"post-ids",ids:[]},edit:St,view:e=>"id"===e.attributes.mode?(0,y.jsx)(Rt,Object.assign({},e)):(0,y.jsx)(Lt,Object.assign({},e))};function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qt.apply(null,arguments)}const Zt=({attributes:e,setAttributes:t,errors:n})=>{const{value:s}=e,o=e=>t({type:"product-selection",value:e});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k,{label:(0,h._x)("Customize order tracking based on purchased products.","command","nelio-ab-testing"),checked:"some-products"===s.type,onChange:e=>o(e?Gt:Qt)}),"some-products"===s.type&&(0,y.jsx)(Jt,{value:s.value,onChange:e=>o({type:"some-products",value:e}),errors:n})]})},Jt=({value:e,onChange:t,errors:n})=>{const s=(0,C.useInstanceId)(Zt);return"product-ids"!==e.type?null:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(j,{id:`nab-conversion-action__wc-add-to-cart-${s}`,className:F({"nab-conversion-action__field--has-errors":n.type}),label:(0,y.jsx)(Kt,{value:e,onChange:t}),help:(0,y.jsx)(P.ErrorText,{value:n.type}),children:(0,y.jsx)(P.PostSearcher,{id:`nab-conversion-action__wc-add-to-cart-${s}`,type:"product",perPage:10,isMultiple:!0,value:e.productIds,onChange:n=>t(Object.assign(Object.assign({},e),{productIds:n}))})})})},Kt=({value:e,onChange:t})=>"product-taxonomies"===e.type?null:(0,y.jsx)(E,{value:e.excluded?"and"===e.mode?"excluded-product-set":"excluded-products":"included",options:[{value:"included",label:(0,h._x)("Products","text","nelio-ab-testing")},{value:"excluded-products",label:(0,h._x)("Excluded Products","text","nelio-ab-testing")},{value:"excluded-product-set",label:(0,h._x)("Excluded Product Set","text","nelio-ab-testing")}],onChange:n=>t(Object.assign(Object.assign({},e),{excluded:"included"!==n||void 0,mode:"excluded-products"===n?"or":"and"}))}),Qt={type:"all-products"},Gt={type:"some-products",value:{type:"product-ids",mode:"and",productIds:[]}};const Xt=({status:e})=>{const t=cn(e);return"wc-completed"===e?(0,y.jsx)(y.Fragment,{children:(0,h._x)("An order is completed.","text","nelio-ab-testing")}):on((0,h.sprintf)(/* translators: %s: Woocommerce order status. */ /* translators: %s: Woocommerce order status. */
(0,h._x)("The status of an order is set to %s.","text","nelio-ab-testing"),an(t)))},en=({selection:e,status:t})=>{switch(e.type){case"product-ids":return(0,y.jsx)(tn,{selection:e,status:t});case"product-taxonomies":return(0,y.jsx)(nn,{selection:e,status:t})}},tn=({selection:e,status:t})=>{const{productIds:n,mode:s,excluded:o=!1}=e,a=an(cn(t)),i=(0,be.map)(ln(n),rn);switch(i.length){case 0:return on((0,h.sprintf)(gn,a));case 1:return on((0,h.sprintf)(o?xn.singleExcluded:xn.singleIncluded,a,i[0]));default:return on(o?(0,h.sprintf)("and"===s?xn.productSetExcluded:xn.multipleProductsExcluded,a,(0,de.listify)(s,i)):(0,h.sprintf)(xn.multipleIncluded,a,(0,de.listify)(s,i)))}},nn=({selection:e,status:t})=>{const n=an(cn(t)),s=e.value.filter(e=>!!e.termIds.length),o=(0,be.find)(s,{taxonomy:"product_cat"}),a=(0,be.map)(un(null==o?void 0:o.taxonomy,null==o?void 0:o.termIds),rn),i=(0,be.find)(s,{taxonomy:"product_tag"}),r=(0,be.map)(un(null==i?void 0:i.taxonomy,null==i?void 0:i.termIds),rn);if(!(0,de.hasHead)(s))return on((0,h.sprintf)(gn,n));if((0,de.isSingleton)(s)&&(o||i)){const e=a||r||[],t=(null==o?void 0:o.mode)||(null==i?void 0:i.mode)||"or",s=!!(null==o?void 0:o.excluded)||!!(null==i?void 0:i.excluded)||!1,c=o?vn:bn;return(0,de.isSingleton)(e)?on((0,h.sprintf)(s?c.singleExcluded:c.singleIncluded,n,e[0])):on((0,h.sprintf)(s?c.multipleExcluded:c.multipleIncluded,n,(0,de.listify)(t,e)))}if(2===s.length&&o&&i)return on((0,h.sprintf)(/* translators: %1$s: Woocommerce order status. %2$s: List of category names. %3$s: List of tag names. */ /* translators: %1$s: Woocommerce order status. %2$s: List of category names. %3$s: List of tag names. */
(0,h._x)("The status of an order is set to %1$s and said order has at least one product in category %2$s and is tagged as %3$s.","text","nelio-ab-testing"),n,(0,de.listify)(o.mode,a),(0,de.listify)(i.mode,r)));const[c,...l]=(0,be.reverse)(s),d=(0,be.reverse)(l);return(0,y.jsxs)(y.Fragment,{children:[on((0,h.sprintf)(/* translators: %s: Woocommerce order status. */ /* translators: %s: Woocommerce order status. */
(0,h._x)("The status of an order is set to %s and said order has at least one product that","text","nelio-ab-testing"),n)),d.map(e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(sn,{selection:e,status:t},e.taxonomy),1===d.length?"":"; "]})),(0,de.isSingleton)(s)?"":fn,(0,y.jsx)(sn,{selection:c,status:t}),"."]})},sn=({selection:e})=>{const{taxonomy:t,mode:n,termIds:s,excluded:o}=e,a=an(dn(t)),i=(0,be.map)(un(t,s),rn);return on((0,h.sprintf)(o?hn.excluded:hn.included,a,(0,de.listify)(n,i)))},on=e=>(0,O.createInterpolateElement)(e,{em:(0,y.jsx)("em",{}),strong:(0,y.jsx)("strong",{})}),an=e=>`<em>${e}</em>`,rn=e=>`<strong>${e}</strong>`,cn=e=>T(t=>{var n,s;return null!==(s=null===(n=(0,be.find)(t(M.store).getECommerceSetting("woocommerce","orderStatuses"),{value:e}))||void 0===n?void 0:n.label)&&void 0!==s?s:e},[e]),ln=e=>T(t=>e.map(e=>{var n;return(0,be.trim)(null===(n=t(M.store).getEntityRecord("product",e))||void 0===n?void 0:n.title)||(0,h.sprintf)(/* translators: %d: Product id. */ /* translators: %d: Product id. */
(0,h._x)("Product #%d","text","nelio-ab-testing"),e)}),[e]),dn=e=>T(t=>{var n;const s=t(Fe.store).getEntityRecord("root","taxonomy",e);return null!==(n=null==s?void 0:s.labels.singular_name)&&void 0!==n?n:e},[e]),un=(e,t=[])=>T(n=>(n(Fe.store),e&&t?t.map(t=>{const s=n(Fe.store).getEntityRecord("taxonomy",e,t),o=pn(s)?s.name:`#${t}`;return(0,Pe.decodeEntities)(o)}):[]),[e,t]),pn=e=>!!e&&"object"==typeof e&&"name"in e&&!!e.name&&"string"==typeof e.name,gn=(0,h._x)("The status of an order is set to %s.","text","nelio-ab-testing"),xn={
/* translators: %1$s: Woocomerce status. %2$s: Product name. */
singleExcluded:(0,h._x)("The status of an order is set %1$s and doesn’t contain product %2$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: Product name. */
singleIncluded:(0,h._x)("The status of an order is set %1$s and contains product %2$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of product names. */
multipleProductsExcluded:(0,h._x)("The status of an order is set to %1$s and doesn’t contain any of the products %2$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of product names. */
productSetExcluded:(0,h._x)("The status of an order is set to %1$s and doesn’t contain all of the products %2$s together.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of product names. */
multipleIncluded:(0,h._x)("The status of an order is set to %1$s and contains all of the products %2$s together.","text","nelio-ab-testing")},vn={
/* translators: %1$s: Woocomerce status. %2$s: Woocommerce category name. */
singleExcluded:(0,h._x)("The status of an order not containing any product in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: Woocommerce category name. */
singleIncluded:(0,h._x)("The status of an order containing at least one product in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of woocommerce category names. */
multipleExcluded:(0,h._x)("The status of an order not containing any products in categories %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocomerce status. %2$s: List of woocommerce category names. */
multipleIncluded:(0,h._x)("The status of an order containing at least one product in categories %2$s is set to %1$s.","text","nelio-ab-testing")},mn={
/* translators: %1$s: Woocommerce order status. %2$s: Woocomerce tag name. */
singleExcluded:(0,h._x)("The status of an order not containing any product tagged as %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: %1$s: Woocommerce order status. %2$s: Woocomerce tag name. */
singleIncluded:(0,h._x)("The status of an order containing at least one product tagged as %2$s is set to %1$s.","text","nelio-ab-testing")},bn=Object.assign(Object.assign({},mn),{multipleExcluded:mn.singleExcluded,multipleIncluded:mn.singleIncluded}),hn={empty:"",
/* translators: %1$s: Woocomerce taxonomy name. %2$s: List of woocommerce term names. */
excluded:(0,h._x)("doesn’t have %2$s in taxonomy %1$s","text (implicit subject: product)","nelio-ab-testing"),
/* translators: %1$s: Woocomerce taxonomy name. %2$s: List of woocommerce term names. */
included:(0,h._x)("has %2$s in taxonomy %1$s","text (implicit subject: product)","nelio-ab-testing")},fn=(0,h._x)(", and ","text (2+ item list)","nelio-ab-testing"),yn="nab/wc-order",wn={name:yn,category:"ecommerce",title:(0,h._x)("WooCommerce Purchase","text","nelio-ab-testing"),description:(0,h._x)("Counts a WooCommerce purchase as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",qt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M11.797 19.172a3.164 3.164 0 0 0-3.154 3.154 3.16 3.16 0 0 0 3.154 3.153h5.676c2.583 0 2.913 2.244 2.947 2.414l3.133 15.955.125.617s5.727 29.59 7.65 39.451c.033.17.582 7.494 9.115 7.494h58.354c8.62 0 8.892-6.301 9.117-7.494 1.797-9.537 7.512-38.09 7.512-38.09.033-.17.056-.45.052-.623 0 0-.08-3.978-1.394-5.576h-.002c-1.314-1.598-5.2-2.447-5.2-2.447a3.5 3.5 0 0 0-.622-.069l-78.215.026c-.174 0-.455.023-.627.05l-.61-.345a.87.87 0 0 1-.328-.483l-1.877-9.707c-.034-.17-.949-7.48-9.13-7.48h-4.625zM52.13 95.16c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.338 7.44 7.44 7.44s7.437-3.339 7.437-7.44-3.335-7.438-7.437-7.438m35.074 0c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.339 7.44 7.44 7.44s7.44-3.339 7.44-7.44-3.338-7.438-7.44-7.438",className:"icon_svg__black",style:{fill:"#2a508d"}}),f.createElement("path",{d:"M83.54 47.787 65.988 65.339l-9.883-9.883-7.376 7.376 9.883 9.883 7.375 7.375 7.376-7.376 17.552-17.552z",className:"icon_svg__white",style:{fill:"#fff"}}))},requiresUniformity:!0,validate:function(e){const{value:t}=e;if("all-products"===t.type)return{};const n=t.value;switch(n.type){case"product-ids":return n.productIds.length?{}:{type:(0,h._x)("Please select a product","user","nelio-ab-testing")};case"product-taxonomies":{const e=n.value;return e.length?e.every(e=>!!e.termIds.length)?{}:{type:(0,h._x)("Please select one or more terms in all your taxonomies","user","nelio-ab-testing")}:{type:(0,h._x)("Please select one or more taxonomies","user","nelio-ab-testing")}}}},isActive:e=>e(M.store).getActivePlugins().includes("woocommerce/woocommerce.php"),attributes:{type:"product-selection",value:{type:"all-products"}},scope:{type:"php-function"},edit:Zt,view:e=>{var{attributes:t}=e,n=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n}(e,["attributes"]);const{value:s}=t,{orderStatusForConversion:o="wc-completed"}=n.goal;switch(s.type){case"all-products":return(0,y.jsx)(Xt,{status:o});case"some-products":return(0,y.jsx)(en,{selection:s.value,status:o})}}};function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jn.apply(null,arguments)}const An=({attributes:{anyProduct:e,productId:t},scope:n,errors:s,setAttributes:o,setScope:a})=>{const i=(0,C.useInstanceId)(An);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k,{label:(0,h._x)("Track conversion if a specific product is added to the shopping cart.","command","nelio-ab-testing"),checked:!e,onChange:()=>o({anyProduct:!e})}),!e&&(0,y.jsx)(j,{id:`nab-conversion-action__wc-order-${i}`,className:F({"nab-conversion-action__field--has-errors":s.productId}),label:(0,y.jsx)(En,{productId:t}),help:(0,y.jsx)(P.ErrorText,{value:s.productId}),children:(0,y.jsx)(P.PostSearcher,{id:`nab-conversion-action__wc-order-${i}`,type:"product",perPage:10,value:t,onChange:e=>o({productId:e})})}),(0,y.jsx)(P.ConversionActionScope,{scope:n,setScope:a,error:s._scope})]})},En=({productId:e})=>{const t=In(e);return t?(0,y.jsx)("span",{children:(0,O.createInterpolateElement)((0,h._x)("Product (<a>View</a>)","text","nelio-ab-testing"),{a:(0,y.jsx)(w.ExternalLink,{href:t})})}):(0,y.jsx)("span",{children:(0,h._x)("Product","text","nelio-ab-testing")})},In=e=>T(t=>{var n;return null===(n=t(M.store).getEntityRecord("product",e))||void 0===n?void 0:n.link},[e]),kn=({attributes:{anyProduct:e,productId:t},scope:n})=>{const s=Cn(t);return e?(0,y.jsx)(y.Fragment,{children:On(n)}):s?(0,y.jsx)(y.Fragment,{children:(0,O.createInterpolateElement)((0,h.sprintf)(Tn(n),(0,h.sprintf)("<strong>%s</strong>",s)),{strong:(0,y.jsx)("strong",{})})}):(0,y.jsx)(y.Fragment,{children:Sn(n)})},Cn=e=>T(t=>{var n;return null===(n=t(M.store).getEntityRecord("product",e))||void 0===n?void 0:n.title},[e]);function On(e){switch(e.type){case"all-pages":return(0,h._x)("A visitor adds any product to the shopping cart on any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor adds any product to the shopping cart on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor adds any product to the shopping cart on certain pages.","text","nelio-ab-testing")}}function Sn(e){switch(e.type){case"all-pages":return(0,h._x)("A visitor adds a specific product to the shopping cart on any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor adds a specific product to the shopping cart on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor adds a specific product to the shopping cart on certain pages.","text","nelio-ab-testing")}}function Tn(e){switch(e.type){case"all-pages":
/* translators: %s: The name of a product. */
return(0,h._x)("A visitor adds the product %s to the shopping cart on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: The name of a product. */
return(0,h._x)("A visitor adds the product %s to the shopping cart on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: The name of a product. */
return(0,h._x)("A visitor adds the product %s to the shopping cart on certain pages.","text","nelio-ab-testing")}}const $n="nab/wc-add-to-cart",Fn={name:$n,category:"ecommerce",title:(0,h._x)("Add WooCommerce product to cart","text","nelio-ab-testing"),description:(0,h._x)("Counts adding a product to the shopping cart in WooCommerce as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",jn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M11.797 19.172a3.164 3.164 0 0 0-3.154 3.154 3.16 3.16 0 0 0 3.154 3.153h5.676c2.583 0 2.913 2.244 2.947 2.414l3.133 15.955.125.617s5.727 29.59 7.65 39.451c.033.17.582 7.494 9.115 7.494h58.354c8.62 0 8.892-6.301 9.117-7.494 1.797-9.537 7.512-38.09 7.512-38.09.033-.17.056-.45.052-.623 0 0-.08-3.978-1.394-5.576h-.002c-1.314-1.598-5.2-2.447-5.2-2.447a3.5 3.5 0 0 0-.622-.069l-78.215.026c-.174 0-.455.023-.627.05l-.61-.345a.87.87 0 0 1-.328-.483l-1.877-9.707c-.034-.17-.949-7.48-9.13-7.48h-4.625zM52.13 95.16c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.338 7.44 7.44 7.44s7.437-3.339 7.437-7.44-3.335-7.438-7.437-7.438m35.074 0c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.339 7.44 7.44 7.44s7.44-3.339 7.44-7.44-3.338-7.438-7.44-7.438",className:"icon_svg__black",style:{fill:"#2a508d"}}),f.createElement("path",{d:"M64.607 46.312v12.41H52.195v10.431h12.412v12.412H75.04V69.153h12.41V58.722H75.04v-12.41Z",className:"icon_svg__white",style:{fill:"#fff"}}))},validate:function(e){const{anyProduct:t,productId:n}=e;return t||n?{}:{productId:(0,h._x)("Please select a product","user","nelio-ab-testing")}},isActive:e=>e(M.store).getActivePlugins().includes("woocommerce/woocommerce.php"),attributes:{anyProduct:!1,productId:0},scope:{type:"test-scope"},edit:An,view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(kn,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};function Pn(){return Pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pn.apply(null,arguments)}const Mn=({attributes:{value:e},scope:t,errors:n,setAttributes:s,setScope:o})=>{const a=`nab-scroll-action__value-${(0,C.useInstanceId)(Mn)}`;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(j,{id:a,className:F({"nab-conversion-action__field--has-errors":n.value}),help:(0,y.jsx)(P.ErrorText,{value:n.value}),children:(0,y.jsx)("div",{className:"nab-scroll-conversion-action",children:(0,y.jsx)(A,{id:a,label:(0,h._x)("Scroll Depth (%)","text","nelio-ab-testing"),className:"nab-scroll-conversion-action__value",min:0,max:100,value:e,onChange:e=>s({value:e})})})}),(0,y.jsx)(P.ConversionActionScope,{scope:t,setScope:o,error:n._scope})]})},Nn=({attributes:{value:e},scope:t})=>{const n=Rn(t);return(0,O.createInterpolateElement)((0,h.sprintf)(n,`<strong>${e}%</strong>`),{strong:(0,y.jsx)("strong",{})})},Rn=e=>{switch(e.type){case"all-pages":
/* translators: %s: Percentage value, such as "50%". */
return(0,h._x)("A visitor has achieved %s scroll depth on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: Percentage value, such as "50%". */
return(0,h._x)("A visitor has achieved %s scroll depth on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: Percentage value, such as "50%". */
return(0,h._x)("A visitor has achieved %s scroll depth on certain pages.","text","nelio-ab-testing")}},Ln="nab/scroll",zn={name:Ln,category:"interaction",title:(0,h._x)("Scroll","text","nelio-ab-testing"),description:(0,h._x)("Counts a conversion when a visitor reaches certain scroll depth.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",Pn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M70.394 19.239H57.605a25.606 25.606 0 0 0-25.578 25.578v38.367a25.606 25.606 0 0 0 25.578 25.578h12.789a25.606 25.606 0 0 0 25.578-25.578V44.817a25.606 25.606 0 0 0-25.578-25.578m.935 58.485a3.199 3.199 0 0 1 4.524 4.524l-9.591 9.592a3.197 3.197 0 0 1-4.525 0l-9.591-9.592a3.199 3.199 0 0 1 4.524-4.524l4.132 4.136V46.14l-4.132 4.136a3.199 3.199 0 0 1-4.524-4.524l9.591-9.592a3.197 3.197 0 0 1 4.525 0l9.591 9.592a3.199 3.199 0 0 1-4.524 4.524l-4.132-4.137V81.86z",className:"icon_svg__black",style:{fill:"#f99a24"}}))},attributes:{value:50},scope:{type:"test-scope"},edit:Mn,view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(Nn,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};var Hn;function Vn(){return Vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Vn.apply(null,arguments)}const Bn=({attributes:e,setAttributes:t,errors:n})=>{const s=(0,C.useInstanceId)(Bn),{value:o}=e,a="some-surecart-products"===o.type&&"surecart-ids"===o.value.type&&o.value.productIds[0]||"",i=(0,O.useCallback)(e=>t({type:"surecart-selection",value:e}),[t]);return(0,O.useEffect)(()=>{"surecart-selection"!==e.type&&i(o)},[e.type,o,i]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k,{label:(0,h._x)("Track conversion if the order contains a specific product.","command","nelio-ab-testing"),checked:"some-surecart-products"===o.type,onChange:e=>i(e?Yn:Un)}),"some-surecart-products"===o.type&&"surecart-ids"===o.value.type&&(0,y.jsx)(j,{id:`nab-conversion-action__surecart-add-to-cart-${s}`,className:F({"nab-conversion-action__field--has-errors":n.type}),label:(0,y.jsx)(Dn,{productId:a}),help:(0,y.jsx)(P.ErrorText,{value:n.type}),children:(0,y.jsx)(P.PostSearcher,{id:`nab-conversion-action__surecart-add-to-cart-${s}`,type:"sc_product",perPage:10,value:a,onChange:e=>i({type:"some-surecart-products",value:{type:"surecart-ids",mode:"and",productIds:e?[e]:[]}})})})]})},Dn=({productId:e})=>{const t=Wn(e);return t?(0,y.jsx)("span",{children:(0,O.createInterpolateElement)((0,h._x)("Product (<a>View</a>)","text","nelio-ab-testing"),{a:(0,y.jsx)(w.ExternalLink,{href:t})})}):(0,y.jsx)("span",{children:(0,h._x)("Product","text","nelio-ab-testing")})},Un={type:"all-surecart-products"},Yn={type:"some-surecart-products",value:{type:"surecart-ids",mode:"and",productIds:[]}},Wn=e=>T(t=>{var n;return null===(n=t(M.store).getEntityRecord("sc_product",e))||void 0===n?void 0:n.link},[e]),qn=()=>(0,y.jsx)(y.Fragment,{children:(0,h._x)("An order is paid.","text","nelio-ab-testing")}),Zn=({selection:e})=>(0,y.jsx)(Jn,{selection:e}),Jn=({selection:e})=>{const{productIds:t,mode:n,excluded:s=!1}=e,o=(0,be.map)(Gn(t),Qn);switch(o.length){case 0:return Kn(Xn);case 1:return Kn((0,h.sprintf)(s?es.singleExcluded:es.singleIncluded,o[0]));default:return Kn((0,h.sprintf)(s?es.multipleExcluded:es.multipleIncluded,(0,de.listify)(n,o)))}},Kn=e=>(0,O.createInterpolateElement)(e,{strong:(0,y.jsx)("strong",{})}),Qn=e=>`<strong>${e}</strong>`,Gn=e=>T(t=>e.map(e=>{var n;return(0,be.trim)(null===(n=t(M.store).getEntityRecord("sc_product",e))||void 0===n?void 0:n.title)||(0,h.sprintf)(/* translators: %s: Product id. */ /* translators: %s: Product id. */
(0,h._x)("Product #%s","text","nelio-ab-testing"),e)}),[e]),Xn=(0,h._x)("The status of an order is set to paid.","text","nelio-ab-testing"),es={
/* translators: %s: Product name. */
singleExcluded:(0,h._x)("The status of an order not containing product %s is set to paid.","text","nelio-ab-testing"),
/* translators: %s: Product name. */
singleIncluded:(0,h._x)("The status of an order containing the product %s is set to paid.","text","nelio-ab-testing"),
/* translators: %s: List of product names. */
multipleExcluded:(0,h._x)("The status of an order not containing any of the products %s is set to paid.","text","nelio-ab-testing"),
/* translators: %s: List of product names. */
multipleIncluded:(0,h._x)("The status of an order containing products %s is set to paid.","text","nelio-ab-testing")},ts="nab/surecart-order",ns={name:ts,category:"ecommerce",title:(0,h._x)("SureCart Purchase","text","nelio-ab-testing"),description:(0,h._x)("Counts a SureCart purchase as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",Vn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),Hn||(Hn=f.createElement("path",{fill:"#01824c",fillRule:"evenodd",d:"M64 108.48c24.564 0 44.477-19.913 44.477-44.478 0-24.564-19.913-44.477-44.477-44.477-24.565 0-44.478 19.913-44.478 44.477 0 24.565 19.913 44.478 44.478 44.478m.191-66.714c-3.571 0-8.514 2.043-11.04 4.562l-6.858 6.843H80.48l11.431-11.405zM74.79 81.682c-2.526 2.52-7.468 4.562-11.04 4.562H36.03L47.461 74.84h34.187zM85.9 58.873H40.59l-2.14 2.139c-5.069 4.561-3.566 8.125 3.532 8.125h45.433L89.556 67c5.02-4.535 3.442-8.126-3.655-8.126z",className:"icon_svg__black",clipRule:"evenodd"})))},validate:function(e){const{value:t}=e;if("all-surecart-products"===t.type)return{};const n=t.value;return"surecart-ids"===n.type?n.productIds.length?{}:{type:(0,h._x)("Please select a product","user","nelio-ab-testing")}:void 0},isActive:e=>e(M.store).getActivePlugins().includes("surecart/surecart.php"),attributes:{type:"surecart-selection",value:{type:"all-surecart-products"}},scope:{type:"php-function"},edit:Bn,view:({attributes:e})=>{const{value:t}=e;switch(t.type){case"all-surecart-products":return(0,y.jsx)(qn,{});case"some-surecart-products":return(0,y.jsx)(Zn,{selection:t.value})}}};function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ss.apply(null,arguments)}const os=({attributes:{value:e},scope:t,errors:n,setAttributes:s,setScope:o})=>{const a=`nab-time-on-page-action__value-${(0,C.useInstanceId)(os)}`;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(j,{id:a,className:F({"nab-conversion-action__field--has-errors":n.value}),help:(0,y.jsx)(P.ErrorText,{value:n.value}),children:(0,y.jsx)("div",{className:"nab-time-on-page-conversion-action",children:(0,y.jsx)(A,{id:a,label:(0,h._x)("Time on Page (seconds)","text","nelio-ab-testing"),className:"nab-time-on-page-conversion-action__value",min:0,max:400,value:e,onChange:e=>s({value:e})})})}),(0,y.jsx)(P.ConversionActionScope,{scope:t,setScope:o,error:n._scope})]})},as=({attributes:{value:e},scope:t})=>{const n=is(t),s=(0,de.formatDuration)(e,"seconds");return(0,O.createInterpolateElement)((0,h.sprintf)(n,`<strong>${s}</strong>`),{strong:(0,y.jsx)("strong",{})})},is=e=>{switch(e.type){case"all-pages":
/* translators: %s: Time duration, such as "3 minutes, 2 seconds". */
return(0,h._x)("A visitor has spent %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: Time duration, such as "3 minutes, 2 seconds". */
return(0,h._x)("A visitor has spent %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: Time duration, such as "3 minutes, 2 seconds". */
return(0,h._x)("A visitor has spent %s on certain pages.","text","nelio-ab-testing")}},rs="nab/time-on-page",cs={name:rs,category:"other",title:(0,h._x)("Time on Page","text","nelio-ab-testing"),description:(0,h._x)("Counts a conversion after a visitor spends some time on a page.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",ss({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"m94.718 46.041 6.205-6.205c-1.966-2.228-3.933-4.238-6.161-6.16l-6.205 6.291C81.784 34.462 73.263 31.228 64 31.228c-21.717 0-39.326 17.61-39.326 39.326S42.284 109.88 64 109.88c21.848 0 39.326-17.61 39.326-39.326 0-9.263-3.234-17.784-8.608-24.513m-26.35 28.883H59.63V44.337h8.739zm8.739-56.805H50.89v8.74h26.218z",className:"icon_svg__black",style:{fill:"#fc0"}}))},attributes:{value:20},scope:{type:"test-scope"},edit:os,view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(as,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})};function ls(){return ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ls.apply(null,arguments)}const ds=({attributes:{event:e,videoId:t},scope:n})=>t?(0,O.createInterpolateElement)("play"===e?(0,h.sprintf)(function(e){switch(e.type){case"all-pages":
/* translators: %s: Video id, such as “dQw4w9WgXcQ”. */
return(0,h._x)("A visitor plays the YouTube video %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: Video id, such as “dQw4w9WgXcQ”. */
return(0,h._x)("A visitor plays the YouTube video %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: Video id, such as “dQw4w9WgXcQ”. */
return(0,h._x)("A visitor plays the YouTube video %s on certain pages.","text","nelio-ab-testing")}}(n),`<code>${t}</code>`):(0,h.sprintf)(function(e){switch(e.type){case"all-pages":
/* translators: %s: Video id, such as “dQw4w9WgXcQ”. */
return(0,h._x)("A visitor reaches the end of the YouTube video %s on any page.","text","nelio-ab-testing");case"test-scope":
/* translators: %s: Video id, such as “dQw4w9WgXcQ”. */
return(0,h._x)("A visitor reaches the end of the YouTube video %s on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":
/* translators: %s: Video id, such as “dQw4w9WgXcQ”. */
return(0,h._x)("A visitor reaches the end of the YouTube video %s on certain pages.","text","nelio-ab-testing")}}(n),`<code>${t}</code>`),{code:(0,y.jsx)("code",{})}):(0,y.jsx)(y.Fragment,{children:"play"===e?us(n):ps(n)});function us(e){switch(e.type){case"all-pages":return(0,h._x)("A visitor plays a specific YouTube video on any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor plays a specific YouTube video on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor plays a specific YouTube video on certain pages.","text","nelio-ab-testing")}}function ps(e){switch(e.type){case"all-pages":return(0,h._x)("A visitor reaches the end of a YouTube video on any page.","text","nelio-ab-testing");case"test-scope":return(0,h._x)("A visitor reaches the end of a YouTube video on a tested page.","text","nelio-ab-testing");case"urls":case"post-ids":case"php-function":return(0,h._x)("A visitor reaches the end of a YouTube video on certain pages.","text","nelio-ab-testing")}}const gs="nab/video-playback",xs={name:gs,category:"interaction",title:(0,h._x)("YouTube Video Playback","text","nelio-ab-testing"),description:(0,h._x)("Counts YouTube video playback (starting or ending) as a conversion.","text","nelio-ab-testing"),icon:function(e){return f.createElement("svg",ls({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),f.createElement("path",{d:"M51.035 98.77c-12.906-.387-20.993-.951-25.047-1.748-2.337-.459-4.858-1.801-6.537-3.48-2.86-2.861-3.871-6.158-4.668-15.224-1.263-14.364-.35-33.636 1.877-39.588 1.178-3.149 4.378-6.192 7.643-7.267 8.826-2.907 67.267-3.052 78.44-.194 2.417.618 3.842 1.441 5.704 3.296 1.948 1.94 2.697 3.237 3.392 5.874 2.6 9.861 2.601 37.043.002 47.293-.635 2.502-1.453 3.943-3.305 5.819-3.06 3.1-5.707 3.867-15.692 4.551-6.697.459-12.62.613-25.826.671-7.611.034-14.804.033-15.983-.003z",className:"icon_svg__black",style:{fill:"red"}}),f.createElement("path",{d:"M53.692 78.915V48.814L79.997 64z",className:"icon_svg__white",style:{fill:"#fff"}}))},validate:function(e){const{platform:t,videoId:n}=e;return"youtube"!==t||/^[-\w]{11}$/.test(n)?n?{}:{videoId:(0,h._x)("Please write a video ID","user","nelio-ab-testing")}:{videoId:(0,h._x)("Please write a valid YouTube video ID. For instance, the video ID dQw4w9WgXcQ refers to https://youtu.be/dQw4w9WgXcQ","user","nelio-ab-testing")}},attributes:{platform:"youtube",event:"play",videoId:""},scope:{type:"test-scope"},edit:({attributes:{event:e,videoId:t},scope:n,errors:s,setAttributes:o,setScope:a})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(E,{label:(0,h._x)("Event","text","nelio-ab-testing"),options:[{value:"play",label:(0,h._x)("Play Video","text","nelio-ab-testing")},{value:"end",label:(0,h._x)("Reach End of Video","text","nelio-ab-testing")}],value:e,onChange:e=>o({event:e})}),(0,y.jsx)(I,{className:F({"nab-conversion-action__field--has-errors":s.videoId}),label:(0,h._x)("Video ID","text","nelio-ab-testing"),value:t,help:(0,y.jsx)(P.ErrorText,{value:s.videoId}),placeholder:(0,h._x)("Video ID","text","nelio-ab-testing"),onChange:e=>o({videoId:e})}),(0,y.jsx)(P.ConversionActionScope,{scope:n,setScope:a,error:s._scope})]}),view:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(ds,Object.assign({},e))}),(0,y.jsx)(P.ConversionActionScopeView,{scope:e.scope})]})},vs=()=>{[l,i,n,s,a,c,v,d,u,p,g,x,r,o].forEach(e=>{if(!e)return;const{name:t,settings:n}=e;(0,b.registerConversionActionType)(t,n)})}})();var n=nab="undefined"==typeof nab?{}:nab;for(var s in t)n[s]=t[s];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();