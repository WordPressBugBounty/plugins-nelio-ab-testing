(()=>{var e={6942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{conversionActionLibrary:()=>d});var e={};n.r(e),n.d(e,{name:()=>M,settings:()=>L});var t={};n.r(t),n.d(t,{name:()=>D,settings:()=>U});var r={};n.r(r),n.d(r,{name:()=>q,settings:()=>G});var a={};n.r(a),n.d(a,{name:()=>Se,settings:()=>Oe});var i={};n.r(i),n.d(i,{name:()=>Re,settings:()=>Ve});var s={};n.r(s),n.d(s,{name:()=>rt,settings:()=>at});var l={};n.r(l),n.d(l,{name:()=>Lt,settings:()=>Rt});var c={};n.r(c),n.d(c,{name:()=>Yt,settings:()=>Zt});var u={};n.r(u),n.d(u,{name:()=>qt,settings:()=>Gt});var d={};n.r(d),n.d(d,{registerCoreConversionActions:()=>Xt});const m=window.nab.conversionActions,p=window.wp.i18n,v=window.React;function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f.apply(null,arguments)}const g=window.wp.element,b=window.wp.components,x=window.wp.compose,h=window.wp.data;function y(e,t){return(0,h.useSelect)(e,t)}var _=n(6942),E=n.n(_);const w=window.nab.components,I=window.nab.data;var A="nab/editor",C=function(e){var t=e.attributes,n=t.mode,o=t.value,r=e.scope,a=e.errors,i=e.experimentId,s=e.setAttributes,l=e.setScope,c=(0,x.useInstanceId)(C),u=T(),d=S(c),m=d[0],v=d[1],f=O(),y=(0,h.useDispatch)(A).saveExperiment,_="nab-click-action__value-".concat(c);return g.createElement(g.Fragment,null,g.createElement(b.SelectControl,{label:(0,p._x)("Matching Mode","text","nelio-ab-testing"),options:F,value:n,onChange:function(e){return s({mode:e})}}),g.createElement(b.BaseControl,{id:_,className:E()({"nab-conversion-action__field--has-errors":a.value}),label:P[n],help:g.createElement(w.ErrorText,{value:a.value})},g.createElement("div",{className:"nab-click-conversion-action"},g.createElement(b.TextControl,{id:_,className:"nab-click-conversion-action__value",value:o,onChange:function(e){return s({value:e})}}),g.createElement(b.Button,{variant:"secondary",className:"nab-click-conversion-action__button",onClick:function(){y().then((function(){return v(!0)}))}},(0,p._x)("Explore","command","nelio-ab-testing")),m&&g.createElement(w.CssSelectorFinder,{initialUrl:f,experimentId:i,alternatives:u,initialValue:o,initialMode:n,onAccept:function(e,t){return s({mode:e,value:t})},onClose:function(){return v(!1)}}))),g.createElement(w.ConversionActionScope,{scope:r,setScope:l,error:a._scope}))},T=function(){return y((function(e){var t;return(null===(t=e(A))||void 0===t?void 0:t.getAlternatives())||[]}))},S=function(e){e="".concat(e);var t=(0,I.usePageAttribute)("css-selector/openedCssSelectorFinderId",""),n=t[0],o=t[1];return[n===e,function(t){return o(t?e:"")}]},O=function(){return y((function(e){var t=(0,e(I.store).getPluginSetting)("homeUrl");if(!e(A))return t;var n=(0,e(A).getAlternative)("control");if(!k(n))return t;var o=n.attributes,r=o.postType,a=o.postId;if(!r||!a)return t;var i=(0,e(I.store).getEntityRecord)(r,a);return(null==i?void 0:i.link)||t}))},P={id:(0,p._x)("Element ID","text","nelio-ab-testing"),class:(0,p._x)("CSS Class","text","nelio-ab-testing"),css:(0,p._x)("CSS Selector","text","nelio-ab-testing")},F=Object.keys(P).map((function(e){return e})).map((function(e){return{value:e,label:P[e]}})),k=function(e){var t,n;return!!(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.postType)&&!!(null===(n=null==e?void 0:e.attributes)||void 0===n?void 0:n.postId)},j=function(){return j=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},j.apply(this,arguments)},$=function(e){var t=e.attributes,n=t.mode,o=t.value;if(!o)return g.createElement(g.Fragment,null,(0,p._x)("A visitor clicks on an HTML element.","text","nelio-ab-testing"));switch(n){case"css":return g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: a CSS selector, such as "a.button" */ /* translators: a CSS selector, such as "a.button" */
(0,p._x)("A visitor clicks on an element matching the CSS selector %s.","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)}));case"id":return g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: an HTML id, such as "content" */ /* translators: an HTML id, such as "content" */
(0,p._x)("A visitor clicks on the %s element","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)}));case"class":return g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: an HTML id, such as "content" */ /* translators: an HTML id, such as "content" */
(0,p._x)("A visitor clicks on an element with class %s","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)}))}},N=document.createElement("br"),M="nab/click",L={name:M,title:(0,p._x)("Click","text","nelio-ab-testing"),description:(0,p._x)("Counts a click as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"M102.577 53.793 26.484 24.539a1.54 1.54 0 0 0-1.635.35l-.034.034a1.55 1.55 0 0 0-.35 1.635L53.72 102.65c.222.587.784.97 1.405.98a1.53 1.53 0 0 0 1.431-.946l9.291-22.33L79.362 93.87a2.23 2.23 0 0 0 3.15 0c3.11-3.108 8.168-8.167 11.276-11.275a2.23 2.23 0 0 0 0-3.151L80.29 65.929l22.33-9.292c.579-.238.953-.809.945-1.43a1.56 1.56 0 0 0-.988-1.414",className:"icon_svg__black",style:{fill:"#34a3d3"}}))},validate:function(e){var t=e.mode,n=e.value;if(!n)switch(t){case"css":return{value:(0,p._x)("Please write a CSS selector that matches the elements you want to track","user","nelio-ab-testing")};case"id":return{value:(0,p._x)("Please write the ID of the element you want to track","user","nelio-ab-testing")};case"class":return{value:(0,p._x)("Please write a class name of the element you want to track","user","nelio-ab-testing")}}switch(t){case"css":return function(e){try{N.querySelector(e)}catch(e){return{value:(0,p._x)("Please use a valid CSS selector. For instance, you can use a tag name such as “a” or “div,” a class selector such as “.some-class,” or more complex rules such as “section.content button.subscribe”","user","nelio-ab-testing")}}return{}}(n);case"id":return function(e){return/^#[a-zA-Z0-9-_]+$/.test(e)?{value:(0,p._x)("The ID of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")}:/^[a-zA-Z0-9-_]+$/.test(e)?{}:{value:(0,p._x)("The ID of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")}}(n);case"class":return function(e){return/^\.[a-zA-Z0-9-_]+$/.test(e)?{value:(0,p._x)("A class name of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")}:/^[a-zA-Z0-9-_]+$/.test(e)?{}:{value:(0,p._x)("A class name of an element should only contain letters, numbers, hyphens, and underscores","text","nelio-ab-testing")}}(n)}},attributes:{mode:"css",value:""},scope:{type:"test-scope"},edit:C,view:function(e){return g.createElement(g.Fragment,null,g.createElement("div",null,g.createElement($,j({},e))),g.createElement(w.ConversionActionScopeView,{scope:e.scope}))}};function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},R.apply(null,arguments)}var V=function(){return V=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},V.apply(this,arguments)},z=function(e){var t=e.attributes,n=t.mode,o=t.value;return g.createElement(g.Fragment,null,!o&&(0,p._x)("A visitor clicks on a link.","text","nelio-ab-testing"),o&&"partial"===n&&(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: some text that might appear in a URL, such as "wordpress", or "amazon", or "nelio" */ /* translators: some text that might appear in a URL, such as "wordpress", or "amazon", or "nelio" */
(0,p._x)("A visitor clicks on a link whose URL contains this fragment: %s.","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)}),o&&"start"===n&&(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: a URL fragment, such as "https://nelio" */ /* translators: a URL fragment, such as "https://nelio" */
(0,p._x)("A visitor clicks on a link whose URL starts with %s.","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)}),o&&"end"===n&&(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: a URL fragment, such as "neliosoftware.com/blog/" */ /* translators: a URL fragment, such as "neliosoftware.com/blog/" */
(0,p._x)("A visitor clicks on a link whose URL ends with %s.","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)}),o&&!["partial","start","end"].includes(n)&&(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: a URL such as "https://wordpress.org" */ /* translators: a URL such as "https://wordpress.org" */
(0,p._x)("A visitor clicks on a link with the URL %s.","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)}))};const H=window.nab.utils;var D="nab/click-external-link",U={name:D,title:(0,p._x)("Click external link","text","nelio-ab-testing"),description:(0,p._x)("Counts a click to an external link as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"m68.339 14.883 44.778 44.778a6.123 6.123 0 0 1 0 8.678L68.34 113.117a6.123 6.123 0 0 1-8.678 0L14.883 68.34a6.123 6.123 0 0 1 0-8.678L59.66 14.883a6.123 6.123 0 0 1 8.678 0",className:"icon_svg__black",style:{opacity:1,strokeOpacity:1,fillOpacity:1,stroke:"none",strokeDasharray:"none",strokeMiterlimit:4,strokeWidth:32.581790506,fill:"#ffc304"}}),v.createElement("path",{d:"M49.179 54.37V89.93h9.46v-26.1h18.27V54.37h-27.73",className:"icon_svg__white",style:{fill:"#fff"}}),v.createElement("path",{d:"M73.553 71.129V47.072l20.833 12.029z",className:"icon_svg__white",style:{fill:"#fff"}}))},validate:function(e){var t=e.mode,n=e.value;if(!n)return{value:(0,p._x)("Please write the expected value","user","nelio-ab-testing")};if("regex"===t){var o=(0,H.isRegExpInvalid)(n);return o?{value:o}:{}}var r=(0,H.isUrlFragmentInvalid)(n);return r?{value:r}:{}},attributes:{mode:"exact",value:""},scope:{type:"test-scope"},edit:function(e){var t=e.attributes,n=t.mode,o=t.value,r=e.scope,a=e.errors,i=e.setAttributes,s=e.setScope;return g.createElement(g.Fragment,null,g.createElement(b.SelectControl,{label:(0,p._x)("URL Matching Mode","text","nelio-ab-testing"),options:[{value:"exact",label:(0,p._x)("URL exactly matches the expected value","text","nelio-ab-testing")},{value:"partial",label:(0,p._x)("URL contains the expected value","text","nelio-ab-testing")},{value:"start",label:(0,p._x)("URL starts with the expected value","text","nelio-ab-testing")},{value:"end",label:(0,p._x)("URL ends with the expected value","text","nelio-ab-testing")},{value:"regex",label:(0,p._x)("JavaScript Regular Expression","text","nelio-ab-testing")}],value:n,onChange:function(e){return i({mode:e})}}),g.createElement(b.TextControl,{className:E()({"nab-conversion-action__field--has-errors":a.value}),label:(0,p._x)("Expected Value","text","nelio-ab-testing"),value:o,help:g.createElement(w.ErrorText,{value:a.value}),placeholder:(0,p._x)("URL","text","nelio-ab-testing"),onChange:function(e){return i({value:e})}}),g.createElement(w.ConversionActionScope,{scope:r,setScope:s,error:a._scope}))},view:function(e){return g.createElement(g.Fragment,null,g.createElement("div",null,g.createElement(z,V({},e))),g.createElement(w.ConversionActionScopeView,{scope:e.scope}))}};function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},B.apply(null,arguments)}const W=window.lodash;var Y,Z,J,K=function(){return K=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},K.apply(this,arguments)},Q=function(e){var t=e.attributes.eventName,n=e.experimentId,o=e.goalIndex;if(!n||void 0===o)return g.createElement(g.Fragment,null,(0,p._x)("A conversion is programmatically sent to Nelio’s cloud via JavaScript.","text","nelio-ab-testing"));var r,a=(0,W.trim)(t)?"nab.<wbr />trigger(<wbr />'".concat((0,W.trim)(t),"')"):"nab.<wbr />convert(<wbr />".concat(n,",<wbr />").concat(o,")");
/* translators: a javascript snippet */
return r=(0,W.trim)(t)?(0,p._x)("A custom JavaScript event is triggered using %s.","text","nelio-ab-testing"):(0,p._x)("A conversion is programmatically generated in JavaScript using %s.","text","nelio-ab-testing"),g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(r,"<code>".concat(a,"</code>")),{code:g.createElement("code",null),wbr:g.createElement("wbr",null)}))},q="nab/custom-event",G={name:q,title:(0,p._x)("Custom event","text","nelio-ab-testing"),description:(0,p._x)("Counts the submission of a custom JS event as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"m68.856 26.466-20.602 71.95 10.89 3.118 20.602-71.95ZM42.004 41.665 27.683 55.986 19.67 64l8.01 8.012 14.324 14.321 8.013-8.01L35.692 64l14.322-14.325Zm43.992 0-8.01 8.01 14.322 14.324-14.325 14.324 8.013 8.01L100.32 72.01l8.01-8.012-8.013-8.013z",className:"icon_svg__black",style:{fill:"#70ad54"}}))},attributes:{eventName:""},scope:{type:"test-scope"},edit:function(e){var t=e.attributes.eventName,n=e.scope,o=e.errors,r=e.experimentId,a=e.goalIndex,i=e.setAttributes,s=e.setScope,l=(0,W.trim)(t)?"nab.<wbr />trigger(<wbr />'".concat((0,W.trim)(t),"')"):"nab.<wbr />convert(<wbr />".concat(r,",<wbr />").concat(a,")");return g.createElement(g.Fragment,null,g.createElement("p",null,(0,p._x)("You can programmatically generate a conversion using the following JavaScript snippet whenever you want:","user","nelio-ab-testing")),g.createElement("pre",null,'<script type="text/javascript">\n  ',(0,g.createInterpolateElement)(l,{wbr:g.createElement("wbr",null)}),";\n<\/script>"),g.createElement("p",null,(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: a JavaScript snippet */ /* translators: a JavaScript snippet */
(0,p._x)("If you want a single custom event to trigger a conversion in several goals or different tests, please name the event and use %s instead:","user","nelio-ab-testing"),"<code>nab.trigger</code>"),{code:g.createElement("code",null)})),g.createElement(b.TextControl,{label:(0,p._x)("Custom Event Name","text","nelio-ab-testing"),placeholder:(0,p._x)("(optional)","text","nelio-ab-testing"),value:t||"",onChange:function(e){return i({eventName:e})}}),g.createElement(w.ConversionActionScope,{scope:n,setScope:s,error:o._scope}))},view:function(e){return g.createElement(g.Fragment,null,g.createElement("div",null,g.createElement(Q,K({},e))),g.createElement(w.ConversionActionScopeView,{scope:e.scope}))}};function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},X.apply(null,arguments)}var ee=function(e){var t=e.attributes,n=e.setAttributes,o=e.errors,r=(0,x.useInstanceId)(ee),a=t.value,i="some-downloads"===a.type&&"download-ids"===a.value.type&&a.value.downloadIds[0]||0,s=function(e){return n({type:"download-selection",value:e})};return(0,g.useEffect)((function(){"download-selection"!==t.type&&s(a)}),[]),g.createElement(g.Fragment,null,g.createElement(b.ToggleControl,{label:(0,p._x)("Track conversion if the order contains a specific download.","command","nelio-ab-testing"),checked:"some-downloads"===a.type,onChange:function(e){return s(e?oe:ne)}}),"some-downloads"===a.type&&"download-ids"===a.value.type&&g.createElement(b.BaseControl,{id:"nab-conversion-action__edd-add-to-cart-".concat(r),className:E()({"nab-conversion-action__field--has-errors":o.type}),label:g.createElement(te,{downloadId:i}),help:g.createElement(w.ErrorText,{value:o.type})},g.createElement(w.PostSearcher,{id:"nab-conversion-action__edd-add-to-cart-".concat(r),type:"download",perPage:10,value:i,onChange:function(e){return s({type:"some-downloads",value:{type:"download-ids",mode:"and",downloadIds:e?[e]:[]}})}})))},te=function(e){var t=e.downloadId,n=re(t);return n?g.createElement("span",null,(0,g.createInterpolateElement)((0,p._x)("Download (<a>View</a>)","text","nelio-ab-testing"),{a:g.createElement(b.ExternalLink,{href:n})})):g.createElement("span",null,(0,p._x)("Download","text","nelio-ab-testing"))},ne={type:"all-downloads"},oe={type:"some-downloads",value:{type:"download-ids",mode:"and",downloadIds:[]}},re=function(e){return y((function(t){var n;return null===(n=t(I.store).getEntityRecord("download",e))||void 0===n?void 0:n.link}))};const ae=window.wp.coreData;var ie=function(){return ie=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ie.apply(this,arguments)},se=function(e){var t=e.status,n=ge(t);return"complete"===t?g.createElement(g.Fragment,null,(0,p._x)("An order is completed.","text","nelio-ab-testing")):me((0,p.sprintf)(/* translators: woocommerce order status */ /* translators: woocommerce order status */
(0,p._x)("The status of an order is set to %s.","text","nelio-ab-testing"),pe(n)))},le=function(e){var t=e.selection,n=e.status;switch(t.type){case"download-ids":return g.createElement(ce,{selection:t,status:n});case"download-taxonomies":return g.createElement(ue,{selection:t,status:n})}},ce=function(e){var t=e.selection,n=e.status,o=t.downloadIds,r=t.mode,a=t.excluded,i=void 0!==a&&a,s=pe(ge(n)),l=(0,W.map)(be(o),ve);switch(l.length){case 0:return me((0,p.sprintf)(_e,s));case 1:return me((0,p.sprintf)(i?Ee.singleExcluded:Ee.singleIncluded,s,l[0]));default:return me((0,p.sprintf)(i?Ee.multipleExcluded:Ee.multipleIncluded,s,(0,H.listify)(r,l)))}},ue=function(e){var t=e.selection,n=e.status,o=pe(ge(n)),r=t.value.filter((function(e){return!!e.termIds.length})),a=(0,W.find)(r,{taxonomy:"download_category"}),i=(0,W.map)(he(null==a?void 0:a.taxonomy,null==a?void 0:a.termIds),ve),s=(0,W.find)(r,{taxonomy:"download_tag"}),l=(0,W.map)(he(null==s?void 0:s.taxonomy,null==s?void 0:s.termIds),ve);if(!(0,H.hasHead)(r))return me((0,p.sprintf)(_e,o));if((0,H.isSingleton)(r)&&(a||s)){var c=i||l||[],u=(null==a?void 0:a.mode)||(null==s?void 0:s.mode)||"or",d=!!(null==a?void 0:a.excluded)||!!(null==s?void 0:s.excluded)||!1,m=a?we:Ae;return(0,H.isSingleton)(c)?me((0,p.sprintf)(d?m.singleExcluded:m.singleIncluded,o,c[0])):me((0,p.sprintf)(d?m.multipleExcluded:m.multipleIncluded,o,(0,H.listify)(u,c)))}if(2===r.length&&a&&s)return me((0,p.sprintf)(/* translators: 1 -> woocommerce order status, 2 -> list of category names, 3 -> list of tag names */ /* translators: 1 -> woocommerce order status, 2 -> list of category names, 3 -> list of tag names */
(0,p._x)("The status of an order is set to %1$s and said order has at least one download in category %2$s and is tagged as %3$s.","text","nelio-ab-testing"),o,(0,H.listify)(a.mode,i),(0,H.listify)(s.mode,l)));var v=(0,W.reverse)(r),f=v[0],b=v.slice(1),x=(0,W.reverse)(b);return g.createElement(g.Fragment,null,me((0,p.sprintf)(/* translators: woocommerce order status */ /* translators: woocommerce order status */
(0,p._x)("The status of an order is set to %s and said order has at least one download that","text","nelio-ab-testing"),o)),x.map((function(e){return g.createElement(g.Fragment,null,g.createElement(de,{key:e.taxonomy,selection:e,status:n}),1===x.length?"":"; ")})),(0,H.isSingleton)(r)?"":Te,g.createElement(de,{selection:f,status:n}),".")},de=function(e){var t=e.selection,n=t.taxonomy,o=t.mode,r=t.termIds,a=t.excluded,i=pe(xe(n)),s=(0,W.map)(he(n,r),ve);return me((0,p.sprintf)(a?Ce.excluded:Ce.included,i,(0,H.listify)(o,s)))},me=function(e){return(0,g.createInterpolateElement)(e,{em:g.createElement("em",null),strong:g.createElement("strong",null)})},pe=function(e){return"<em>".concat(e,"</em>")},ve=function(e){return"<strong>".concat(e,"</strong>")},fe=document.createElement("div"),ge=function(e){return y((function(t){var n,o;return null!==(o=null===(n=(0,W.find)(t(I.store).getECommerceSetting("edd","orderStatuses"),{value:e}))||void 0===n?void 0:n.label)&&void 0!==o?o:e}))},be=function(e){return y((function(t){return e.map((function(e){var n;return(0,W.trim)(null===(n=t(I.store).getEntityRecord("download",e))||void 0===n?void 0:n.title)||(0,p.sprintf)(/* translators: product id */ /* translators: product id */
(0,p._x)("Download #%d","text","nelio-ab-testing"),e)}))}))},xe=function(e){return y((function(t){var n,o=t(ae.store).getEntityRecord("root","taxonomy",e);return null!==(n=null==o?void 0:o.labels.singular_name)&&void 0!==n?n:e}))},he=function(e,t){return void 0===t&&(t=[]),y((function(n){return n(ae.store),e&&t?t.map((function(t){var o,r,a=n(ae.store).getEntityRecord("taxonomy",e,t);return o=ye(a)?a.name:"#".concat(t),fe.innerHTML=o,null!==(r=fe.textContent)&&void 0!==r?r:o})):[]}))},ye=function(e){return!!e&&"object"==typeof e&&"name"in e&&!!e.name&&"string"==typeof e.name},_e=(0,p._x)("The status of an order is set to %s.","text","nelio-ab-testing"),Ee={
/* translators: 1 -> woocomerce status, 2 -> download name */
singleExcluded:(0,p._x)("The status of an order not containing download %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> download name */
singleIncluded:(0,p._x)("The status of an order containing the download %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of download names */
multipleExcluded:(0,p._x)("The status of an order not containing any of the downloads %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of download names */
multipleIncluded:(0,p._x)("The status of an order containing downloads %2$s is set to %1$s.","text","nelio-ab-testing")},we={
/* translators: 1 -> woocomerce status, 2 -> woocommerce category name */
singleExcluded:(0,p._x)("The status of an order not containing any download in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> woocommerce category name */
singleIncluded:(0,p._x)("The status of an order containing at least one download in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of woocommerce category names */
multipleExcluded:(0,p._x)("The status of an order not containing any downloads in categories %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of woocommerce category names */
multipleIncluded:(0,p._x)("The status of an order containing at least one download in categories %2$s is set to %1$s.","text","nelio-ab-testing")},Ie={
/* translators: 1 -> woocommerce order status, 2 -> woocomerce tag name */
singleExcluded:(0,p._x)("The status of an order not containing any download tagged as %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocommerce order status, 2 -> woocomerce tag name */
singleIncluded:(0,p._x)("The status of an order containing at least one download tagged as %2$s is set to %1$s.","text","nelio-ab-testing")},Ae=ie(ie({},Ie),{multipleExcluded:Ie.singleExcluded,multipleIncluded:Ie.singleIncluded}),Ce={empty:"",
/* translators: 1 -> woocomerce taxonomy name, 2 -> list of woocommerce term names */
excluded:(0,p._x)("doesn’t have %2$s in taxonomy %1$s","text (implicit subject: download)","nelio-ab-testing"),
/* translators: 1 -> woocomerce taxonomy name, 2 -> list of woocommerce term names */
included:(0,p._x)("has %2$s in taxonomy %1$s","text (implicit subject: download)","nelio-ab-testing")},Te=(0,p._x)(", and ","text (2+ item list)","nelio-ab-testing"),Se="nab/edd-order",Oe={name:Se,title:(0,p._x)("Easy Digital Downloads Purchase","text","nelio-ab-testing"),description:(0,p._x)("Counts an Easy Digital Downloads purchase as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),Y||(Y=v.createElement("path",{fill:"#2a508d",d:"M11.8 19.2a3.2 3.2 0 0 0-3.2 3.1c0 1.8 1.5 3.2 3.2 3.2h5.7c2.6 0 2.9 2.2 3 2.4l3 16 .2.6 7.6 39.4c0 .2.6 7.5 9.1 7.5h58.4c8.6 0 8.9-6.3 9.1-7.5l7.5-38v-.7s0-4-1.3-5.6-5.2-2.4-5.2-2.4H29.4l-.6-.4a.9.9 0 0 1-.3-.4l-1.9-9.7c0-.2-1-7.5-9.1-7.5h-4.7zm40.3 76a7.4 7.4 0 1 0 0 14.9 7.4 7.4 0 0 0 0-15zm35.1 0a7.4 7.4 0 1 0 0 14.9 7.4 7.4 0 0 0 0-15z",className:"icon_svg__black"})),Z||(Z=v.createElement("path",{fill:"#fff",d:"M60.4 59.3 53 66.6l9.9 10 7.3 7.3 7.4-7.4 9.9-9.9-7.4-7.3-9.9 9.8Z",className:"icon_svg__white"})),J||(J=v.createElement("path",{fill:"#fff",d:"M65.7 45.3h9.1v25.6h-9.1z",className:"icon_svg__white"})))},validate:function(e){var t=e.value;if("all-downloads"===t.type)return{};var n=t.value;switch(n.type){case"download-ids":return n.downloadIds.length?{}:{type:(0,p._x)("Please select a download","user","nelio-ab-testing")};case"download-taxonomies":var o=n.value;return o.length?o.every((function(e){return!!e.termIds.length}))?{}:{type:(0,p._x)("Please select one or more terms in all your taxonomies","user","nelio-ab-testing")}:{type:(0,p._x)("Please select one or more taxonomies","user","nelio-ab-testing")}}},isActive:function(e){return e(I.store).getActivePlugins().includes("easy-digital-downloads/easy-digital-downloads.php")},attributes:{type:"download-selection",value:{type:"all-downloads"}},scope:{type:"php-function"},edit:ee,view:function(e){var t=e.attributes,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["attributes"]),o=t.value,r=n.goal.orderStatusForConversion,a=void 0===r?"complete":r;switch(o.type){case"all-downloads":return g.createElement(se,{status:a});case"some-downloads":return g.createElement(le,{selection:o.value,status:a})}}};function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pe.apply(null,arguments)}function Fe(e){return"nab_elementor_form"===e.formType||"nab_hubspot_form"===e.formType}function ke(e){return"nab_hubspot_form"===e.formType?(0,p._x)("Form ID","text","nelio-ab-testing"):(0,p._x)("Form Name","text","nelio-ab-testing")}var je=function(e){var t=e.attributes,n=e.scope,o=e.errors,r=e.setAttributes,a=e.setScope,i=t.formId,s=t.formType,l=t.formName,c=void 0===l?"":l,u=(0,x.useInstanceId)(je),d=$e();return(0,g.useEffect)((function(){var e;!s&&(null===(e=d[0])||void 0===e?void 0:e.value)&&r({formType:d[0].value,formId:void 0,formName:void 0})}),[s,d.length]),g.createElement(g.Fragment,null,d.length>1&&g.createElement(b.SelectControl,{label:(0,p._x)("Form Type","text","nelio-ab-testing"),options:d,value:s,onChange:function(e){return r({formType:e,formId:void 0,formName:void 0})}}),Fe(t)?g.createElement(b.TextControl,{id:"nab-conversion-action__form-submission-".concat(u),label:ke(t),help:g.createElement(w.ErrorText,{value:o.formName}),value:c,onChange:function(e){return r({formType:s,formId:0,formName:e})}}):g.createElement(b.BaseControl,{id:"nab-conversion-action__form-submission-".concat(u),className:E()({"nab-conversion-action__field--has-errors":o.formId}),label:(0,p._x)("Actual Form","text","nelio-ab-testing"),help:g.createElement(w.ErrorText,{value:o.formId})},g.createElement(w.PostSearcher,{id:"nab-conversion-action__form-submission-".concat(u),type:s,perPage:10,value:i,onChange:function(e){return r({formType:s,formId:e,formName:void 0})}})),g.createElement(w.ConversionActionScope,{scope:n,setScope:a,error:o._scope}))},$e=function(){return y((function(e){var t=((0,e(I.store).getKindEntities)()||[]).filter((function(e){return"form"===e.kind})).map((function(e){return{value:e.name,label:e.labels.singular_name}}));return(0,W.sortBy)(t,"label")}))},Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ne.apply(this,arguments)},Me=function(e){var t=e.attributes,n=Le(t),o=t.formType;return n?g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(function(e){switch(e){case"nelio_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s Nelio Form.","text","nelio-ab-testing");case"wpcf7_contact_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s Contact Form 7.","text","nelio-ab-testing");case"nab_elementor_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s Elementor Form.","text","nelio-ab-testing");case"nab_hubspot_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s HubSpot Form.","text","nelio-ab-testing");case"nab_gravity_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s Gravity Form.","text","nelio-ab-testing");case"nab_ninja_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s Ninja Form.","text","nelio-ab-testing");case"nab_formidable_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s Formidable Form.","text","nelio-ab-testing");case"wpforms":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s WPForm.","text","nelio-ab-testing");case"nab_forminator_form":
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s Forminator Form.","text","nelio-ab-testing");default:
/* translators: form name */
return(0,p._x)("A visitor successfully submits the %s form.","text","nelio-ab-testing")}}(o),"<strong>".concat(n,"</strong>")),{strong:g.createElement("strong",null)})):g.createElement(g.Fragment,null,function(e){switch(e){case"nelio_form":return(0,p._x)("A visitor successfully submits a Nelio Form.","text","nelio-ab-testing");case"wpcf7_contact_form":return(0,p._x)("A visitor successfully submits a Contact Form 7.","text","nelio-ab-testing");case"nab_elementor_form":return(0,p._x)("A visitor successfully submits an Elementor Form.","text","nelio-ab-testing");case"nab_hubspot_form":return(0,p._x)("A visitor successfully submits a HubSpot Form.","text","nelio-ab-testing");case"nab_gravity_form":return(0,p._x)("A visitor successfully submits a Gravity Form.","text","nelio-ab-testing");case"nab_ninja_form":return(0,p._x)("A visitor successfully submits a Ninja Form.","text","nelio-ab-testing");case"nab_formidable_form":return(0,p._x)("A visitor successfully submits a Formidable Form.","text","nelio-ab-testing");case"wpforms":return(0,p._x)("A visitor successfully submits a WPForm.","text","nelio-ab-testing");case"nab_forminator_form":return(0,p._x)("A visitor successfully submits a Forminator Form.","text","nelio-ab-testing");default:return(0,p._x)("A visitor successfully submits a form.","text","nelio-ab-testing")}}(o))},Le=function(e){return y((function(t){var n;return t(I.store),(Fe(e)?e.formName:null===(n=t(I.store).getEntityRecord(e.formType,e.formId))||void 0===n?void 0:n.title)||""}))},Re="nab/form-submission",Ve={name:Re,title:(0,p._x)("Form submission","text","nelio-ab-testing"),description:(0,p._x)("Counts a form submission as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",Pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"M45.043 27.755h64.944V45.12H45.043zM45.043 55.352h64.944v17.365H45.043zM45.043 82.948h64.944v17.365H45.043zM17.944 27.755H35.31V45.12H17.944zM17.944 55.352H35.31v17.365H17.944zM17.944 82.948H35.31v17.365H17.944z",className:"icon_svg__black",style:{fill:"#598b0e"}}))},validate:function(e){return Fe(e)||e.formId?Fe(e)&&!e.formName?{formName:(0,p._x)("Please specify the form whose submissions you want to track","user","nelio-ab-testing")}:{}:{formId:(0,p._x)("Please select a form to track its submissions","user","nelio-ab-testing")}},isActive:function(e){return e(I.store).getKindEntities().some((function(e){return"form"===e.kind}))},attributes:{formType:"",formId:0},scope:{type:"test-scope"},edit:je,view:function(e){return g.createElement(g.Fragment,null,g.createElement("div",null,g.createElement(Me,Ne({},e))),g.createElement(w.ConversionActionScopeView,{scope:e.scope}))}};function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ze.apply(null,arguments)}var He=function(){return He=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},He.apply(this,arguments)},De=function(e){return g.createElement(g.Fragment,null,"id"===e.attributes.mode?g.createElement(Ue,He({},e)):g.createElement(Be,He({},e)),g.createElement(b.ToggleControl,{label:(0,p._x)("Select page by URL","command","nelio-ab-testing"),checked:"url"===e.attributes.mode,onChange:function(t){e.setAttributes({mode:t?"url":"id"}),e.setScope(t?{type:"urls",regexes:[e.attributes.url]}:{type:"post-ids",ids:[e.attributes.postId]})}}))},Ue=function(e){var t,n=e.attributes,o=n.postId,r=n.postType,a=e.setAttributes,i=e.setScope,s=e.errors,l=(0,x.useInstanceId)(De),c=Ze(),u=c.value,d=c.isLoading,m=r||(null===(t=u[0])||void 0===t?void 0:t.value);if((0,g.useEffect)((function(){d||u.map((function(e){return e.value})).includes(r)||v({postType:"page",postId:0})}),[r,d]),d)return null;var v=function(e){a(e),i({type:"post-ids",ids:e.postType&&e.postId?[e.postId]:[]})};return g.createElement(g.Fragment,null,u.length>1&&g.createElement(b.SelectControl,{label:(0,p._x)("Content Type","text","nelio-ab-testing"),options:u,value:m,onChange:function(e){return v({postType:e,postId:void 0})}}),g.createElement(b.BaseControl,{id:"nab-conversion-action__page-view-".concat(l),className:E()({"nab-conversion-action__field--has-errors":!!s.postId}),label:g.createElement(We,{postType:r,postId:o}),help:g.createElement(w.ErrorText,{value:s.postId})},g.createElement(w.PostSearcher,{id:"nab-conversion-action__page-view-".concat(l),type:m,perPage:10,value:o,onChange:function(e){return v({postId:e,postType:m})}})))},Be=function(e){var t=e.attributes.url,n=e.setAttributes,o=e.setScope,r=e.errors;return g.createElement(g.Fragment,null,g.createElement(b.TextControl,{label:(0,p._x)("URL","text","nelio-ab-testing"),value:t,onChange:function(e){n({url:(0,W.trim)(e)}),o({type:"urls",regexes:(0,W.trim)(e)?[(0,W.trim)(e)]:[]})},help:g.createElement(w.ErrorText,{value:r.url})}))},We=function(e){var t=e.postType,n=e.postId,o=Je(t,n);return o?g.createElement("span",null,(0,g.createInterpolateElement)((0,p._x)("Actual Content (<a>View</a>)","text","nelio-ab-testing"),{a:o?g.createElement(b.ExternalLink,{href:o}):g.createElement("span",null)})):g.createElement("span",null,(0,p._x)("Actual Content","text","nelio-ab-testing"))},Ye=["attachment","product_variation"],Ze=function(){return y((function(e){var t=e(I.store),n=t.getKindEntities,o=t.hasFinishedResolution,r=t.hasResolutionFailed,a=!o("getKindEntities")&&!r("getKindEntities"),i=(n()||[]).filter((function(e){return"entity"===e.kind&&!Ye.includes(e.name)})).map((function(e){return{value:e.name,label:e.labels.singular_name}}));return{value:(0,W.sortBy)(i,"label"),isLoading:a}}))},Je=function(e,t){return y((function(n){var o;return null===(o=n(I.store).getEntityRecord(e,t))||void 0===o?void 0:o.link}))},Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ke.apply(this,arguments)},Qe=function(e){var t=e.attributes,n=t.postType,o=t.postId,r=Ge(n),a=Xe(n,o),i=et(n,o);if("page"===n||"post"===n){var s="page"===n?/* translators: the title of a page */ /* translators: the title of a page */
(0,p._x)("A visitor views the %s page.","text","nelio-ab-testing"):/* translators: the title of a post */ /* translators: the title of a post */
(0,p._x)("A visitor views the %s post.","text","nelio-ab-testing"),l="page"===n?(0,p._x)("A visitor views a page in your website.","text","nelio-ab-testing"):(0,p._x)("A visitor views a post in your website.","text","nelio-ab-testing");return a?g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(s,(0,p.sprintf)("<a>%s</a>",a)),{a:i?g.createElement(b.ExternalLink,{href:i}):g.createElement("strong",null)})):g.createElement(g.Fragment,null,l)}return a?g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: 1 -> the title of a custom post type; 2 -> a post type name */ /* translators: 1 -> the title of a custom post type; 2 -> a post type name */
(0,p._x)("A visitor views %1$s (%2$s).","text","nelio-ab-testing"),(0,p.sprintf)("<a>%s</a>",a),r),{a:i?g.createElement(b.ExternalLink,{href:i}):g.createElement("strong",null)})):g.createElement(g.Fragment,null,(0,p.sprintf)(/* translators: a custom post type */ /* translators: a custom post type */
(0,p._x)("A visitor views some content in your website with the type %s.","text","nelio-ab-testing"),r))},qe=function(e){var t=e.attributes.url;return t?g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: a page URL */ /* translators: a page URL */
(0,p._x)("A visitor views a page with URL %s.","text","nelio-ab-testing"),(0,p.sprintf)("<code>%s</code>",t)),{code:g.createElement("code",null)})):g.createElement(g.Fragment,null,(0,p._x)("A visitor views a page in your website.","text","nelio-ab-testing"))},Ge=function(e){var t,n=y((function(e){return e(I.store).getKindEntities()||[]})),o=(0,W.find)(n,{name:e||""});return(null===(t=null==o?void 0:o.labels)||void 0===t?void 0:t.singular_name)||(0,p._x)("Unknown","text (post type)","nelio-ab-testing")},Xe=function(e,t){return y((function(n){var o;return null===(o=n(I.store).getEntityRecord(e,t))||void 0===o?void 0:o.title}))},et=function(e,t){return y((function(n){var o;return tt()&&(null===(o=n(I.store).getEntityRecord(e,t))||void 0===o?void 0:o.link)}))},tt=function(){return!!document.querySelector(".nab-results-experiment-layout")},nt=function(e){return 0<=e.indexOf("?")&&(0,p._x)("Please write a URL with no query args","user","nelio-ab-testing")},ot=function(e){return!/^https:\/\//.test(e)&&(0,p._x)("Please write a full URL starting with “https://”","user","nelio-ab-testing")},rt="nab/page-view",at={name:rt,title:(0,p._x)("Page view","text","nelio-ab-testing"),description:(0,p._x)("Counts a visit to a page as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",ze({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"M70.904 45.533v-25.44l25.44 25.44z",className:"icon_svg__grey",style:{fill:"#f6a097"}}),v.createElement("path",{d:"M31.588 20.093h39.516v25.24h25.24v62.643H31.588z",className:"icon_svg__black",style:{fill:"#ef5848"}}))},validate:function(e){var t=e.mode,n=e.url,o=e.postId;if("id"===t&&!o)return{postId:(0,p._x)("Please select a content to track its visits as conversions","user","nelio-ab-testing")};var r="url"===t&&function(e){return(0,H.isUrlInvalid)(e)||nt(e)||ot(e)}(n);return r?{url:r}:{}},attributes:{mode:"id",postType:"page",postId:0,url:""},scope:{type:"post-ids",ids:[]},edit:De,view:function(e){return"id"===e.attributes.mode?g.createElement(Qe,Ke({},e)):g.createElement(qe,Ke({},e))}};function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},it.apply(null,arguments)}var st=function(e){if(lt(e))return e;if(e.anyProduct)return{type:"product-selection",value:{type:"all-products"}};var t=e.productId;return{type:"product-selection",value:{type:"some-products",value:{type:"product-ids",mode:"and",productIds:t?[t]:[]}}}},lt=function(e){return"product-selection"===e.type&&!ct(e)},ct=function(e){return!!e.productId},ut=function(e){var t=e.attributes,n=e.setAttributes,o=e.errors,r=(0,x.useInstanceId)(ut),a=st(t).value,i="some-products"===a.type&&"product-ids"===a.value.type&&a.value.productIds[0]||0,s=function(e){return n({type:"product-selection",value:e})};return(0,g.useEffect)((function(){"product-selection"!==t.type&&s(a)}),[]),g.createElement(g.Fragment,null,g.createElement(b.ToggleControl,{label:(0,p._x)("Track conversion if the order contains a specific product.","command","nelio-ab-testing"),checked:"some-products"===a.type,onChange:function(e){return s(e?pt:mt)}}),"some-products"===a.type&&"product-ids"===a.value.type&&g.createElement(b.BaseControl,{id:"nab-conversion-action__wc-add-to-cart-".concat(r),className:E()({"nab-conversion-action__field--has-errors":o.type}),label:g.createElement(dt,{productId:i}),help:g.createElement(w.ErrorText,{value:o.type})},g.createElement(w.PostSearcher,{id:"nab-conversion-action__wc-add-to-cart-".concat(r),type:"product",perPage:10,value:i,onChange:function(e){return s({type:"some-products",value:{type:"product-ids",mode:"and",productIds:e?[e]:[]}})}})))},dt=function(e){var t=e.productId,n=vt(t);return n?g.createElement("span",null,(0,g.createInterpolateElement)((0,p._x)("Product (<a>View</a>)","text","nelio-ab-testing"),{a:g.createElement(b.ExternalLink,{href:n})})):g.createElement("span",null,(0,p._x)("Product","text","nelio-ab-testing"))},mt={type:"all-products"},pt={type:"some-products",value:{type:"product-ids",mode:"and",productIds:[]}},vt=function(e){return y((function(t){var n;return null===(n=t(I.store).getEntityRecord("product",e))||void 0===n?void 0:n.link}))},ft=function(){return ft=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ft.apply(this,arguments)},gt=function(e){var t=e.status,n=At(t);return"wc-completed"===t?g.createElement(g.Fragment,null,(0,p._x)("An order is completed.","text","nelio-ab-testing")):_t((0,p.sprintf)(/* translators: woocommerce order status */ /* translators: woocommerce order status */
(0,p._x)("The status of an order is set to %s.","text","nelio-ab-testing"),Et(n)))},bt=function(e){var t=e.selection,n=e.status;switch(t.type){case"product-ids":return g.createElement(xt,{selection:t,status:n});case"product-taxonomies":return g.createElement(ht,{selection:t,status:n})}},xt=function(e){var t=e.selection,n=e.status,o=t.productIds,r=t.mode,a=t.excluded,i=void 0!==a&&a,s=Et(At(n)),l=(0,W.map)(Ct(o),wt);switch(l.length){case 0:return _t((0,p.sprintf)(Pt,s));case 1:return _t((0,p.sprintf)(i?Ft.singleExcluded:Ft.singleIncluded,s,l[0]));default:return _t((0,p.sprintf)(i?Ft.multipleExcluded:Ft.multipleIncluded,s,(0,H.listify)(r,l)))}},ht=function(e){var t=e.selection,n=e.status,o=Et(At(n)),r=t.value.filter((function(e){return!!e.termIds.length})),a=(0,W.find)(r,{taxonomy:"product_cat"}),i=(0,W.map)(St(null==a?void 0:a.taxonomy,null==a?void 0:a.termIds),wt),s=(0,W.find)(r,{taxonomy:"product_tag"}),l=(0,W.map)(St(null==s?void 0:s.taxonomy,null==s?void 0:s.termIds),wt);if(!(0,H.hasHead)(r))return _t((0,p.sprintf)(Pt,o));if((0,H.isSingleton)(r)&&(a||s)){var c=i||l||[],u=(null==a?void 0:a.mode)||(null==s?void 0:s.mode)||"or",d=!!(null==a?void 0:a.excluded)||!!(null==s?void 0:s.excluded)||!1,m=a?kt:$t;return(0,H.isSingleton)(c)?_t((0,p.sprintf)(d?m.singleExcluded:m.singleIncluded,o,c[0])):_t((0,p.sprintf)(d?m.multipleExcluded:m.multipleIncluded,o,(0,H.listify)(u,c)))}if(2===r.length&&a&&s)return _t((0,p.sprintf)(/* translators: 1 -> woocommerce order status, 2 -> list of category names, 3 -> list of tag names */ /* translators: 1 -> woocommerce order status, 2 -> list of category names, 3 -> list of tag names */
(0,p._x)("The status of an order is set to %1$s and said order has at least one product in category %2$s and is tagged as %3$s.","text","nelio-ab-testing"),o,(0,H.listify)(a.mode,i),(0,H.listify)(s.mode,l)));var v=(0,W.reverse)(r),f=v[0],b=v.slice(1),x=(0,W.reverse)(b);return g.createElement(g.Fragment,null,_t((0,p.sprintf)(/* translators: woocommerce order status */ /* translators: woocommerce order status */
(0,p._x)("The status of an order is set to %s and said order has at least one product that","text","nelio-ab-testing"),o)),x.map((function(e){return g.createElement(g.Fragment,null,g.createElement(yt,{key:e.taxonomy,selection:e,status:n}),1===x.length?"":"; ")})),(0,H.isSingleton)(r)?"":Mt,g.createElement(yt,{selection:f,status:n}),".")},yt=function(e){var t=e.selection,n=t.taxonomy,o=t.mode,r=t.termIds,a=t.excluded,i=Et(Tt(n)),s=(0,W.map)(St(n,r),wt);return _t((0,p.sprintf)(a?Nt.excluded:Nt.included,i,(0,H.listify)(o,s)))},_t=function(e){return(0,g.createInterpolateElement)(e,{em:g.createElement("em",null),strong:g.createElement("strong",null)})},Et=function(e){return"<em>".concat(e,"</em>")},wt=function(e){return"<strong>".concat(e,"</strong>")},It=document.createElement("div"),At=function(e){return y((function(t){var n,o;return null!==(o=null===(n=(0,W.find)(t(I.store).getECommerceSetting("woocommerce","orderStatuses"),{value:e}))||void 0===n?void 0:n.label)&&void 0!==o?o:e}))},Ct=function(e){return y((function(t){return e.map((function(e){var n;return(0,W.trim)(null===(n=t(I.store).getEntityRecord("product",e))||void 0===n?void 0:n.title)||(0,p.sprintf)(/* translators: product id */ /* translators: product id */
(0,p._x)("Product #%d","text","nelio-ab-testing"),e)}))}))},Tt=function(e){return y((function(t){var n,o=t(ae.store).getEntityRecord("root","taxonomy",e);return null!==(n=null==o?void 0:o.labels.singular_name)&&void 0!==n?n:e}))},St=function(e,t){return void 0===t&&(t=[]),y((function(n){return n(ae.store),e&&t?t.map((function(t){var o,r,a=n(ae.store).getEntityRecord("taxonomy",e,t);return o=Ot(a)?a.name:"#".concat(t),It.innerHTML=o,null!==(r=It.textContent)&&void 0!==r?r:o})):[]}))},Ot=function(e){return!!e&&"object"==typeof e&&"name"in e&&!!e.name&&"string"==typeof e.name},Pt=(0,p._x)("The status of an order is set to %s.","text","nelio-ab-testing"),Ft={
/* translators: 1 -> woocomerce status, 2 -> product name */
singleExcluded:(0,p._x)("The status of an order not containing product %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> product name */
singleIncluded:(0,p._x)("The status of an order containing the product %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of product names */
multipleExcluded:(0,p._x)("The status of an order not containing any of the products %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of product names */
multipleIncluded:(0,p._x)("The status of an order containing products %2$s is set to %1$s.","text","nelio-ab-testing")},kt={
/* translators: 1 -> woocomerce status, 2 -> woocommerce category name */
singleExcluded:(0,p._x)("The status of an order not containing any product in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> woocommerce category name */
singleIncluded:(0,p._x)("The status of an order containing at least one product in category %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of woocommerce category names */
multipleExcluded:(0,p._x)("The status of an order not containing any products in categories %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocomerce status, 2 -> list of woocommerce category names */
multipleIncluded:(0,p._x)("The status of an order containing at least one product in categories %2$s is set to %1$s.","text","nelio-ab-testing")},jt={
/* translators: 1 -> woocommerce order status, 2 -> woocomerce tag name */
singleExcluded:(0,p._x)("The status of an order not containing any product tagged as %2$s is set to %1$s.","text","nelio-ab-testing"),
/* translators: 1 -> woocommerce order status, 2 -> woocomerce tag name */
singleIncluded:(0,p._x)("The status of an order containing at least one product tagged as %2$s is set to %1$s.","text","nelio-ab-testing")},$t=ft(ft({},jt),{multipleExcluded:jt.singleExcluded,multipleIncluded:jt.singleIncluded}),Nt={empty:"",
/* translators: 1 -> woocomerce taxonomy name, 2 -> list of woocommerce term names */
excluded:(0,p._x)("doesn’t have %2$s in taxonomy %1$s","text (implicit subject: product)","nelio-ab-testing"),
/* translators: 1 -> woocomerce taxonomy name, 2 -> list of woocommerce term names */
included:(0,p._x)("has %2$s in taxonomy %1$s","text (implicit subject: product)","nelio-ab-testing")},Mt=(0,p._x)(", and ","text (2+ item list)","nelio-ab-testing"),Lt="nab/wc-order",Rt={name:Lt,title:(0,p._x)("WooCommerce Purchase","text","nelio-ab-testing"),description:(0,p._x)("Counts a WooCommerce purchase as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",it({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"M11.797 19.172a3.164 3.164 0 0 0-3.154 3.154 3.16 3.16 0 0 0 3.154 3.153h5.676c2.583 0 2.913 2.244 2.947 2.414l3.133 15.955.125.617s5.727 29.59 7.65 39.451c.033.17.582 7.494 9.115 7.494h58.354c8.62 0 8.892-6.301 9.117-7.494 1.797-9.537 7.512-38.09 7.512-38.09.033-.17.056-.45.052-.623 0 0-.08-3.978-1.394-5.576h-.002c-1.314-1.598-5.2-2.447-5.2-2.447a3.5 3.5 0 0 0-.622-.069l-78.215.026c-.174 0-.455.023-.627.05l-.61-.345a.87.87 0 0 1-.328-.483l-1.877-9.707c-.034-.17-.949-7.48-9.13-7.48h-4.625zM52.13 95.16c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.338 7.44 7.44 7.44s7.437-3.339 7.437-7.44-3.335-7.438-7.437-7.438m35.074 0c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.339 7.44 7.44 7.44s7.44-3.339 7.44-7.44-3.338-7.438-7.44-7.438",className:"icon_svg__black",style:{fill:"#2a508d"}}),v.createElement("path",{d:"M83.54 47.787 65.988 65.339l-9.883-9.883-7.376 7.376 9.883 9.883 7.375 7.375 7.376-7.376 17.552-17.552z",className:"icon_svg__white",style:{fill:"#fff"}}))},validate:function(e){var t=st(e).value;if("all-products"===t.type)return{};var n=t.value;switch(n.type){case"product-ids":return n.productIds.length?{}:{type:(0,p._x)("Please select a product","user","nelio-ab-testing")};case"product-taxonomies":var o=n.value;return o.length?o.every((function(e){return!!e.termIds.length}))?{}:{type:(0,p._x)("Please select one or more terms in all your taxonomies","user","nelio-ab-testing")}:{type:(0,p._x)("Please select one or more taxonomies","user","nelio-ab-testing")}}},isActive:function(e){return e(I.store).getActivePlugins().includes("woocommerce/woocommerce.php")},attributes:{type:"product-selection",value:{type:"all-products"}},scope:{type:"php-function"},edit:ut,view:function(e){var t=e.attributes,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["attributes"]),o=st(t).value,r=n.goal.orderStatusForConversion,a=void 0===r?"wc-completed":r;switch(o.type){case"all-products":return g.createElement(gt,{status:a});case"some-products":return g.createElement(bt,{selection:o.value,status:a})}}};function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Vt.apply(null,arguments)}var zt=function(e){var t=e.attributes,n=t.anyProduct,o=t.productId,r=e.scope,a=e.errors,i=e.setAttributes,s=e.setScope,l=(0,x.useInstanceId)(zt);return g.createElement(g.Fragment,null,g.createElement(b.ToggleControl,{label:(0,p._x)("Track conversion if a specific product is added to the shopping cart.","command","nelio-ab-testing"),checked:!n,onChange:function(){return i({anyProduct:!n})}}),!n&&g.createElement(b.BaseControl,{id:"nab-conversion-action__wc-order-".concat(l),className:E()({"nab-conversion-action__field--has-errors":a.productId}),label:g.createElement(Ht,{productId:o}),help:g.createElement(w.ErrorText,{value:a.productId})},g.createElement(w.PostSearcher,{id:"nab-conversion-action__wc-order-".concat(l),type:"product",perPage:10,value:o,onChange:function(e){return i({productId:e})}})),g.createElement(w.ConversionActionScope,{scope:r,setScope:s,error:a._scope}))},Ht=function(e){var t=e.productId,n=Dt(t);return n?g.createElement("span",null,(0,g.createInterpolateElement)((0,p._x)("Product (<a>View</a>)","text","nelio-ab-testing"),{a:g.createElement(b.ExternalLink,{href:n})})):g.createElement("span",null,(0,p._x)("Product","text","nelio-ab-testing"))},Dt=function(e){return y((function(t){var n;return null===(n=t(I.store).getEntityRecord("product",e))||void 0===n?void 0:n.link}))},Ut=function(){return Ut=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ut.apply(this,arguments)},Bt=function(e){var t=e.attributes,n=t.anyProduct,o=t.productId,r=Wt(o);return n?g.createElement(g.Fragment,null,(0,p._x)("Any product is added to the shopping cart.","text","nelio-ab-testing")):r?g.createElement(g.Fragment,null,(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: the name of a product */ /* translators: the name of a product */
(0,p._x)("The product %s is added to the shopping cart.","text","nelio-ab-testing"),(0,p.sprintf)("<strong>%s</strong>",r)),{strong:g.createElement("strong",null)})):g.createElement(g.Fragment,null,(0,p._x)("A specific product is added to the shopping cart.","text","nelio-ab-testing"))},Wt=function(e){return y((function(t){var n;return null===(n=t(I.store).getEntityRecord("product",e))||void 0===n?void 0:n.title}))},Yt="nab/wc-add-to-cart",Zt={name:Yt,title:(0,p._x)("Add WooCommerce product to cart","text","nelio-ab-testing"),description:(0,p._x)("Counts adding a product to the shopping cart in WooCommerce as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",Vt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"M11.797 19.172a3.164 3.164 0 0 0-3.154 3.154 3.16 3.16 0 0 0 3.154 3.153h5.676c2.583 0 2.913 2.244 2.947 2.414l3.133 15.955.125.617s5.727 29.59 7.65 39.451c.033.17.582 7.494 9.115 7.494h58.354c8.62 0 8.892-6.301 9.117-7.494 1.797-9.537 7.512-38.09 7.512-38.09.033-.17.056-.45.052-.623 0 0-.08-3.978-1.394-5.576h-.002c-1.314-1.598-5.2-2.447-5.2-2.447a3.5 3.5 0 0 0-.622-.069l-78.215.026c-.174 0-.455.023-.627.05l-.61-.345a.87.87 0 0 1-.328-.483l-1.877-9.707c-.034-.17-.949-7.48-9.13-7.48h-4.625zM52.13 95.16c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.338 7.44 7.44 7.44s7.437-3.339 7.437-7.44-3.335-7.438-7.437-7.438m35.074 0c-4.102 0-7.44 3.336-7.44 7.438 0 4.101 3.339 7.44 7.44 7.44s7.44-3.339 7.44-7.44-3.338-7.438-7.44-7.438",className:"icon_svg__black",style:{fill:"#2a508d"}}),v.createElement("path",{d:"M64.607 46.312v12.41H52.195v10.431h12.412v12.412H75.04V69.153h12.41V58.722H75.04v-12.41Z",className:"icon_svg__white",style:{fill:"#fff"}}))},validate:function(e){var t=e.anyProduct,n=e.productId;return t||n?{}:{productId:(0,p._x)("Please select a product","user","nelio-ab-testing")}},isActive:function(e){return e(I.store).getActivePlugins().includes("woocommerce/woocommerce.php")},attributes:{anyProduct:!1,productId:0},scope:{type:"test-scope"},edit:zt,view:function(e){return g.createElement(g.Fragment,null,g.createElement("div",null,g.createElement(Bt,Ut({},e))),g.createElement(w.ConversionActionScopeView,{scope:e.scope}))}};function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jt.apply(null,arguments)}var Kt=function(){return Kt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Kt.apply(this,arguments)},Qt=function(e){var t=e.attributes,n=t.event,o=t.videoId;if(!o)return g.createElement(g.Fragment,null,"play"===n?(0,p._x)("A visitor plays a YouTube video.","text","nelio-ab-testing"):(0,p._x)("A visitor reaches the end of a YouTube video.","text","nelio-ab-testing"));switch(n){case"play":return(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: video id, such as “dQw4w9WgXcQ” */ /* translators: video id, such as “dQw4w9WgXcQ” */
(0,p._x)("A visitor plays the YouTube video %s.","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)});case"end":return(0,g.createInterpolateElement)((0,p.sprintf)(/* translators: video id, such as “dQw4w9WgXcQ” */ /* translators: video id, such as “dQw4w9WgXcQ” */
(0,p._x)("A visitor reaches the end of the YouTube video %s.","text","nelio-ab-testing"),"<code>".concat(o,"</code>")),{code:g.createElement("code",null)})}},qt="nab/video-playback",Gt={name:qt,title:(0,p._x)("YouTube Video Playback","text","nelio-ab-testing"),description:(0,p._x)("Counts YouTube video playback (starting or ending) as a conversion.","text","nelio-ab-testing"),icon:function(e){return v.createElement("svg",Jt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},e),v.createElement("path",{d:"M51.035 98.77c-12.906-.387-20.993-.951-25.047-1.748-2.337-.459-4.858-1.801-6.537-3.48-2.86-2.861-3.871-6.158-4.668-15.224-1.263-14.364-.35-33.636 1.877-39.588 1.178-3.149 4.378-6.192 7.643-7.267 8.826-2.907 67.267-3.052 78.44-.194 2.417.618 3.842 1.441 5.704 3.296 1.948 1.94 2.697 3.237 3.392 5.874 2.6 9.861 2.601 37.043.002 47.293-.635 2.502-1.453 3.943-3.305 5.819-3.06 3.1-5.707 3.867-15.692 4.551-6.697.459-12.62.613-25.826.671-7.611.034-14.804.033-15.983-.003z",className:"icon_svg__black",style:{fill:"red"}}),v.createElement("path",{d:"M53.692 78.915V48.814L79.997 64z",className:"icon_svg__white",style:{fill:"#fff"}}))},validate:function(e){var t=e.platform,n=e.videoId;return"youtube"!==t||/[-\w]{11}/.test(n)?n?{}:{videoId:(0,p._x)("Please write a video ID","user","nelio-ab-testing")}:{videoId:(0,p._x)("Please write a valid YouTube video ID. For instance, the video ID dQw4w9WgXcQ refers to https://youtu.be/dQw4w9WgXcQ","user","nelio-ab-testing")}},attributes:{platform:"youtube",event:"play",videoId:""},scope:{type:"test-scope"},edit:function(e){var t=e.attributes,n=t.event,o=t.videoId,r=e.scope,a=e.errors,i=e.setAttributes,s=e.setScope;return g.createElement(g.Fragment,null,g.createElement(b.SelectControl,{label:(0,p._x)("Event","text","nelio-ab-testing"),options:[{value:"play",label:(0,p._x)("Play Video","text","nelio-ab-testing")},{value:"end",label:(0,p._x)("Reach End of Video","text","nelio-ab-testing")}],value:n,onChange:function(e){return i({event:e})}}),g.createElement(b.TextControl,{className:E()({"nab-conversion-action__field--has-errors":a.videoId}),label:(0,p._x)("Video ID","text","nelio-ab-testing"),value:o,help:g.createElement(w.ErrorText,{value:a.videoId}),placeholder:(0,p._x)("Video ID","text","nelio-ab-testing"),onChange:function(e){return i({videoId:e})}}),g.createElement(w.ConversionActionScope,{scope:r,setScope:s,error:a._scope}))},view:function(e){return g.createElement(g.Fragment,null,g.createElement("div",null,g.createElement(Qt,Kt({},e))),g.createElement(w.ConversionActionScopeView,{scope:e.scope}))}},Xt=function(){[s,e,t,a,i,u,l,c,r].forEach((function(e){if(e){var t=e.name,n=e.settings;(0,m.registerConversionActionType)(t,n)}}))}})();var r=nab="undefined"==typeof nab?{}:nab;for(var a in o)r[a]=o[a];o.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();